"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[6045],{36045:(e,a,l)=>{l.r(a),l.d(a,{default:()=>K});var i=l(51347),n=l(34187),t=l(95455),s=l(23336),u=l(30528),d=l(69463),o=l(60455),c=l(58094),m=l(8633),r=l(59678),v=l(47509),p=l(20675),g=l(90486);const b={key:0},y={__name:"DomisiliForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(e,{emit:a}){const l=e,t=a,s=(0,n.KR)({}),u=(0,n.KR)(!1);(0,i.sV)((async()=>{Object.assign(s.value,l.data)}));const d=async()=>{const e={santri_id:s.value.santri_id,domisili:s.value.domisili,keterangan:s.value.keterangan};let a=null;const l=!s.value.id;a=l?await(0,r.A)({endPoint:"domisili",data:e,loading:u}):await(0,v.A)({endPoint:`domisili/${s.value.id}`,data:e,confirm:!0,notify:!0,loading:u}),a&&(document.getElementById("btn-close-form").click(),t("successSubmit",a?.domisili),t(l?"successCreate":"successUpdate",a?.domisili))},o=async()=>{const e=s.value.id,a=await(0,p.A)({endPoint:`domisili/${e}`,loading:u});a&&(document.getElementById("btn-close-form").click(),t("successDelete",e))};return(e,a)=>{const l=(0,i.g2)("FormHeader"),n=(0,i.g2)("q-spinner-cube"),t=(0,i.g2)("q-dialog"),c=(0,i.g2)("q-input"),r=(0,i.g2)("q-card-section"),v=(0,i.g2)("FormActions"),p=(0,i.g2)("q-form"),y=(0,i.g2)("q-card");return(0,i.uX)(),(0,i.Wv)(y,{class:"full-width",style:{"max-width":"425px"}},{default:(0,i.k6)((()=>[(0,i.bF)(p,{onSubmit:(0,m.D$)(d,["prevent"])},{default:(0,i.k6)((()=>[(0,i.bF)(l,{title:"Input Domisili","is-new":!s.value.id},null,8,["is-new"]),(0,i.bF)(r,null,{default:(0,i.k6)((()=>[u.value?((0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(t,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(n,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,i.Q3)("",!0),(0,i.bF)(c,{dense:"",outlined:"",label:"Nama","model-value":s.value?.nama+" ("+s.value?.santri_id+")",disable:"",filled:""},null,8,["model-value"]),(0,i.bF)(g.A,{modelValue:s.value.domisili,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.domisili=e),url:"domisili",label:"Domisili *",class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,i.bF)(c,{dense:"",class:"q-mt-sm",outlined:"",label:"Keterangan",modelValue:s.value.keterangan,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.keterangan=e),autogrow:""},null,8,["modelValue"])])),_:1}),(0,i.bF)(v,{"btn-delete":!!s.value.id,onOnDelete:o},null,8,["btn-delete"])])),_:1})])),_:1})}}};var _=l(83341),k=l(53417),F=l(60222),f=l(30045),q=l(71402),A=l(46395),V=l(272),D=l.n(V);const w=y,C=w;D()(y,"components",{QCard:_.A,QForm:k.A,QCardSection:F.A,QDialog:f.A,QSpinnerCube:q.A,QInput:A.A});const S={__name:"SantriDomisili",setup(e){const a=(0,n.KR)(!1),l=(0,n.KR)(!1),m=(0,n.KR)({}),r=(0,n.KR)([]),v=(0,n.KR)({}),{params:p}=(0,o.lq)();async function g(){const e=await(0,c.A)({endPoint:`domisili/santri/${p.id}`,loading:a});e.domisili&&(r.value=e.domisili,v.value=e.santri)}const b=(0,i.EW)((()=>r.value.map((e=>({Tanggal:(0,s.Yq)(e.created_at,"dd-MM-yyyy")+" | "+(0,u.jh)((0,s.Yq)(e.created_at,"yyyy-MM-dd")),Domisili:e.domisili,Keterangan:e.keterangan||"-",id:e.id})))));(0,i.sV)((async()=>{await g()}));const y=()=>{m.value={santri_id:v.value.id,nama:v.value.nama},l.value=!0},_=({id:e})=>{m.value=(0,d.I$)(r,e),m.value.santri_id=v.value.id,m.value.nama=v.value.nama,l.value=!0};return(e,s)=>{const u=(0,i.g2)("q-dialog");return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(t.A,{data:b.value,spinner:a.value,onAdd:y,onEdit:_},null,8,["data","spinner"]),(0,i.bF)(u,{modelValue:l.value,"onUpdate:modelValue":s[3]||(s[3]=e=>l.value=e)},{default:(0,i.k6)((()=>[(0,i.bF)(C,{data:m.value,title:"Input Domisili",onSuccessDelete:s[0]||(s[0]=e=>(0,n.R1)(d.ST)(r.value,e)),onSuccessCreate:s[1]||(s[1]=e=>r.value.push(e)),onSuccessUpdate:s[2]||(s[2]=e=>(0,n.R1)(d.B1)(r.value,e.id,e))},null,8,["data"])])),_:1},8,["modelValue"])])}}},h=S,K=h;D()(S,"components",{QDialog:f.A})}}]);