"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9097],{79097:(a,e,n)=>{n.r(e),n.d(e,{default:()=>y});n(60939),n(7049);var t=n(51347),l=n(37763),s=n(58094),i=n(47509),o=n(31284),r=n(81730),d=n(34187),p=n(60455);const m=["innerHTML"],b={__name:"AbsensiPenomoran",setup(a){const e=(0,d.KR)(!1),{params:n}=(0,p.lq)(),b=(0,d.KR)([]),u=(0,d.KR)("");async function c(){const a=await(0,r.Ix)("Isi nomor Absen secara otomatis");if(!a)return;const e=document.getElementsByClassName("kelas-id"),n=[...e];let t=1;n.forEach((a=>{const e=a.innerText,n=b.value.findIndex((a=>a.id==e));b.value[n].no_absen=t,t++})),(0,r.KQ)("Isi otomatis berhasil! <br/>Data belum diupdate sampai Anda menekan tombol kirim/simpan!")}async function k(){const a=b.value.map((({id:a,no_absen:e})=>({id:a,no_absen:e}))),n=await(0,i.A)({endPoint:"kelas/no-absen",data:a,loading:e,confirm:!0});n&&(b.value=n.murid)}(0,t.sV)((async()=>{if(n.th_ajaran_h&&n.tingkat_id&&n.kelas){const a=await(0,s.A)({endPoint:"kelas",params:n,loading:e}),t=a.murid.map((a=>({...a,alamat:`${a.desa} ${a.kecamatan} ${a.kabupaten}`})));b.value=t}else b.value=[]}));const g=[{name:"id",label:"ID Kelas",align:"left",field:"id",sortable:!0},{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"no_absen",label:"No Absen",align:"center",field:"no_absen",sortable:!0,style:"width:44px",classes:"text-center"},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"domisili",label:"Dom.",align:"left",field:"domisili",sortable:!0},{name:"alamat",label:"Alamat",align:"left",field:"alamat",sortable:!0,classes:"alamat"}];return(a,n)=>{const s=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-btn"),r=(0,t.g2)("q-td"),d=(0,t.g2)("q-input"),p=(0,t.g2)("q-tr"),_=(0,t.g2)("q-table"),f=(0,t.g2)("q-card-actions"),w=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(o.A,{"start-url":"/madrasah/absensi/penomoran",onDataFilter:n[0]||(n[0]=a=>u.value=a)}),(0,t.bF)(w,{class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"bg-green-7 text-green-1 text-subtitle1 q-pa-sm flex"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",{innerHTML:u.value||"Tentukan filter!"},null,8,m)])),_:1}),(0,t.bF)(s,{class:"no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{rows:b.value,columns:g,loading:e.value,"rows-per-page-options":[0],class:"dt q-pa-sm","no-data-label":"Silakan tentukan Tahun ajaran, tingkat pendidikan, dan kelas!","row-key":"name",flat:"","hide-pagination":""},{"top-left":(0,t.k6)((()=>n[1]||(n[1]=[(0,t.Lk)("div",{class:"text-h6 text-green-10"},"Data Murid",-1)]))),"top-right":(0,t.k6)((()=>[(0,t.bF)(i,{label:"Isi Otomatis",dense:"","no-caps":"",class:"q-px-md text-green-10",color:"green-11",icon:"auto_fix_high",onClick:c,disable:0==b.value.length,title:"Isi otomatis nomor absen"},null,8,["disable"])])),body:(0,t.k6)((e=>[(0,t.bF)(p,{props:e},{default:(0,t.k6)((()=>[(0,t.bF)(r,{key:"id",props:e,class:"kelas-id"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{flat:"",dense:"","no-caps":"",class:"text-green-10 bg-green-11 q-px-sm",style:{"min-width":"50px"},onClick:n=>a.$router.push(`/madrasah/kelas/${e.row.id}/riwayat`)},{default:(0,t.k6)((()=>[(0,t.Lk)("small",null,(0,l.v_)(e.row.id),1)])),_:2},1032,["onClick"])])),_:2},1032,["props"]),(0,t.bF)(r,{key:"santri_id",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.row.santri_id),1)])),_:2},1032,["props"]),(0,t.bF)(r,{key:"no_absen",props:e},{default:(0,t.k6)((()=>[(0,t.bF)(d,{outlined:"",dense:"",modelValue:e.row.no_absen,"onUpdate:modelValue":a=>e.row.no_absen=a,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.bF)(r,{key:"nama",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.row.nama)+" ("+(0,l.v_)(e.row.sex)+") ",1)])),_:2},1032,["props"]),(0,t.bF)(r,{key:"domisili",props:e},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.row.domisili),1)])),_:2},1032,["props"]),(0,t.bF)(r,{key:"alamat",props:e,title:e.row.alamat},{default:(0,t.k6)((()=>[(0,t.eW)((0,l.v_)(e.row.alamat.length>30?e.row.alamat.substr(0,30)+"â€¦":e.row.alamat),1)])),_:2},1032,["props","title"])])),_:2},1032,["props"])])),_:1},8,["rows","loading"])])),_:1}),(0,t.bF)(f,{class:"bg-green-6 text-green-11 text-subtitle1 q-pa-sm flex",align:"right"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{dense:"",label:"Kirim/Simpan","no-caps":"",color:"green-11",class:"text-green-10 q-px-md",icon:"save",onClick:k})])),_:1})])),_:1})],64)}}};var u=n(32968),c=n(83341),k=n(60222),g=n(5873),_=n(22677),f=n(27010),w=n(87339),h=n(38785),x=n(46395),v=n(25034),A=n(272),F=n.n(A);const q=(0,u.A)(b,[["__scopeId","data-v-24a2f3ca"]]),y=q;F()(b,"components",{QCard:c.A,QCardSection:k.A,QSpace:g.A,QBtn:_.A,QTable:f.A,QTr:w.A,QTd:h.A,QInput:x.A,QCardActions:v.A})}}]);