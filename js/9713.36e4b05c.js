"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9713],{19713:(a,e,l)=>{l.r(e),l.d(e,{default:()=>D});l(60939),l(7049);var t=l(51347),n=l(37763),s=l(34187),i=l(58094),o=l(59678),d=l(78306),r=l(31284),u=l(50657),c=l(81730),m=l(60455),g=l(51700),b=l(67148),p=l(36234);const h={class:"row"},k={class:"col-7 q-mt-sm"},_={class:"col-5 q-mt-sm"},v={class:"vertical-top"},f={class:"vertical-top"},q={class:"vertical-top"},w={class:""},A={__name:"PageTagihan",setup(a){const e=(0,g.A)(),{email:l}=e.getUser,A=(0,s.KR)(!1),F=(0,s.KR)(""),y=(0,s.KR)(!1),{params:x}=(0,m.lq)(),V=(0,s.KR)([]),L=(0,s.KR)([]),j=(0,s.KR)([]),Q=(0,s.KR)(!1),R=(0,s.KR)({th_ajaran_h:x.th_ajaran_h||""}),U=(0,b.GP)(new Date,"yyyy-MM-dd HH:mm:ss",{locale:p.id})+" ~ "+l||"",K=(0,s.KR)("");async function T(){const a=await(0,i.A)({endPoint:"kelas",params:{th_ajaran_h:x.th_ajaran_h,tingkat_id:x.tingkat_id,kelas:x.kelas},loading:y});a&&(V.value=a.murid)}async function P(){if(!L.value.length)return(0,c.UG)("Pilih murid terlebih dahulu");if(!j.value.length)return(0,c.UG)("Pilih paket terlebih dahulu");const a={th_ajaran_h:R.value.th_ajaran_h,va_group:K.value,santri_id:L.value.map((a=>a.santri_id)),paket:j.value.map((a=>({item:a.item,nominal:a.nominal})))};await(0,o.A)({endPoint:"iuran/paket-massal",loading:Q,data:a,message:'PERHATIAN<br/>\n\t\t\tJika item iuran sudah terdapat dalam daftar maka akan diabaikan.\n\t\t\t<hr/>\n\t\t\t<span style="color:red">Kesalahan akibat aksi ini sulit ditelusuri dan harus diperbaiki satu per satu.</span>'})}(0,t.sV)((async()=>{x.th_ajaran_h&&x.tingkat_id&&x.kelas?await T():V.value=[]}));const C=[{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"domisili",label:"Domisili",align:"left",field:"domisili",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"wali",label:"Wali",align:"left",field:a=>`${a.wali_nama} (${a.wali_sex}; ${a.wali_status})`,sortable:!0}];return(a,e)=>{const l=(0,t.g2)("q-toggle"),i=(0,t.g2)("q-table"),o=(0,t.g2)("q-card-section"),c=(0,t.g2)("q-input"),m=(0,t.g2)("q-btn"),g=(0,t.g2)("q-space"),b=(0,t.g2)("q-card-actions"),p=(0,t.g2)("q-spinner-facebook"),x=(0,t.g2)("q-inner-loading"),T=(0,t.g2)("q-card"),S=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(S,{class:"q-pa-sm",style:{"min-width":"1024px"}},{default:(0,t.k6)((()=>[(0,t.bF)(T,null,{default:(0,t.k6)((()=>[(0,t.bF)(d.A,{"show-reload":!1,title:"Modul Tagihan"}),(0,t.bF)(o,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(r.A,{bordered:"",flat:"","show-ujian-ke":!1,"start-url":"/iuran/tagihan",onDataFilter:e[0]||(e[0]=a=>F.value=a)}),(0,t.Lk)("div",h,[(0,t.Lk)("div",k,[(0,t.bF)(i,{flat:"",bordered:"","table-header-class":"bg-green-2 text-green-10 text-subtitle1",class:"dt",rows:V.value,columns:C,loading:y.value,"row-key":"id",selection:"multiple",selected:L.value,"onUpdate:selected":e[1]||(e[1]=a=>L.value=a),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"635px"},"virtual-scroll":""},{"header-selection":(0,t.k6)((a=>[(0,t.bF)(l,{modelValue:a.selected,"onUpdate:modelValue":e=>a.selected=e,color:"green-7","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"])])),"body-selection":(0,t.k6)((a=>[(0,t.bF)(l,{modelValue:a.selected,"onUpdate:modelValue":e=>a.selected=e,color:"green-5","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["rows","loading","selected"])]),(0,t.Lk)("div",_,[(0,t.bF)(T,{bordered:"",flat:"",class:"q-ml-sm scroll",style:{height:"635px"}},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"q-px-sm q-py-md bg-green-2 text-green-10 text-subtitle2"},{default:(0,t.k6)((()=>e[6]||(e[6]=[(0,t.eW)(" Buat Tagihan Massal ")]))),_:1}),(0,t.bF)(o,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",v,[e[7]||(e[7]=(0,t.Lk)("td",{class:"text-no-wrap text-italic q-pr-md"}," Jumlah Murid ",-1)),(0,t.Lk)("td",null,(0,n.v_)(V.value.length),1)]),(0,t.Lk)("tr",f,[e[8]||(e[8]=(0,t.Lk)("td",{class:"text-no-wrap text-italic q-pr-md"}," Terpilih ",-1)),(0,t.Lk)("td",null,(0,n.v_)(L.value.length)+" santri "+(0,n.v_)(L.value.map((a=>a.santri_id))),1)]),(0,t.Lk)("tr",q,[e[9]||(e[9]=(0,t.Lk)("td",{class:"text-no-wrap text-italic q-pr-md"}," VA Group ",-1)),(0,t.Lk)("td",w,[(0,t.bF)(l,{dense:"",modelValue:A.value,"onUpdate:modelValue":[e[2]||(e[2]=a=>A.value=a),e[3]||(e[3]=a=>K.value=a?(0,s.R1)(U):"")],color:"green",label:K.value},null,8,["modelValue","label"])])])])])])),_:1}),(0,t.bF)(o,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{label:"Tahun Ajaran",outlined:"",dense:"",modelValue:R.value.th_ajaran_h,"onUpdate:modelValue":e[4]||(e[4]=a=>R.value.th_ajaran_h=a),disable:""},null,8,["modelValue"]),(0,t.bF)(u.A,{class:"q-mt-sm",onOnInput:e[5]||(e[5]=a=>j.value=a)})])),_:1}),(0,t.bF)(b,{class:"q-pa-sm bg-green-6 absolute-bottom"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"Unduh Data",glossy:"",color:"green-9",class:"text-green-11","no-caps":"",icon:"download",to:"/iuran/download"}),(0,t.bF)(g),(0,t.bF)(m,{label:"Simpan",glossy:"",outline:"",color:"green-10",class:"bg-green-11 right-0","no-caps":"",icon:"save",onClick:P})])),_:1}),(0,t.bF)(x,{showing:Q.value},{default:(0,t.k6)((()=>[(0,t.bF)(p,{color:"green-6",size:"6em"})])),_:1},8,["showing"])])),_:1})])])])),_:1})])),_:1})])),_:1})}}};var F=l(75013),y=l(83341),x=l(60222),V=l(27010),L=l(55725),j=l(46395),Q=l(25034),R=l(22677),U=l(5873),K=l(58356),T=l(88959),P=l(272),C=l.n(P);const S=A,D=S;C()(A,"components",{QPage:F.A,QCard:y.A,QCardSection:x.A,QTable:V.A,QToggle:L.A,QInput:j.A,QCardActions:Q.A,QBtn:R.A,QSpace:U.A,QInnerLoading:K.A,QSpinnerFacebook:T.A})}}]);