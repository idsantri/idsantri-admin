"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[1835],{61835:(a,e,t)=>{t.r(e),t.d(e,{default:()=>U});var l=t(51347),n=t(37763),s=t(20675),o=t(58094),i=t(34187),d=t(24497),u=t(59678),r=t(90575),p=t(15469);const c={__name:"ResultMutasi",setup(a){const e=(0,i.KR)([]),t=(0,i.KR)(!1),c=(0,i.KR)(!1),k=(0,i.KR)({}),{loadingMain:b}=(0,i.QW)((0,r.A)());async function m(){const a=await(0,o.A)({endPoint:"mutasi",loading:t});a&&(e.value=a.mutasi.map((a=>({...a,tk:a.tingkat_id+" "+a.kelas}))))}async function g(a){k.value=a,c.value=!0}async function f(){const a='<hr><span style="color:blue">Update Domisili?</span><hr>\n\t\t<em>\n\t\t\t<strong>Peringatan:</strong>\n\t\t\t<ul style="margin:0">\n\t\t\t\t<li>Pastikan semua keperluan Administrasi (terkait domisili asal) telah selesai!</li>\n\t\t\t\t<li>Sebaiknya data di-download/ diunduh terlebih dahulu sebagai backup!</li>\n\t\t\t\t<li>Setelah update selesai, semua data mutasi akan <strong>dihapus</strong>!</li>\n\t\t\t</ul>\n\t\t</em>',e=await(0,u.A)({endPoint:"mutasi/execute",data:null,loading:t,confirm:!0,message:a});e&&await m()}async function _(){const a=await(0,s.A)({endPoint:"mutasi/clean",loading:t,message:"Hapus semua data mutasi?"});a&&(e.value=[])}async function F(){const a=await(0,o.A)({endPoint:"export/mutasi",loading:b,notify:!0});if(!a)return;if(!a.url)return(0,p.KQ)("Url tidak ditemukan");let e=document.createElement("a");e.href=a.url,e.click(),e.remove()}return(0,l.sV)((async()=>{await m()})),(a,s)=>{const o=(0,l.g2)("q-toolbar-title"),i=(0,l.g2)("q-btn"),u=(0,l.g2)("q-item-label"),r=(0,l.g2)("q-item-section"),p=(0,l.g2)("q-icon"),b=(0,l.g2)("q-item"),w=(0,l.g2)("q-list"),A=(0,l.g2)("q-btn-dropdown"),q=(0,l.g2)("q-toolbar"),v=(0,l.g2)("q-card-section"),y=(0,l.g2)("q-th"),h=(0,l.g2)("q-tr"),Q=(0,l.g2)("q-td"),W=(0,l.g2)("q-table"),x=(0,l.g2)("q-card-actions"),C=(0,l.g2)("q-card"),D=(0,l.g2)("q-dialog"),T=(0,l.g2)("q-page"),P=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(T,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(C,{class:""},{default:(0,l.k6)((()=>[(0,l.bF)(v,{class:"bg-green-8 text-green-11 q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(q,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,l.k6)((()=>[(0,l.bF)(o,{class:"text-subtitle1"},{default:(0,l.k6)((()=>s[1]||(s[1]=[(0,l.eW)(" Data Mutasi Domisili ")]))),_:1}),(0,l.bF)(i,{icon:"tune",label:"Atur Mutasi",dense:"",outline:"","no-caps":"",class:"q-mr-xs q-px-sm",to:"/makhadiyah/mutasi/start"}),(0,l.bF)(A,{flat:"",dense:"","dropdown-icon":"more_vert",class:"q-ml-md",color:"green-11"},{default:(0,l.k6)((()=>[(0,l.bF)(w,null,{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(b,{to:"/info/download"},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>s[2]||(s[2]=[(0,l.eW)("Cetak")]))),_:1})])),_:1}),(0,l.bF)(r,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(p,{name:"print",flat:""})])),_:1})])),_:1})),[[P]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(b,{onClick:F,clickable:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>s[3]||(s[3]=[(0,l.eW)("Unduh/Download")]))),_:1})])),_:1}),(0,l.bF)(r,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(p,{name:"download",flat:""})])),_:1})])),_:1})),[[P]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(b,{onClick:_,clickable:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>s[4]||(s[4]=[(0,l.eW)("Hapus Semua")]))),_:1})])),_:1}),(0,l.bF)(r,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(p,{name:"delete_forever",flat:""})])),_:1})])),_:1})),[[P]])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.bF)(v,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(W,{class:"q-pa-sm",rows:e.value,loading:t.value,"rows-per-page-options":[10,25,50,75,100,0],flat:"",bordered:""},{header:(0,l.k6)((a=>[(0,l.bF)(h,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(y,{key:"santri_id",props:a,class:"text-left"},{default:(0,l.k6)((()=>s[5]||(s[5]=[(0,l.eW)(" ID Santri ")]))),_:2},1032,["props"]),(0,l.bF)(y,{key:"nama",props:a},{default:(0,l.k6)((()=>s[6]||(s[6]=[(0,l.eW)(" Nama ")]))),_:2},1032,["props"]),(0,l.bF)(y,{key:"tk",props:a},{default:(0,l.k6)((()=>s[7]||(s[7]=[(0,l.eW)(" Tingkat â€” Kelas ")]))),_:2},1032,["props"]),(0,l.bF)(y,{key:"domisili",props:a},{default:(0,l.k6)((()=>s[8]||(s[8]=[(0,l.eW)(" Domisili (Asal) ")]))),_:2},1032,["props"]),(0,l.bF)(y,{key:"new_domisili",props:a},{default:(0,l.k6)((()=>s[9]||(s[9]=[(0,l.eW)(" Domisili (Baru) ")]))),_:2},1032,["props"]),(0,l.bF)(y,{class:"text-center"})])),_:2},1032,["props"])])),body:(0,l.k6)((a=>[(0,l.bF)(h,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(Q,{key:"santri_id",props:a,class:"text-left"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{label:a.row.santri_id,outline:"",color:"green-10",class:"text-caption q-px-sm",dense:"",to:`/santri/${a.row.santri_id}`},null,8,["label","to"])])),_:2},1032,["props"]),(0,l.bF)(Q,{key:"nama",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.nama),1)])),_:2},1032,["props"]),(0,l.bF)(Q,{key:"tk",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.tk),1)])),_:2},1032,["props"]),(0,l.bF)(Q,{key:"domisili",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.domisili),1)])),_:2},1032,["props"]),(0,l.bF)(Q,{key:"new_domisili",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.new_domisili),1)])),_:2},1032,["props"]),(0,l.bF)(Q,{key:"id",props:a,class:"text-center"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{icon:"edit",flat:"",color:"green-10",onClick:e=>g(a.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","loading"])])),_:1}),(0,l.bF)(x,{class:"q-pa-sm bg-green-7 text-green-11 row"},{default:(0,l.k6)((()=>[s[10]||(s[10]=(0,l.Lk)("div",{class:"col text-italic"}," 1) Teliti kembali sebelum Anda menekan tombol Update; 2) Lakukan backup data dengan menekan tombol download!; ",-1)),(0,l.bF)(i,{style:{"max-width":"150px"},class:"col bg-green-8 q-ml-md",label:"Update Domisili",glossy:"","no-caps":"",dense:"",outline:"",icon:"settings_applications",disable:!e.value.length>0,onClick:f},null,8,["disable"])])),_:1})])),_:1}),(0,l.bF)(D,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a)},{default:(0,l.k6)((()=>[(0,l.bF)(d.A,{data:k.value,api:!0,onOnDelete:m,onOnSubmit:m},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var k=t(75013),b=t(83341),m=t(60222),g=t(66739),f=t(4629),_=t(22677),F=t(73614),w=t(53766),A=t(22589),q=t(14958),v=t(99039),y=t(93933),h=t(27010),Q=t(87339),W=t(22517),x=t(38785),C=t(25034),D=t(30045),T=t(61038),P=t(272),S=t.n(P);const K=c,U=K;S()(c,"components",{QPage:k.A,QCard:b.A,QCardSection:m.A,QToolbar:g.A,QToolbarTitle:f.A,QBtn:_.A,QBtnDropdown:F.A,QList:w.A,QItem:A.A,QItemSection:q.A,QItemLabel:v.A,QIcon:y.A,QTable:h.A,QTr:Q.A,QTh:W.A,QTd:x.A,QCardActions:C.A,QDialog:D.A}),S()(c,"directives",{ClosePopup:T.A})}}]);