"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[7795],{37795:(a,e,t)=>{t.r(e),t.d(e,{default:()=>U});t(60939),t(44520);var l=t(51347),r=t(34187),n=t(37763),s=t(8633),i=t(60455),d=t(58094),o=t(31284);const u=["innerHTML"],k={key:0},_={key:1},p={key:0},c={key:1},b={key:2},g={key:0},m={key:1},h={key:0,class:"text-italic text-negative"},v={key:1},x={class:"text-left"},f={class:"text-left"},F={class:"text-right"},y={class:"text-right"},w={class:"text-right"},q={class:"text-right"},L={class:"text-right"},A={class:"bg-green-2 text-weight-bold text-right text-green-10"},C={__name:"NilaiIndex",setup(a){const{params:e}=(0,i.lq)(),t=(0,r.KR)([{}]),C=(0,r.KR)(!1),X=(0,r.KR)(""),R=(0,r.KR)([{}]),Q=(0,r.KR)([]),W=[{name:"no_absen",label:"No",align:"center",field:a=>a.no_absen,format:a=>`${a||""}`,sortable:!0},{name:"kelas_id",label:"ID Kelas",align:"center",field:a=>a.kelas_id,format:a=>`${a}`,sortable:!0},{name:"santri_id",label:"ID Santri",align:"center",field:a=>a.santri_id,format:a=>`${a}`,sortable:!0},{name:"nama",label:"Nama",align:"left",field:a=>a.nama,sortable:!0},{name:"rerata_1",label:"Rerata-1",align:"right",field:a=>a.rerata_1?parseFloat(a.rerata_1).toFixed(1):null,sortable:!0},{name:"rerata_2",label:"Rerata-2",align:"right",field:a=>a.rerata_2?parseFloat(a.rerata_2).toFixed(1):null,sortable:!0},{name:"rerata_3",label:"Rerata-3",align:"right",field:a=>a.rerata_3?parseFloat(a.rerata_3).toFixed(1):null,sortable:!0},{name:"rerata_4",label:"Rerata-4",align:"right",field:a=>a.rerata_4?parseFloat(a.rerata_4).toFixed(1):null,sortable:!0},{name:"rerata_akhir",label:"R. Akhir",align:"right",field:a=>a.rerata_akhir?parseFloat(a.rerata_akhir).toFixed(1):null,sortable:!0}];async function E(a){if(a.expand=!a.expand,a.expand){Q.value[a.key]=!0,R.value[a.key]=null;const e=await(0,d.A)({endPoint:"nilai-mapel",params:{kelas_id:a.key,category:"rapor"}});Q.value[a.key]=!1,R.value[a.key]=e.nilai}}function K(a,e){let t=0,l=0;if(a?.length){a.forEach((a=>{null!==a[e]&&(t+=parseFloat(a[e]),l++)}));const r=t/l;return isNaN(r)?null:r.toFixed(1)}return null}return(0,l.sV)((async()=>{if(e.th_ajaran_h&&e.tingkat_id&&e.kelas){const a=await(0,d.A)({endPoint:"nilai-mapel/rerata",params:{th_ajaran_h:e.th_ajaran_h,tingkat_id:e.tingkat_id,kelas:e.kelas,category:"rapor"},loading:C});t.value=a.nilai}})),(a,i)=>{const d=(0,l.g2)("q-space"),N=(0,l.g2)("q-btn"),T=(0,l.g2)("q-item-label"),I=(0,l.g2)("q-item-section"),j=(0,l.g2)("q-icon"),P=(0,l.g2)("q-item"),D=(0,l.g2)("q-list"),M=(0,l.g2)("q-btn-dropdown"),S=(0,l.g2)("q-card-section"),$=(0,l.g2)("q-skeleton"),z=(0,l.g2)("q-th"),B=(0,l.g2)("q-tr"),H=(0,l.g2)("q-td"),G=(0,l.g2)("q-markup-table"),V=(0,l.g2)("q-table"),J=(0,l.g2)("q-card"),O=(0,l.g2)("q-page"),U=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(O,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(o.A,{"show-ujian-ke":!1,"start-url":"/madrasah/nilai-mapel/rerata",onDataFilter:i[0]||(i[0]=a=>X.value=a),title:"Filter Data: <span class='text-weight-medium'>Nilai Mapel (Rerata)</span>"}),(0,l.bF)(J,{class:"q-mt-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(S,{class:"bg-green-8 text-green-1 text-subtitle1 q-pa-sm flex flex-center"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",{innerHTML:X.value+" ➡️ <em class='text-weight-light'>Kategori: </em> <strong>Nilai Rapor</strong>"||0},null,8,u),(0,l.bF)(d),(0,l.bF)(N,{dense:"",icon:"download",label:"Excel","no-caps":"",class:"bg-green-11 text-green-10 q-px-md q-mr-sm",to:"/madrasah/nilai-mapel/download"}),(0,l.bF)(N,{dense:"",icon:"upload",label:"Excel","no-caps":"",class:"bg-green-11 text-green-10 q-px-md q-mr-sm",to:"/madrasah/nilai-mapel/upload"}),(0,l.bF)(M,{outline:"","no-caps":"",class:"text-green-11 q-px-md",size:"",dense:"","dropdown-icon":"more_vert"},{default:(0,l.k6)((()=>[(0,l.bF)(D,null,{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(P,{to:"/madrasah/mapel"},{default:(0,l.k6)((()=>[(0,l.bF)(I,null,{default:(0,l.k6)((()=>[(0,l.bF)(T,null,{default:(0,l.k6)((()=>i[1]||(i[1]=[(0,l.eW)(" Mata Pelajaran ")]))),_:1})])),_:1}),(0,l.bF)(I,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(j,{name:"settings"})])),_:1})])),_:1})),[[U]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(P,{to:"/madrasah/nilai-ahwal"},{default:(0,l.k6)((()=>[(0,l.bF)(I,null,{default:(0,l.k6)((()=>[(0,l.bF)(T,null,{default:(0,l.k6)((()=>i[2]||(i[2]=[(0,l.eW)(" Nilai Ahwal ")]))),_:1})])),_:1}),(0,l.bF)(I,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(j,{name:"settings_accessibility"})])),_:1})])),_:1})),[[U]])])),_:1})])),_:1})])),_:1}),(0,r.R1)(e).th_ajaran_h&&(0,r.R1)(e).tingkat_id&&(0,r.R1)(e).kelas?((0,l.uX)(),(0,l.Wv)(S,{key:1,class:"q-pa-sm"},{default:(0,l.k6)((()=>[C.value?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.bF)($,{type:"text",height:"4rem"})])):((0,l.uX)(),(0,l.CE)("div",_,[(0,l.bF)(V,{flat:"",rows:t.value,columns:W,"row-key":"kelas_id","rows-per-page-options":[10,25,50,100,0],class:"my-sticky-header-table"},{header:(0,l.k6)((a=>[(0,l.bF)(B,{props:a,class:""},{default:(0,l.k6)((()=>[(0,l.bF)(z),(0,l.bF)(z),(0,l.bF)(z),(0,l.bF)(z),(0,l.bF)(z,{class:"text-left"},{default:(0,l.k6)((()=>i[4]||(i[4]=[(0,l.eW)("Retata Kelas")]))),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(K(t.value,"rerata_1")),1)])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(K(t.value,"rerata_2")),1)])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(K(t.value,"rerata_3")),1)])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(K(t.value,"rerata_4")),1)])),_:1}),(0,l.bF)(z,{class:"text-right"},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(K(t.value,"rerata_akhir")),1)])),_:1})])),_:2},1032,["props"]),(0,l.bF)(B,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(z,{"auto-width":""},{default:(0,l.k6)((()=>i[5]||(i[5]=[(0,l.eW)("!")]))),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.cols,(e=>((0,l.uX)(),(0,l.Wv)(z,{key:e.name,props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.label),1)])),_:2},1032,["props"])))),128))])),_:2},1032,["props"])])),body:(0,l.k6)((a=>[(0,l.bF)(B,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(H,{"auto-width":""},{default:(0,l.k6)((()=>[(0,l.bF)(N,{size:"sm",color:"green",round:"",dense:"",onClick:e=>E(a),icon:a.expand?"remove":"add"},null,8,["onClick","icon"])])),_:2},1024),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.cols,(e=>((0,l.uX)(),(0,l.Wv)(H,{key:e.name,props:a},{default:(0,l.k6)((()=>["kelas_id"==e.name?((0,l.uX)(),(0,l.CE)("span",p,[(0,l.bF)(N,{label:e.value,dense:"",outline:"",class:"q-px-md text-green-10",to:`/madrasah/kelas/${e.value}/nilai-mapel`},null,8,["label","to"])])):"santri_id"==e.name?((0,l.uX)(),(0,l.CE)("span",c,[(0,l.bF)(N,{label:e.value,dense:"",outline:"",class:"q-px-md text-green-10",to:`/santri/${e.value}`},null,8,["label","to"])])):((0,l.uX)(),(0,l.CE)("span",b,(0,n.v_)(e.value),1))])),_:2},1032,["props"])))),128))])),_:2},1032,["props"]),(0,l.bo)((0,l.bF)(B,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(H,{colspan:"100%"},{default:(0,l.k6)((()=>[Q.value[a.row.kelas_id]?((0,l.uX)(),(0,l.CE)("div",g,[(0,l.bF)($,{height:"100px"})])):((0,l.uX)(),(0,l.CE)("div",m,[0==R.value[a.row.kelas_id]?.length?((0,l.uX)(),(0,l.CE)("div",h," Tidak ada data untuk ditampilkan! ")):((0,l.uX)(),(0,l.CE)("div",v,[(0,l.bF)(G,{flat:"",dense:"",class:"bg-green-1",separator:"cell"},{default:(0,l.k6)((()=>[i[7]||(i[7]=(0,l.Lk)("thead",{class:"bg-green-2 text-weight-medium text-right"},[(0,l.Lk)("tr",null,[(0,l.Lk)("td",{class:"text-left",style:{width:"80px"}}," ID (Kode) "),(0,l.Lk)("td",{class:"text-left"}," Mata Pelajaran "),(0,l.Lk)("td",{style:{width:"50px"}}," N-1 "),(0,l.Lk)("td",{style:{width:"50px"}}," N-2 "),(0,l.Lk)("td",{style:{width:"50px"}}," N-3 "),(0,l.Lk)("td",{style:{width:"50px"}}," N-4 "),(0,l.Lk)("td",{style:{width:"65px"}}," Rerata ")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(R.value[a.row.kelas_id],((a,e)=>((0,l.uX)(),(0,l.CE)("tr",{key:e},[(0,l.Lk)("td",x,(0,n.v_)(a.id),1),(0,l.Lk)("td",f,(0,n.v_)(a.name),1),(0,l.Lk)("td",F,(0,n.v_)(a.nilai_1),1),(0,l.Lk)("td",y,(0,n.v_)(a.nilai_2),1),(0,l.Lk)("td",w,(0,n.v_)(a.nilai_3),1),(0,l.Lk)("td",q,(0,n.v_)(a.nilai_4),1),(0,l.Lk)("td",L,(0,n.v_)(a.rerata?parseFloat(a.rerata).toFixed(1):null),1)])))),128))]),(0,l.Lk)("tfoot",A,[(0,l.Lk)("tr",null,[i[6]||(i[6]=(0,l.Lk)("td",{colspan:"2",class:"text-left"}," Rerata ",-1)),(0,l.Lk)("td",null,(0,n.v_)(K(R.value[a.row.kelas_id],"nilai_1")),1),(0,l.Lk)("td",null,(0,n.v_)(K(R.value[a.row.kelas_id],"nilai_2")),1),(0,l.Lk)("td",null,(0,n.v_)(K(R.value[a.row.kelas_id],"nilai_3")),1),(0,l.Lk)("td",null,(0,n.v_)(K(R.value[a.row.kelas_id],"nilai_4")),1),(0,l.Lk)("td",null,(0,n.v_)(K(R.value[a.row.kelas_id],"rerata")),1)])])])),_:2},1024)]))]))])),_:2},1024)])),_:2},1032,["props"]),[[s.aG,a.expand]])])),_:1},8,["rows"])]))])),_:1})):((0,l.uX)(),(0,l.Wv)(S,{key:0,class:"q-pa-sm"},{default:(0,l.k6)((()=>i[3]||(i[3]=[(0,l.Lk)("div",{class:"text-center q-pa-lg text-negative text-italic"}," Tentukan Tahun Ajaran, Tingkat Pendidikan, dan Kelas! ",-1)]))),_:1}))])),_:1})])),_:1})}}};var X=t(32968),R=t(75013),Q=t(83341),W=t(60222),E=t(5873),K=t(22677),N=t(73614),T=t(53766),I=t(22589),j=t(14958),P=t(99039),D=t(93933),M=t(70981),S=t(27010),$=t(87339),z=t(22517),B=t(38785),H=t(94362),G=t(61038),V=t(272),J=t.n(V);const O=(0,X.A)(C,[["__scopeId","data-v-232afaf4"]]),U=O;J()(C,"components",{QPage:R.A,QCard:Q.A,QCardSection:W.A,QSpace:E.A,QBtn:K.A,QBtnDropdown:N.A,QList:T.A,QItem:I.A,QItemSection:j.A,QItemLabel:P.A,QIcon:D.A,QSkeleton:M.Ay,QTable:S.A,QTr:$.A,QTh:z.A,QTd:B.A,QMarkupTable:H.A}),J()(C,"directives",{ClosePopup:G.A})}}]);