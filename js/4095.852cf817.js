"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[4095],{34095:(a,e,l)=>{l.r(e),l.d(e,{default:()=>za});var t=l(51347),n=l(34187),u=l(60455),i=(l(60939),l(7049),l(58094)),s=l(37763),o=l(8633),d=l(47509),r=l(5313),c=(l(17008),l(72085)),m=l(20675),v=l(59678),b=l(21209),k=l(55123),p=l(90486);const g={key:0},_={__name:"IuranForm",props:{data:{type:Object,required:!1,default:()=>{}},disableSantriId:{type:Boolean,default:!1},disableThAjaran:{type:Boolean,default:!1}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(a,{emit:e}){const l=a,u=e,i=(0,n.KR)({}),s=(0,n.KR)(!1),r=(0,n.KR)([]),_=(0,n.KR)([]);(0,t.sV)((async()=>{Object.assign(i.value,l.data),r.value=(0,c.A)().getByStateName("tahun-ajaran"),_.value=(0,c.A)().getByStateName("iuran")}));const f=a=>{const e=_.value.find((e=>e.val0===a));e&&(i.value.nominal=e.val1)},F=async()=>{const a={santri_id:i.value.santri_id,th_ajaran_h:i.value.th_ajaran_h,item:i.value.item,nominal:i.value.nominal,via:i.value.via,keterangan:i.value.keterangan};let e=null;const l=!i.value.id;e=l?await(0,v.A)({endPoint:"iuran",data:a,loading:s}):await(0,d.A)({endPoint:`iuran/${i.value.id}`,data:a,confirm:!0,notify:!0,loading:s}),e&&(document.getElementById("btn-close-form").click(),u("successSubmit",e?.iuran),u(l?"successCreate":"successUpdate",e?.iuran))},h=async()=>{const a=i.value.id,e=await(0,m.A)({endPoint:`iuran/${a}`,loading:s});e&&(document.getElementById("btn-close-form").click(),u("successDelete",a))};return(a,e)=>{const n=(0,t.g2)("FormHeader"),u=(0,t.g2)("q-spinner-cube"),d=(0,t.g2)("q-dialog"),r=(0,t.g2)("q-input"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("FormActions"),v=(0,t.g2)("q-form"),_=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(_,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(v,{onSubmit:(0,o.D$)(F,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(n,{title:"Input Iuran","is-new":!i.value.id},null,8,["is-new"]),(0,t.bF)(c,null,{default:(0,t.k6)((()=>[s.value?((0,t.uX)(),(0,t.CE)("div",g,[(0,t.bF)(d,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(k.A,{"active-only":!0,onEmitInput:e[1]||(e[1]=a=>Object.assign(i.value,a)),data:l.data},null,8,["data"]),(0,t.bF)(p.A,{modelValue:i.value.th_ajaran_h,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.th_ajaran_h=a),url:"tahun-ajaran",label:"Tahun Ajaran",sort:"desc",class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"],selected:i.value.th_ajaran_h,disable:l.disableThAjaran},null,8,["modelValue","rules","selected","disable"]),(0,t.bF)(p.A,{modelValue:i.value.item,"onUpdate:modelValue":[e[3]||(e[3]=a=>i.value.item=a),f],url:"iuran",label:"Nama Iuran",class:"q-mt-sm"},null,8,["modelValue"]),(0,t.bF)(b.A,{dense:"",class:"q-mt-sm",outlined:"",modelValue:i.value.nominal,"onUpdate:modelValue":e[4]||(e[4]=a=>i.value.nominal=a),required:"",label:"Nominal",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,t.bo)((0,t.bF)(p.A,{modelValue:i.value.via,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value.via=a),url:"metode-pembayaran",label:"Via",class:"q-mt-sm"},null,8,["modelValue"]),[[o.aG,i.value.id&&i.value.lunas]]),(0,t.bF)(r,{label:"Keterangan",modelValue:i.value.keterangan,"onUpdate:modelValue":e[6]||(e[6]=a=>i.value.keterangan=a),dense:"",outlined:"",class:"q-mt-sm",autogrow:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{"btn-delete":!!i.value.id,onOnDelete:h},null,8,["btn-delete"])])),_:1})])),_:1})}}};var f=l(83341),F=l(53417),h=l(60222),q=l(30045),A=l(71402),y=l(46395),x=l(272),V=l.n(x);const w=_,C=w;V()(_,"components",{QCard:f.A,QForm:F.A,QCardSection:h.A,QDialog:q.A,QSpinnerCube:A.A,QInput:y.A});var Q=l(71492),S=l(32671),L=l(17904),R=l(18348),K=l(75605);const I={__name:"DropDownPrint",props:{data:{}},setup(a){const{loadingMain:e}=(0,n.QW)((0,R.A)()),l=(0,n.KR)(""),u=(0,n.KR)(!1),i=a,s=(0,n.KR)("");async function o(){await(0,L.A)({endPoint:`reports/iuran-card/download?${s.value}`,loading:e,fileName:"iuran-card",confirm:!0,message:"Download kartu iuran?"})}async function d(){await(0,L.A)({endPoint:`reports/iuran-cover/download?${s.value}`,loading:e,fileName:"iuran-cover",confirm:!0,message:"Download cover kartu iuran?"})}async function r(){await(0,L.A)({endPoint:`reports/iuran-kuitansi/download?${s.value}`,loading:e,fileName:"iuran-kuitansi",confirm:!0,message:"Download kuitansi iuran?"})}function c(){l.value=`reports/iuran-card/view?${s.value}`,u.value=!0}function m(){l.value=`reports/iuran-cover/view?${s.value}`,u.value=!0}function v(){l.value=`reports/iuran-kuitansi/view?${s.value}`,u.value=!0}return(0,t.sV)((()=>{s.value=new URLSearchParams(i.data).toString()})),(a,e)=>{const n=(0,t.g2)("q-item-label"),i=(0,t.g2)("q-item-section"),s=(0,t.g2)("q-btn"),b=(0,t.g2)("q-item"),k=(0,t.g2)("q-list"),p=(0,t.g2)("q-btn-dropdown"),g=(0,t.g2)("q-dialog"),_=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(p,{color:"green-11",label:"Cetak",icon:"print","no-caps":"",class:"text-green-10 q-px-md",dense:""},{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>e[1]||(e[1]=[(0,t.eW)("Kartu")]))),_:1})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"download",flat:"",onClick:o})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"print",flat:"",onClick:c})])),_:1})])),_:1})),[[_]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>e[2]||(e[2]=[(0,t.eW)("Cover")]))),_:1})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"download",flat:"",onClick:d})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"print",flat:"",onClick:m})])),_:1})])),_:1})),[[_]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>e[3]||(e[3]=[(0,t.eW)("Kuitansi")]))),_:1})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"download",flat:"",onClick:r})])),_:1}),(0,t.bF)(i,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{icon:"print",flat:"",onClick:v})])),_:1})])),_:1})),[[_]])])),_:1})])),_:1}),(0,t.bF)(g,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(K.A,{url:l.value},null,8,["url"])])),_:1},8,["modelValue"])],64)}}};var j=l(73614),W=l(53766),U=l(22589),X=l(14958),E=l(99039),T=l(22677),D=l(61038);const P=I,$=P;V()(I,"components",{QBtnDropdown:j.A,QList:W.A,QItem:U.A,QItemSection:X.A,QItemLabel:E.A,QBtn:T.A,QDialog:q.A}),V()(I,"directives",{ClosePopup:D.A});const B={key:0},O={__name:"IuranLunasForm",props:{data:{type:Object,required:!0}},emits:["successSubmit","successUpdate"],setup(a,{emit:e}){const l=a,u=e,i=(0,n.KR)({}),s=(0,n.KR)(!1);(0,t.sV)((async()=>{Object.assign(i.value,l.data)}));const r=async()=>{const a={via:i.value.via},e=await(0,d.A)({endPoint:`iuran/${i.value.id}/lunas`,data:a,message:"Iuran/tagihan lunas?",notify:!0,loading:s});e&&(document.getElementById("btn-close-form").click(),u("successSubmit",e?.iuran),u("successUpdate",e?.iuran))};return(a,e)=>{const l=(0,t.g2)("FormHeader"),n=(0,t.g2)("q-spinner-cube"),u=(0,t.g2)("q-dialog"),d=(0,t.g2)("q-input"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("FormActions"),v=(0,t.g2)("q-form"),k=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(k,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(v,{onSubmit:(0,o.D$)(r,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(l,{title:"Set Iuran Lunas","is-new":!1}),(0,t.bF)(c,null,{default:(0,t.k6)((()=>[s.value?((0,t.uX)(),(0,t.CE)("div",B,[(0,t.bF)(u,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(d,{disable:"",label:"Nama",modelValue:i.value.nama,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value.nama=a),dense:"",outlined:""},null,8,["modelValue"]),(0,t.bF)(d,{disable:"",label:"Tahun Ajaran",modelValue:i.value.th_ajaran_h,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.th_ajaran_h=a),dense:"",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),(0,t.bF)(d,{disable:"",label:"Nama Iuran",modelValue:i.value.item,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value.item=a),dense:"",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),(0,t.bF)(b.A,{disable:"",dense:"",class:"q-mt-sm",outlined:"",modelValue:i.value.nominal,"onUpdate:modelValue":e[4]||(e[4]=a=>i.value.nominal=a),required:"",label:"Nominal"},null,8,["modelValue"]),(0,t.bF)(p.A,{modelValue:i.value.via,"onUpdate:modelValue":e[5]||(e[5]=a=>i.value.via=a),url:"metode-pembayaran",label:"Via",class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"])])),_:1}),(0,t.bF)(m,{"btn-delete":!1})])),_:1})])),_:1})}}},N=O,H=N;V()(O,"components",{QCard:f.A,QForm:F.A,QCardSection:h.A,QDialog:q.A,QSpinnerCube:A.A,QInput:y.A});const M={key:0},z={key:1},G={key:0},J={class:"",style:{"min-width":"250px","max-width":"300px"}},Y={class:"text-right"},Z={class:"text-right"},aa={class:"text-right text-weight-bold"},ea={class:"flex items-center q-gutter-x-sm"},la={class:"q-card--bordered rounded-borders q-px-sm"},ta={class:"q-card--bordered rounded-borders q-px-sm"},na={class:"text-subtitle1 text-weight-bold"},ua={class:"flex flex-center"},ia={key:1,class:"q-ma-lg"},sa={__name:"IuranSantriByTh",setup(a){const{params:e}=(0,u.lq)(),l=(0,n.KR)(e.thAjaranH),c=(0,n.KR)(e.id),m=(0,n.KR)(!1),v=(0,n.KR)([]),b=(0,n.KR)(!1),k=(0,n.KR)({}),p=(0,t.WQ)("santri"),g=(0,n.KR)(!1);function _(a){k.value=a,k.value.nama=p.value.nama,k.value.data_akhir=p.value.data_akhir,b.value=!0}async function f(){if(l.value&&c.value){const a=await(0,i.A)({endPoint:`iuran/santri/${c.value}`,params:{th_ajaran_h:l.value},loading:m});a&&(v.value=A(a.iuran))}}async function F(a,e,l,t){const n=await(0,d.A)({endPoint:`iuran/${l.id}/cetak`,confirm:!1,notify:!1});n||(v.value[t].cetak=1==a?0:1)}async function h(a,e,l,t){if(a)return q(l,t);const n=await(0,d.A)({endPoint:`iuran/${l.id}/not-lunas`,message:"Iuran/tagihan TIDAK lunas?",loading:m});n?v.value[t]=n.iuran:v.value[t].isLunas=1!=a}async function q(a,e){k.value=a,k.value.nama=p.value.nama,k.value.data_akhir=p.value.data_akhir,g.value=!0,v.value[e].isLunas=!1}function A(a){return a.sort(((a,e)=>null===a.lunas&&null===e.lunas?0:null===a.lunas?1:null===e.lunas?-1:new Date(a.lunas)-new Date(e.lunas))).map((a=>({...a,isLunas:!!a.lunas,show:!!Object.prototype.hasOwnProperty.call(a,"show")&&a.show})))}return(0,t.sV)((async()=>await f())),(0,t.wB)(v,(async(a,e)=>{await(0,t.dY)();const l=A([...a]);JSON.stringify(l)!==JSON.stringify(e)&&(v.value=l)}),{deep:!0}),(a,e)=>{const u=(0,t.g2)("q-spinner-cube"),i=(0,t.g2)("q-item-section"),d=(0,t.g2)("q-item"),p=(0,t.g2)("q-item-label"),f=(0,t.g2)("q-toggle"),q=(0,t.g2)("q-btn"),A=(0,t.g2)("q-separator"),y=(0,t.g2)("q-list"),x=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[m.value?((0,t.uX)(),(0,t.CE)("div",M,[(0,t.bF)(u,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",z,[v.value.length>0?((0,t.uX)(),(0,t.CE)("div",G,[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"q-pa-sm bg-green-11"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"flex"},{default:(0,t.k6)((()=>[(0,t.Lk)("table",J,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[e[6]||(e[6]=(0,t.Lk)("td",{class:"text-caption text-italic q-pr-md"}," Total Tagihan ",-1)),(0,t.Lk)("td",Y,(0,s.v_)((0,n.R1)(S.CG)(v.value).toRupiah()),1)]),(0,t.Lk)("tr",null,[e[7]||(e[7]=(0,t.Lk)("td",{class:"text-caption text-italic q-pr-md"}," Total Pembayaran ",-1)),(0,t.Lk)("td",Z,(0,s.v_)((0,n.R1)(S.hF)(v.value).toRupiah()),1)]),(0,t.Lk)("tr",null,[e[8]||(e[8]=(0,t.Lk)("td",{class:"text-caption text-italic q-pr-md"}," Sisa Tagihan ",-1)),(0,t.Lk)("td",aa,(0,s.v_)((0,n.R1)(S.kb)(v.value).toRupiah()),1)])])])])),_:1})])),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.value,((a,l)=>((0,t.uX)(),(0,t.CE)("div",{key:l},[(0,t.bF)(d,{class:"q-px-sm",clickable:"",onClick:(0,o.D$)((e=>a.show=!a.show),["stop"])},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(a.item),1)])),_:2},1024),(0,t.bF)(p,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(a.nominal.toRupiah()),1)])),_:2},1024)])),_:2},1024),(0,t.bF)(i,{side:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ea,[(0,t.Lk)("div",la,[(0,t.bF)(f,{label:"Lunas",color:"green",class:"text-green-10",modelValue:a.isLunas,"onUpdate:modelValue":[e=>a.isLunas=e,(e,t)=>h(e,t,a,l)],"checked-icon":"check","unchecked-icon":"clear","true-value":!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Lk)("div",ta,[(0,t.bF)(f,{disable:!a.lunas,label:"Cetak",color:"green",class:"text-green-10",modelValue:a.cetak,"onUpdate:modelValue":[e=>a.cetak=e,(e,t)=>F(e,t,a,l)],"checked-icon":"check","unchecked-icon":"clear","true-value":1,"false-value":0},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,t.bF)(q,{icon:"edit",glossy:"",outline:"",dense:"",round:"",color:"green-8",unelevated:"",onClick:(0,o.D$)((e=>_(a)),["stop"])},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["onClick"]),a.show?((0,t.uX)(),(0,t.Wv)(d,{key:0,class:"q-px-sm q-pb-sm q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,null,{default:(0,t.k6)((()=>[e[9]||(e[9]=(0,t.Lk)("em",null,"Lunas:",-1)),(0,t.eW)("  "+(0,s.v_)(a.lunas?(0,n.R1)(r.Yq)(a.lunas,"'hari' EEEE, 'tanggal' dd MMMM yyyy, 'pukul' HH:mm"):"-"),1)])),_:2},1024),(0,t.bF)(p,{caption:""},{default:(0,t.k6)((()=>[e[10]||(e[10]=(0,t.Lk)("em",null,"Kasir:",-1)),e[11]||(e[11]=(0,t.eW)(" ")),(0,t.Lk)("strong",null,(0,s.v_)(a.kasir||"-"),1),e[12]||(e[12]=(0,t.eW)("; ")),e[13]||(e[13]=(0,t.Lk)("em",null,"Via:",-1)),e[14]||(e[14]=(0,t.eW)(" ")),(0,t.Lk)("strong",null,(0,s.v_)(a.via||"-"),1),e[15]||(e[15]=(0,t.eW)("; ")),e[16]||(e[16]=(0,t.Lk)("em",null,"Ket.:",-1)),e[17]||(e[17]=(0,t.eW)(" ")),(0,t.Lk)("strong",null,(0,s.v_)(a.keterangan||"-"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,t.Q3)("",!0),(0,t.bF)(A)])))),128)),(0,t.bF)(d,{class:"q-pa-sm bg-green-8"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"text-green-11"},{default:(0,t.k6)((()=>[(0,t.bF)(p,{overline:"",class:"text-green-1"},{default:(0,t.k6)((()=>[e[18]||(e[18]=(0,t.eW)(" TOTAL CETAK ")),(0,t.Lk)("span",na,(0,s.v_)((0,n.R1)(S.a)(v.value).toRupiah()),1)])),_:1})])),_:1}),(0,t.bF)(i,{side:"",class:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ua,[(0,t.bF)($,{data:{santri_id:c.value,th_ajaran_h:l.value}},null,8,["data"])])])),_:1})])),_:1})])),_:1})])):((0,t.uX)(),(0,t.CE)("div",ia,e[19]||(e[19]=[(0,t.Lk)("div",{class:"text-body2 text-italic text-center"}," Tidak ada data untuk ditampilkan! ",-1),(0,t.Lk)("hr",null,null,-1),(0,t.Lk)("div",{class:"text-weight-thin text-italic text-center"}," Klik angka tahun disamping, atau tambahkan data! ",-1)])))])),(0,t.bF)(x,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=a=>b.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(C,{data:k.value,onSuccessDelete:e[0]||(e[0]=a=>(0,n.R1)(Q.ST)(v.value,a)),onSuccessCreate:e[1]||(e[1]=a=>v.value.push(a)),onSuccessUpdate:e[2]||(e[2]=a=>(0,n.R1)(Q.B1)(v.value,a.id,a)),"disable-santri-id":!0,"disable-th-ajaran":!0},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(x,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=a=>g.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(H,{data:k.value,onSuccessUpdate:e[4]||(e[4]=a=>(0,n.R1)(Q.B1)(v.value,a.id,a))},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var oa=l(55725),da=l(86915);const ra=sa,ca=ra;V()(sa,"components",{QSpinnerCube:A.A,QList:W.A,QItem:U.A,QItemSection:X.A,QItemLabel:E.A,QCard:f.A,QToggle:oa.A,QBtn:T.A,QSeparator:da.A,QDialog:q.A});const ma={key:0},va={key:1,class:"row"},ba={class:"col bg-green-1",style:{"max-width":"90px"}},ka={class:"col"},pa={key:0,class:"q-ma-lg"},ga={key:1},_a={key:2,class:"q-ma-lg"},fa={__name:"TabThAjaran",setup(a){const e=(0,n.KR)([]),l=(0,n.KR)(!1),{params:s}=(0,u.lq)(),o=(0,n.KR)([]);async function d(){const a=await(0,i.A)({endPoint:"iuran/santri/"+s.id,loading:l});a&&(e.value=a.iuran??[],o.value=e.value.map((a=>a.th_ajaran_h)))}return(0,t.sV)((async()=>{s.id&&await d()})),(a,u)=>{const i=(0,t.g2)("q-spinner-cube"),d=(0,t.g2)("q-route-tab"),r=(0,t.g2)("q-tabs");return l.value?((0,t.uX)(),(0,t.CE)("div",ma,[(0,t.bF)(i,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):e.value?.length>0?((0,t.uX)(),(0,t.CE)("div",va,[(0,t.Lk)("div",ba,[(0,t.bF)(r,{vertical:"",dense:"",align:"left","no-caps":"","active-bg-color":"green-11"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.value,((a,e)=>((0,t.uX)(),(0,t.CE)("div",{key:e},[(0,t.bF)(d,{name:a,label:a,to:`/iuran/santri/${(0,n.R1)(s).id}/${a}`},null,8,["name","label","to"])])))),128))])),_:1})]),(0,t.Lk)("div",ka,[(0,n.R1)(s).thAjaranH?((0,t.uX)(),(0,t.CE)("div",ga,[(0,t.bF)(ca)])):((0,t.uX)(),(0,t.CE)("div",pa,u[0]||(u[0]=[(0,t.Lk)("div",{class:"text-italic text-center"}," Klik angka tahun disamping, atau tambahkan data! ",-1)])))])])):((0,t.uX)(),(0,t.CE)("div",_a,u[1]||(u[1]=[(0,t.Lk)("div",{class:"text-body2 text-italic text-center"}," Tidak ada data untuk ditampilkan! ",-1),(0,t.Lk)("hr",null,null,-1),(0,t.Lk)("div",{class:"text-weight-thin text-italic text-center"},[(0,t.eW)(" Yang bersangkutan belum pernah melakuan pembayaran. "),(0,t.Lk)("br"),(0,t.eW)(" Silakan klik tombol tambah! ")],-1)])))}}};var Fa=l(38805),ha=l(96641);const qa=fa,Aa=qa;function ya(a,e){const l=(0,t.g2)("q-icon"),n=(0,t.g2)("q-item-section"),u=(0,t.g2)("q-item-label"),i=(0,t.g2)("q-item"),s=(0,t.g2)("q-list"),o=(0,t.g2)("q-btn-dropdown"),d=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(o,{split:"",dense:"",label:"Tambah","no-caps":"",icon:"add",color:"green-10",padding:"xs sm","text-color":"green-11",onClick:e[1]||(e[1]=e=>a.$emit("onAdd"))},{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(i,{clickable:"",onClick:e[0]||(e[0]=e=>a.$emit("showPaket"))},{default:(0,t.k6)((()=>[(0,t.bF)(n,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{name:"local_atm",color:"green"})])),_:1}),(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>e[2]||(e[2]=[(0,t.eW)("Paket")]))),_:1}),(0,t.bF)(u,{caption:""},{default:(0,t.k6)((()=>e[3]||(e[3]=[(0,t.eW)("Pembayaran/Tagihan")]))),_:1})])),_:1})])),_:1})),[[d]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(i,{clickable:"",to:"/iuran/paket"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{name:"settings",color:"green"})])),_:1}),(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>e[4]||(e[4]=[(0,t.eW)("Setting")]))),_:1}),(0,t.bF)(u,{caption:""},{default:(0,t.k6)((()=>e[5]||(e[5]=[(0,t.eW)("Atur Paket")]))),_:1})])),_:1})])),_:1})),[[d]])])),_:1})])),_:1})}V()(fa,"components",{QSpinnerCube:A.A,QTabs:Fa.A,QRouteTab:ha.A});var xa=l(32968),Va=l(93933);const wa={},Ca=(0,xa.A)(wa,[["render",ya]]),Qa=Ca;V()(wa,"components",{QBtnDropdown:j.A,QList:W.A,QItem:U.A,QItemSection:X.A,QIcon:Va.A,QItemLabel:E.A}),V()(wa,"directives",{ClosePopup:D.A});const Sa={class:"flex content-start items-center",style:{"max-width":"1000px",width:"100%"}},La={key:0,class:"q-pa-sm"},Ra={key:1,class:"q-pa-sm text-negative"},Ka={__name:"FilterSantri",props:{startUrl:String,activeOnly:{type:Boolean}},emits:["dataFilter"],setup(a,{emit:e}){const l=a,o=e,d=(0,u.lq)(),r=(0,u.rd)(),c={id:d.params.id},m=(0,n.KR)(c.id),v=(0,n.KR)(!1),b=(0,n.KR)([]),k=(0,n.KR)(!1);function p(a){a?r.push(`${l.startUrl}/${a}`):r.push(`${l.startUrl}`)}async function g(a,e){if(!a)return void e((()=>{b.value=[]}));const t=await(0,i.A)({endPoint:"santri/ids",loading:v,params:{active_only:!!l.activeOnly,q:a}});k.value=!t.lists.length,e((()=>b.value=t.lists),(e=>{""!==a&&e.options.length&&(e.setOptionIndex(-1),e.moveOptionSelection(1,!0))}))}return(0,t.sV)((async()=>{if(o("dataFilter",{display:'<div class="text-green-13 text-italic">Tentukan filter!</div>'}),m.value){const a=await(0,i.A)({endPoint:`santri/${m.value}`}),e={display:`\n\t\t\t➡️ ${m.value}\n\t\t\t| <strong>${a.santri.nama}</strong>\n\t\t\t| ${a.santri.data_akhir}\n\t\t\t`};o("dataFilter",e)}})),(a,e)=>{const l=(0,t.g2)("q-toolbar-title"),n=(0,t.g2)("q-toolbar"),u=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-item-label"),o=(0,t.g2)("q-item-section"),d=(0,t.g2)("q-item"),r=(0,t.g2)("q-select"),c=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(c,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-px-sm q-py-sm bg-green-11"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{class:"no-padding",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(l,{class:"text-subtitle1"},{default:(0,t.k6)((()=>e[1]||(e[1]=[(0,t.Lk)("div",{class:"text-subtitle2 text-weight-bold"}," Filter ID Santri ",-1)]))),_:1}),(0,t.RG)(a.$slots,"default")])),_:3})])),_:3}),(0,t.bF)(u,{class:"no-padding"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Sa,[(0,t.bF)(r,{class:"q-pa-sm",dense:"",outlined:"",label:"ID Santri",modelValue:m.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>m.value=a),p],options:b.value,"emit-value":"","map-options":"","option-value":"id","option-label":"id","error-color":"negative",loading:v.value,"use-input":"",clearable:"",onFilter:g,behavior:"menu"},{option:(0,t.k6)((a=>[(0,t.bF)(d,(0,s._B)((0,t.Ng)(a.itemProps)),{default:(0,t.k6)((()=>[(0,t.bF)(o,null,{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(a.opt.id)+" — "+(0,s.v_)(a.opt.nama),1)])),_:2},1024),(0,t.bF)(i,{caption:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(a.opt.data_akhir),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","loading"]),m.value?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",La,"Ketikkan ID Santri")),k.value?((0,t.uX)(),(0,t.CE)("div",Ra," Data Tidak ditemukan ")):(0,t.Q3)("",!0)])])),_:1})])),_:3})}}};var Ia=l(66739),ja=l(4629),Wa=l(76941);const Ua=Ka,Xa=Ua;V()(Ka,"components",{QCard:f.A,QCardSection:h.A,QToolbar:Ia.A,QToolbarTitle:ja.A,QSelect:Wa.A,QItem:U.A,QItemSection:X.A,QItemLabel:E.A});var Ea=l(90944),Ta=l(50657);const Da={key:0},Pa={__name:"IuranPaketSantriForm",props:{data:{type:Object,required:!1,default:()=>{}},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successCreate"],setup(a,{emit:e}){const l=a,u=e,i=(0,n.KR)({}),s=(0,n.KR)(!1),d=(0,n.KR)([]),r=(0,n.KR)([]);(0,t.sV)((async()=>{Object.assign(i.value,l.data),d.value=(0,c.A)().getByStateName("tahun-ajaran")}));const m=async()=>{const a=r.value.map((a=>({item:a.item,nominal:a.nominal}))),e={santri_id:i.value.santri_id,th_ajaran_h:i.value.th_ajaran_h,keterangan:i.value.keterangan||"",paket:a},l=await(0,v.A)({endPoint:"iuran/paket",data:e,loading:s,message:"PERHATIAN<br/>Jika item iuran sudah terdapat dalam daftar maka akan diabaikan."});l&&(document.getElementById("btn-close-form").click(),u("successSubmit",l?.iuran),u("successCreate",l?.iuran))};return(a,e)=>{const n=(0,t.g2)("FormHeader"),u=(0,t.g2)("q-spinner-cube"),d=(0,t.g2)("q-dialog"),c=(0,t.g2)("q-input"),v=(0,t.g2)("q-card-section"),b=(0,t.g2)("FormActions"),g=(0,t.g2)("q-form"),_=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(_,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(g,{onSubmit:(0,o.D$)(m,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(n,{title:"Modul Paket","is-new":!0}),(0,t.bF)(v,null,{default:(0,t.k6)((()=>[s.value?((0,t.uX)(),(0,t.CE)("div",Da,[(0,t.bF)(d,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(k.A,{"active-only":!0,onEmitInput:e[1]||(e[1]=a=>Object.assign(i.value,a)),data:l.data},null,8,["data"]),(0,t.bF)(p.A,{modelValue:i.value.th_ajaran_h,"onUpdate:modelValue":e[2]||(e[2]=a=>i.value.th_ajaran_h=a),url:"tahun-ajaran",label:"Tahun Ajaran",sort:"desc",class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"],selected:i.value.th_ajaran_h,disable:l.disableThAjaran},null,8,["modelValue","rules","selected","disable"]),(0,t.bF)(Ta.A,{class:"q-mt-sm",onOnInput:e[3]||(e[3]=a=>r.value=a)}),(0,t.bF)(c,{label:"Keterangan",modelValue:i.value.keterangan,"onUpdate:modelValue":e[4]||(e[4]=a=>i.value.keterangan=a),dense:"",outlined:"",class:"q-mt-sm"},null,8,["modelValue"])])),_:1}),(0,t.bF)(b)])),_:1})])),_:1})}}},$a=Pa,Ba=$a;V()(Pa,"components",{QCard:f.A,QForm:F.A,QCardSection:h.A,QDialog:q.A,QSpinnerCube:A.A,QInput:y.A});const Oa={class:"q-mt-sm"},Na={__name:"PageIuranSantri",setup(a){const{params:e}=(0,u.lq)(),l=(0,u.rd)(),i=(0,n.KR)({}),s=(0,n.KR)(0),o=(0,n.KR)({}),d=(0,n.KR)(!1),r=(0,n.KR)(!1),c=(0,n.KR)({});function m(){o.value={santri_id:c.value.id,nama:c.value.nama,data_akhir:c.value.data_akhir,th_ajaran_h:e.thAjaranH||""}}function v(){m(),d.value=!0}function b(){m(),r.value=!0}(0,t.Gt)("santri",c);const k=a=>{a.th_ajaran_h==e.thAjaranH&&s.value++,l.push(`/iuran/santri/${a.santri_id}/${a.th_ajaran_h}`)};return(a,l)=>{const u=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-card"),p=(0,t.g2)("q-space"),g=(0,t.g2)("q-btn"),_=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(Xa,{"start-url":"/iuran/santri",onDataFilter:l[0]||(l[0]=a=>i.value=a),"active-only":!1,bordered:"",flat:"",class:""}),(0,t.Lk)("div",Oa,[(0,n.R1)(e).id?((0,t.uX)(),(0,t.Wv)(Ea.A,{key:0,id:(0,n.R1)(e).id,onLoaded:l[1]||(l[1]=a=>c.value=a)},null,8,["id"])):((0,t.uX)(),(0,t.Wv)(m,{key:1,bordered:"",flat:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-pa-sm bg-green-11 text-subtitle2"},{default:(0,t.k6)((()=>l[6]||(l[6]=[(0,t.eW)(" No data ")]))),_:1}),(0,t.bF)(u,{class:"q-pa-lg text-body1 text-center"},{default:(0,t.k6)((()=>l[7]||(l[7]=[(0,t.eW)(" Pilih Santri ")]))),_:1})])),_:1}))]),(0,t.bF)(m,{flat:"",bordered:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-pa-sm text-subtitle1 bg-green-6 text-green-11 flex items-center"},{default:(0,t.k6)((()=>[l[8]||(l[8]=(0,t.eW)(" Data Iuran ")),(0,t.bF)(p),(0,t.bF)(g,{icon:"sync",outline:"",dense:"",onClick:l[2]||(l[2]=a=>s.value++),class:"q-px-sm q-mr-sm"}),(0,t.bF)(Qa,{onOnAdd:v,onShowPaket:b})])),_:1}),(0,t.bF)(u,{class:"no-padding"},{default:(0,t.k6)((()=>[((0,t.uX)(),(0,t.Wv)(Aa,{key:s.value}))])),_:1})])),_:1}),(0,t.bF)(_,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=a=>d.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(C,{data:o.value,onSuccessCreate:k,"disable-santri-id":!0},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(_,{modelValue:r.value,"onUpdate:modelValue":l[5]||(l[5]=a=>r.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(Ba,{data:o.value,onSuccessSubmit:l[4]||(l[4]=a=>s.value++)},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var Ha=l(5873);const Ma=Na,za=Ma;V()(Na,"components",{QCard:f.A,QCardSection:h.A,QSpace:Ha.A,QBtn:T.A,QDialog:q.A})}}]);