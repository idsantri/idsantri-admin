"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9713],{19713:(a,e,l)=>{l.r(e),l.d(e,{default:()=>U});var t=l(51347),n=l(37763),i=l(58094),s=l(59678),d=l(78306),o=l(31284),r=l(50657),u=l(15469),c=l(34187),m=l(60455);const g={class:"row"},h={class:"col-7 q-mt-sm"},b={class:"col-5 q-mt-sm"},p={class:"vertical-top"},k=(0,t.Lk)("td",{class:"text-no-wrap text-italic q-pr-md"}," Jumlah Murid ",-1),_={class:"vertical-top"},v=(0,t.Lk)("td",{class:"text-no-wrap text-italic q-pr-md"}," Terpilih ",-1),f={__name:"PageTagihan",setup(a){const e=(0,c.KR)(""),l=(0,c.KR)(!1),{params:f}=(0,m.lq)(),q=(0,c.KR)([]),w=(0,c.KR)([]),A=(0,c.KR)([]),F=(0,c.KR)(!1),x=(0,c.KR)({th_ajaran_h:f.th_ajaran_h||""});async function V(){const a=await(0,i.A)({endPoint:"kelas",params:{th_ajaran_h:f.th_ajaran_h,tingkat_id:f.tingkat_id,kelas:f.kelas},loading:l});a&&(q.value=a.murid)}async function j(){if(!w.value.length)return(0,u.UG)("Pilih murid terlebih dahulu");if(!A.value.length)return(0,u.UG)("Pilih paket terlebih dahulu");const a={th_ajaran_h:x.value.th_ajaran_h,santri_id:w.value.map((a=>a.santri_id)),paket:A.value.map((a=>({item:a.item,nominal:a.nominal})))};await(0,s.A)({endPoint:"iuran/paket",loading:F,data:a,message:'PERHATIAN<br/>\n\t\t\tJika item iuran sudah terdapat dalam daftar maka akan diabaikan.\n\t\t\t<hr/>\n\t\t\t<span style="color:red">Kesalahan akibat aksi ini sulit ditelusuri dan harus diperbaiki satu per satu.</span>'})}(0,t.sV)((async()=>{f.th_ajaran_h&&f.tingkat_id&&f.kelas?await V():q.value=[]}));const L=[{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"domisili",label:"Domisili",align:"left",field:"domisili",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"wali",label:"Wali",align:"left",field:a=>`${a.wali_nama} (${a.wali_sex}; ${a.wali_status})`,sortable:!0}];return(a,i)=>{const s=(0,t.g2)("q-toggle"),u=(0,t.g2)("q-table"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-input"),f=(0,t.g2)("q-btn"),V=(0,t.g2)("q-card-actions"),y=(0,t.g2)("q-spinner-facebook"),Q=(0,t.g2)("q-inner-loading"),T=(0,t.g2)("q-card"),K=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(K,{class:"q-pa-sm",style:{"min-width":"1024px"}},{default:(0,t.k6)((()=>[(0,t.bF)(T,null,{default:(0,t.k6)((()=>[(0,t.bF)(d.A,{"show-reload":!1,title:"Modul Tagihan"}),(0,t.bF)(c,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(o.A,{bordered:"",flat:"","show-ujian-ke":!1,"start-url":"/iuran/tagihan",onDataFilter:i[0]||(i[0]=a=>e.value=a)}),(0,t.Lk)("div",g,[(0,t.Lk)("div",h,[(0,t.bF)(u,{flat:"",bordered:"","table-header-class":"bg-green-2 text-green-10 text-subtitle1",class:"dt",rows:q.value,columns:L,loading:l.value,"row-key":"id",selection:"multiple",selected:w.value,"onUpdate:selected":i[1]||(i[1]=a=>w.value=a),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"635px"},"virtual-scroll":""},{"header-selection":(0,t.k6)((a=>[(0,t.bF)(s,{modelValue:a.selected,"onUpdate:modelValue":e=>a.selected=e,color:"green-7","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"])])),"body-selection":(0,t.k6)((a=>[(0,t.bF)(s,{modelValue:a.selected,"onUpdate:modelValue":e=>a.selected=e,color:"green-5","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["rows","loading","selected"])]),(0,t.Lk)("div",b,[(0,t.bF)(T,{bordered:"",flat:"",class:"q-ml-sm scroll",style:{height:"635px"}},{default:(0,t.k6)((()=>[(0,t.bF)(c,{class:"q-px-sm q-py-md bg-green-2 text-green-10 text-subtitle2"},{default:(0,t.k6)((()=>[(0,t.eW)(" Buat Tagihan Massal ")])),_:1}),(0,t.bF)(c,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tr",p,[k,(0,t.Lk)("td",null,(0,n.v_)(q.value.length),1)]),(0,t.Lk)("tr",_,[v,(0,t.Lk)("td",null,(0,n.v_)(w.value.length)+" "+(0,n.v_)(w.value.map((a=>a.santri_id))),1)])])])),_:1}),(0,t.bF)(c,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"Tahun Ajaran",outlined:"",dense:"",modelValue:x.value.th_ajaran_h,"onUpdate:modelValue":i[2]||(i[2]=a=>x.value.th_ajaran_h=a),disable:""},null,8,["modelValue"]),(0,t.bF)(r.A,{class:"q-mt-sm",onOnInput:i[3]||(i[3]=a=>A.value=a)})])),_:1}),(0,t.bF)(V,{class:"q-pa-sm bg-green-6 absolute-bottom",align:"right"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{label:"simpan",outline:"",color:"green-10",class:"bg-green-11","no-caps":"",icon:"save",onClick:j})])),_:1}),(0,t.bF)(Q,{showing:F.value},{default:(0,t.k6)((()=>[(0,t.bF)(y,{color:"green-6",size:"6em"})])),_:1},8,["showing"])])),_:1})])])])),_:1})])),_:1})])),_:1})}}};var q=l(75013),w=l(83341),A=l(60222),F=l(27010),x=l(55725),V=l(46395),j=l(25034),L=l(22677),y=l(58356),Q=l(88959),T=l(272),K=l.n(T);const R=f,U=R;K()(f,"components",{QPage:q.A,QCard:w.A,QCardSection:A.A,QTable:F.A,QToggle:x.A,QInput:V.A,QCardActions:j.A,QBtn:L.A,QInnerLoading:y.A,QSpinnerFacebook:Q.A})}}]);