"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[6984],{66984:(a,t,e)=>{e.r(t),e.d(t,{default:()=>K});var l=e(51347),r=e(37763),s=e(34187),n=e(40404),o=e(10700),i=(e(60939),e(16461),e(56593),e(58094)),u=(e(7049),e(20247)),m=e(9428);const c={__name:"ChartAsrama",props:{asrama:Array,total:Number},emits:["slice-click"],setup(a,{emit:t}){m.t1.register(m.hE,m.m_,m.s$,m.Bs);const e=a,r=t,n=(0,l.EW)((()=>{const a=e.asrama.map((a=>a.asrama)),t=e.asrama.map((a=>a.jumlah)),l=i(t.length);return{labels:a,datasets:[{label:"Jumlah per Asrama",data:t,backgroundColor:l,borderColor:"#ffffff",borderWidth:2}]}})),o=(0,l.EW)((()=>({responsive:!0,plugins:{title:{display:!1,text:`Jumlah Penghuni: ${e.total}`},legend:{position:"right",labels:{generateLabels:a=>{const{labels:t,datasets:l}=a.data,r=l[0].data;return t.map(((t,s)=>{const n=r[s],o=(n/e.total*100).toFixed(2);return{text:`${t}: ${n} (${o}%)`,fillStyle:l[0].backgroundColor[s],strokeStyle:l[0].borderColor?.[s]||l[0].backgroundColor[s],lineWidth:1,hidden:a.getDatasetMeta(0).data[s].hidden,index:s}}))}}},tooltip:{callbacks:{title:a=>`Asrama ${a[0].label}`,label:a=>{const t=a.raw,l=(t/e.total*100).toFixed(1);return`${t} (${l}%)`}}}},onHover:(a,t)=>{if(t.length>0){const a=t[0].index;r("slice-click",e.asrama[a])}else r("slice-click",null)}})));function i(a){return Array.from({length:a},((t,e)=>{const l=Math.floor(360/a*e);return`hsl(${l}, 70%, 60%)`}))}return(a,t)=>((0,l.uX)(),(0,l.Wv)((0,s.R1)(u.Fq),{data:n.value,options:o.value},null,8,["data","options"]))}},d=c,p=d,g={__name:"ChartKamar",props:{kamar:Array},setup(a){m.t1.register(m.hE,m.m_,m.s$,m.E8,m.PP,m.kc);const t=a,e=(0,l.EW)((()=>t.kamar.reduce(((a,t)=>a+t.jumlah),0))),r=(0,l.EW)((()=>{const a=t.kamar.map((a=>a.kamar)),e=t.kamar.map((a=>a.jumlah)),l=o(e.length);return{labels:a,datasets:[{label:"Jumlah per Kamar",data:e,backgroundColor:l,borderColor:"#333",borderWidth:1}]}})),n=(0,l.EW)((()=>({responsive:!0,plugins:{title:{display:!0,text:`Jumlah Penghuni: ${e.value}`},legend:{display:!1},tooltip:{callbacks:{title:a=>`Kamar ${a[0].label}`,label:a=>{const t=a.raw,l=(t/e.value*100).toFixed(1);return`${t} (${l}%)`}}}},scales:{x:{title:{display:!0,text:"Kamar"}},y:{beginAtZero:!0,title:{display:!0,text:"Jumlah Penghuni"}}}})));function o(a){return Array.from({length:a},((t,e)=>{const l=Math.floor(360/a*e);return`hsl(${l}, 70%, 60%)`}))}return(a,t)=>((0,l.uX)(),(0,l.Wv)((0,s.R1)(u.yP),{data:r.value,options:n.value},null,8,["data","options"]))}},v=g,h=v,k={class:"tw:border tw:rounded-md tw:overflow-hidden"},b={key:0},f={class:"tw:flex tw:items-center tw:justify-center tw:gap-2 tw:max-w-md tw:mx-auto overflow-x-scroll tw:flex-wrap tw:md:flex-nowrap"},x={key:1},w={__name:"StatistikDomisili",setup(a){const t=(0,s.KR)(!1),e=(0,s.KR)([]),r=(0,s.KR)([]),n=(0,s.KR)(""),o=(0,l.EW)((()=>e.value.reduce(((a,t)=>a+t.jumlah),0)));(0,l.sV)((async()=>{t.value=!0;const a=await(0,i.A)({endPoint:"statistik/domisili",loading:t});a?.asrama&&(e.value=a.asrama,r.value=a.kamar),t.value=!1}));const u=(0,l.EW)((()=>n.value?r.value.filter((a=>a.kamar.startsWith(n.value))):r.value));function m(a){n.value=a?.asrama||""}return(a,r)=>{const s=(0,l.g2)("q-spinner-cube");return(0,l.uX)(),(0,l.CE)("div",k,[r[0]||(r[0]=(0,l.Lk)("div",{class:"tw:text-center tw:font-light tw:text-2xl tw:py-2 bg-green-7 text-green-11"}," Diagram Domisili Santri Aktif ",-1)),!t.value&&e.value.length?((0,l.uX)(),(0,l.CE)("div",b,[(0,l.Lk)("div",f,[(0,l.bF)(p,{asrama:e.value,total:o.value,onSliceClick:m},null,8,["asrama","total"]),(0,l.bF)(h,{kamar:u.value,total:o.value},null,8,["kamar","total"])])])):((0,l.uX)(),(0,l.CE)("p",x,[(0,l.bF)(s,{color:"green-12",size:"10em",class:"flex q-ma-lg q-mx-auto"})]))])}}};var y=e(71402),C=e(272),_=e.n(C);const A=w,E=A;_()(w,"components",{QSpinnerCube:y.A});const W={class:"flex flex-center q-my-md"},$={class:"q-ml-sm"},S={class:"no-margin",style:{"font-size":"1.5em"}},L={__name:"HomeIndex",setup(a){return(a,t)=>{const e=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(e,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",W,[(0,l.bF)(n.A,{border:6,class:"q-mr-sm",size:150}),(0,l.Lk)("div",$,[t[0]||(t[0]=(0,l.Lk)("div",{style:{"font-size":"1.5em"}},"Selamat Datang",-1)),t[1]||(t[1]=(0,l.Lk)("p",{class:"text-green-10 no-margin",style:{"font-size":"2em"}},[(0,l.eW)(" di "),(0,l.Lk)("span",{class:"text-weight-bold"},"ID Santri")],-1)),t[2]||(t[2]=(0,l.Lk)("p",{class:"text-italic no-margin",style:{"font-size":"1.2em"}}," Sistem Informasi ",-1)),(0,l.Lk)("p",S,(0,r.v_)((0,s.R1)(o.A).INS_DESC)+" "+(0,r.v_)((0,s.R1)(o.A).INS_NAME),1)])]),(0,l.bF)(E)])),_:1})}}};var q=e(75013);const F=L,K=F;_()(L,"components",{QPage:q.A})}}]);