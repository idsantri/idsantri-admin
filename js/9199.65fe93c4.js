"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9199],{69199:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Z});t(54227),t(91645),t(29400),t(35373),t(71470),t(15701),t(85801);var l=t(51347),n=t(37763),u=t(34187),s=t(58094),i=t(8633),o=t(76162),d=t(20675),c=t(47509),r=t(59678),m=t(12361),k=t(21209),p=t(90486);const b={key:0},v={__name:"IuranPaketForm",props:{data:{type:Object,required:!1,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(e,{emit:a}){const t=e,n=a,s=(0,u.KR)({}),v=(0,u.KR)(!1),g=(0,u.KR)([]);(0,l.sV)((async()=>{Object.assign(s.value,t.data),g.value=(0,o.A)().getByStateName("iuran")}));const f=e=>{const a=g.value.find((a=>a.val0===e));a&&(s.value.nominal=a.val1)},x=async()=>{const e=JSON.parse(JSON.stringify(s.value));delete e.id;let a=null;const t=!s.value.id;a=t?await(0,r.A)({endPoint:"iuran-paket",data:e,loading:v}):await(0,c.A)({endPoint:`iuran-paket/${s.value.id}`,data:e,confirm:!0,notify:!0,loading:v}),a&&(document.getElementById("btn-close-form").click(),n("successSubmit",a?.iuran_paket),n(t?"successCreate":"successUpdate",a?.iuran_paket))},h=async()=>{const e=s.value.id,a=await(0,d.A)({endPoint:`iuran-paket/${e}`,loading:v});a&&(document.getElementById("btn-close-form").click(),n("successDelete",e))};return(e,a)=>{const t=(0,l.g2)("q-spinner-cube"),n=(0,l.g2)("q-dialog"),u=(0,l.g2)("q-input"),o=(0,l.g2)("q-card-section"),d=(0,l.g2)("FormActions"),c=(0,l.g2)("q-form"),r=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.Wv)(r,{class:"full-width",style:{"max-width":"425px"}},{default:(0,l.k6)((()=>[(0,l.bF)(c,{onSubmit:(0,i.D$)(x,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(m.A,{title:"Input Paket Iuran","is-new":!s.value.id},null,8,["is-new"]),(0,l.bF)(o,null,{default:(0,l.k6)((()=>[v.value?((0,l.uX)(),(0,l.CE)("div",b,[(0,l.bF)(n,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(t,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.bF)(u,{dense:"",class:"",outlined:"",modelValue:s.value.urut,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.urut=e),label:"Nomor Urut",rules:[e=>!e||!isNaN(e)||"Hanya angka"]},null,8,["modelValue","rules"]),(0,l.bF)(u,{dense:"",class:"q-mt-sm",outlined:"",modelValue:s.value.paket,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.paket=e),required:"",label:"Nama Paket",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,l.bF)(p.A,{modelValue:s.value.item,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.value.item=e),f],url:"iuran",label:"Nama Iuran",class:"q-mt-sm"},null,8,["modelValue"]),(0,l.bF)(k.A,{dense:"",class:"q-mt-sm",outlined:"",modelValue:s.value.nominal,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.nominal=e),required:"",label:"Nominal",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"])])),_:1}),(0,l.bF)(d,{"btn-delete":!!s.value.id,onOnDelete:h},null,8,["btn-delete"])])),_:1})])),_:1})}}};var g=t(83341),f=t(53417),x=t(60222),h=t(30045),q=t(71402),F=t(46395),y=t(272),A=t.n(y);const _=v,V=_;A()(v,"components",{QCard:g.A,QForm:f.A,QCardSection:x.A,QDialog:h.A,QSpinnerCube:q.A,QInput:F.A});var L=t(78306);const C=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"text-center"},"No"),(0,l.Lk)("th",{class:"text-left"},"Nama Paket"),(0,l.Lk)("th",{class:"text-left"},"Iuran"),(0,l.Lk)("th",{class:"text-right"},"Nominal"),(0,l.Lk)("th",{class:"text-center"},"Edit")])],-1),w={key:0},S={colspan:"7",class:"text-center bg-grey-1 no-padding"},Q={key:1},P=(0,l.Lk)("td",{colspan:"7",class:"text-center text-italic text-negative bg-red-2"},[(0,l.eW)(" Tidak ada data untuk ditampikan!"),(0,l.Lk)("br"),(0,l.eW)(" Silakan Tambahkan data baru! ")],-1),N=[P],I={key:2},R=(0,l.Lk)("td",{colspan:"7",class:"text-center text-italic text-negative bg-red-1"}," Pilih filter! ",-1),U=[R],E={class:"text-center"},K={class:"text-left"},X={class:"text-left"},D={class:"text-right"},B={class:"text-center"},O={class:"bg-green-1"},T=(0,l.Lk)("td",{class:"text-right text-italic",colspan:"3"}," Total ",-1),W={class:"text-right text-bold"},j=(0,l.Lk)("td",{class:"text-center"},null,-1),H={__name:"PageIndex",setup(e){const a=(0,u.KR)(!1),t=(0,u.KR)([]),i=(0,u.KR)(""),o=(0,u.KR)(!1),d=(0,u.KR)({});async function c(){const e=await(0,s.A)({endPoint:"iuran-paket",loading:a});e&&(t.value=e.iuran_paket)}function r(){const e=t.value.map((e=>e.paket));return Array.from(new Set(e))}function m(){return t.value.filter((e=>e.paket==i.value))}function k(){return m().reduce((function(e,a){return e+Number(a.nominal)}),0)}function p(){d.value={paket:i.value},o.value=!0}function b(e){d.value=e,o.value=!0}return(0,l.sV)((async()=>{await c()})),(e,u)=>{const s=(0,l.g2)("q-select"),v=(0,l.g2)("q-btn"),g=(0,l.g2)("q-card-section"),f=(0,l.g2)("q-spinner-facebook"),x=(0,l.g2)("q-markup-table"),h=(0,l.g2)("q-card"),q=(0,l.g2)("q-dialog"),F=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(F,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{class:"",style:{"max-width":"800px"}},{default:(0,l.k6)((()=>[(0,l.bF)(L.A,{title:"Pengaturan Paket Iuran",onOnReload:c}),(0,l.bF)(g,{class:"q-pa-sm flex justify-between"},{default:(0,l.k6)((()=>[(0,l.bF)(s,{label:"Pilih nama paket",dense:"",outlined:"",options:r(),loading:a.value,modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=e=>i.value=e),clearable:"",style:{width:"250px","min-width":"200px"}},null,8,["options","loading","modelValue"]),(0,l.bF)(v,{dense:"",icon:"add",label:"Baru",color:"green-10","no-caps":"",outline:"",class:"q-px-sm",title:"Buat/tambahkan data baru",onClick:u[1]||(u[1]=e=>p())})])),_:1}),(0,l.bF)(g,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(x,{flat:"",bordered:""},{default:(0,l.k6)((()=>[C,(0,l.Lk)("tbody",null,[a.value?((0,l.uX)(),(0,l.CE)("tr",w,[(0,l.Lk)("td",S,[(0,l.bF)(f,{color:"green",size:"md"})])])):t.value.length||a.value?i.value?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:3},(0,l.pI)(m(),((e,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[(0,l.Lk)("td",E,(0,n.v_)(e.urut),1),(0,l.Lk)("td",K,(0,n.v_)(e.paket),1),(0,l.Lk)("td",X,(0,n.v_)(e.item),1),(0,l.Lk)("td",D,(0,n.v_)(e.nominal.toRupiah()),1),(0,l.Lk)("td",B,[(0,l.bF)(v,{icon:"edit",flat:"",color:"green-10",onClick:a=>b(e)},null,8,["onClick"])])])))),128)):((0,l.uX)(),(0,l.CE)("tr",I,U)):((0,l.uX)(),(0,l.CE)("tr",Q,N))]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",O,[T,(0,l.Lk)("td",W,(0,n.v_)(k().toRupiah()),1),j])])])),_:1})])),_:1})])),_:1}),(0,l.bF)(q,{modelValue:o.value,"onUpdate:modelValue":u[4]||(u[4]=e=>o.value=e)},{default:(0,l.k6)((()=>[(0,l.bF)(V,{data:d.value,onSuccessSubmit:u[2]||(u[2]=e=>c()),onSuccessDelete:u[3]||(u[3]=e=>c())},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var $=t(75013),z=t(76941),J=t(22677),M=t(94362),G=t(88959);const Y=H,Z=Y;A()(H,"components",{QPage:$.A,QCard:g.A,QCardSection:x.A,QSelect:z.A,QBtn:J.A,QMarkupTable:M.A,QSpinnerFacebook:G.A,QDialog:h.A})}}]);