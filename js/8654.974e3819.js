"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[8654],{18654:(a,e,l)=>{l.r(e),l.d(e,{default:()=>ra});var t=l(51347),n=l(78306),s=l(37763),u=l(34187),d=l(60455),o=l(58094),r=l(5313),i=l(40423),c=l(22902);const m={key:0},v={key:1,class:"row"},p={class:"col-4 q-pr-sm"},b={class:"col"},g={class:"text-caption text-italic"},k={class:"q-mb-sm"},_={__name:"CardIdentitas",setup(a){const e=(0,d.lq)(),l=(0,d.rd)(),n=(0,u.KR)({}),_=(0,u.KR)(!1),q=(0,u.KR)(!1);async function F(a){a.id==e.params.id?n.value=a:l.push(`/personalia/${a.id}`)}async function f(){const a=await(0,o.A)({endPoint:`images/aparatur/${n.value.id}`});n.value.image=a.image_url}async function h(){const a=await(0,o.A)({endPoint:`aparatur/${e.params.id}`,loading:_});a&&(n.value=a.aparatur,await f())}const A=(0,t.EW)((()=>({Nama:`${n.value.nama?.toUpperCase()} (${n.value.sex?.toUpperCase()})`,Alamat:`${n.value.jl||" "} RT ${String(n.value.rt||0).padStart(3,0)} RW ${String(n.value.rw||0).padStart(3,"0")} ${n.value.desa||" "} ${n.value.kecamatan||" "} ${n.value.kabupaten||" "} ${n.value.provinsi||" "} ${n.value.kode_pos||" "}`.replace(/\s\s+/g," "),Kelahiran:`${n.value.tmp_lahir||"-"}, ${(0,r.H6)(n.value.tgl_lahir)}`,Telepon:n.value.telepon||"-",Email:n.value.email||"-"})));(0,t.sV)((async()=>{e.params.id&&await h()}));const C=(0,u.KR)(!1),y=a=>C.value=a;async function V(){C.value=!1,await f()}return(a,l)=>{const d=(0,t.g2)("q-toolbar-title"),o=(0,t.g2)("q-btn"),r=(0,t.g2)("q-toolbar"),f=(0,t.g2)("q-card-section"),Q=(0,t.g2)("q-spinner-cube"),w=(0,t.g2)("q-img"),x=(0,t.g2)("q-card"),S=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(x,{flat:"",bordered:"",class:""},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"bg-green-7 no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:(0,t.k6)((()=>l[4]||(l[4]=[(0,t.eW)(" Identitas ")]))),_:1}),(0,t.bF)(o,{dense:"",flat:"",class:"q-px-md q-mr-sm","no-caps":"",icon:"sync",color:"green-2",onClick:h}),(0,t.bF)(o,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:l[0]||(l[0]=a=>q.value=!0)})])),_:1})])),_:1}),(0,t.bF)(f,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[_.value?((0,t.uX)(),(0,t.CE)("div",m,[(0,t.bF)(Q,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",v,[(0,t.Lk)("div",p,[(0,t.bF)(w,{src:n.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),(0,t.bF)(o,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:l[1]||(l[1]=a=>C.value=!0)})]),(0,t.Lk)("div",b,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(A.value,((a,e)=>((0,t.uX)(),(0,t.CE)("div",{key:e},[(0,t.Lk)("div",g,(0,s.v_)(e),1),(0,t.Lk)("div",k,(0,s.v_)(a),1)])))),128))])]))])),_:1})])),_:1}),(0,t.bF)(S,{persistent:"",modelValue:q.value,"onUpdate:modelValue":l[3]||(l[3]=a=>q.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(c.A,{data:n.value,onSuccessSubmit:F,onSuccessDelete:l[2]||(l[2]=e=>a.$router.go(-1))},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(i.A,{"show-uploader":C.value,url:`/images/aparatur/${(0,u.R1)(e).params.id}`,"img-format":"webp",onUpdateUploader:y,onSuccessUpload:V},null,8,["show-uploader","url"])],64)}}};var q=l(83341),F=l(60222),f=l(66739),h=l(4629),A=l(22677),C=l(71402),y=l(87472),V=l(30045),Q=l(272),w=l.n(Q);const x=_,S=x;w()(_,"components",{QCard:q.A,QCardSection:F.A,QToolbar:f.A,QToolbarTitle:h.A,QBtn:A.A,QSpinnerCube:C.A,QImg:y.A,QDialog:V.A});var $=l(71492),K=l(8633),j=l(72085),R=l(20675),E=l(59678),U=l(47509),X=l(12361),I=l(92938),T=l(90486);const W={key:0},D={__name:"PersonaliaMadrasahForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(a,{emit:e}){const l=a,n=e,s=(0,u.KR)({}),d=(0,u.KR)(!1),o=(0,u.KR)([]),r=(0,u.KR)([]);(0,t.sV)((async()=>{Object.assign(s.value,l.data),r.value=(0,j.A)().getByStateName("tahun-ajaran"),o.value=(0,j.A)().getByStateName("tingkat-pendidikan")}));const i=async()=>{const a={aparatur_id:s.value.aparatur_id,jabatan:s.value.jabatan,th_ajaran_h:s.value.th_ajaran_h,tingkat_id:s.value.tingkat_id,kelas:s.value.kelas,ruang:s.value.ruang,keterangan:s.value.keterangan};let e=null;const l=!s.value.id;e=l?await(0,E.A)({endPoint:"aparatur-madrasah",data:a,loading:d}):await(0,U.A)({endPoint:`aparatur-madrasah/${s.value.id}`,data:a,confirm:!0,loading:d}),e&&(document.getElementById("btn-close-form").click(),n("successSubmit",e?.aparatur_madrasah),n(l?"successCreate":"successUpdate",e?.aparatur_madrasah))},c=async()=>{const a=s.value.id,e=await(0,R.A)({endPoint:`aparatur-madrasah/${a}`,loading:d});e&&(document.getElementById("btn-close-form").click(),n("successDelete",a))};return(a,e)=>{const l=(0,t.g2)("q-spinner-cube"),n=(0,t.g2)("q-dialog"),u=(0,t.g2)("q-input"),o=(0,t.g2)("q-card-section"),r=(0,t.g2)("FormActions"),m=(0,t.g2)("q-form"),v=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(v,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(m,{onSubmit:(0,K.D$)(i,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(X.A,{title:"Input Jabatan Madrasiyah","is-new":!s.value.id},null,8,["is-new"]),(0,t.bF)(o,null,{default:(0,t.k6)((()=>[d.value?((0,t.uX)(),(0,t.CE)("div",W,[(0,t.bF)(n,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(u,{dense:"",outlined:"",label:"Nama","model-value":s.value?.nama+" ("+s.value?.aparatur_id+")",disable:"",filled:""},null,8,["model-value"]),(0,t.bF)(T.A,{modelValue:s.value.jabatan,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.jabatan=a),url:"jabatan-madrasiyah",label:"Jabatan",class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,t.bF)(T.A,{modelValue:s.value.th_ajaran_h,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.th_ajaran_h=a),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"],selected:s.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),(0,t.bF)(I.A,{modelValue:s.value.tingkat_id,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.tingkat_id=a),class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"],selected:s.value.tingkat_id},null,8,["modelValue","rules","selected"]),(0,t.bF)(T.A,{modelValue:s.value.kelas,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.kelas=a),url:"kelas",label:"Kelas",class:"q-mt-sm"},null,8,["modelValue"]),(0,t.bF)(u,{dense:"",class:"q-mt-sm",outlined:"",label:"Ruang",modelValue:s.value.ruang,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.ruang=a)},null,8,["modelValue"]),(0,t.bF)(u,{dense:"",class:"q-mt-sm",outlined:"",label:"Keterangan",modelValue:s.value.keterangan,"onUpdate:modelValue":e[6]||(e[6]=a=>s.value.keterangan=a),autogrow:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{"btn-delete":!!s.value.id,onOnDelete:c},null,8,["btn-delete"])])),_:1})])),_:1})}}};var L=l(53417),P=l(46395);const B=D,H=B;w()(D,"components",{QCard:q.A,QForm:L.A,QCardSection:F.A,QDialog:V.A,QSpinnerCube:C.A,QInput:P.A});const J={key:0},N={key:1},z={key:0},O={class:"text-bold"},M={__name:"CardJabatan",setup(a){const e=(0,d.lq)(),l=(0,u.KR)(!1),n=(0,u.KR)([]),r=(0,u.KR)({}),i=(0,u.KR)(!1),c=(0,u.KR)({});async function m(){if(e.params.id){const a=await(0,o.A)({endPoint:`aparatur/${e.params.id}/madrasah`,loading:l});n.value=a.aparatur_madrasah,r.value=a.aparatur}}(0,t.sV)((async()=>{await m()}));const v=()=>{c.value={aparatur_id:r.value.id,nama:r.value.nama},i.value=!0},p=a=>{c.value=(0,$.I$)(n.value,a),c.value.nama=r.value.nama,i.value=!0};return(a,e)=>{const u=(0,t.g2)("q-toolbar-title"),d=(0,t.g2)("q-btn"),o=(0,t.g2)("q-toolbar"),r=(0,t.g2)("q-card-section"),b=(0,t.g2)("q-skeleton"),g=(0,t.g2)("q-item-label"),k=(0,t.g2)("q-item-section"),_=(0,t.g2)("q-item"),q=(0,t.g2)("q-list"),F=(0,t.g2)("q-card"),f=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(F,{flat:"",bordered:"",class:""},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"bg-green-7 no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:(0,t.k6)((()=>e[1]||(e[1]=[(0,t.eW)(" Jabatan ")]))),_:1}),(0,t.bF)(d,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Tambah","no-caps":"",icon:"add",color:"green-2",onClick:v})])),_:1})])),_:1}),(0,t.bF)(r,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",J,[(0,t.bF)(b,{height:"80px"})])):((0,t.uX)(),(0,t.CE)("div",N,[n.value.length?((0,t.uX)(),(0,t.Wv)(q,{key:1,bordered:"",separator:""},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(n.value,(a=>((0,t.uX)(),(0,t.Wv)(_,{key:a.id,class:"q-my-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bF)(g,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(a.th_ajaran_h)+" | "+(0,s.v_)(a.th_ajaran_m),1)])),_:2},1024),(0,t.bF)(g,{lines:"1"},{default:(0,t.k6)((()=>[(0,t.Lk)("span",O,(0,s.v_)(a.jabatan),1),(0,t.eW)("; "+(0,s.v_)(a.tingkat)+(0,s.v_)(a.kelas?"; "+a.kelas:"")+" "+(0,s.v_)(a.ruang?"( "+a.ruang+")":""),1)])),_:2},1024),(0,t.bF)(g,{caption:"",class:"text-italic"},{default:(0,t.k6)((()=>[(0,t.eW)((0,s.v_)(a.keterangan||"-"),1)])),_:2},1024)])),_:2},1024),(0,t.bF)(k,{side:""},{default:(0,t.k6)((()=>[(0,t.bF)(d,{icon:"edit",round:"",dense:"",color:"green",onClick:e=>p(a.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):((0,t.uX)(),(0,t.CE)("div",z,e[2]||(e[2]=[(0,t.Lk)("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[(0,t.eW)(" Tidak data data untuk ditampilkan."),(0,t.Lk)("br"),(0,t.eW)("Silakan tambahkah data! ")],-1)])))]))])),_:1})])),_:1}),(0,t.bF)(f,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(H,{data:c.value,onSuccessSubmit:m,onSuccessDelete:m},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var G=l(70981),Y=l(53766),Z=l(22589),aa=l(14958),ea=l(99039);const la=M,ta=la;w()(M,"components",{QCard:q.A,QCardSection:F.A,QToolbar:f.A,QToolbarTitle:h.A,QBtn:A.A,QSkeleton:G.Ay,QList:Y.A,QItem:Z.A,QItemSection:aa.A,QItemLabel:ea.A,QDialog:V.A});const na={class:"col-12 col-md-6 q-pa-sm"},sa={class:"col-12 col-md-6 q-pa-sm"},ua={__name:"PersonaliaDetail",setup(a){return(a,e)=>{const l=(0,t.g2)("q-card-section"),s=(0,t.g2)("q-card"),u=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(u,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(n.A,{title:"Detail Personalia",showReload:!1}),(0,t.bF)(l,{class:"row no-padding",style:{"max-width":"1200px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("div",na,[(0,t.bF)(S)]),(0,t.Lk)("div",sa,[(0,t.bF)(ta)])])),_:1})])),_:1})])),_:1})}}};var da=l(75013);const oa=ua,ra=oa;w()(ua,"components",{QPage:da.A,QCard:q.A,QCardSection:F.A})}}]);