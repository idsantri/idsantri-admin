"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9713],{19713:(a,e,l)=>{l.r(e),l.d(e,{default:()=>K});var t=l(51347),n=l(37763),i=l(58094),s=l(59678),d=l(78306),o=l(31284),r=l(50657),u=l(15469),c=l(34187),m=l(60455);const g={class:"row"},h={class:"col-7 q-mt-sm"},b={class:"col-5 q-mt-sm"},p={class:"vertical-top"},k={class:"vertical-top"},_={__name:"PageTagihan",setup(a){const e=(0,c.KR)(""),l=(0,c.KR)(!1),{params:_}=(0,m.lq)(),v=(0,c.KR)([]),f=(0,c.KR)([]),q=(0,c.KR)([]),w=(0,c.KR)(!1),A=(0,c.KR)({th_ajaran_h:_.th_ajaran_h||""});async function F(){const a=await(0,i.A)({endPoint:"kelas",params:{th_ajaran_h:_.th_ajaran_h,tingkat_id:_.tingkat_id,kelas:_.kelas},loading:l});a&&(v.value=a.murid)}async function x(){if(!f.value.length)return(0,u.UG)("Pilih murid terlebih dahulu");if(!q.value.length)return(0,u.UG)("Pilih paket terlebih dahulu");const a={th_ajaran_h:A.value.th_ajaran_h,santri_id:f.value.map((a=>a.santri_id)),paket:q.value.map((a=>({item:a.item,nominal:a.nominal})))};await(0,s.A)({endPoint:"iuran/paket",loading:w,data:a,message:'PERHATIAN<br/>\n\t\t\tJika item iuran sudah terdapat dalam daftar maka akan diabaikan.\n\t\t\t<hr/>\n\t\t\t<span style="color:red">Kesalahan akibat aksi ini sulit ditelusuri dan harus diperbaiki satu per satu.</span>'})}(0,t.sV)((async()=>{_.th_ajaran_h&&_.tingkat_id&&_.kelas?await F():v.value=[]}));const L=[{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"domisili",label:"Domisili",align:"left",field:"domisili",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"wali",label:"Wali",align:"left",field:a=>`${a.wali_nama} (${a.wali_sex}; ${a.wali_status})`,sortable:!0}];return(a,i)=>{const s=(0,t.g2)("q-toggle"),u=(0,t.g2)("q-table"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-input"),_=(0,t.g2)("q-btn"),F=(0,t.g2)("q-card-actions"),V=(0,t.g2)("q-spinner-facebook"),j=(0,t.g2)("q-inner-loading"),y=(0,t.g2)("q-card"),Q=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(Q,{class:"q-pa-sm",style:{"min-width":"1024px"}},{default:(0,t.k6)((()=>[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(d.A,{"show-reload":!1,title:"Modul Tagihan"}),(0,t.bF)(c,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(o.A,{bordered:"",flat:"","show-ujian-ke":!1,"start-url":"/iuran/tagihan",onDataFilter:i[0]||(i[0]=a=>e.value=a)}),(0,t.Lk)("div",g,[(0,t.Lk)("div",h,[(0,t.bF)(u,{flat:"",bordered:"","table-header-class":"bg-green-2 text-green-10 text-subtitle1",class:"dt",rows:v.value,columns:L,loading:l.value,"row-key":"id",selection:"multiple",selected:f.value,"onUpdate:selected":i[1]||(i[1]=a=>f.value=a),"rows-per-page-options":[0],"hide-bottom":"",style:{height:"635px"},"virtual-scroll":""},{"header-selection":(0,t.k6)((a=>[(0,t.bF)(s,{modelValue:a.selected,"onUpdate:modelValue":e=>a.selected=e,color:"green-7","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"])])),"body-selection":(0,t.k6)((a=>[(0,t.bF)(s,{modelValue:a.selected,"onUpdate:modelValue":e=>a.selected=e,color:"green-5","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["rows","loading","selected"])]),(0,t.Lk)("div",b,[(0,t.bF)(y,{bordered:"",flat:"",class:"q-ml-sm scroll",style:{height:"635px"}},{default:(0,t.k6)((()=>[(0,t.bF)(c,{class:"q-px-sm q-py-md bg-green-2 text-green-10 text-subtitle2"},{default:(0,t.k6)((()=>i[4]||(i[4]=[(0,t.eW)(" Buat Tagihan Massal ")]))),_:1}),(0,t.bF)(c,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",p,[i[5]||(i[5]=(0,t.Lk)("td",{class:"text-no-wrap text-italic q-pr-md"}," Jumlah Murid ",-1)),(0,t.Lk)("td",null,(0,n.v_)(v.value.length),1)]),(0,t.Lk)("tr",k,[i[6]||(i[6]=(0,t.Lk)("td",{class:"text-no-wrap text-italic q-pr-md"}," Terpilih ",-1)),(0,t.Lk)("td",null,(0,n.v_)(f.value.length)+" santri "+(0,n.v_)(f.value.map((a=>a.santri_id))),1)])])])])),_:1}),(0,t.bF)(c,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(m,{label:"Tahun Ajaran",outlined:"",dense:"",modelValue:A.value.th_ajaran_h,"onUpdate:modelValue":i[2]||(i[2]=a=>A.value.th_ajaran_h=a),disable:""},null,8,["modelValue"]),(0,t.bF)(r.A,{class:"q-mt-sm",onOnInput:i[3]||(i[3]=a=>q.value=a)})])),_:1}),(0,t.bF)(F,{class:"q-pa-sm bg-green-6 absolute-bottom",align:"right"},{default:(0,t.k6)((()=>[(0,t.bF)(_,{label:"simpan",outline:"",color:"green-10",class:"bg-green-11","no-caps":"",icon:"save",onClick:x})])),_:1}),(0,t.bF)(j,{showing:w.value},{default:(0,t.k6)((()=>[(0,t.bF)(V,{color:"green-6",size:"6em"})])),_:1},8,["showing"])])),_:1})])])])),_:1})])),_:1})])),_:1})}}};var v=l(75013),f=l(83341),q=l(60222),w=l(27010),A=l(55725),F=l(46395),x=l(25034),L=l(22677),V=l(58356),j=l(88959),y=l(272),Q=l.n(y);const T=_,K=T;Q()(_,"components",{QPage:v.A,QCard:f.A,QCardSection:q.A,QTable:w.A,QToggle:A.A,QInput:F.A,QCardActions:x.A,QBtn:L.A,QInnerLoading:V.A,QSpinnerFacebook:j.A})}}]);