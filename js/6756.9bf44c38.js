"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[6756],{76756:(e,a,t)=>{t.r(a),t.d(a,{default:()=>K});var l=t(51347),s=t(34187),n=t(95455),u=t(23336),d=t(30528),i=t(69463),o=t(58094),c=t(8633),r=t(59678),m=t(47509),v=t(20675),p=t(90486);const g={key:0},b={__name:"StatusForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(e,{emit:a}){const t=e,n=a,u=(0,s.KR)({}),d=(0,s.KR)(!1);(0,l.sV)((async()=>{Object.assign(u.value,t.data)}));const i=async()=>{const e={santri_id:u.value.santri_id,status:u.value.status,keterangan:u.value.keterangan};let a=null;const t=!u.value.id;a=t?await(0,r.A)({endPoint:"status",data:e,loading:d}):await(0,m.A)({endPoint:`status/${u.value.id}`,data:e,confirm:!0,notify:!0,loading:d}),a&&(document.getElementById("btn-close-form").click(),n("successSubmit",a?.status),n(t?"successCreate":"successUpdate",a?.status))},o=async()=>{const e=u.value.id,a=await(0,v.A)({endPoint:`status/${e}`,loading:d});a&&(document.getElementById("btn-close-form").click(),n("successDelete",e))};return(e,a)=>{const t=(0,l.g2)("FormHeader"),s=(0,l.g2)("q-spinner-cube"),n=(0,l.g2)("q-dialog"),r=(0,l.g2)("q-input"),m=(0,l.g2)("q-card-section"),v=(0,l.g2)("FormActions"),b=(0,l.g2)("q-form"),y=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.Wv)(y,{class:"full-width",style:{"max-width":"425px"}},{default:(0,l.k6)((()=>[(0,l.bF)(b,{onSubmit:(0,c.D$)(i,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(t,{title:"Input Status","is-new":!u.value.id},null,8,["is-new"]),(0,l.bF)(m,null,{default:(0,l.k6)((()=>[d.value?((0,l.uX)(),(0,l.CE)("div",g,[(0,l.bF)(n,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=e=>d.value=e),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(s,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.bF)(r,{dense:"",outlined:"",label:"Nama","model-value":u.value?.nama+" ("+u.value?.santri_id+")",disable:"",filled:""},null,8,["model-value"]),(0,l.bF)(p.A,{modelValue:u.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value.status=e),url:"status",label:"Status *",class:"q-mt-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,l.bF)(r,{dense:"",class:"q-mt-sm",outlined:"",label:"Keterangan",modelValue:u.value.keterangan,"onUpdate:modelValue":a[2]||(a[2]=e=>u.value.keterangan=e),autogrow:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(v,{"btn-delete":!!u.value.id,onOnDelete:o},null,8,["btn-delete"])])),_:1})])),_:1})}}};var y=t(83341),_=t(53417),k=t(60222),F=t(30045),f=t(71402),q=t(46395),A=t(272),S=t.n(A);const V=b,w=V;S()(b,"components",{QCard:y.A,QForm:_.A,QCardSection:k.A,QDialog:F.A,QSpinnerCube:f.A,QInput:q.A});var C=t(60455);const h={__name:"SantriStatus",setup(e){const a=(0,s.KR)(!1),t=(0,s.KR)(!1),c=(0,s.KR)({}),r=(0,s.KR)([]),m=(0,l.WQ)("santri"),{params:v}=(0,C.lq)();async function p(){const e=await(0,o.A)({endPoint:"status",loading:a,params:{santri_id:v.id}});e.status&&(r.value=e.status)}const g=(0,l.EW)((()=>r.value.map((e=>({Tanggal:(0,u.Yq)(e.created_at,"dd-MM-yyyy")+" | "+(0,d.jh)((0,u.Yq)(e.created_at,"yyyy-MM-dd")),Status:e.status,Keterangan:e.keterangan||"-",id:e.id})))));(0,l.sV)((async()=>{await p()}));const b=()=>{c.value={santri_id:m.id,nama:m.nama},t.value=!0},y=({id:e})=>{c.value=(0,i.I$)(r,e),c.value.santri_id=m.id,c.value.nama=m.nama,t.value=!0};return(e,u)=>{const d=(0,l.g2)("q-dialog");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(n.A,{data:g.value,spinner:a.value,onAdd:b,onEdit:y},null,8,["data","spinner"]),(0,l.bF)(d,{modelValue:t.value,"onUpdate:modelValue":u[3]||(u[3]=e=>t.value=e)},{default:(0,l.k6)((()=>[(0,l.bF)(w,{data:c.value,onSuccessDelete:u[0]||(u[0]=e=>(0,s.R1)(i.ST)(r.value,e)),onSuccessCreate:u[1]||(u[1]=e=>r.value.push(e)),onSuccessUpdate:u[2]||(u[2]=e=>(0,s.R1)(i.B1)(r.value,e.id,e))},null,8,["data"])])),_:1},8,["modelValue"])])}}},Q=h,K=Q;S()(h,"components",{QDialog:F.A})}}]);