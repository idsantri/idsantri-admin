"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[8958],{28958:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ie});var t=a(51347),s=a(78306),n=(a(60939),a(44520),a(37763)),i=a(34187),o=a(58094),d=(a(16461),a(30705)),r=a(81730);const u=(0,d.nY)("mutasi-domisili",{state:()=>({santri:[],newFilter:{domisili:""}}),getters:{getSantri:e=>e.santri},actions:{resetSantri(){this.santri=[]},addSantri(e){this.resetSantri(),e.forEach((e=>{this.santri.push({id:e.id,santri_id:e.id,nama:e.nama,domisili:e.domisili,tingkat_id:e.tingkat_id,tingkat:e.tingkat,kelas:e.kelas,new_domisili:"",new_keterangan:"",proses:!1})}))},getProsesTrue(){return this.santri.filter((e=>1==e.proses))},getProsesFalse(){return this.santri.filter((e=>0==e.proses))},prosesTrue(e){if(!this.newFilter.domisili)return(0,r.UG)("Tentukan domisili baru");const l=this.santri.findIndex((l=>l.id===e)),a=this.santri[l];a.proses=!0,a.new_domisili=this.newFilter.domisili,a.new_keterangan="Mutasi Domisili"},prosesFalse(e){const l=this.santri.findIndex((l=>l.id===e)),a=this.santri[l];a.proses=!1,a.new_domisili=null,a.new_keterangan=null},deleteTrueProses(){const e=[];this.santri.forEach((l=>{l.proses||e.push(l)})),this.santri=e}},persist:!0});var c=a(90486),g=a(92938);const k={class:"text-right"},m={class:"text-center"},b={class:"text-right"},p={__name:"LeftTable",props:{onLoading:{type:Boolean,default:!1}},setup(e){const l=e,a=(0,i.lW)((()=>l.onLoading)),s=(0,i.KR)(!1),o=u(),d=(0,t.EW)((()=>o.getProsesFalse()));function r(){const e=d.value.length;if(!e)return;let l=0;s.value=!0,d.value.forEach((a=>{setTimeout((()=>{o.prosesTrue(a.id),l++,l===e&&(s.value=!1)}),500)}))}return(e,l)=>{const u=(0,t.g2)("q-btn"),c=(0,t.g2)("q-spinner-bars"),g=(0,t.g2)("q-inner-loading"),p=(0,t.g2)("q-markup-table");return(0,t.uX)(),(0,t.Wv)(p,{flat:"",bordered:"",style:{height:"550px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[l[0]||(l[0]=(0,t.Lk)("th",{class:"text-center"},"ID Santri",-1)),l[1]||(l[1]=(0,t.Lk)("th",{class:"text-left"},"Nama",-1)),l[2]||(l[2]=(0,t.Lk)("th",{class:"text-left"},"Domisili",-1)),l[3]||(l[3]=(0,t.Lk)("th",{class:"text-left"},"Kelas",-1)),l[4]||(l[4]=(0,t.Lk)("th",{class:"text-left"},"Tingkat",-1)),(0,t.Lk)("th",k,[(0,t.bF)(u,{icon:"keyboard_double_arrow_right",dense:"",color:"green-10",glossy:"",class:"text-green-11",disable:!d.value.length,onClick:r},null,8,["disable"])])])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.value,((e,l)=>((0,t.uX)(),(0,t.CE)("tr",{key:l},[(0,t.Lk)("td",m,(0,n.v_)(e.id),1),(0,t.Lk)("td",null,(0,n.v_)(e.nama),1),(0,t.Lk)("td",null,(0,n.v_)(e.domisili),1),(0,t.Lk)("td",null,(0,n.v_)(e.kelas),1),(0,t.Lk)("td",null,(0,n.v_)(e.tingkat),1),(0,t.Lk)("td",b,[(0,t.bF)(u,{icon:"arrow_right",dense:"",outline:"",color:"green-10",glossy:"",onClick:l=>(0,i.R1)(o).prosesTrue(e.id)},null,8,["onClick"])])])))),128))]),(0,t.bF)(g,{showing:a.value||s.value},{default:(0,t.k6)((()=>[(0,t.bF)(c,{size:"4em",color:"green"})])),_:1},8,["showing"])])),_:1})}}};var _=a(94362),v=a(22677),f=a(58356),h=a(40585),F=a(272),q=a.n(F);const L=p,A=L;q()(p,"components",{QMarkupTable:_.A,QBtn:v.A,QInnerLoading:f.A,QSpinnerBars:h.A});const w={class:"row"},x={class:"text-caption text-italic"},Q={__name:"LeftCard",setup(e){const l=(0,i.KR)({tingkat_id:"",kelas:"",domisili:""}),a=u(),s=(0,i.KR)(!1),d=(0,t.EW)((()=>a.getProsesFalse()));function r(){const e=document.querySelectorAll("div.q-field__bottom.row.items-start.q-field__bottom");e.forEach((e=>e.remove()))}async function k(e){const l=await(0,o.A)({endPoint:"mutasi/not",params:e,loading:s});a.addSantri(l.santri)}return(0,t.sV)((()=>{r()})),(0,t.wB)((()=>l.value.tingkat_id),(e=>{e&&(l.value.kelas="",l.value.domisili="")})),(0,t.wB)((()=>l.value.kelas),(async e=>{e&&(l.value.domisili="")})),(0,t.wB)((()=>l.value.domisili),(async e=>{e&&(l.value.tingkat_id="",l.value.kelas="")})),(0,t.wB)(l,(async e=>{a.resetSantri(),e.tingkat_id&&e.kelas?await k({tingkat_id:e.tingkat_id,kelas:e.kelas}):e.domisili&&await k({domisili:e.domisili})}),{deep:!0}),(e,a)=>{const i=(0,t.g2)("q-toolbar-title"),o=(0,t.g2)("q-btn"),r=(0,t.g2)("q-toolbar"),u=(0,t.g2)("q-card-section"),k=(0,t.g2)("q-separator"),m=(0,t.g2)("q-space"),b=(0,t.g2)("q-card-actions"),p=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(p,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-pa-sm bg-green-7"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"text-subtitle1"},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)(" Data Santri ")]))),_:1}),(0,t.bF)(o,{icon:"sync",dense:"",flat:"",class:"q-mr-xs",onClick:e=>null,disable:""})])),_:1})])),_:1}),(0,t.bF)(u,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",w,[(0,t.bF)(g.A,{modelValue:l.value.tingkat_id,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.tingkat_id=e),label:"Tingkat Pendidikan",class:"col no-padding q-mr-md",hint:null},null,8,["modelValue"]),(0,t.bF)(c.A,{modelValue:l.value.kelas,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.kelas=e),url:"kelas",label:"Kelas",class:"col no-padding",disable:!l.value.tingkat_id},null,8,["modelValue","disable"])]),(0,t.bF)(c.A,{modelValue:l.value.domisili,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.domisili=e),url:"domisili",label:"Domisili",class:"q-mt-sm no-padding"},null,8,["modelValue"])])),_:1}),(0,t.bF)(k),(0,t.bF)(u,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(A,{"on-loading":s.value},null,8,["on-loading"])])),_:1}),(0,t.bF)(k),(0,t.bF)(b,{class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",x,[(0,t.eW)(" Total: "+(0,n.v_)(d.value?.length||0)+" santri",1),a[4]||(a[4]=(0,t.Lk)("br",null,null,-1)),a[5]||(a[5]=(0,t.eW)(" Hanya menampilkan santri yang statusnya “Aktif” dan belum masuk ke tabel mutasi "))]),(0,t.bF)(m),a[6]||(a[6]=(0,t.Lk)("div",null,null,-1))])),_:1})])),_:1})}}};var y=a(83341),C=a(60222),T=a(66739),V=a(4629),S=a(86915),R=a(25034),B=a(5873),E=a(27861);const W=Q,P=W;q()(Q,"components",{QCard:y.A,QCardSection:C.A,QToolbar:T.A,QToolbarTitle:V.A,QBtn:v.A,QSeparator:S.A,QCardActions:R.A,QSpace:B.A,QField:E.A});a(7049);var K=a(24497);const D={class:"text-left"},I={class:"text-right"},X={class:"text-left"},U={class:"text-right"},M={__name:"RightTable",props:{onLoading:{type:Boolean,default:!1}},setup(e){const l=e,a=u(),s=(0,t.EW)((()=>a.getProsesTrue())),o=(0,i.KR)(!1),d=(0,i.lW)((()=>l.onLoading)),r=(0,i.KR)({}),c=(0,i.KR)(!1);function g(){const e=s.value.length;if(!e)return;let l=0;o.value=!0,s.value.forEach((t=>{setTimeout((()=>{a.prosesFalse(t.id),l++,l===e&&(o.value=!1)}),500)}))}function k(e){r.value=e,c.value=!0}return(e,l)=>{const u=(0,t.g2)("q-btn"),m=(0,t.g2)("q-spinner-bars"),b=(0,t.g2)("q-inner-loading"),p=(0,t.g2)("q-markup-table"),_=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(p,{flat:"",bordered:"",style:{height:"550px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",D,[(0,t.bF)(u,{icon:"keyboard_double_arrow_left",dense:"",color:"green-10",glossy:"",class:"text-green-11",disable:!s.value.length,onClick:g},null,8,["disable"])]),l[1]||(l[1]=(0,t.Lk)("th",{class:"text-left"},"Nama",-1)),l[2]||(l[2]=(0,t.Lk)("th",{class:"text-left"},"Domisili Asal",-1)),l[3]||(l[3]=(0,t.Lk)("th",{class:"text-left"},"Domisili Baru *",-1)),l[4]||(l[4]=(0,t.Lk)("th",{class:"text-left"},"Keterangan",-1)),(0,t.Lk)("th",I,[(0,t.bF)(u,{icon:"edit",dense:"",flat:"",disable:"",color:"green-10"})])])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(s.value,((e,l)=>((0,t.uX)(),(0,t.CE)("tr",{key:l},[(0,t.Lk)("td",X,[(0,t.bF)(u,{icon:"arrow_left",dense:"",outline:"",color:"green-10",glossy:"",onClick:l=>(0,i.R1)(a).prosesFalse(e.id)},null,8,["onClick"])]),(0,t.Lk)("td",null,(0,n.v_)(e.nama),1),(0,t.Lk)("td",null,(0,n.v_)(e.domisili),1),(0,t.Lk)("td",null,(0,n.v_)(e.new_domisili),1),(0,t.Lk)("td",null,(0,n.v_)(e.new_keterangan??"-"),1),(0,t.Lk)("td",U,[(0,t.bF)(u,{icon:"edit",dense:"",flat:"",color:"green-10",onClick:l=>k(e)},null,8,["onClick"])])])))),128))]),(0,t.bF)(b,{showing:d.value||o.value},{default:(0,t.k6)((()=>[(0,t.bF)(m,{size:"4em",color:"green"})])),_:1},8,["showing"])])),_:1}),(0,t.bF)(_,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(K.A,{data:r.value},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var z=a(30045);const H=M,N=H;q()(M,"components",{QMarkupTable:_.A,QBtn:v.A,QInnerLoading:f.A,QSpinnerBars:h.A,QDialog:z.A});var G=a(59678);const Y={class:"row"},j={class:"text-caption text-italic"},J={__name:"RightCard",setup(e){const l=u(),{newFilter:a}=(0,d.bP)(l),s=(0,t.EW)((()=>l.getProsesTrue())),o=(0,i.KR)(!1);function r(){const e=document.querySelectorAll("div.q-field__bottom.row.items-start.q-field__bottom");e.forEach((e=>e.remove()))}async function g(){const e=s.value.map((e=>({santri_id:e.santri_id,new_domisili:e.new_domisili,new_keterangan:e.new_keterangan}))),a={santri:e},t=await(0,G.A)({endPoint:"mutasi",loading:o,data:a});t&&l.deleteTrueProses()}return(0,t.sV)((()=>{r()})),(e,l)=>{const d=(0,t.g2)("q-toolbar-title"),r=(0,t.g2)("q-btn"),u=(0,t.g2)("q-toolbar"),k=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-select"),b=(0,t.g2)("q-separator"),p=(0,t.g2)("q-space"),_=(0,t.g2)("q-card-actions"),v=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(v,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"q-pa-sm bg-green-7"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"text-subtitle1"},{default:(0,t.k6)((()=>l[3]||(l[3]=[(0,t.eW)(" Data Mutasi ")]))),_:1}),(0,t.bF)(r,{icon:"sync",dense:"",flat:"",class:"q-mr-xs",onClick:e=>null,disable:""})])),_:1})])),_:1}),(0,t.bF)(k,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Y,[(0,t.bF)(m,{modelValue:(0,i.R1)(a).tingkat_id,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,i.R1)(a).tingkat_id=e),label:"",class:"col no-padding q-mr-md",filled:"",outlined:"",dense:"",disable:""},null,8,["modelValue"]),(0,t.bF)(m,{modelValue:(0,i.R1)(a).kelas,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,i.R1)(a).kelas=e),label:"",class:"col no-padding",filled:"",outlined:"",dense:"",disable:""},null,8,["modelValue"])]),(0,t.bF)(c.A,{modelValue:(0,i.R1)(a).domisili,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,i.R1)(a).domisili=e),url:"domisili",label:"Domisili Baru",class:"q-mt-sm no-padding"},null,8,["modelValue"])])),_:1}),(0,t.bF)(b),(0,t.bF)(k,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(N,{"on-loading":o.value},null,8,["on-loading"])])),_:1}),(0,t.bF)(b),(0,t.bF)(_,{class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",j,[(0,t.eW)(" Total: "+(0,n.v_)(s.value?.length||0)+" santri",1),l[4]||(l[4]=(0,t.Lk)("br",null,null,-1)),l[5]||(l[5]=(0,t.eW)(" Teliti kembali data domisili baru! "))]),(0,t.bF)(p),(0,t.Lk)("div",null,[(0,t.bF)(r,{label:"Simpan","no-caps":"",icon:"save",color:"green-10",class:"text-green-11",onClick:g,disable:!s.value.length>0},null,8,["disable"])])])),_:1})])),_:1})}}};var O=a(76941);const Z=J,$=Z;q()(J,"components",{QCard:y.A,QCardSection:C.A,QToolbar:T.A,QToolbarTitle:V.A,QBtn:v.A,QSelect:O.A,QSeparator:S.A,QCardActions:R.A,QSpace:B.A,QField:E.A});const ee={class:"row"},le={class:"col q-pa-sm"},ae={class:"col q-pa-sm"},te={__name:"ProsesiIndex",setup(e){return(0,t.sV)((()=>{const e=document.getElementById("toggle-drawer");e&&e.click()})),(e,l)=>{const a=(0,t.g2)("q-btn"),n=(0,t.g2)("q-card-section"),i=(0,t.g2)("q-card"),o=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(o,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"",style:{"min-width":"1200px"}},{default:(0,t.k6)((()=>[(0,t.bF)(s.A,{title:"Modul Mutasi Domisili",showReload:!1},{right:(0,t.k6)((()=>[(0,t.bF)(a,{icon:"visibility",label:"Hasil Mutasi",dense:"",outline:"","no-caps":"",class:"q-ml-sm q-px-sm",to:"/mutasi/result"}),(0,t.bF)(a,{disable:"",flat:"",dense:"",icon:"more_vert",class:"q-ml-sm",color:"green-11"})])),_:1}),(0,t.bF)(n,{class:"no-padding"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ee,[(0,t.Lk)("div",le,[(0,t.bF)(P)]),(0,t.Lk)("div",ae,[(0,t.bF)($)])])])),_:1})])),_:1})])),_:1})}}};var se=a(75013);const ne=te,ie=ne;q()(te,"components",{QPage:se.A,QCard:y.A,QBtn:v.A,QCardSection:C.A})}}]);