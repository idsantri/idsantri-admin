"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[4822],{54822:(a,e,l)=>{l.r(e),l.d(e,{default:()=>se});var t=l(51347),n=l(34187),u=l(60455),s=l(58094),i=l(37763),o=l(8633),d=l(47509),r=l(23336),c=l(76162),m=l(20675),v=l(59678),b=l(21209),k=l(55123),g=l(90486);const p={key:0},_={__name:"IuranForm",props:{data:{type:Object,required:!1,default:()=>{}},disableSantriId:{type:Boolean,default:!1},disableThAjaran:{type:Boolean,default:!1}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(a,{emit:e}){const l=a,u=e,s=(0,n.KR)({}),i=(0,n.KR)(!1),r=(0,n.KR)([]),_=(0,n.KR)([]);(0,t.sV)((async()=>{Object.assign(s.value,l.data),r.value=(0,c.A)().getByStateName("tahun-ajaran"),_.value=(0,c.A)().getByStateName("iuran")}));const f=a=>{const e=_.value.find((e=>e.val0===a));e&&(s.value.nominal=e.val1)},h=async()=>{const a={santri_id:s.value.santri_id,th_ajaran_h:s.value.th_ajaran_h,item:s.value.item,nominal:s.value.nominal,via:s.value.via,keterangan:s.value.keterangan};let e=null;const l=!s.value.id;e=l?await(0,v.A)({endPoint:"iuran",data:a,loading:i}):await(0,d.A)({endPoint:`iuran/${s.value.id}`,data:a,confirm:!0,notify:!0,loading:i}),e&&(document.getElementById("btn-close-form").click(),u("successSubmit",e?.iuran),u(l?"successCreate":"successUpdate",e?.iuran))},F=async()=>{const a=s.value.id,e=await(0,m.A)({endPoint:`iuran/${a}`,loading:i});e&&(document.getElementById("btn-close-form").click(),u("successDelete",a))};return(a,e)=>{const n=(0,t.g2)("FormHeader"),u=(0,t.g2)("q-spinner-cube"),d=(0,t.g2)("q-dialog"),r=(0,t.g2)("q-input"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("FormActions"),v=(0,t.g2)("q-form"),_=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(_,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(v,{onSubmit:(0,o.D$)(h,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(n,{title:"Input Iuran","is-new":!s.value.id},null,8,["is-new"]),(0,t.bF)(c,null,{default:(0,t.k6)((()=>[i.value?((0,t.uX)(),(0,t.CE)("div",p,[(0,t.bF)(d,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(k.A,{"active-only":!0,onEmitInput:e[1]||(e[1]=a=>Object.assign(s.value,a)),data:l.data},null,8,["data"]),(0,t.bF)(g.A,{modelValue:s.value.th_ajaran_h,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.th_ajaran_h=a),url:"tahun-ajaran",label:"Tahun Ajaran",sort:"desc",class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"],selected:s.value.th_ajaran_h,disable:l.disableThAjaran},null,8,["modelValue","rules","selected","disable"]),(0,t.bF)(g.A,{modelValue:s.value.item,"onUpdate:modelValue":[e[3]||(e[3]=a=>s.value.item=a),f],url:"iuran",label:"Nama Iuran",class:"q-mt-sm"},null,8,["modelValue"]),(0,t.bF)(b.A,{dense:"",class:"q-mt-sm",outlined:"",modelValue:s.value.nominal,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.nominal=a),required:"",label:"Nominal",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,t.bo)((0,t.bF)(g.A,{modelValue:s.value.via,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.via=a),url:"metode-pembayaran",label:"Via",class:"q-mt-sm"},null,8,["modelValue"]),[[o.aG,s.value.id&&s.value.lunas]]),(0,t.bF)(r,{label:"Keterangan",modelValue:s.value.keterangan,"onUpdate:modelValue":e[6]||(e[6]=a=>s.value.keterangan=a),dense:"",outlined:"",class:"q-mt-sm",autogrow:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(m,{"btn-delete":!!s.value.id,onOnDelete:F},null,8,["btn-delete"])])),_:1})])),_:1})}}};var f=l(83341),h=l(53417),F=l(60222),q=l(30045),A=l(71402),y=l(46395),V=l(272),x=l.n(V);const w=_,C=w;x()(_,"components",{QCard:f.A,QForm:h.A,QCardSection:F.A,QDialog:q.A,QSpinnerCube:A.A,QInput:y.A});var Q=l(69463),L=l(92866),R=l(17904),S=l(90575),K=l(75605);const j={__name:"DropDownPrint",props:{data:{}},setup(a){const{loadingMain:e}=(0,n.QW)((0,S.A)()),l=(0,n.KR)(""),u=(0,n.KR)(!1),s=a,i=(0,n.KR)("");async function o(){await(0,R.A)({endPoint:`reports/iuran-card/download?${i.value}`,loading:e,fileName:"iuran-card",confirm:!0,message:"Download kartu iuran?"})}async function d(){await(0,R.A)({endPoint:`reports/iuran-cover/download?${i.value}`,loading:e,fileName:"iuran-cover",confirm:!0,message:"Download cover kartu iuran?"})}async function r(){await(0,R.A)({endPoint:`reports/iuran-kuitansi/download?${i.value}`,loading:e,fileName:"iuran-kuitansi",confirm:!0,message:"Download kuitansi iuran?"})}function c(){l.value=`reports/iuran-card/view?${i.value}`,u.value=!0}function m(){l.value=`reports/iuran-cover/view?${i.value}`,u.value=!0}function v(){l.value=`reports/iuran-kuitansi/view?${i.value}`,u.value=!0}return(0,t.sV)((()=>{i.value=new URLSearchParams(s.data).toString()})),(a,e)=>{const n=(0,t.g2)("q-item-label"),s=(0,t.g2)("q-item-section"),i=(0,t.g2)("q-btn"),b=(0,t.g2)("q-item"),k=(0,t.g2)("q-list"),g=(0,t.g2)("q-btn-dropdown"),p=(0,t.g2)("q-dialog"),_=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(g,{color:"green-11",label:"Cetak",icon:"print","no-caps":"",class:"text-green-10 q-px-md",dense:""},{default:(0,t.k6)((()=>[(0,t.bF)(k,null,{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.eW)("Kartu")])),_:1})])),_:1}),(0,t.bF)(s,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{icon:"download",flat:"",onClick:o})])),_:1}),(0,t.bF)(s,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{icon:"print",flat:"",onClick:c})])),_:1})])),_:1})),[[_]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.eW)("Cover")])),_:1})])),_:1}),(0,t.bF)(s,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{icon:"download",flat:"",onClick:d})])),_:1}),(0,t.bF)(s,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{icon:"print",flat:"",onClick:m})])),_:1})])),_:1})),[[_]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(b,null,{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.eW)("Kuitansi")])),_:1})])),_:1}),(0,t.bF)(s,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{icon:"download",flat:"",onClick:r})])),_:1}),(0,t.bF)(s,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(i,{icon:"print",flat:"",onClick:v})])),_:1})])),_:1})),[[_]])])),_:1})])),_:1}),(0,t.bF)(p,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(K.A,{url:l.value},null,8,["url"])])),_:1},8,["modelValue"])],64)}}};var I=l(73614),W=l(53766),X=l(22589),E=l(14958),U=l(99039),T=l(22677),P=l(61038);const D=j,$=D;x()(j,"components",{QBtnDropdown:I.A,QList:W.A,QItem:X.A,QItemSection:E.A,QItemLabel:U.A,QBtn:T.A,QDialog:q.A}),x()(j,"directives",{ClosePopup:P.A});const B={key:0},N={__name:"IuranLunasForm",props:{data:{type:Object,required:!0}},emits:["successSubmit","successUpdate"],setup(a,{emit:e}){const l=a,u=e,s=(0,n.KR)({}),i=(0,n.KR)(!1);(0,t.sV)((async()=>{Object.assign(s.value,l.data)}));const r=async()=>{const a={via:s.value.via},e=await(0,d.A)({endPoint:`iuran/${s.value.id}/lunas`,data:a,message:"Iuran/tagihan lunas?",notify:!0,loading:i});e&&(document.getElementById("btn-close-form").click(),u("successSubmit",e?.iuran),u("successUpdate",e?.iuran))};return(a,e)=>{const l=(0,t.g2)("FormHeader"),n=(0,t.g2)("q-spinner-cube"),u=(0,t.g2)("q-dialog"),d=(0,t.g2)("q-input"),c=(0,t.g2)("q-card-section"),m=(0,t.g2)("FormActions"),v=(0,t.g2)("q-form"),k=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(k,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(v,{onSubmit:(0,o.D$)(r,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(l,{title:"Set Iuran Lunas","is-new":!1}),(0,t.bF)(c,null,{default:(0,t.k6)((()=>[i.value?((0,t.uX)(),(0,t.CE)("div",B,[(0,t.bF)(u,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(d,{disable:"",label:"Nama",modelValue:s.value.nama,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.nama=a),dense:"",outlined:""},null,8,["modelValue"]),(0,t.bF)(d,{disable:"",label:"Tahun Ajaran",modelValue:s.value.th_ajaran_h,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.th_ajaran_h=a),dense:"",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),(0,t.bF)(d,{disable:"",label:"Nama Iuran",modelValue:s.value.item,"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.item=a),dense:"",outlined:"",class:"q-mt-sm"},null,8,["modelValue"]),(0,t.bF)(b.A,{disable:"",dense:"",class:"q-mt-sm",outlined:"",modelValue:s.value.nominal,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.nominal=a),required:"",label:"Nominal"},null,8,["modelValue"]),(0,t.bF)(g.A,{modelValue:s.value.via,"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.via=a),url:"metode-pembayaran",label:"Via",class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"])])),_:1}),(0,t.bF)(m,{"btn-delete":!1})])),_:1})])),_:1})}}},O=N,H=O;x()(N,"components",{QCard:f.A,QForm:h.A,QCardSection:F.A,QDialog:q.A,QSpinnerCube:A.A,QInput:y.A});const M={key:0},z={key:1},G={key:0},J={class:"",style:{"min-width":"250px","max-width":"300px"}},Y=(0,t.Lk)("td",{class:"text-caption text-italic q-pr-md"}," Tahun Ajaran ",-1),Z={class:"text-right"},aa=(0,t.Lk)("td",{class:"text-caption text-italic q-pr-md"}," Total Tagihan ",-1),ea={class:"text-right"},la=(0,t.Lk)("td",{class:"text-caption text-italic q-pr-md"}," Total Pembayaran ",-1),ta={class:"text-right"},na=(0,t.Lk)("td",{class:"text-caption text-italic q-pr-md"}," Sisa Tagihan ",-1),ua={class:"text-right text-weight-bold"},sa={class:"flex items-center q-gutter-x-sm"},ia={class:"q-card--bordered rounded-borders q-px-sm"},oa={class:"q-card--bordered rounded-borders q-px-sm"},da=(0,t.Lk)("em",null,"Lunas:",-1),ra=(0,t.Lk)("em",null,"Kasir:",-1),ca=(0,t.Lk)("em",null,"Via:",-1),ma=(0,t.Lk)("em",null,"Ket.:",-1),va={class:"text-subtitle1 text-weight-bold"},ba={class:"flex flex-center"},ka={key:1,class:"q-ma-lg"},ga=(0,t.Lk)("div",{class:"text-body2 text-italic text-center"}," Tidak ada data untuk ditampilkan! ",-1),pa=(0,t.Lk)("hr",null,null,-1),_a=(0,t.Lk)("div",{class:"text-weight-thin text-italic text-center"}," Klik angka tahun disamping, atau tambahkan data! ",-1),fa=[ga,pa,_a],ha={__name:"IuranSantriByTh",setup(a){const{params:e}=(0,u.lq)(),l=(0,n.KR)(e.thAjaranH),c=(0,n.KR)(e.id),m=(0,n.KR)(!1),v=(0,n.KR)([]),b=(0,n.KR)(!1),k=(0,n.KR)({}),g=(0,t.WQ)("santri"),p=(0,n.KR)(!1);function _(a){k.value=a,k.value.nama=g.value.nama,k.value.data_akhir=g.value.data_akhir,b.value=!0}async function f(){if(l.value&&c.value){const a=await(0,s.A)({endPoint:`iuran/santri/${c.value}`,params:{th_ajaran_h:l.value},loading:m});a&&(v.value=A(a.iuran))}}async function h(a,e,l,t){const n=await(0,d.A)({endPoint:`iuran/${l.id}/cetak`,confirm:!1,notify:!1});n||(v.value[t].cetak=1==a?0:1)}async function F(a,e,l,t){if(a)return q(l,t);const n=await(0,d.A)({endPoint:`iuran/${l.id}/not-lunas`,message:"Iuran/tagihan TIDAK lunas?",loading:m});n?v.value[t]=n.iuran:v.value[t].isLunas=1!=a}async function q(a,e){k.value=a,k.value.nama=g.value.nama,k.value.data_akhir=g.value.data_akhir,p.value=!0,v.value[e].isLunas=!1}function A(a){return a.sort(((a,e)=>null===a.lunas&&null===e.lunas?0:null===a.lunas?1:null===e.lunas?-1:new Date(a.lunas)-new Date(e.lunas))).map((a=>({...a,isLunas:!!a.lunas,show:!!a.hasOwnProperty("show")&&a.show})))}return(0,t.sV)((async()=>await f())),(0,t.wB)(v,(async(a,e)=>{await(0,t.dY)();const l=A([...a]);JSON.stringify(l)!==JSON.stringify(e)&&(v.value=l)}),{deep:!0}),(a,e)=>{const u=(0,t.g2)("q-spinner-cube"),s=(0,t.g2)("q-item-section"),d=(0,t.g2)("q-item"),g=(0,t.g2)("q-item-label"),f=(0,t.g2)("q-toggle"),q=(0,t.g2)("q-btn"),A=(0,t.g2)("q-separator"),y=(0,t.g2)("q-list"),V=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[m.value?((0,t.uX)(),(0,t.CE)("div",M,[(0,t.bF)(u,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",z,[v.value.length>0?((0,t.uX)(),(0,t.CE)("div",G,[(0,t.bF)(y,null,{default:(0,t.k6)((()=>[(0,t.bF)(d,{class:"q-pa-sm bg-green-11"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"flex"},{default:(0,t.k6)((()=>[(0,t.Lk)("table",J,[(0,t.Lk)("tr",null,[Y,(0,t.Lk)("td",Z,(0,i.v_)(l.value),1)]),(0,t.Lk)("tr",null,[aa,(0,t.Lk)("td",ea,(0,i.v_)((0,n.R1)(L.CG)(v.value).toRupiah()),1)]),(0,t.Lk)("tr",null,[la,(0,t.Lk)("td",ta,(0,i.v_)((0,n.R1)(L.hF)(v.value).toRupiah()),1)]),(0,t.Lk)("tr",null,[na,(0,t.Lk)("td",ua,(0,i.v_)((0,n.R1)(L.kb)(v.value).toRupiah()),1)])])])),_:1})])),_:1}),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.value,((a,e)=>((0,t.uX)(),(0,t.CE)("div",{key:e},[(0,t.bF)(d,{class:"q-px-sm",clickable:"",onClick:(0,o.D$)((e=>a.show=!a.show),["stop"])},{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(g,{overline:""},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(a.item),1)])),_:2},1024),(0,t.bF)(g,null,{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(a.nominal.toRupiah()),1)])),_:2},1024)])),_:2},1024),(0,t.bF)(s,{side:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",sa,[(0,t.Lk)("div",ia,[(0,t.bF)(f,{label:"Lunas",color:"green",class:"text-green-10",modelValue:a.isLunas,"onUpdate:modelValue":[e=>a.isLunas=e,(l,t)=>F(l,t,a,e)],"checked-icon":"check","unchecked-icon":"clear","true-value":!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Lk)("div",oa,[(0,t.bF)(f,{disable:!a.lunas,label:"Cetak",color:"green",class:"text-green-10",modelValue:a.cetak,"onUpdate:modelValue":[e=>a.cetak=e,(l,t)=>h(l,t,a,e)],"checked-icon":"check","unchecked-icon":"clear","true-value":1,"false-value":0},null,8,["disable","modelValue","onUpdate:modelValue"])]),(0,t.bF)(q,{icon:"edit",glossy:"",outline:"",dense:"",round:"",color:"green-8",unelevated:"",onClick:(0,o.D$)((e=>_(a)),["stop"])},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["onClick"]),a.show?((0,t.uX)(),(0,t.Wv)(d,{key:0,class:"q-px-sm q-pb-sm q-pt-none"},{default:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(g,null,{default:(0,t.k6)((()=>[da,(0,t.eW)("  "+(0,i.v_)(a.lunas?(0,n.R1)(r.Yq)(a.lunas,"'hari' EEEE, 'tanggal' dd MMMM yyyy, 'pukul' HH:mm"):"-"),1)])),_:2},1024),(0,t.bF)(g,{caption:""},{default:(0,t.k6)((()=>[ra,(0,t.eW)(" "),(0,t.Lk)("strong",null,(0,i.v_)(a.kasir||"-"),1),(0,t.eW)("; "),ca,(0,t.eW)(" "),(0,t.Lk)("strong",null,(0,i.v_)(a.via||"-"),1),(0,t.eW)("; "),ma,(0,t.eW)(" "),(0,t.Lk)("strong",null,(0,i.v_)(a.keterangan||"-"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)):(0,t.Q3)("",!0),(0,t.bF)(A)])))),128)),(0,t.bF)(d,{class:"q-pa-sm bg-green-8"},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"text-green-11"},{default:(0,t.k6)((()=>[(0,t.bF)(g,{overline:"",class:"text-green-1"},{default:(0,t.k6)((()=>[(0,t.eW)(" TOTAL CETAK "),(0,t.Lk)("span",va,(0,i.v_)((0,n.R1)(L.a)(v.value).toRupiah()),1)])),_:1})])),_:1}),(0,t.bF)(s,{side:"",class:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",ba,[(0,t.bF)($,{data:{santri_id:c.value,th_ajaran_h:l.value}},null,8,["data"])])])),_:1})])),_:1})])),_:1})])):((0,t.uX)(),(0,t.CE)("div",ka,fa))])),(0,t.bF)(V,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=a=>b.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(C,{data:k.value,onSuccessDelete:e[0]||(e[0]=a=>(0,n.R1)(Q.ST)(v.value,a)),onSuccessCreate:e[1]||(e[1]=a=>v.value.push(a)),onSuccessUpdate:e[2]||(e[2]=a=>(0,n.R1)(Q.B1)(v.value,a.id,a)),"disable-santri-id":!0,"disable-th-ajaran":!0},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(V,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=a=>p.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(H,{data:k.value,onSuccessUpdate:e[4]||(e[4]=a=>(0,n.R1)(Q.B1)(v.value,a.id,a))},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var Fa=l(55725),qa=l(86915);const Aa=ha,ya=Aa;x()(ha,"components",{QSpinnerCube:A.A,QList:W.A,QItem:X.A,QItemSection:E.A,QItemLabel:U.A,QCard:f.A,QToggle:Fa.A,QBtn:T.A,QSeparator:qa.A,QDialog:q.A});const Va={key:0},xa={key:1,class:"row"},wa={class:"col bg-green-1",style:{"max-width":"90px"}},Ca={class:"col"},Qa={key:0,class:"q-ma-lg"},La=(0,t.Lk)("div",{class:"text-italic text-center"}," Klik angka tahun disamping, atau tambahkan data! ",-1),Ra=[La],Sa={key:1},Ka={key:2,class:"q-ma-lg"},ja=(0,t.Lk)("div",{class:"text-body2 text-italic text-center"}," Tidak ada data untuk ditampilkan! ",-1),Ia=(0,t.Lk)("hr",null,null,-1),Wa=(0,t.Lk)("div",{class:"text-weight-thin text-italic text-center"},[(0,t.eW)(" Yang bersangkutan belum pernah melakuan pembayaran. "),(0,t.Lk)("br"),(0,t.eW)(" Silakan klik tombol tambah! ")],-1),Xa=[ja,Ia,Wa],Ea={__name:"TabThAjaran",setup(a){const e=(0,n.KR)([]),l=(0,n.KR)(!1),{params:i}=(0,u.lq)(),o=(0,n.KR)([]);async function d(){const a=await(0,s.A)({endPoint:"iuran/santri/"+i.id,loading:l});a&&(e.value=a.iuran??[],o.value=e.value.map((a=>a.th_ajaran_h)))}return(0,t.sV)((async()=>{i.id&&await d()})),(a,u)=>{const s=(0,t.g2)("q-spinner-cube"),d=(0,t.g2)("q-route-tab"),r=(0,t.g2)("q-tabs");return l.value?((0,t.uX)(),(0,t.CE)("div",Va,[(0,t.bF)(s,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):e.value?.length>0?((0,t.uX)(),(0,t.CE)("div",xa,[(0,t.Lk)("div",wa,[(0,t.bF)(r,{vertical:"",dense:"",align:"left","no-caps":"","active-bg-color":"green-11"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.value,((a,e)=>((0,t.uX)(),(0,t.CE)("div",{key:e},[(0,t.bF)(d,{name:a,label:a,to:`/iuran/santri/${(0,n.R1)(i).id}/${a}`},null,8,["name","label","to"])])))),128))])),_:1})]),(0,t.Lk)("div",Ca,[(0,n.R1)(i).thAjaranH?((0,t.uX)(),(0,t.CE)("div",Sa,[(0,t.bF)(ya)])):((0,t.uX)(),(0,t.CE)("div",Qa,Ra))])])):((0,t.uX)(),(0,t.CE)("div",Ka,Xa))}}};var Ua=l(38805),Ta=l(96641);const Pa=Ea,Da=Pa;function $a(a,e){const l=(0,t.g2)("q-icon"),n=(0,t.g2)("q-item-section"),u=(0,t.g2)("q-item-label"),s=(0,t.g2)("q-item"),i=(0,t.g2)("q-list"),o=(0,t.g2)("q-btn-dropdown"),d=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(o,{split:"",dense:"",label:"Tambah","no-caps":"",icon:"add",color:"green-10",padding:"xs sm","text-color":"green-11",onClick:e[1]||(e[1]=e=>a.$emit("onAdd"))},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bo)(((0,t.uX)(),(0,t.Wv)(s,{clickable:"",onClick:e[0]||(e[0]=e=>a.$emit("showPaket"))},{default:(0,t.k6)((()=>[(0,t.bF)(n,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{name:"local_atm",color:"green"})])),_:1}),(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.eW)("Paket")])),_:1}),(0,t.bF)(u,{caption:""},{default:(0,t.k6)((()=>[(0,t.eW)("Pembayaran/Tagihan")])),_:1})])),_:1})])),_:1})),[[d]]),(0,t.bo)(((0,t.uX)(),(0,t.Wv)(s,{clickable:"",to:"/iuran/paket"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{avatar:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{name:"settings",color:"green"})])),_:1}),(0,t.bF)(n,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>[(0,t.eW)("Setting")])),_:1}),(0,t.bF)(u,{caption:""},{default:(0,t.k6)((()=>[(0,t.eW)("Atur Paket")])),_:1})])),_:1})])),_:1})),[[d]])])),_:1})])),_:1})}x()(Ea,"components",{QSpinnerCube:A.A,QTabs:Ua.A,QRouteTab:Ta.A});var Ba=l(32968),Na=l(93933);const Oa={},Ha=(0,Ba.A)(Oa,[["render",$a]]),Ma=Ha;x()(Oa,"components",{QBtnDropdown:I.A,QList:W.A,QItem:X.A,QItemSection:E.A,QIcon:Na.A,QItemLabel:U.A}),x()(Oa,"directives",{ClosePopup:P.A});var za=l(76862),Ga=l(90944),Ja=l(50657);const Ya={key:0},Za={__name:"IuranPaketSantriForm",props:{data:{type:Object,required:!1,default:()=>{}},title:{type:String,default:()=>"Input"}},emits:["successSubmit","successCreate"],setup(a,{emit:e}){const l=a,u=e,s=(0,n.KR)({}),i=(0,n.KR)(!1),d=(0,n.KR)([]),r=(0,n.KR)([]);(0,t.sV)((async()=>{Object.assign(s.value,l.data),d.value=(0,c.A)().getByStateName("tahun-ajaran")}));const m=async()=>{const a=r.value.map((a=>({item:a.item,nominal:a.nominal}))),e={santri_id:s.value.santri_id,th_ajaran_h:s.value.th_ajaran_h,keterangan:s.value.keterangan||"",paket:a},l=await(0,v.A)({endPoint:"iuran/paket",data:e,loading:i,message:"PERHATIAN<br/>Jika item iuran sudah terdapat dalam daftar maka akan diabaikan."});l&&(document.getElementById("btn-close-form").click(),u("successSubmit",l?.iuran),u("successCreate",l?.iuran))};return(a,e)=>{const n=(0,t.g2)("FormHeader"),u=(0,t.g2)("q-spinner-cube"),d=(0,t.g2)("q-dialog"),c=(0,t.g2)("q-input"),v=(0,t.g2)("q-card-section"),b=(0,t.g2)("FormActions"),p=(0,t.g2)("q-form"),_=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(_,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(p,{onSubmit:(0,o.D$)(m,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(n,{title:"Modul Paket","is-new":!0}),(0,t.bF)(v,null,{default:(0,t.k6)((()=>[i.value?((0,t.uX)(),(0,t.CE)("div",Ya,[(0,t.bF)(d,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(k.A,{"active-only":!0,onEmitInput:e[1]||(e[1]=a=>Object.assign(s.value,a)),data:l.data},null,8,["data"]),(0,t.bF)(g.A,{modelValue:s.value.th_ajaran_h,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.th_ajaran_h=a),url:"tahun-ajaran",label:"Tahun Ajaran",sort:"desc",class:"q-mt-sm",rules:[a=>!!a||"Harus diisi!"],selected:s.value.th_ajaran_h,disable:l.disableThAjaran},null,8,["modelValue","rules","selected","disable"]),(0,t.bF)(Ja.A,{class:"q-mt-sm",onOnInput:e[3]||(e[3]=a=>r.value=a)}),(0,t.bF)(c,{label:"Keterangan",modelValue:s.value.keterangan,"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.keterangan=a),dense:"",outlined:"",class:"q-mt-sm"},null,8,["modelValue"])])),_:1}),(0,t.bF)(b)])),_:1})])),_:1})}}},ae=Za,ee=ae;x()(Za,"components",{QCard:f.A,QForm:h.A,QCardSection:F.A,QDialog:q.A,QSpinnerCube:A.A,QInput:y.A});const le={class:"q-mt-sm"},te={__name:"PageIuranSantri",setup(a){const{params:e}=(0,u.lq)(),l=(0,u.rd)(),s=(0,n.KR)({}),i=(0,n.KR)(0),o=(0,n.KR)({}),d=(0,n.KR)(!1),r=(0,n.KR)(!1),c=(0,n.KR)({});function m(){o.value={santri_id:c.value.id,nama:c.value.nama,data_akhir:c.value.data_akhir,th_ajaran_h:e.thAjaranH||""}}function v(){m(),d.value=!0}function b(){m(),r.value=!0}(0,t.Gt)("santri",c);const k=a=>{a.th_ajaran_h==e.thAjaranH&&i.value++,l.push(`/iuran/santri/${a.santri_id}/${a.th_ajaran_h}`)};return(a,l)=>{const u=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-card"),g=(0,t.g2)("q-space"),p=(0,t.g2)("q-btn"),_=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(za.A,{"start-url":"/iuran/santri",onDataFilter:l[0]||(l[0]=a=>s.value=a),"active-only":!1,bordered:"",flat:"",class:""}),(0,t.Lk)("div",le,[(0,n.R1)(e).id?((0,t.uX)(),(0,t.Wv)(Ga.A,{key:0,id:(0,n.R1)(e).id,onLoaded:l[1]||(l[1]=a=>c.value=a)},null,8,["id"])):((0,t.uX)(),(0,t.Wv)(m,{key:1,bordered:"",flat:""},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-pa-sm bg-green-11 text-subtitle2"},{default:(0,t.k6)((()=>[(0,t.eW)(" No data ")])),_:1}),(0,t.bF)(u,{class:"q-pa-lg text-body1 text-center"},{default:(0,t.k6)((()=>[(0,t.eW)(" Pilih Santri ")])),_:1})])),_:1}))]),(0,t.bF)(m,{flat:"",bordered:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{class:"q-pa-sm text-subtitle1 bg-green-6 text-green-11 flex items-center"},{default:(0,t.k6)((()=>[(0,t.eW)(" Data Iuran "),(0,t.bF)(g),(0,t.bF)(p,{icon:"sync",outline:"",dense:"",onClick:l[2]||(l[2]=a=>i.value++),class:"q-px-sm q-mr-sm"}),(0,t.bF)(Ma,{onOnAdd:v,onShowPaket:b})])),_:1}),(0,t.bF)(u,{class:"no-padding"},{default:(0,t.k6)((()=>[((0,t.uX)(),(0,t.Wv)(Da,{key:i.value}))])),_:1})])),_:1}),(0,t.bF)(_,{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=a=>d.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(C,{data:o.value,onSuccessCreate:k,"disable-santri-id":!0},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(_,{modelValue:r.value,"onUpdate:modelValue":l[5]||(l[5]=a=>r.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(ee,{data:o.value,onSuccessSubmit:l[4]||(l[4]=a=>i.value++)},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var ne=l(5873);const ue=te,se=ue;x()(te,"components",{QCard:f.A,QCardSection:F.A,QSpace:ne.A,QBtn:T.A,QDialog:q.A})}}]);