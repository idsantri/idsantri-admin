"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[5494],{45494:(e,a,t)=>{t.r(a),t.d(a,{default:()=>V});var n=t(51347),r=t(8633),o=t(34187),l=t(60455),s=t(93022),i=t(81131),u=t(10700),c=t(71492),d=t(81730),p=t(51700);const g={class:""},m={class:"q-gutter-y-md column"},b={__name:"LoginPage",props:{credential:{type:Object}},emits:["title","errors"],setup(e,{emit:a}){const t=a;t("title","Login"),t("errors",[]);const b=e,f=(0,l.rd)(),v=(0,o.KR)(""),h=(0,o.KR)(""),y=(0,o.KR)(!1),w=(0,o.KR)(!0),k=(0,p.A)(),A=async e=>{const a=new FormData(e.target),n=Object.fromEntries(a.entries());t("errors",[]);try{y.value=!0;const e=await i.A.post("login",n),a=e.data,t=a.data;k.setUser(t),(0,d.VX)(a.message);const{user:r}=t;return r.confirmed_at?f.push("/"):f.push("/profile")}catch(e){t("errors",(0,c.$r)(e.response?.data?.message||"Terjadi sebuah kesalahan"))}finally{y.value=!1}};function q(){const e=(0,s.A)();e.notify({message:"Klik tombol info (kanan-atas) untuk info login.",icon:"info",color:"green-7",textColor:"green-11",timeout:1e4,actions:[{color:"green-11",icon:"close",round:!0}]})}return(0,n.wB)([()=>b.credential.username,()=>b.credential.password],(([e,a])=>{u.A.DEV&&(e&&(v.value=e),a&&(h.value=a))})),(0,n.sV)((()=>{u.A.DEV&&q()})),(0,n.$u)((()=>{const e=document.getElementById("resend-email");e&&e.addEventListener("click",(async a=>{t("errors",[]),a.preventDefault();const n=e.href.replace("%2540","@");try{y.value=!0;const e=await i.A.get(n),a=(0,d.Wv)(e.data.message,0);await a}catch(e){t("errors",(0,c.$r)(e.response?.data?.message||"Terjadi sebuah kesalahan"))}finally{y.value=!1}}))})),(e,a)=>{const t=(0,n.g2)("q-input"),o=(0,n.g2)("q-icon"),l=(0,n.g2)("q-btn"),s=(0,n.g2)("q-card-section"),i=(0,n.g2)("q-card"),u=(0,n.g2)("q-spinner-cube");return(0,n.uX)(),(0,n.CE)("div",g,[(0,n.Lk)("form",{onSubmit:(0,r.D$)(A,["prevent"])},[(0,n.Lk)("div",m,[(0,n.bF)(t,{"bg-color":"green-1",outlined:"",label:"Login",name:"login",modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),required:"",hint:"Username atau email/surel Anda!",autocomplete:"off",autocapitalize:"none",readonly:"",onfocus:"this.removeAttribute('readonly');",onblur:"this.setAttribute('readonly','true');"},null,8,["modelValue"]),(0,n.bF)(t,{id:"password",type:w.value?"password":"text","bg-color":"green-1",outlined:"",label:"Password",name:"password",modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=e=>h.value=e),required:"",autocomplete:"off",autocapitalize:"none",readonly:"",onfocus:"this.removeAttribute('readonly');",onblur:"this.setAttribute('readonly','true');",hint:"Password atau kata sandi"},{append:(0,n.k6)((()=>[(0,n.bF)(o,{name:w.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[1]||(a[1]=e=>w.value=!w.value)},null,8,["name"])])),_:1},8,["type","modelValue"]),(0,n.bF)(l,{type:"submit",class:"full-width q-pa-sm text-green-10",color:"green-3",label:"Login"}),(0,n.bF)(i,{class:"my-card",flat:""},{default:(0,n.k6)((()=>[(0,n.bF)(s,{class:"text-green-10 text-center bg-green-2 q-pa-sm"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{outline:"",color:"green-10",class:"full-width text-weight-regular","no-caps":"",to:"/register",label:"Belum punya akun? Daftar!"}),(0,n.bF)(l,{outline:"",color:"green-10",class:"full-width text-weight-regular q-mt-sm","no-caps":"",to:"/forgot-password",label:"Lupa password? Atur ulang!"})])),_:1})])),_:1})])],32),(0,n.bo)((0,n.bF)(u,{color:"green-12",size:"14em",class:"absolute-center"},null,512),[[r.aG,y.value]])])}}};var f=t(46395),v=t(93933),h=t(22677),y=t(83341),w=t(60222),k=t(71402),A=t(272),q=t.n(A);const F=b,V=F;q()(b,"components",{QInput:f.A,QIcon:v.A,QBtn:h.A,QCard:y.A,QCardSection:w.A,QSpinnerCube:k.A})}}]);