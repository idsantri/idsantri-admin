"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[8366],{8366:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});var t=l(51347),s=l(37763),n=l(34187),u=l(8633),o=l(58094),i=l(47509),d=l(78210),r=l(81730),c=l(40423);const m={class:"flex items-center"},g={key:0},b={key:1},p={class:"absolute-top-right q-ma-sm"},k={style:{"max-width":"150px"},class:"q-mx-auto"},v={key:0},f={class:"float-right"},q={class:"fit row wrap justify-start items-start content-start"},x={key:0},F={__name:"ProfileIndex",setup(e){const a=(0,n.KR)({}),l=(0,n.KR)(!1),F=(0,n.KR)(!1),_=(0,n.KR)(!1),y=(0,n.KR)(!1),L=(0,n.KR)({}),h=(0,n.KR)(!1),A=e=>h.value=e;async function w(){h.value=!1,await C()}async function Q(){const e=await(0,o.A)({endPoint:"user",loading:l});a.value=e.user}async function C(){const e=await(0,o.A)({endPoint:`images/users/${a.value.id}`,loading:F});a.value.image=e.image_url||"/user-default.png"}async function U(){const e=await(0,i.A)({endPoint:"user",data:{username:L.value.username,name:L.value.name,phone:L.value.phone},confirm:!0,notify:!0,loading:y});e&&(document.getElementById("btn-close").click(),await Q(),await C())}function V(){Object.assign(L.value,a.value),_.value=!0}(0,t.sV)((async()=>{await Q(),await C()}));const P=async()=>{await(0,r.Wv)("Untuk mengganti password, silakan <strong>logout (keluar)</strong>. Pada halaman login, klik <strong>lupa password</strong>.<br/>Ikuti petunjuk yang diberikan.",0)};return(e,o)=>{const i=(0,t.g2)("q-space"),r=(0,t.g2)("q-card-section"),F=(0,t.g2)("q-spinner-cube"),Q=(0,t.g2)("q-btn"),C=(0,t.g2)("q-img"),I=(0,t.g2)("q-item-label"),R=(0,t.g2)("q-item-section"),S=(0,t.g2)("q-item"),E=(0,t.g2)("q-toggle"),K=(0,t.g2)("q-list"),X=(0,t.g2)("q-card"),T=(0,t.g2)("q-dialog"),W=(0,t.g2)("q-input"),N=(0,t.g2)("q-card-actions"),j=(0,t.g2)("q-form"),$=(0,t.g2)("q-page"),z=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)($,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(X,{class:"",style:{"max-width":"600px"}},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",m,[o[6]||(o[6]=(0,t.Lk)("div",{class:"text-subtitle2"},"Profil Pengguna",-1)),(0,t.bF)(i)])])),_:1}),(0,t.bF)(r,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[l.value?((0,t.uX)(),(0,t.CE)("div",g,[(0,t.bF)(F,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("div",b,[(0,t.Lk)("div",null,[(0,t.Lk)("div",p,[(0,t.bF)(Q,{icon:"camera",round:"","no-caps":"",dense:"",glossy:"",class:"q-ma-xs q-px-sm",onClick:o[0]||(o[0]=e=>h.value=!0)})]),(0,t.Lk)("div",k,[(0,t.bF)(C,{src:a.value.image,ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"green",borderStyle:"solid"}},null,8,["src"])])]),a.value.confirmed_at?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",v,o[7]||(o[7]=[(0,t.Lk)("div",{class:"text-center q-my-lg"},[(0,t.Lk)("div",{class:"q-pa-md text-negative bg-red-1",style:{"border-radius":"10px"}},[(0,t.Lk)("div",null,"Akun Anda belum terkonfirmasi."),(0,t.Lk)("div",null,"Silakan hubungi Admin!")])],-1)]))),(0,t.bF)(K,{bordered:"",separator:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(S,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,null,{default:(0,t.k6)((()=>[(0,t.bF)(I,{overline:""},{default:(0,t.k6)((()=>o[8]||(o[8]=[(0,t.eW)("User")]))),_:1}),(0,t.bF)(I,null,{default:(0,t.k6)((()=>[(0,t.Lk)("table",null,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[o[9]||(o[9]=(0,t.Lk)("td",{class:"text-italic text-caption"}," Nama ",-1)),(0,t.Lk)("td",null,(0,s.v_)(a.value.name),1)]),(0,t.Lk)("tr",null,[o[10]||(o[10]=(0,t.Lk)("td",{class:"text-italic text-caption"}," Email ",-1)),(0,t.Lk)("td",null,(0,s.v_)(a.value.email),1)]),(0,t.Lk)("tr",null,[o[11]||(o[11]=(0,t.Lk)("td",{class:"text-italic text-caption"}," Username ",-1)),(0,t.Lk)("td",null,(0,s.v_)(a.value.username),1)]),(0,t.Lk)("tr",null,[o[12]||(o[12]=(0,t.Lk)("td",{class:"text-italic text-caption"}," Telepon ",-1)),(0,t.Lk)("td",null,(0,s.v_)(a.value.phone||"-"),1)])])])])),_:1}),(0,t.bF)(I,{class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",f,[(0,t.bF)(Q,{label:"User",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:V}),(0,t.bF)(Q,{label:"Password",icon:"edit","no-caps":"",dense:"",class:"q-my-xs q-mx-sm q-px-sm",onClick:P})])])),_:1})])),_:1})])),_:1}),(0,t.bF)(S,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,null,{default:(0,t.k6)((()=>[(0,t.bF)(I,{overline:""},{default:(0,t.k6)((()=>o[13]||(o[13]=[(0,t.eW)("User Group")]))),_:1}),(0,t.bF)(I,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",q,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.value.roles,((e,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"col-6"},[(0,t.bF)(E,{"model-value":e,color:"green",label:(0,n.R1)(d.nx)(a),disable:""},null,8,["model-value","label"])])))),128))])])),_:1})])),_:1})])),_:1})])),_:1})]))])),_:1})])),_:1}),(0,t.bF)(T,{modelValue:_.value,"onUpdate:modelValue":o[5]||(o[5]=e=>_.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(X,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(j,{onSubmit:(0,u.D$)(U,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>o[14]||(o[14]=[(0,t.eW)(" Update Username ")]))),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[y.value?((0,t.uX)(),(0,t.CE)("div",x,[(0,t.bF)(T,{modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=e=>y.value=e),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(F,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(W,{dense:"",outlined:"",label:"Nama",modelValue:L.value.name,"onUpdate:modelValue":o[2]||(o[2]=e=>L.value.name=e),hint:""},null,8,["modelValue"]),(0,t.bF)(W,{class:"q-mt-sm",dense:"",outlined:"",label:"Username",modelValue:L.value.username,"onUpdate:modelValue":o[3]||(o[3]=e=>L.value.username=e),hint:"Anda bisa login dengan username atau email"},null,8,["modelValue"]),(0,t.bF)(W,{class:"q-mt-sm",dense:"",outlined:"",label:"Nomor Telepon",modelValue:L.value.phone,"onUpdate:modelValue":o[4]||(o[4]=e=>L.value.phone=e),hint:"08123456789"},null,8,["modelValue"])])),_:1}),(0,t.bF)(N,{class:"flex bg-green-6"},{default:(0,t.k6)((()=>[(0,t.bF)(i),(0,t.bo)((0,t.bF)(Q,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[z]]),(0,t.bF)(Q,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.bF)(c.A,{"show-uploader":h.value,url:`/images/users/${a.value.id}`,width:300,height:300,"img-format":"webp",onUpdateUploader:A,onSuccessUpload:w},null,8,["show-uploader","url"])])),_:1})}}};var _=l(75013),y=l(83341),L=l(60222),h=l(5873),A=l(71402),w=l(22677),Q=l(87472),C=l(53766),U=l(22589),V=l(14958),P=l(99039),I=l(55725),R=l(30045),S=l(53417),E=l(46395),K=l(25034),X=l(61038),T=l(272),W=l.n(T);const N=F,j=N;W()(F,"components",{QPage:_.A,QCard:y.A,QCardSection:L.A,QSpace:h.A,QSpinnerCube:A.A,QBtn:w.A,QImg:Q.A,QList:C.A,QItem:U.A,QItemSection:V.A,QItemLabel:P.A,QToggle:I.A,QDialog:R.A,QForm:S.A,QInput:E.A,QCardActions:K.A}),W()(F,"directives",{ClosePopup:X.A})}}]);