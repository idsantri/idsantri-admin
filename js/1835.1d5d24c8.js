"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[1835],{61835:(a,e,t)=>{t.r(e),t.d(e,{default:()=>K});t(60939),t(7049);var l=t(51347),n=t(37763),s=t(20675),i=t(58094),o=t(34187),d=t(24497),u=t(59678),r=t(18348),p=t(81730),c=t(78306);const k={__name:"ResultMutasi",setup(a){const e=(0,o.KR)([]),t=(0,o.KR)(!1),k=(0,o.KR)(!1),b=(0,o.KR)({}),{loadingMain:m}=(0,o.QW)((0,r.A)());async function g(){const a=await(0,i.A)({endPoint:"mutasi",loading:t});a&&(e.value=a.mutasi.map((a=>({...a,tk:a.tingkat_id+" "+a.kelas}))))}async function f(a){b.value=a,k.value=!0}async function _(){const a='<hr><span style="color:blue">Update Domisili?</span><hr>\n\t\t<em>\n\t\t\t<strong>Peringatan:</strong>\n\t\t\t<ul style="margin:0">\n\t\t\t\t<li>Pastikan semua keperluan Administrasi (terkait domisili asal) telah selesai!</li>\n\t\t\t\t<li>Sebaiknya data di-download/ diunduh terlebih dahulu sebagai backup!</li>\n\t\t\t\t<li>Setelah update selesai, semua data mutasi akan <strong>dihapus</strong>!</li>\n\t\t\t</ul>\n\t\t</em>',e=await(0,u.A)({endPoint:"mutasi/execute",data:null,loading:t,confirm:!0,message:a});e&&await g()}async function F(){const a=await(0,s.A)({endPoint:"mutasi/clean",loading:t,message:"Hapus semua data mutasi?"});a&&(e.value=[])}async function w(){const a=await(0,i.A)({endPoint:"export/mutasi",loading:m,notify:!0});if(!a)return;if(!a.url)return(0,p.KQ)("Url tidak ditemukan");const e=document.createElement("a");e.href=a.url,e.click(),e.remove()}return(0,l.sV)((async()=>{await g()})),(a,s)=>{const i=(0,l.g2)("q-btn"),o=(0,l.g2)("q-item-label"),u=(0,l.g2)("q-item-section"),r=(0,l.g2)("q-icon"),p=(0,l.g2)("q-item"),m=(0,l.g2)("q-list"),A=(0,l.g2)("q-btn-dropdown"),v=(0,l.g2)("q-th"),q=(0,l.g2)("q-tr"),y=(0,l.g2)("q-td"),h=(0,l.g2)("q-table"),Q=(0,l.g2)("q-card-section"),W=(0,l.g2)("q-card-actions"),x=(0,l.g2)("q-card"),C=(0,l.g2)("q-dialog"),D=(0,l.g2)("q-page"),P=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.Wv)(D,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(x,{class:""},{default:(0,l.k6)((()=>[(0,l.bF)(c.A,{title:"Data Mutasi Domisili",onOnReload:g},{right:(0,l.k6)((()=>[(0,l.bF)(i,{icon:"tune",label:"Atur Mutasi",dense:"",outline:"","no-caps":"",class:"q-ml-sm q-px-sm",to:"/mutasi/start"}),(0,l.bF)(A,{flat:"",dense:"","dropdown-icon":"more_vert",class:"q-ml-sm",color:"green-11"},{default:(0,l.k6)((()=>[(0,l.bF)(m,null,{default:(0,l.k6)((()=>[(0,l.bo)(((0,l.uX)(),(0,l.Wv)(p,{to:"/info/download"},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(o,null,{default:(0,l.k6)((()=>s[1]||(s[1]=[(0,l.eW)("Cetak")]))),_:1})])),_:1}),(0,l.bF)(u,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,{name:"print",flat:""})])),_:1})])),_:1})),[[P]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(p,{onClick:w,clickable:""},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(o,null,{default:(0,l.k6)((()=>s[2]||(s[2]=[(0,l.eW)("Unduh/Download")]))),_:1})])),_:1}),(0,l.bF)(u,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,{name:"download",flat:""})])),_:1})])),_:1})),[[P]]),(0,l.bo)(((0,l.uX)(),(0,l.Wv)(p,{onClick:F,clickable:""},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(o,null,{default:(0,l.k6)((()=>s[3]||(s[3]=[(0,l.eW)("Hapus Semua")]))),_:1})])),_:1}),(0,l.bF)(u,{avatar:""},{default:(0,l.k6)((()=>[(0,l.bF)(r,{name:"delete_forever",flat:""})])),_:1})])),_:1})),[[P]])])),_:1})])),_:1})])),_:1}),(0,l.bF)(Q,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{class:"q-pa-sm",rows:e.value,loading:t.value,"rows-per-page-options":[10,25,50,75,100,0],flat:"",bordered:""},{header:(0,l.k6)((a=>[(0,l.bF)(q,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(v,{key:"santri_id",props:a,class:"text-left"},{default:(0,l.k6)((()=>s[4]||(s[4]=[(0,l.eW)(" ID Santri ")]))),_:2},1032,["props"]),(0,l.bF)(v,{key:"nama",props:a},{default:(0,l.k6)((()=>s[5]||(s[5]=[(0,l.eW)(" Nama ")]))),_:2},1032,["props"]),(0,l.bF)(v,{key:"tk",props:a},{default:(0,l.k6)((()=>s[6]||(s[6]=[(0,l.eW)(" Tingkat â€” Kelas ")]))),_:2},1032,["props"]),(0,l.bF)(v,{key:"domisili",props:a},{default:(0,l.k6)((()=>s[7]||(s[7]=[(0,l.eW)(" Domisili (Asal) ")]))),_:2},1032,["props"]),(0,l.bF)(v,{key:"new_domisili",props:a},{default:(0,l.k6)((()=>s[8]||(s[8]=[(0,l.eW)(" Domisili (Baru) ")]))),_:2},1032,["props"]),(0,l.bF)(v,{class:"text-center"})])),_:2},1032,["props"])])),body:(0,l.k6)((a=>[(0,l.bF)(q,{props:a},{default:(0,l.k6)((()=>[(0,l.bF)(y,{key:"santri_id",props:a,class:"text-left"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{label:a.row.santri_id,outline:"",color:"green-10",class:"text-caption q-px-sm",dense:"",to:`/santri/${a.row.santri_id}`},null,8,["label","to"])])),_:2},1032,["props"]),(0,l.bF)(y,{key:"nama",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.nama),1)])),_:2},1032,["props"]),(0,l.bF)(y,{key:"tk",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.tk),1)])),_:2},1032,["props"]),(0,l.bF)(y,{key:"domisili",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.domisili),1)])),_:2},1032,["props"]),(0,l.bF)(y,{key:"new_domisili",props:a},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(a.row.new_domisili),1)])),_:2},1032,["props"]),(0,l.bF)(y,{key:"id",props:a,class:"text-center"},{default:(0,l.k6)((()=>[(0,l.bF)(i,{icon:"edit",flat:"",color:"green-10",onClick:e=>f(a.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","loading"])])),_:1}),(0,l.bF)(W,{class:"q-pa-sm bg-green-7 text-green-11 row"},{default:(0,l.k6)((()=>[s[9]||(s[9]=(0,l.Lk)("div",{class:"col text-italic"}," 1) Teliti kembali sebelum Anda menekan tombol Update; 2) Lakukan backup data dengan menekan tombol download!; ",-1)),(0,l.bF)(i,{style:{"max-width":"150px"},class:"col bg-green-8 q-ml-md",label:"Update Domisili",glossy:"","no-caps":"",dense:"",outline:"",icon:"settings_applications",disable:!e.value.length>0,onClick:_},null,8,["disable"])])),_:1})])),_:1}),(0,l.bF)(C,{modelValue:k.value,"onUpdate:modelValue":s[0]||(s[0]=a=>k.value=a)},{default:(0,l.k6)((()=>[(0,l.bF)(d.A,{data:b.value,api:!0,onOnDelete:g,onOnSubmit:g},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var b=t(75013),m=t(83341),g=t(22677),f=t(73614),_=t(53766),F=t(22589),w=t(14958),A=t(99039),v=t(93933),q=t(60222),y=t(27010),h=t(87339),Q=t(22517),W=t(38785),x=t(25034),C=t(30045),D=t(61038),P=t(272),T=t.n(P);const S=k,K=S;T()(k,"components",{QPage:b.A,QCard:m.A,QBtn:g.A,QBtnDropdown:f.A,QList:_.A,QItem:F.A,QItemSection:w.A,QItemLabel:A.A,QIcon:v.A,QCardSection:q.A,QTable:y.A,QTr:h.A,QTh:Q.A,QTd:W.A,QCardActions:x.A,QDialog:C.A}),T()(k,"directives",{ClosePopup:D.A})}}]);