"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[9199],{69199:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Y});t(54227),t(91645),t(29400),t(35373),t(71470),t(15701),t(85801);var l=t(51347),n=t(37763),u=t(34187),s=t(58094),i=t(8633),o=t(76162),d=t(20675),r=t(47509),c=t(59678),m=t(21209),k=t(90486);const p={key:0},b={__name:"IuranPaketForm",props:{data:{type:Object,required:!1,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(e,{emit:a}){const t=e,n=a,s=(0,u.KR)({}),b=(0,u.KR)(!1),g=(0,u.KR)([]);(0,l.sV)((async()=>{Object.assign(s.value,t.data),g.value=(0,o.A)().getByStateName("iuran")}));const v=e=>{const a=g.value.find((a=>a.val0===e));a&&(s.value.nominal=a.val1)},f=async()=>{const e=JSON.parse(JSON.stringify(s.value));delete e.id;let a=null;const t=!s.value.id;a=t?await(0,c.A)({endPoint:"iuran-paket",data:e,loading:b}):await(0,r.A)({endPoint:`iuran-paket/${s.value.id}`,data:e,confirm:!0,notify:!0,loading:b}),a&&(document.getElementById("btn-close-form").click(),n("successSubmit",a?.iuran_paket),n(t?"successCreate":"successUpdate",a?.iuran_paket))},x=async()=>{const e=s.value.id,a=await(0,d.A)({endPoint:`iuran-paket/${e}`,loading:b});a&&(document.getElementById("btn-close-form").click(),n("successDelete",e))};return(e,a)=>{const t=(0,l.g2)("FormHeader"),n=(0,l.g2)("q-spinner-cube"),u=(0,l.g2)("q-dialog"),o=(0,l.g2)("q-input"),d=(0,l.g2)("q-card-section"),r=(0,l.g2)("FormActions"),c=(0,l.g2)("q-form"),g=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.Wv)(g,{class:"full-width",style:{"max-width":"425px"}},{default:(0,l.k6)((()=>[(0,l.bF)(c,{onSubmit:(0,i.D$)(f,["prevent"])},{default:(0,l.k6)((()=>[(0,l.bF)(t,{title:"Input Paket Iuran","is-new":!s.value.id},null,8,["is-new"]),(0,l.bF)(d,null,{default:(0,l.k6)((()=>[b.value?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.bF)(u,{modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),persistent:""},{default:(0,l.k6)((()=>[(0,l.bF)(n,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,l.Q3)("",!0),(0,l.bF)(o,{dense:"",class:"",outlined:"",modelValue:s.value.urut,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.urut=e),label:"Nomor Urut",rules:[e=>!e||!isNaN(e)||"Hanya angka"]},null,8,["modelValue","rules"]),(0,l.bF)(o,{dense:"",class:"q-mt-sm",outlined:"",modelValue:s.value.paket,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.paket=e),required:"",label:"Nama Paket",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),(0,l.bF)(k.A,{modelValue:s.value.item,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.value.item=e),v],url:"iuran",label:"Nama Iuran",class:"q-mt-sm"},null,8,["modelValue"]),(0,l.bF)(m.A,{dense:"",class:"q-mt-sm",outlined:"",modelValue:s.value.nominal,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value.nominal=e),required:"",label:"Nominal",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"])])),_:1}),(0,l.bF)(r,{"btn-delete":!!s.value.id,onOnDelete:x},null,8,["btn-delete"])])),_:1})])),_:1})}}};var g=t(83341),v=t(53417),f=t(60222),x=t(30045),h=t(71402),F=t(46395),q=t(272),y=t.n(q);const A=b,_=A;y()(b,"components",{QCard:g.A,QForm:v.A,QCardSection:f.A,QDialog:x.A,QSpinnerCube:h.A,QInput:F.A});var V=t(78306);const L=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{class:"text-center"},"No"),(0,l.Lk)("th",{class:"text-left"},"Nama Paket"),(0,l.Lk)("th",{class:"text-left"},"Iuran"),(0,l.Lk)("th",{class:"text-right"},"Nominal"),(0,l.Lk)("th",{class:"text-center"},"Edit")])],-1),C={key:0},w={colspan:"7",class:"text-center bg-grey-1 no-padding"},S={key:1},Q=(0,l.Lk)("td",{colspan:"7",class:"text-center text-italic text-negative bg-red-2"},[(0,l.eW)(" Tidak ada data untuk ditampikan!"),(0,l.Lk)("br"),(0,l.eW)(" Silakan Tambahkan data baru! ")],-1),P=[Q],N={key:2},I=(0,l.Lk)("td",{colspan:"7",class:"text-center text-italic text-negative bg-red-1"}," Pilih filter! ",-1),R=[I],U={class:"text-center"},E={class:"text-left"},K={class:"text-left"},X={class:"text-right"},D={class:"text-center"},B={class:"bg-green-1"},O=(0,l.Lk)("td",{class:"text-right text-italic",colspan:"3"}," Total ",-1),T={class:"text-right text-bold"},H=(0,l.Lk)("td",{class:"text-center"},null,-1),W={__name:"PageIndex",setup(e){const a=(0,u.KR)(!1),t=(0,u.KR)([]),i=(0,u.KR)(""),o=(0,u.KR)(!1),d=(0,u.KR)({});async function r(){const e=await(0,s.A)({endPoint:"iuran-paket",loading:a});e&&(t.value=e.iuran_paket)}function c(){const e=t.value.map((e=>e.paket));return Array.from(new Set(e))}function m(){return t.value.filter((e=>e.paket==i.value))}function k(){return m().reduce((function(e,a){return e+Number(a.nominal)}),0)}function p(){d.value={paket:i.value},o.value=!0}function b(e){d.value=e,o.value=!0}return(0,l.sV)((async()=>{await r()})),(e,u)=>{const s=(0,l.g2)("q-select"),g=(0,l.g2)("q-btn"),v=(0,l.g2)("q-card-section"),f=(0,l.g2)("q-spinner-facebook"),x=(0,l.g2)("q-markup-table"),h=(0,l.g2)("q-card"),F=(0,l.g2)("q-dialog"),q=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(q,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{class:"",style:{"max-width":"800px"}},{default:(0,l.k6)((()=>[(0,l.bF)(V.A,{title:"Pengaturan Paket Iuran",onOnReload:r}),(0,l.bF)(v,{class:"q-pa-sm flex justify-between"},{default:(0,l.k6)((()=>[(0,l.bF)(s,{label:"Pilih nama paket",dense:"",outlined:"",options:c(),loading:a.value,modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=e=>i.value=e),clearable:"",style:{width:"250px","min-width":"200px"}},null,8,["options","loading","modelValue"]),(0,l.bF)(g,{dense:"",icon:"add",label:"Baru",color:"green-10","no-caps":"",outline:"",class:"q-px-sm",title:"Buat/tambahkan data baru",onClick:u[1]||(u[1]=e=>p())})])),_:1}),(0,l.bF)(v,{class:"q-pa-sm"},{default:(0,l.k6)((()=>[(0,l.bF)(x,{flat:"",bordered:""},{default:(0,l.k6)((()=>[L,(0,l.Lk)("tbody",null,[a.value?((0,l.uX)(),(0,l.CE)("tr",C,[(0,l.Lk)("td",w,[(0,l.bF)(f,{color:"green",size:"md"})])])):t.value.length||a.value?i.value?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:3},(0,l.pI)(m(),((e,a)=>((0,l.uX)(),(0,l.CE)("tr",{key:a},[(0,l.Lk)("td",U,(0,n.v_)(e.urut),1),(0,l.Lk)("td",E,(0,n.v_)(e.paket),1),(0,l.Lk)("td",K,(0,n.v_)(e.item),1),(0,l.Lk)("td",X,(0,n.v_)(e.nominal.toRupiah()),1),(0,l.Lk)("td",D,[(0,l.bF)(g,{icon:"edit",flat:"",color:"green-10",onClick:a=>b(e)},null,8,["onClick"])])])))),128)):((0,l.uX)(),(0,l.CE)("tr",N,R)):((0,l.uX)(),(0,l.CE)("tr",S,P))]),(0,l.Lk)("tfoot",null,[(0,l.Lk)("tr",B,[O,(0,l.Lk)("td",T,(0,n.v_)(k().toRupiah()),1),H])])])),_:1})])),_:1})])),_:1}),(0,l.bF)(F,{modelValue:o.value,"onUpdate:modelValue":u[4]||(u[4]=e=>o.value=e)},{default:(0,l.k6)((()=>[(0,l.bF)(_,{data:d.value,onSuccessSubmit:u[2]||(u[2]=e=>r()),onSuccessDelete:u[3]||(u[3]=e=>r())},null,8,["data"])])),_:1},8,["modelValue"])])),_:1})}}};var j=t(75013),$=t(76941),z=t(22677),J=t(94362),M=t(88959);const G=W,Y=G;y()(W,"components",{QPage:j.A,QCard:g.A,QCardSection:f.A,QSelect:$.A,QBtn:z.A,QMarkupTable:J.A,QSpinnerFacebook:M.A,QDialog:x.A})}}]);