"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[8958],{28958:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ne});var t=a(51347),s=(a(60939),a(44520),a(37763)),n=a(34187),i=a(58094),o=(a(16461),a(30705)),d=a(81730);const r=(0,o.nY)("mutasi-domisili",{state:()=>({santri:[],newFilter:{domisili:""}}),getters:{getSantri:e=>e.santri},actions:{resetSantri(){this.santri=[]},addSantri(e){this.resetSantri(),e.forEach((e=>{this.santri.push({id:e.id,santri_id:e.id,nama:e.nama,domisili:e.domisili,tingkat_id:e.tingkat_id,tingkat:e.tingkat,kelas:e.kelas,new_domisili:"",new_keterangan:"",proses:!1})}))},getProsesTrue(){return this.santri.filter((e=>1==e.proses))},getProsesFalse(){return this.santri.filter((e=>0==e.proses))},prosesTrue(e){if(!this.newFilter.domisili)return(0,d.UG)("Tentukan domisili baru");const l=this.santri.findIndex((l=>l.id===e)),a=this.santri[l];a.proses=!0,a.new_domisili=this.newFilter.domisili,a.new_keterangan="Mutasi Domisili"},prosesFalse(e){const l=this.santri.findIndex((l=>l.id===e)),a=this.santri[l];a.proses=!1,a.new_domisili=null,a.new_keterangan=null},deleteTrueProses(){const e=[];this.santri.forEach((l=>{l.proses||e.push(l)})),this.santri=e}},persist:!0});var u=a(90486),c=a(92938);const g={class:"text-right"},k={class:"text-center"},m={class:"text-right"},b={__name:"LeftTable",props:{onLoading:{type:Boolean,default:!1}},setup(e){const l=e,a=(0,n.lW)((()=>l.onLoading)),i=(0,n.KR)(!1),o=r(),d=(0,t.EW)((()=>o.getProsesFalse()));function u(){const e=d.value.length;if(!e)return;let l=0;i.value=!0,d.value.forEach((a=>{setTimeout((()=>{o.prosesTrue(a.id),l++,l===e&&(i.value=!1)}),500)}))}return(e,l)=>{const r=(0,t.g2)("q-btn"),c=(0,t.g2)("q-spinner-bars"),b=(0,t.g2)("q-inner-loading"),p=(0,t.g2)("q-markup-table");return(0,t.uX)(),(0,t.Wv)(p,{flat:"",bordered:"",style:{height:"550px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[l[0]||(l[0]=(0,t.Lk)("th",{class:"text-center"},"ID Santri",-1)),l[1]||(l[1]=(0,t.Lk)("th",{class:"text-left"},"Nama",-1)),l[2]||(l[2]=(0,t.Lk)("th",{class:"text-left"},"Domisili",-1)),l[3]||(l[3]=(0,t.Lk)("th",{class:"text-left"},"Kelas",-1)),l[4]||(l[4]=(0,t.Lk)("th",{class:"text-left"},"Tingkat",-1)),(0,t.Lk)("th",g,[(0,t.bF)(r,{icon:"keyboard_double_arrow_right",dense:"",color:"green-10",glossy:"",class:"text-green-11",disable:!d.value.length,onClick:u},null,8,["disable"])])])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(d.value,((e,l)=>((0,t.uX)(),(0,t.CE)("tr",{key:l},[(0,t.Lk)("td",k,(0,s.v_)(e.id),1),(0,t.Lk)("td",null,(0,s.v_)(e.nama),1),(0,t.Lk)("td",null,(0,s.v_)(e.domisili),1),(0,t.Lk)("td",null,(0,s.v_)(e.kelas),1),(0,t.Lk)("td",null,(0,s.v_)(e.tingkat),1),(0,t.Lk)("td",m,[(0,t.bF)(r,{icon:"arrow_right",dense:"",outline:"",color:"green-10",glossy:"",onClick:l=>(0,n.R1)(o).prosesTrue(e.id)},null,8,["onClick"])])])))),128))]),(0,t.bF)(b,{showing:a.value||i.value},{default:(0,t.k6)((()=>[(0,t.bF)(c,{size:"4em",color:"green"})])),_:1},8,["showing"])])),_:1})}}};var p=a(94362),_=a(22677),v=a(58356),f=a(40585),h=a(272),F=a.n(h);const q=b,L=q;F()(b,"components",{QMarkupTable:p.A,QBtn:_.A,QInnerLoading:v.A,QSpinnerBars:f.A});const A={class:"row"},w={class:"text-caption text-italic"},x={__name:"LeftCard",setup(e){const l=(0,n.KR)({tingkat_id:"",kelas:"",domisili:""}),a=r(),o=(0,n.KR)(!1),d=(0,t.EW)((()=>a.getProsesFalse()));function g(){const e=document.querySelectorAll("div.q-field__bottom.row.items-start.q-field__bottom");e.forEach((e=>e.remove()))}async function k(e){const l=await(0,i.A)({endPoint:"mutasi/not",params:e,loading:o});a.addSantri(l.santri)}return(0,t.sV)((()=>{g()})),(0,t.wB)((()=>l.value.tingkat_id),(e=>{e&&(l.value.kelas="",l.value.domisili="")})),(0,t.wB)((()=>l.value.kelas),(async e=>{e&&(l.value.domisili="")})),(0,t.wB)((()=>l.value.domisili),(async e=>{e&&(l.value.tingkat_id="",l.value.kelas="")})),(0,t.wB)(l,(async e=>{a.resetSantri(),e.tingkat_id&&e.kelas?await k({tingkat_id:e.tingkat_id,kelas:e.kelas}):e.domisili&&await k({domisili:e.domisili})}),{deep:!0}),(e,a)=>{const n=(0,t.g2)("q-toolbar-title"),i=(0,t.g2)("q-btn"),r=(0,t.g2)("q-toolbar"),g=(0,t.g2)("q-card-section"),k=(0,t.g2)("q-separator"),m=(0,t.g2)("q-space"),b=(0,t.g2)("q-card-actions"),p=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(p,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(g,{class:"q-pa-sm bg-green-7"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(n,{class:"text-subtitle1"},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)(" Data Santri ")]))),_:1}),(0,t.bF)(i,{icon:"sync",dense:"",flat:"",class:"q-mr-xs",onClick:e=>null,disable:""})])),_:1})])),_:1}),(0,t.bF)(g,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",A,[(0,t.bF)(c.A,{modelValue:l.value.tingkat_id,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.tingkat_id=e),label:"Tingkat Pendidikan",class:"col no-padding q-mr-md",hint:null},null,8,["modelValue"]),(0,t.bF)(u.A,{modelValue:l.value.kelas,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.kelas=e),url:"kelas",label:"Kelas",class:"col no-padding",disable:!l.value.tingkat_id},null,8,["modelValue","disable"])]),(0,t.bF)(u.A,{modelValue:l.value.domisili,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.domisili=e),url:"domisili",label:"Domisili",class:"q-mt-sm no-padding"},null,8,["modelValue"])])),_:1}),(0,t.bF)(k),(0,t.bF)(g,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(L,{"on-loading":o.value},null,8,["on-loading"])])),_:1}),(0,t.bF)(k),(0,t.bF)(b,{class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",w,[(0,t.eW)(" Total: "+(0,s.v_)(d.value?.length||0)+" santri",1),a[4]||(a[4]=(0,t.Lk)("br",null,null,-1)),a[5]||(a[5]=(0,t.eW)(" Hanya menampilkan santri yang statusnya “Aktif” dan belum masuk ke tabel mutasi "))]),(0,t.bF)(m),a[6]||(a[6]=(0,t.Lk)("div",null,null,-1))])),_:1})])),_:1})}}};var Q=a(83341),y=a(60222),T=a(66739),C=a(4629),V=a(86915),S=a(25034),R=a(5873),W=a(27861);const B=x,E=B;F()(x,"components",{QCard:Q.A,QCardSection:y.A,QToolbar:T.A,QToolbarTitle:C.A,QBtn:_.A,QSeparator:V.A,QCardActions:S.A,QSpace:R.A,QField:W.A});a(7049);var P=a(24497);const K={class:"text-left"},D={class:"text-right"},I={class:"text-left"},X={class:"text-right"},U={__name:"RightTable",props:{onLoading:{type:Boolean,default:!1}},setup(e){const l=e,a=r(),i=(0,t.EW)((()=>a.getProsesTrue())),o=(0,n.KR)(!1),d=(0,n.lW)((()=>l.onLoading)),u=(0,n.KR)({}),c=(0,n.KR)(!1);function g(){const e=i.value.length;if(!e)return;let l=0;o.value=!0,i.value.forEach((t=>{setTimeout((()=>{a.prosesFalse(t.id),l++,l===e&&(o.value=!1)}),500)}))}function k(e){u.value=e,c.value=!0}return(e,l)=>{const r=(0,t.g2)("q-btn"),m=(0,t.g2)("q-spinner-bars"),b=(0,t.g2)("q-inner-loading"),p=(0,t.g2)("q-markup-table"),_=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(p,{flat:"",bordered:"",style:{height:"550px"}},{default:(0,t.k6)((()=>[(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",K,[(0,t.bF)(r,{icon:"keyboard_double_arrow_left",dense:"",color:"green-10",glossy:"",class:"text-green-11",disable:!i.value.length,onClick:g},null,8,["disable"])]),l[1]||(l[1]=(0,t.Lk)("th",{class:"text-left"},"Nama",-1)),l[2]||(l[2]=(0,t.Lk)("th",{class:"text-left"},"Domisili Asal",-1)),l[3]||(l[3]=(0,t.Lk)("th",{class:"text-left"},"Domisili Baru *",-1)),l[4]||(l[4]=(0,t.Lk)("th",{class:"text-left"},"Keterangan",-1)),(0,t.Lk)("th",D,[(0,t.bF)(r,{icon:"edit",dense:"",flat:"",disable:"",color:"green-10"})])])]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(i.value,((e,l)=>((0,t.uX)(),(0,t.CE)("tr",{key:l},[(0,t.Lk)("td",I,[(0,t.bF)(r,{icon:"arrow_left",dense:"",outline:"",color:"green-10",glossy:"",onClick:l=>(0,n.R1)(a).prosesFalse(e.id)},null,8,["onClick"])]),(0,t.Lk)("td",null,(0,s.v_)(e.nama),1),(0,t.Lk)("td",null,(0,s.v_)(e.domisili),1),(0,t.Lk)("td",null,(0,s.v_)(e.new_domisili),1),(0,t.Lk)("td",null,(0,s.v_)(e.new_keterangan??"-"),1),(0,t.Lk)("td",X,[(0,t.bF)(r,{icon:"edit",dense:"",flat:"",color:"green-10",onClick:l=>k(e)},null,8,["onClick"])])])))),128))]),(0,t.bF)(b,{showing:d.value||o.value},{default:(0,t.k6)((()=>[(0,t.bF)(m,{size:"4em",color:"green"})])),_:1},8,["showing"])])),_:1}),(0,t.bF)(_,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(P.A,{data:u.value},null,8,["data"])])),_:1},8,["modelValue"])],64)}}};var M=a(30045);const z=U,H=z;F()(U,"components",{QMarkupTable:p.A,QBtn:_.A,QInnerLoading:v.A,QSpinnerBars:f.A,QDialog:M.A});var N=a(59678);const G={class:"row"},Y={class:"text-caption text-italic"},j={__name:"RightCard",setup(e){const l=r(),{newFilter:a}=(0,o.bP)(l),i=(0,t.EW)((()=>l.getProsesTrue())),d=(0,n.KR)(!1);function c(){const e=document.querySelectorAll("div.q-field__bottom.row.items-start.q-field__bottom");e.forEach((e=>e.remove()))}async function g(){const e=i.value.map((e=>({santri_id:e.santri_id,new_domisili:e.new_domisili,new_keterangan:e.new_keterangan}))),a={santri:e},t=await(0,N.A)({endPoint:"mutasi",loading:d,data:a});t&&l.deleteTrueProses()}return(0,t.sV)((()=>{c()})),(e,l)=>{const o=(0,t.g2)("q-toolbar-title"),r=(0,t.g2)("q-btn"),c=(0,t.g2)("q-toolbar"),k=(0,t.g2)("q-card-section"),m=(0,t.g2)("q-select"),b=(0,t.g2)("q-separator"),p=(0,t.g2)("q-space"),_=(0,t.g2)("q-card-actions"),v=(0,t.g2)("q-card");return(0,t.uX)(),(0,t.Wv)(v,{class:""},{default:(0,t.k6)((()=>[(0,t.bF)(k,{class:"q-pa-sm bg-green-7"},{default:(0,t.k6)((()=>[(0,t.bF)(c,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"text-subtitle1"},{default:(0,t.k6)((()=>l[3]||(l[3]=[(0,t.eW)(" Data Mutasi ")]))),_:1}),(0,t.bF)(r,{icon:"sync",dense:"",flat:"",class:"q-mr-xs",onClick:e=>null,disable:""})])),_:1})])),_:1}),(0,t.bF)(k,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",G,[(0,t.bF)(m,{modelValue:(0,n.R1)(a).tingkat_id,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,n.R1)(a).tingkat_id=e),label:"",class:"col no-padding q-mr-md",filled:"",outlined:"",dense:"",disable:""},null,8,["modelValue"]),(0,t.bF)(m,{modelValue:(0,n.R1)(a).kelas,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,n.R1)(a).kelas=e),label:"",class:"col no-padding",filled:"",outlined:"",dense:"",disable:""},null,8,["modelValue"])]),(0,t.bF)(u.A,{modelValue:(0,n.R1)(a).domisili,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,n.R1)(a).domisili=e),url:"domisili",label:"Domisili Baru",class:"q-mt-sm no-padding"},null,8,["modelValue"])])),_:1}),(0,t.bF)(b),(0,t.bF)(k,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(H,{"on-loading":d.value},null,8,["on-loading"])])),_:1}),(0,t.bF)(b),(0,t.bF)(_,{class:"bg-green-1"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",Y,[(0,t.eW)(" Total: "+(0,s.v_)(i.value?.length||0)+" santri",1),l[4]||(l[4]=(0,t.Lk)("br",null,null,-1)),l[5]||(l[5]=(0,t.eW)(" Teliti kembali data domisili baru! "))]),(0,t.bF)(p),(0,t.Lk)("div",null,[(0,t.bF)(r,{label:"Simpan","no-caps":"",icon:"save",color:"green-10",class:"text-green-11",onClick:g,disable:!i.value.length>0},null,8,["disable"])])])),_:1})])),_:1})}}};var J=a(76941);const O=j,Z=O;F()(j,"components",{QCard:Q.A,QCardSection:y.A,QToolbar:T.A,QToolbarTitle:C.A,QBtn:_.A,QSelect:J.A,QSeparator:V.A,QCardActions:S.A,QSpace:R.A,QField:W.A});const $={class:"row"},ee={class:"col q-pa-sm"},le={class:"col q-pa-sm"},ae={__name:"ProsesiIndex",setup(e){return(0,t.sV)((()=>{const e=document.getElementById("toggle-drawer");e&&e.click()})),(e,l)=>{const a=(0,t.g2)("q-toolbar-title"),s=(0,t.g2)("q-btn"),n=(0,t.g2)("q-toolbar"),i=(0,t.g2)("q-card-section"),o=(0,t.g2)("q-card"),d=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(d,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{class:"",style:{"min-width":"1200px"}},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"bg-green-8 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{class:"no-padding text-green-11",style:{"min-height":"0"}},{default:(0,t.k6)((()=>[(0,t.bF)(a,{class:"text-subtitle1"},{default:(0,t.k6)((()=>l[0]||(l[0]=[(0,t.eW)(" Modul Mutasi Domisili ")]))),_:1}),(0,t.bF)(s,{icon:"visibility",label:"Hasil Mutasi",dense:"",outline:"","no-caps":"",class:"q-mr-xs q-px-sm",to:"/makhadiyah/mutasi/result"}),(0,t.bF)(s,{disable:"",flat:"",dense:"",icon:"more_vert",class:"q-ml-md",color:"green-11"})])),_:1})])),_:1}),(0,t.bF)(i,{class:"no-padding"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",$,[(0,t.Lk)("div",ee,[(0,t.bF)(E)]),(0,t.Lk)("div",le,[(0,t.bF)(Z)])])])),_:1})])),_:1})])),_:1})}}};var te=a(75013);const se=ae,ne=se;F()(ae,"components",{QPage:te.A,QCard:Q.A,QCardSection:y.A,QToolbar:T.A,QToolbarTitle:C.A,QBtn:_.A})}}]);