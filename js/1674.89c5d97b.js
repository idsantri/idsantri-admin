"use strict";(globalThis["webpackChunkidsantri_app"]=globalThis["webpackChunkidsantri_app"]||[]).push([[1674],{21674:(a,e,l)=>{l.r(e),l.d(e,{default:()=>H});var t=l(51347),n=l(37763),s=l(34187),u=l(60455),i=l(58094),c=l(5313),d=l(70345),o=l(75605),r=l(64248),m=l(90944),b=l(85236),g=l(8633),k=l(47509);const p={key:0},v={__name:"IzinPesantrenKembaliForm",props:{data:Object},emits:["successSubmit"],setup(a,{emit:e}){const l=a,n=e,u=(0,s.KR)({}),i=(0,s.KR)(!1);async function d(){const a=await(0,k.A)({endPoint:`izin-pesantren/${u.value.id}/set-kembali`,loading:i,data:{kembali_tgl:u.value.kembali_tgl},message:"Tetapkan sudah kembali ke pesantren pada tanggal ini?"});a&&(document.getElementById("btn-close-crud").click(),n("successSubmit"))}async function o(){const a=await(0,k.A)({endPoint:`izin-pesantren/${u.value.id}/set-kembali`,loading:i,data:{kembali_tgl:null},message:"Tetapkan belum kembali ke pesantren?"});a&&(document.getElementById("btn-close-crud").click(),n("successSubmit"))}return(0,t.sV)((()=>{u.value=l.data})),(0,t.wB)((()=>u.value.kembali_tgl),(a=>{u.value.kembali_tgl=(0,c.p_)(a)})),(a,e)=>{const l=(0,t.g2)("q-card-section"),n=(0,t.g2)("q-spinner-cube"),r=(0,t.g2)("q-dialog"),m=(0,t.g2)("q-input"),b=(0,t.g2)("q-btn"),k=(0,t.g2)("q-space"),v=(0,t.g2)("q-card-actions"),_=(0,t.g2)("q-form"),q=(0,t.g2)("q-card"),L=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.Wv)(q,{class:"full-width",style:{"max-width":"425px"}},{default:(0,t.k6)((()=>[(0,t.bF)(_,{onSubmit:(0,g.D$)(d,["prevent"])},{default:(0,t.k6)((()=>[(0,t.bF)(l,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>e[2]||(e[2]=[(0,t.Lk)("div",{class:"text-subtitle1"},"Tetapkan Tanggal Kembali",-1)]))),_:1}),(0,t.bF)(l,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[i.value?((0,t.uX)(),(0,t.CE)("div",p,[(0,t.bF)(r,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),persistent:""},{default:(0,t.k6)((()=>[(0,t.bF)(n,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])),_:1},8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.bF)(m,{dense:"",hint:(0,s.R1)(c.$P)(u.value.kembali_tgl)?(0,s.R1)(c.H6)(u.value.kembali_tgl):"",class:"q-mt-sm",outlined:"",label:"Tanggal (M)*",modelValue:u.value.kembali_tgl,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value.kembali_tgl=a),type:"datetime-local",rules:[a=>!!a||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"])])),_:1}),(0,t.bF)(v,{class:"bg-green-6 text-green-11 q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(b,{label:"Belum Kembali","no-caps":"",class:"q-px-sm text-red-1",color:"negative",onClick:o}),(0,t.bF)(k),(0,t.bo)((0,t.bF)(b,{label:"Tutup","no-caps":"",class:"q-px-sm",color:"green-4",id:"btn-close-crud"},null,512),[[L]]),(0,t.bF)(b,{label:"Simpan","no-caps":"",class:"q-px-sm",color:"green-10",type:"submit"})])),_:1})])),_:1})])),_:1})}}};var _=l(83341),q=l(53417),L=l(60222),x=l(30045),F=l(71402),f=l(46395),A=l(25034),Q=l(22677),S=l(5873),C=l(61038),R=l(272),y=l.n(R);const V=v,h=V;y()(v,"components",{QCard:_.A,QForm:q.A,QCardSection:L.A,QDialog:x.A,QSpinnerCube:F.A,QInput:f.A,QCardActions:A.A,QBtn:Q.A,QSpace:S.A}),y()(v,"directives",{ClosePopup:C.A});const K={class:"row",style:{"max-width":"1200px"}},T={class:"col-xs-12 col-sm-6"},w={key:0},z={key:1,class:"full-width"},I={colspan:"2"},E={class:"col-xs-12 col-sm-6"},P={__name:"IzinById",setup(a){const e=(0,s.KR)(!1),l=(0,s.KR)(""),g=(0,u.lq)(),k=(0,s.KR)({}),p=(0,s.KR)(!1),v=(0,s.KR)(!1),_=(0,s.KR)(!1);function q(){l.value=`reports/izin-pesantren/view?id=${k.value.id}`,e.value=!0}async function L(){const a=await(0,i.A)({endPoint:`izin-pesantren/${g.params.id}`,loading:p});a&&(k.value=a.izin_pesantren)}function x(a){const e=/\(\+(\d+)\)/g,l=a.replace(e,((a,e)=>`(terlambat ${e} hari)`));return l}return(0,t.sV)((async()=>{g.params.id&&await L()})),(a,u)=>{const i=(0,t.g2)("q-toolbar-title"),g=(0,t.g2)("q-btn"),F=(0,t.g2)("q-toolbar"),f=(0,t.g2)("q-card-section"),A=(0,t.g2)("q-space"),Q=(0,t.g2)("q-spinner-cube"),S=(0,t.g2)("q-separator"),C=(0,t.g2)("q-card"),R=(0,t.g2)("q-dialog"),y=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(y,{class:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",K,[(0,t.Lk)("div",T,[(0,t.bF)(C,{class:"q-ma-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"bg-green-8 no-padding"},{default:(0,t.k6)((()=>[(0,t.bF)(F,{class:"no-padding no-margin"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:(0,t.k6)((()=>u[6]||(u[6]=[(0,t.eW)(" Data Perizinan ")]))),_:1}),(0,t.bF)(g,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Cetak","no-caps":"",icon:"print",color:"green-11",onClick:q}),(0,t.bF)(g,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-11",onClick:u[0]||(u[0]=a=>v.value=!0)})])),_:1})])),_:1}),k.value?((0,t.uX)(),(0,t.Wv)(f,{key:0,class:"q-pa-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(m.A,{id:k.value.santri_id},null,8,["id"]),(0,t.bF)(C,{bordered:"",flat:"",class:"q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.bF)(f,{class:"q-pa-sm text-subtitle1 bg-green-11 flex"},{default:(0,t.k6)((()=>[u[7]||(u[7]=(0,t.eW)(" Data Izin ")),(0,t.bF)(A),(0,t.bF)(g,{dense:"",label:"Kembali",icon:"manage_history","no-caps":"",class:"q-px-sm bg-green-10 text-green-12",onClick:u[1]||(u[1]=a=>_.value=!0)})])),_:1}),(0,t.bF)(f,{class:"q-pa-sm"},{default:(0,t.k6)((()=>[p.value?((0,t.uX)(),(0,t.CE)("div",w,[(0,t.bF)(Q,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):((0,t.uX)(),(0,t.CE)("table",z,[(0,t.Lk)("tbody",null,[(0,t.Lk)("tr",null,[u[8]||(u[8]=(0,t.Lk)("td",{class:"text-italic"},"Sifat:",-1)),(0,t.Lk)("td",null,(0,n.v_)(k.value.sifat),1)]),(0,t.Lk)("tr",null,[u[9]||(u[9]=(0,t.Lk)("td",{class:"text-italic"}," Pengajuan: ",-1)),(0,t.Lk)("td",null,(0,n.v_)(k.value.pengajuan),1)]),(0,t.Lk)("tr",null,[u[10]||(u[10]=(0,t.Lk)("td",{class:"text-italic"},"Durasi:",-1)),(0,t.Lk)("td",null,(0,n.v_)(k.value.durasi+" hari"),1)]),(0,t.Lk)("tr",null,[u[11]||(u[11]=(0,t.Lk)("td",{class:"text-italic"}," Dari Tanggal: ",-1)),(0,t.Lk)("td",null,(0,n.v_)((0,s.R1)(c.H6)(k.value.dari_tgl)+" | "+(0,s.R1)(d.IU)((0,s.R1)(d.cE)(k.value.dari_tgl))),1)]),(0,t.Lk)("tr",null,[u[12]||(u[12]=(0,t.Lk)("td",{class:"text-italic"}," Sampai Tanggal: ",-1)),(0,t.Lk)("td",null,(0,n.v_)((0,s.R1)(c.H6)(k.value.sampai_tgl)+" | "+(0,s.R1)(d.IU)((0,s.R1)(d.cE)(k.value.sampai_tgl))),1)]),(0,t.Lk)("tr",null,[u[13]||(u[13]=(0,t.Lk)("td",{class:"text-italic"}," Keperluan: ",-1)),(0,t.Lk)("td",null,(0,n.v_)(k.value.keperluan),1)]),(0,t.Lk)("tr",null,[u[14]||(u[14]=(0,t.Lk)("td",{class:"text-italic"}," Keterangan: ",-1)),(0,t.Lk)("td",null,(0,n.v_)(k.value.keterangan??"-"),1)]),(0,t.Lk)("tr",null,[u[15]||(u[15]=(0,t.Lk)("td",{class:"text-italic"},"Tujuan:",-1)),(0,t.Lk)("td",null,(0,n.v_)(k.value.tujuan),1)]),(0,t.Lk)("tr",null,[u[16]||(u[16]=(0,t.Lk)("td",{class:"text-italic"}," Catatan: ",-1)),(0,t.Lk)("td",null,(0,n.v_)(k.value.catatan||"-"),1)]),(0,t.Lk)("tr",null,[(0,t.Lk)("td",I,[(0,t.bF)(S,{color:"green-8"})])]),(0,t.Lk)("tr",null,[u[17]||(u[17]=(0,t.Lk)("td",{class:"text-italic"}," Kembali: ",-1)),(0,t.Lk)("td",null,(0,n.v_)((0,s.R1)(c.H6)(k.value.kembali_tgl)+" | "+(0,s.R1)(d.IU)((0,s.R1)(d.cE)(k.value.kembali_tgl))),1)]),(0,t.Lk)("tr",null,[u[18]||(u[18]=(0,t.Lk)("td",{class:"text-italic"},"Status:",-1)),(0,t.Lk)("td",null,(0,n.v_)(k.value.status?x(k.value.status):""),1)])])]))])),_:1})])),_:1})])),_:1})):(0,t.Q3)("",!0)])),_:1})]),(0,t.Lk)("div",E,[(0,t.bF)(r.A,{class:"q-ma-sm",santri_id:k.value.santri_id},null,8,["santri_id"])])]),(0,t.bF)(R,{modelValue:v.value,"onUpdate:modelValue":u[3]||(u[3]=a=>v.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(b.A,{data:k.value,onSuccessDelete:u[2]||(u[2]=e=>a.$router.go(-1)),onSuccessSubmit:L},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(R,{modelValue:_.value,"onUpdate:modelValue":u[4]||(u[4]=a=>_.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(h,{data:{id:k.value.id,kembali_tgl:k.value.kembali_tgl},onSuccessSubmit:L},null,8,["data"])])),_:1},8,["modelValue"]),(0,t.bF)(R,{modelValue:e.value,"onUpdate:modelValue":u[5]||(u[5]=a=>e.value=a)},{default:(0,t.k6)((()=>[(0,t.bF)(o.A,{url:l.value},null,8,["url"])])),_:1},8,["modelValue"])])),_:1})}}};var D=l(32968),U=l(75013),$=l(66739),B=l(4629),X=l(86915);const j=(0,D.A)(P,[["__scopeId","data-v-9e504e26"]]),H=j;y()(P,"components",{QPage:U.A,QCard:_.A,QCardSection:L.A,QToolbar:$.A,QToolbarTitle:B.A,QBtn:Q.A,QSpace:S.A,QSpinnerCube:F.A,QSeparator:X.A,QDialog:x.A})}}]);