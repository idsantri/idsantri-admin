import{q as C,E as u,c as p,o as _,w as i,g as t,ae as F,f as q,G as K,Q as U,a8 as d,l as x}from"./index-C1T48Jlu.js";import{Q as D}from"./QForm-D8IYzmEx.js";import{_ as Q}from"./InputSelectArray-DnryGQRi.js";import{_ as $}from"./InputSelectTingkatPendidikan-Dhtw_FrE.js";import{A as j}from"./ApiCrud-QtKnvoL9.js";import{u as A}from"./useCrudForm-23znjDTZ.js";import{_ as H}from"./InputSelectTahunAjaran-C5UHgCGx.js";class N extends j{constructor(){super("kelas")}async santri(n){return(await this._apiGet({endPoint:`${this._path}/santri/${n}`})).data}}const S=new N,P={__name:"KelasForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(m,{emit:n}){const l=m,c=n,e=C({...l.data}),o=!l.data?.id,{handleDelete:v,handleCreate:f,handleUpdate:k,loading:b}=A(S,{emit:c,responseKey:"kelas"}),V=async()=>{const r={santri_id:e.value.santri_id,th_ajaran_h:e.value.th_ajaran_h,tingkat_id:e.value.tingkat_id,kelas:e.value.kelas,no_absen:e.value.no_absen,keterangan:e.value.keterangan};return o?await f(r,!0):await k(l.data.id,r,!0)},g=async()=>await v(l.data.id);return(r,s)=>{const y=u("FormHeader"),w=u("FormLoading"),h=u("FormActions");return _(),p(x,{class:"full-width",style:{"max-width":"425px"}},{default:i(()=>[t(D,{onSubmit:F(V,["prevent"])},{default:i(()=>[t(y,{title:"Input Kelas","is-new":o}),K(b)?(_(),p(w,{key:0})):q("",!0),t(U,null,{default:i(()=>[t(d,{dense:"",outlined:"",label:"Nama","model-value":e.value?.nama+" ("+e.value?.santri_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),t(H,{modelValue:e.value.th_ajaran_h,"onUpdate:modelValue":s[0]||(s[0]=a=>e.value.th_ajaran_h=a),rules:[a=>!!a||"Harus diisi!"],class:"q-my-sm"},null,8,["modelValue","rules"]),t($,{modelValue:e.value.tingkat_id,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value.tingkat_id=a),class:"q-my-sm",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"]),t(Q,{modelValue:e.value.kelas,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value.kelas=a),url:"kelas",label:"Kelas *",rules:[a=>!!a||"Harus diisi!"],class:"q-my-sm"},null,8,["modelValue","rules"]),t(d,{dense:"",class:"q-my-sm",outlined:"",label:"Nomor Absen",modelValue:e.value.no_absen,"onUpdate:modelValue":s[3]||(s[3]=a=>e.value.no_absen=a),type:"number"},null,8,["modelValue"]),t(d,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:e.value.keterangan,"onUpdate:modelValue":s[4]||(s[4]=a=>e.value.keterangan=a),autogrow:""},null,8,["modelValue"])]),_:1}),t(h,{"btn-delete":!o,onOnDelete:g},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{S as K,P as _};
