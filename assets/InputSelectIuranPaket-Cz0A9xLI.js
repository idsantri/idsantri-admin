import{A as r,K as I,W as N,f as k,o as p,b as e,w as t,l as g,g as v,ai as q,Q,y as V,F as _,z as B,c as D,v as c,t as i,a2 as L}from"./index-Bjf6jOrL.js";import{Q as R}from"./QSelect-BCDk0qVl.js";import{Q as T}from"./QSpace-CT-pwkHs.js";import{Q as b}from"./QItemLabel-Clz1Xits.js";import{Q as h,a as S}from"./QItemSection-D4HO8eJd.js";import{Q as z}from"./QList-DrJ2aexG.js";import{Q as A}from"./QSlideTransition-BiANi7-L.js";import{C as F}from"./ClosePopup-Ced6Y-Os.js";import{a as J}from"./api-get-SNzLoUbu.js";const X={__name:"InputSelectIuranPaket",emits:["onInput"],setup(O,{emit:P}){const m=r(!1),u=r(!1),s=r(""),o=r([]),y=P;I(s,n=>{const l=JSON.parse(JSON.stringify(o.value)).filter(a=>a.paket==n).map(a=>({paket:a.paket,item:a.item,nominal:a.nominal}));y("onInput",l||null)});async function w(){const n=await J({endPoint:"iuran-paket",loading:m});n&&(o.value=n.iuran_paket)}N(async()=>{await w()});function x(){const n=o.value.map(l=>l.paket);return Array.from(new Set(n))}function d(){return o.value.filter(n=>n.paket==s.value)}function f(){return d().reduce(function(l,a){return l+Number(a.nominal)},0)}return(n,l)=>(p(),k(_,null,[e(R,{label:"Pilih paket",dense:"",outlined:"","emit-value":"","map-options":"",options:x(),loading:m.value,behavior:"menu",clearable:"",hint:f().toRupiah(),modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a),rules:[a=>!!a||"Harus diisi!"],class:q([n.$attrs.class])},{after:t(()=>[g(e(v,{"no-caps":"",icon:"settings",to:"/iuran/paket",outline:"",dense:"",class:"q-pa-sm"},null,512),[[F]]),e(v,{color:"green","no-caps":"",icon:"info",outline:"",dense:"",class:"q-pa-sm",onClick:l[0]||(l[0]=a=>u.value=!u.value)})]),_:1},8,["options","loading","hint","modelValue","rules","class"]),e(A,{appear:""},{default:t(()=>[g(e(Q,{class:"no-padding q-my-sm"},{default:t(()=>[e(V,{bordered:"",flat:"",class:"bg-green-1 scroll",style:{height:"150px"}},{default:t(()=>[e(Q,{class:"q-pa-sm q-card--bordered"},{default:t(()=>[e(z,{separator:""},{default:t(()=>[(p(!0),k(_,null,B(d(),(a,C)=>(p(),D(h,{key:C,dense:""},{default:t(()=>[e(S,null,{default:t(()=>[e(b,{class:"flex"},{default:t(()=>[c(i(a.urut??"#")+". "+i(a.item)+" ",1),e(T),c(" "+i(Number(a.nominal).toRupiah()),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(h,{dense:""},{default:t(()=>[e(S,null,{default:t(()=>[e(b,{class:"text-right text-bold"},{default:t(()=>[c(i(f().toRupiah()),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[L,u.value]])]),_:1})],64))}};export{X as _};
