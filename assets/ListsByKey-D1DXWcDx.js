import{Q as F}from"./QSpace-DJeipgZa.js";import{x as _,R as q,y as C,c as f,o as c,w as l,b as a,a9 as U,a as b,z as h,n as Q,a3 as E,s as N,p as w,v as k,f as I,a7 as O,g as T,B as A,F as j}from"./index-Bf-p91mW.js";import{l as H}from"./lists-data-mcTvx2m2.js";import{Q as J}from"./QForm-OmDQHoiq.js";import{k as K}from"./format-text-BhuG3ucy.js";import{L}from"./Lists-DSwT9YX9.js";import{Q as g}from"./QTd-tD3oYfA5.js";import{Q as V}from"./QTr-D3m5hNPw.js";import{Q as D}from"./QTable-De_bPsbt.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as M}from"./lists-store-F5P_xNBX.js";import"./ApiCrud-SVFtkNw7.js";import"./index-BtaF3-6r.js";import"./index-D7WC_quC.js";import"./api-error-C0HjZ2a3.js";import"./QList-51Eu5HNp.js";import"./QMarkupTable-BU6ysEzR.js";import"./QSelect-Co09SqkM.js";import"./QChip-DeZPZCXp.js";import"./QItemSection-Bl4rOme3.js";import"./QItemLabel-sjS6zLD0.js";import"./QMenu-BvL1IfNl.js";import"./selection-CE9S_xiH.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./use-fullscreen-CrpeCgX1.js";const R={__name:"ListsForm",props:{dataInput:{type:Object,required:!0},showInput:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(v,{emit:d}){const n=v,s=d,o=_(!1),e=_({}),p=!n.dataInput?.id;q(()=>{Object.assign(e.value,n.dataInput)});async function t(){const m=JSON.parse(JSON.stringify(e.value));delete m.id;try{o.value=!0;const i=p?await L.create({data:m}):await L.update({id:n.dataInput.id,data:m,confirm:!0});i&&(document.getElementById("btn-close-form").click(),s("successSubmit",i?.list),s(p?"successCreate":"successUpdate",i?.list))}finally{o.value=!1}}async function r(){try{o.value=!0;const m=n.dataInput.id;await L.remove({id:m})&&(document.getElementById("btn-close-form").click(),s("successDelete",m))}finally{o.value=!1}}return(m,i)=>{const x=C("FormHeader"),S=C("FormLoading"),u=C("FormActions");return c(),f(N,{class:"full-width",style:{"max-width":"425px"}},{default:l(()=>[a(J,{onSubmit:U(t,["prevent"])},{default:l(()=>[a(x,{title:"Input List "+h(K)(v.dataInput?.key||""),"is-new":p},null,8,["title"]),o.value?(c(),f(S,{key:0})):b("",!0),a(Q,{class:"q-pa-sm"},{default:l(()=>[n.showInput.val0?(c(),f(E,{key:0,label:"text1",dense:"",class:"q-my-sm",outlined:"",modelValue:e.value.val0,"onUpdate:modelValue":i[0]||(i[0]=y=>e.value.val0=y),autogrow:"",loading:o.value},null,8,["modelValue","loading"])):b("",!0),n.showInput.val1?(c(),f(E,{key:1,label:"text2",dense:"",class:"q-my-sm",outlined:"",modelValue:e.value.val1,"onUpdate:modelValue":i[1]||(i[1]=y=>e.value.val1=y),autogrow:"",loading:o.value},null,8,["modelValue","loading"])):b("",!0),n.showInput.val2?(c(),f(E,{key:2,label:"text3",dense:"",class:"q-my-sm",outlined:"",modelValue:e.value.val2,"onUpdate:modelValue":i[2]||(i[2]=y=>e.value.val2=y),autogrow:"",loading:o.value},null,8,["modelValue","loading"])):b("",!0)]),_:1}),a(u,{"btn-delete":!p,onOnDelete:r},null,8,["btn-delete"])]),_:1})]),_:1})}}},z={__name:"ListsStyleSingle",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(v,{emit:d}){const n=d,s=v,o=[{name:"val0",label:"Lists",align:"left",field:e=>`${e.val0}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(e,p)=>(c(),f(D,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(t=>[a(V,{props:t},{default:l(()=>[a(g,{props:t,key:"val0"},{default:l(()=>[w(k(t.row.val0),1)]),_:2},1032,["props"]),a(g,{props:t,key:"id"},{default:l(()=>[a(I,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>n("handleEdit",t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},G=B(z,[["__scopeId","data-v-439992d8"]]),P={__name:"ListsStyleDouble",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(v,{emit:d}){const n=d,s=v,o=[{name:"val0",label:"Text 1",align:"left",field:e=>`${e.val0}`,sortable:!0},{name:"val1",label:"Text 2",align:"left",field:e=>`${e.val1}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(e,p)=>(c(),f(D,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(t=>[a(V,{props:t},{default:l(()=>[a(g,{props:t,key:"val0"},{default:l(()=>[w(k(t.row.val0),1)]),_:2},1032,["props"]),a(g,{props:t,key:"val1"},{default:l(()=>[w(k(t.row.val1),1)]),_:2},1032,["props"]),a(g,{props:t,key:"id"},{default:l(()=>[a(I,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>n("handleEdit",t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},W=B(P,[["__scopeId","data-v-0913ab4d"]]),X={__name:"ListsStyleTriple",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(v,{emit:d}){const n=d,s=v,o=[{name:"val0",label:"Text 1",align:"left",field:e=>`${e.val0}`,sortable:!0},{name:"val1",label:"Text 2",align:"left",field:e=>`${e.val1}`,sortable:!0},{name:"val2",label:"Text 3",align:"left",field:e=>`${e.val2}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(e,p)=>(c(),f(D,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(t=>[a(V,{props:t},{default:l(()=>[a(g,{props:t,key:"val0"},{default:l(()=>[w(k(t.row.val0),1)]),_:2},1032,["props"]),a(g,{props:t,key:"val1"},{default:l(()=>[w(k(t.row.val1),1)]),_:2},1032,["props"]),a(g,{props:t,key:"val2"},{default:l(()=>[w(k(t.row.val2),1)]),_:2},1032,["props"]),a(g,{props:t,key:"id"},{default:l(()=>[a(I,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>n("handleEdit",t.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},Y=B(X,[["__scopeId","data-v-1e70939d"]]),Z={key:2},Ie={__name:"ListsByKey",setup(v){const d=_(!1),{params:n}=O(),s=_(!1),o=_([]),e=_({}),p=_({}),t=M();q(async()=>{await m()});const r=H.find(({url:u})=>u==n.listKey);async function m(){try{s.value=!0;const u=await L.getByKey(r.url);o.value=u[r.key],t.checkState(r.key)&&t.$patch({[r.key]:u[r.key]})}catch(u){console.log("error get list ",u)}finally{s.value=!1}}function i(){if(r.column==1)return{val0:!0,val1:!1,val2:!1};if(r.column==2)return{val0:!0,val1:!0,val2:!1};if(r.column==3)return{val0:!0,val1:!0,val2:!0}}function x(){p.value=i(),e.value={},e.value.key=n.listKey,d.value=!0}function S(u){p.value=i(),e.value=JSON.parse(JSON.stringify(u)),d.value=!0}return(u,y)=>(c(),T(j,null,[a(Q,{class:"bg-green-7 text-green-11 text-subtitle1 q-pa-sm flex flex-center"},{default:l(()=>[w(k(h(r)?.label||"List")+" ",1),a(F),a(I,{icon:"add",label:"Baru","no-caps":"",dense:"",class:"q-px-md",outline:"",onClick:x})]),_:1}),a(Q,{class:"q-pa-sm"},{default:l(()=>[h(r).style=="single"?(c(),f(G,{key:0,data:o.value,loading:s.value,onHandleEdit:S},null,8,["data","loading"])):b("",!0),h(r).style=="double"?(c(),f(W,{key:1,data:o.value,loading:s.value,onHandleEdit:S},null,8,["data","loading"])):b("",!0),h(r).style=="triple"?(c(),T("div",Z,[a(Y,{data:o.value,onUpdateList:u.handleUpdate,onDeleteList:u.handleDelete,onAddList:x},null,8,["data","onUpdateList","onDeleteList"])])):b("",!0)]),_:1}),a(A,{modelValue:d.value,"onUpdate:modelValue":y[0]||(y[0]=$=>d.value=$)},{default:l(()=>[a(R,{"data-input":e.value,"show-input":p.value,onSuccessDelete:m,onSuccessSubmit:m},null,8,["data-input","show-input"])]),_:1},8,["modelValue"])],64))}};export{Ie as default};
