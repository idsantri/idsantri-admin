import{B as d,L as H,C as g,c as C,o as S,w as s,g as l,ae as P,f as F,Q as x,a8 as j,D as o,l as I,ac as L,X as N,a,e as y,y as $,t as i,z as M,H as T}from"./index-BSwPLBvN.js";import{Q as U,a as E}from"./QToolbar-qqbqC3d5.js";import{Q as A}from"./QSpace-D6pCerwp.js";import{a as O}from"./api-get-DLoYpnPD.js";import{a as R,i as G,f as w}from"./format-date-DlwYCgkJ.js";import{b as z,m as Q}from"./hijri--5qD4USW.js";import{_ as X}from"./ReportViewer-BZTaVeVr.js";import{_ as J}from"./IzinRiwayat-BEnQyNJh.js";import{_ as W}from"./CardSantriSimple-C9F2uVuM.js";import{I as K,_ as Y}from"./IzinPesantrenForm-Cg9pcLI-.js";import{Q as Z}from"./QForm-pLnIPDm5.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BaAeepf0.js";import"./index-DWKPJyX7.js";import"./api-error-CD6hOSn6.js";import"./id-BuNGTsqN.js";import"./format-number-B34ySHL_.js";import"./QItemSection-WqxvrlOw.js";import"./QList-Dn-IYx8z.js";import"./tahun-ajaran-Dhryo64N.js";import"./QSkeleton-9AFyI2YJ.js";import"./QImg-hhTG6btB.js";import"./QItemLabel-CIOWhTht.js";import"./santri-store-BRD5aS7E.js";import"./QSelect-BjGQaI4Q.js";import"./QChip-Br_mmnnr.js";import"./QMenu-BnIg5_Ug.js";import"./selection-CiLPAPFJ.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./InputSelectSantriId-8oBNo5K0.js";import"./Santri-DJomg_CO.js";import"./ApiCrud-CsgpJEPb.js";import"./Api-gH9zfM44.js";import"./InputSelectArray-CW313qGw.js";import"./lists-store-BQBJ2JOd.js";import"./DropDownAfter-B_WHSSYE.js";import"./QBtnDropdown-C4ZtMkBn.js";import"./QBtnGroup-CFUVAF62.js";import"./ClosePopup-9H5qeAFV.js";import"./Lists-kDpWTKyN.js";import"./useCrudForm-Di2BQFx5.js";const tt={__name:"IzinPesantrenKembaliForm",props:{data:Object},emits:["successSubmit"],setup(V,{emit:v}){const c=V,b=v,e=d({...c.data}),r=d(!1);async function _(){try{r.value=!0;const n=await K.setKembali({id:c.data.id,data:{kembali_tgl:e.value.kembali_tgl},message:"Tetapkan sudah kembali ke pesantren pada tanggal ini?"});n&&(document.getElementById("btn-close-form").click(),b("successSubmit",n?.izin_pesantren))}catch(n){console.error("err set not back",n)}finally{r.value=!1}}async function k(){try{r.value=!0;const n=await K.setKembali({id:c.data.id,data:{kembali_tgl:null},message:"Tetapkan belum kembali ke pesantren?"});n&&(document.getElementById("btn-close-form").click(),b("successSubmit",n?.izin_pesantren))}catch(n){console.error("err set not back",n)}finally{r.value=!1}}return H(()=>e.value.kembali_tgl,n=>{e.value.kembali_tgl=R(n)}),(n,p)=>{const q=g("FormHeader"),u=g("FormLoading"),t=g("FormActions");return S(),C(I,{class:"full-width",style:{"max-width":"425px"}},{default:s(()=>[l(Z,{onSubmit:P(_,["prevent"])},{default:s(()=>[l(q,{title:"Tetapkan Tanggal Kembali","is-new":!1}),r.value?(S(),C(u,{key:0})):F("",!0),l(x,{class:"q-pa-sm"},{default:s(()=>[l(j,{dense:"",hint:o(G)(e.value.kembali_tgl)?o(w)(e.value.kembali_tgl):"",class:"q-my-sm",outlined:"",label:"Tanggal (M)*",modelValue:e.value.kembali_tgl,"onUpdate:modelValue":p[0]||(p[0]=f=>e.value.kembali_tgl=f),type:"datetime-local",rules:[f=>!!f||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"])]),_:1}),l(t,{"btn-delete":!!V.data.kembali_tgl,onOnDelete:k,"label-delete":"Belum Kembali"},null,8,["btn-delete"])]),_:1})]),_:1})}}},at={class:"row",style:{"max-width":"1200px"}},et={class:"col-xs-12 col-sm-6"},lt={class:"q-ma-sm"},st={class:"full-width"},nt={colspan:"2"},it={class:"col-xs-12 col-sm-6"},ot={class:"q-ma-sm"},rt={__name:"IzinById",setup(V){const v=d(!1),c=d(""),b=L(),e=d({}),r=d(!1),_=d(!1),k=d(!1);function n(){c.value=`reports/izin-pesantren/view?id=${e.value.id}`,v.value=!0}async function p(){const u=await O({endPoint:`izin-pesantren/${b.params.id}`,loading:r});u&&(e.value=u.izin_pesantren)}N(async()=>{b.params.id&&await p()});function q(u){const t=/\(\+(\d+)\)/g;return u.replace(t,(B,D)=>`(terlambat ${D} hari)`)}return(u,t)=>{const f=g("CardHeader"),B=g("CardLoading"),D=g("CardPage");return S(),C(D,null,{default:s(()=>[l(f,{title:"Detail Izin","show-reload":!1}),a("div",at,[a("div",et,[a("div",lt,[l(I,{class:"",flat:"",bordered:""},{default:s(()=>[l(x,{class:"bg-green-7 no-padding"},{default:s(()=>[l(U,{class:"no-padding no-margin"},{default:s(()=>[l(y,{icon:"sync","no-caps":"",onClick:p,flat:"",dense:"",class:"q-pl-sm",color:"green-11",title:"Muat ulang"}),l(E,{class:"text-subtitle1 text-green-11 q-px-none"},{default:s(()=>[...t[6]||(t[6]=[$(" Data Perizinan ",-1)])]),_:1}),l(y,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Cetak","no-caps":"",icon:"print",color:"green-11",onClick:n}),l(y,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-11",onClick:t[0]||(t[0]=m=>_.value=!0)})]),_:1})]),_:1}),e.value?(S(),C(x,{key:0,class:"q-pa-sm"},{default:s(()=>[l(W,{id:e.value.santri_id},null,8,["id"]),l(I,{bordered:"",flat:"",class:"q-mt-sm"},{default:s(()=>[l(x,{class:"q-pa-sm text-subtitle1 bg-green-11 flex"},{default:s(()=>[t[7]||(t[7]=$(" Data Izin ",-1)),l(A),l(y,{dense:"",label:"Kembali",icon:"manage_history","no-caps":"",class:"q-px-sm bg-green-10 text-green-12",onClick:t[1]||(t[1]=m=>k.value=!0)})]),_:1}),l(x,{class:"q-pa-sm"},{default:s(()=>[a("table",st,[a("tbody",null,[a("tr",null,[t[8]||(t[8]=a("td",{class:"text-italic"},"Sifat:",-1)),a("td",null,i(e.value.sifat),1)]),a("tr",null,[t[9]||(t[9]=a("td",{class:"text-italic"},"Pengajuan:",-1)),a("td",null,i(e.value.pengajuan),1)]),a("tr",null,[t[10]||(t[10]=a("td",{class:"text-italic"},"Durasi:",-1)),a("td",null,i(e.value.durasi+" hari"),1)]),a("tr",null,[t[11]||(t[11]=a("td",{class:"text-italic"},"Dari Tanggal:",-1)),a("td",null,i(o(w)(e.value.dari_tgl)+" | "+o(z)(o(Q)(e.value.dari_tgl))),1)]),a("tr",null,[t[12]||(t[12]=a("td",{class:"text-italic"},"Sampai Tanggal:",-1)),a("td",null,i(o(w)(e.value.sampai_tgl)+" | "+o(z)(o(Q)(e.value.sampai_tgl))),1)]),a("tr",null,[t[13]||(t[13]=a("td",{class:"text-italic"},"Keperluan:",-1)),a("td",null,i(e.value.keperluan),1)]),a("tr",null,[t[14]||(t[14]=a("td",{class:"text-italic"},"Keterangan:",-1)),a("td",null,i(e.value.keterangan??"-"),1)]),a("tr",null,[t[15]||(t[15]=a("td",{class:"text-italic"},"Tujuan:",-1)),a("td",null,i(e.value.tujuan),1)]),a("tr",null,[t[16]||(t[16]=a("td",{class:"text-italic"},"Catatan:",-1)),a("td",null,i(e.value.catatan||"-"),1)]),a("tr",null,[a("td",nt,[l(M,{color:"green-8"})])]),a("tr",null,[t[17]||(t[17]=a("td",{class:"text-italic"},"Kembali:",-1)),a("td",null,i(o(w)(e.value.kembali_tgl)+" | "+o(z)(o(Q)(e.value.kembali_tgl))),1)]),a("tr",null,[t[18]||(t[18]=a("td",{class:"text-italic"},"Status:",-1)),a("td",null,i(e.value.status?q(e.value.status):""),1)])])]),l(B,{showing:r.value},null,8,["showing"])]),_:1})]),_:1})]),_:1})):F("",!0)]),_:1})])]),a("div",it,[a("div",ot,[l(J,{class:"",santri_id:e.value.santri_id},null,8,["santri_id"])])])]),l(T,{modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=m=>_.value=m)},{default:s(()=>[l(Y,{data:e.value,onSuccessDelete:t[2]||(t[2]=m=>u.$router.go(-1)),onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"]),l(T,{modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=m=>k.value=m)},{default:s(()=>[l(tt,{data:{id:e.value.id,kembali_tgl:e.value.kembali_tgl},onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"]),l(T,{modelValue:v.value,"onUpdate:modelValue":t[5]||(t[5]=m=>v.value=m)},{default:s(()=>[l(X,{url:c.value},null,8,["url"])]),_:1},8,["modelValue"])]),_:1})}}},Yt=h(rt,[["__scopeId","data-v-e8ca553d"]]);export{Yt as default};
