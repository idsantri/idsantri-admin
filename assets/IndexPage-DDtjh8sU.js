import{Q as w}from"./QTab-Fd9v2ElX.js";import{Q as E}from"./QTabs-DQ3kVZ7f.js";import{Q as D,a as k}from"./QTabPanels-ClrLa5zh.js";import{A as u,W as z,f as r,o,a as c,b as n,g as $,e as h,x as j,w as m,a7 as H,ad as B,t as U,c as Q,Q as x,y as T,v as N,F as O,z as F,B as A}from"./index-0PBDf7I0.js";import{Q as J}from"./QPage-B2JjDCGV.js";import{Q as V}from"./QEditor-VKTiqn8_.js";import{Q as L}from"./QSpinnerCube-Dxm5aSBA.js";import{a as P}from"./api-get-CJU_3mwN.js";import{a as S}from"./api-post-B8OlYMtG.js";import{Q as C}from"./QForm-ieTYlGnS.js";import{Q as M}from"./QSkeleton-DlTQ_uqq.js";import"./QResizeObserver-DonTkqYd.js";import"./rtl-DFPa-2ov.js";import"./use-panel-B-ZVr9yZ.js";import"./touch-BjYP5sR0.js";import"./selection-DeDWR_N3.js";import"./QBtnDropdown-CEycuZRG.js";import"./QBtnGroup-BBlBx6YD.js";import"./QMenu-3oalsLjd.js";import"./QTooltip-BrDnZWD_.js";import"./QItemSection-DpSW8XO7.js";import"./use-fullscreen-u92Ep5d8.js";import"./index-BXLuJznK.js";import"./index-BDNa_dSq.js";import"./api-error-C1WPqECD.js";const I={class:"flex justify-between items-center q-mb-sm"},W={key:0},G={key:1},R={key:0},K={key:1,class:""},X=["innerHTML"],Y={key:2},Z={__name:"PanelProfile",setup(y){const i=u(""),s=u(""),e=u(!1),a=u(!1);async function v(){const t=await P({endPoint:"config/app-wali/profile",loading:a});t&&t.profile&&(i.value=t.profile)}z(async()=>{await v()});const p=async()=>{const t=await S({endPoint:"config/app-wali/profile",loading:a,data:{profile:s.value}});t&&(e.value=!1,i.value=t.profile)};function b(){s.value=i.value,e.value=!e.value}return(t,d)=>(o(),r("div",null,[c("div",I,[d[1]||(d[1]=c("div",null,[c("div",{class:"text-italic text-weight-light"}," Teks untuk ditampilkan di halaman beranda Aplikasi Wali Santri ")],-1)),n($,{dense:"",class:"q-px-sm",icon:e.value?"close":"edit",outline:"",label:e.value?"Batal":"Edit","no-caps":"",onClick:b},null,8,["icon","label"])]),e.value?(o(),r("div",W,[n(V,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=l=>s.value=l),"min-height":"20rem",disable:a.value,definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:p}},toolbar:[[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:t.$q.lang.editor.fontSize,icon:t.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions","toolbar"])])):(o(),r("div",G,[n(j,{class:"q-mb-sm"}),a.value?(o(),r("div",R,[n(L,{size:"4em",class:"flex q-ma-lg q-mx-auto"})])):h("",!0),!a.value&&i.value?(o(),r("div",K,[c("span",{innerHTML:i.value},null,8,X)])):h("",!0),!a.value&&!i.value?(o(),r("div",Y,[...d[2]||(d[2]=[c("div",{class:""},"Belum diatur",-1)])])):h("",!0)]))]))}},ee={class:"flex justify-between items-center"},ne={key:0},ae={key:1},te={key:0},ie={key:1},oe={key:2},le={class:"text-weight-bold"},se={__name:"PanelCs",setup(y){const i=u(!1),s=u(""),e=u(!1),a=u("");async function v(){const t=await P({endPoint:"config/app-wali/cs",loading:e});t&&t.cs&&(a.value=t.cs)}z(async()=>{await v()});const p=async()=>{const t=await S({endPoint:"config/app-wali/cs",loading:e,data:{cs:s.value}});t&&(a.value=t.cs,i.value=!1)},b=()=>{s.value=a.value,i.value=!i.value};return(t,d)=>(o(),r("div",ee,[c("div",null,[d[2]||(d[2]=c("div",{class:"text-italic text-weight-light"}," Nomor WA Customer Service: ",-1)),i.value?(o(),r("div",ne,[n(C,{onSubmit:B(p,["prevent"]),class:"flex items-start q-gutter-x-sm"},{default:m(()=>[n(H,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=l=>s.value=l),outlined:"",dense:"",label:"Nomor WA",disable:e.value,clearable:"",placeholder:"628xxxx",rules:[l=>!l||!isNaN(l)||"Hanya angka!"]},null,8,["modelValue","disable","rules"]),n($,{type:"submit",color:"green-10",outline:"","no-caps":"",disabled:e.value,class:"q-px-sm",loading:e.value,icon:"save",label:"Simpan"},null,8,["disabled","loading"])]),_:1})])):(o(),r("div",ae,[e.value?(o(),r("div",te,[n(M)])):a.value===""||a.value===null?(o(),r("div",ie,[...d[1]||(d[1]=[c("div",{class:""},"Belum diatur",-1)])])):(o(),r("div",oe,[c("div",le,U(a.value.replace(/(\d{2})(\d{3})(\d{4})(\d{4})/,"$1 $2-$3-$4")),1)]))]))]),n($,{dense:"",class:"q-px-sm",icon:i.value?"close":"edit",outline:"",label:i.value?"Batal":"Edit","no-caps":"",onClick:b},null,8,["icon","label"])]))}},re={class:"text-weight-bold"},de={key:0},ue=["innerHTML"],ce={__name:"CardBanner",props:{banner:{type:Object,default:()=>{}},index:{type:Number,default:0}},emits:["onUpdate","onDelete"],setup(y,{emit:i}){const s=i,e=u(!1),a=u(y.banner?.content||"");function v(){s("onUpdate",{id:y.banner.id,content:a.value})}return(p,b)=>(o(),Q(T,{class:"q-mt-sm",flat:"",bordered:""},{default:m(()=>[n(x,{class:"q-pa-sm bg-green-1 flex justify-between items-center"},{default:m(()=>[c("div",re,"Banner "+U(y.index+1),1),c("div",null,[n($,{dense:"",class:"q-px-sm q-mr-sm",icon:e.value?"close":"edit",outline:"",label:e.value?"Batal":"Edit","no-caps":"",onClick:b[0]||(b[0]=t=>e.value=!e.value)},null,8,["icon","label"]),n($,{dense:"",class:"q-px-sm",icon:"delete",outline:"",label:"Hapus","no-caps":"",color:"negative",onClick:b[1]||(b[1]=t=>p.$emit("onDelete",y.banner.id))})])]),_:1}),n(x,{class:"q-pa-sm"},{default:m(()=>[e.value?(o(),r("div",de,[n(C,{onSubmit:B(v,["prevent"])},{default:m(()=>[n(V,{modelValue:a.value,"onUpdate:modelValue":b[2]||(b[2]=t=>a.value=t),"min-height":"20rem",definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:v}},toolbar:[[{label:p.$q.lang.editor.align,icon:p.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:p.$q.lang.editor.formatting,icon:p.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:p.$q.lang.editor.fontSize,icon:p.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","definitions","toolbar"])]),_:1})])):(o(),r("div",{key:1,innerHTML:y.banner?.content},null,8,ue))]),_:1})]),_:1}))}},me={class:"flex justify-between items-center q-mb-sm"},pe={key:0},fe={key:1},ve={key:0},be={key:1},ge={key:2},ye={__name:"PanelBanner",setup(y){const i=u(""),s=u(!1),e=u([]),a=u(!1),v=u(!1);async function p(l){const g=JSON.parse(JSON.stringify(e.value)).filter(q=>q.id!==l);await S({endPoint:"config/app-wali/banners",loading:s,data:{banners:g},notify:!0,message:"Hapus banner?"})&&(e.value=g)}async function b(l){const g=JSON.parse(JSON.stringify(e.value)).map(q=>q.id===l.id?{...q,content:l.content}:q);await S({endPoint:"config/app-wali/banners",loading:s,data:{banners:g}})&&(e.value=g)}async function t(){const l=await P({endPoint:"config/app-wali/banners",loading:s});l&&l.banners&&(e.value=l.banners)}z(async()=>{await t()});async function d(){const f=[...JSON.parse(JSON.stringify(e.value)),{id:new Date().getTime(),content:i.value}];await S({endPoint:"config/app-wali/banners",loading:s,data:{banners:f}})&&(e.value=f,a.value=!1,i.value="")}return(l,f)=>(o(),r("div",null,[c("div",me,[f[2]||(f[2]=c("div",null,[c("div",{class:"text-italic text-weight-light"},"Banner Pengumuman")],-1)),n($,{dense:"",class:"q-px-sm",icon:a.value?"close":"add",outline:"",label:a.value?"Batal":"Baru","no-caps":"",onClick:f[0]||(f[0]=g=>a.value=!a.value)},null,8,["icon","label"])]),a.value?(o(),r("div",pe,[n(C,{onSubmit:B(d,["prevent"])},{default:m(()=>[n(V,{modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=g=>i.value=g),"min-height":"10rem",disable:s.value,definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:d}},toolbar:[[{label:l.$q.lang.editor.align,icon:l.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:l.$q.lang.editor.formatting,icon:l.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:l.$q.lang.editor.fontSize,icon:l.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions","toolbar"])]),_:1})])):h("",!0),a.value?h("",!0):(o(),r("div",fe,[s.value?(o(),r("div",ve,[n(j,{class:"q-my-sm"}),n(L,{size:"4em",class:"flex q-ma-lg q-mx-auto"})])):!s.value&&e.value.length===0?(o(),r("div",be,[...f[3]||(f[3]=[c("div",{class:"text-center text-italic q-pa-lg text-negative"},[N(" Tidak ada data "),c("br"),N("Silakan tambahkan banner baru ")],-1)])])):!s.value&&e.value.length>0?(o(),r("div",ge,[(o(!0),r(O,null,F(e.value,(g,_)=>(o(),Q(ce,{key:g.id,banner:g,index:_,onOnUpdate:b,onOnDelete:p,errorUpdate:v.value},null,8,["banner","index","errorUpdate"]))),128))])):h("",!0)]))]))}},Je={__name:"IndexPage",setup(y){const i=u("banner");return(s,e)=>{const a=A("CardHeader");return o(),Q(J,{class:"q-pa-sm"},{default:m(()=>[n(T,null,{default:m(()=>[n(a,{title:"Pengaturan Aplikasi Wali Santri",showReload:!1}),n(x,{class:"q-pa-sm"},{default:m(()=>[n(E,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=v=>i.value=v),"inline-label":"","outside-arrows":"","mobile-arrows":"","indicator-color":"green-13","active-color":"green-11",align:"left",class:"bg-green-7 text-green-3 q-mb-sm"},{default:m(()=>[n(w,{name:"banner",label:"Banner","no-caps":""}),n(w,{name:"cs",label:"Nomor CS","no-caps":""}),n(w,{name:"profil",label:"Profil","no-caps":""})]),_:1},8,["modelValue"]),n(D,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=v=>i.value=v),animated:"",class:"rounded-borders q-card--bordered"},{default:m(()=>[n(k,{name:"banner",class:"q-pa-sm"},{default:m(()=>[n(ye)]),_:1}),n(k,{name:"cs",class:"q-pa-sm"},{default:m(()=>[n(se)]),_:1}),n(k,{name:"profil",class:"q-pa-sm"},{default:m(()=>[n(Z)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}};export{Je as default};
