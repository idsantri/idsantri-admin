import{v as r,G as I,R as q,r as k,o as p,i as e,w as t,n as v,p as Q,ac as N,Q as _,q as V,F as g,s as B,f as R,j as c,t as i,Z as D}from"./index-Cju_WcQt.js";import{Q as L}from"./QSelect-D99lhOsm.js";import{Q as T}from"./QSpace-e5nOhYJp.js";import{Q as h}from"./QItemLabel-97msGuv9.js";import{Q as S,a as b}from"./QItemSection-CL0X_XCy.js";import{Q as F}from"./QList-DJ6I4Xhf.js";import{Q as G}from"./QSlideTransition-Ci-djpLX.js";import{C as J}from"./ClosePopup-POBKOZoS.js";import{a as O}from"./api-get-C-ZFMqL_.js";const W={__name:"InputSelectIuranPaket",emits:["onInput"],setup($,{emit:P}){const m=r(!1),u=r(!1),l=r(""),o=r([]),w=P;I(l,n=>{const s=JSON.parse(JSON.stringify(o.value)).filter(a=>a.paket==n).map(a=>({paket:a.paket,item:a.item,nominal:a.nominal}));w("onInput",s||null)});async function x(){const n=await O({endPoint:"iuran-paket",loading:m});n&&(o.value=n.iuran_paket)}q(async()=>{await x()});function y(){const n=o.value.map(s=>s.paket);return Array.from(new Set(n))}function d(){return o.value.filter(n=>n.paket==l.value)}function f(){return d().reduce(function(s,a){return s+Number(a.nominal)},0)}return(n,s)=>(p(),k(g,null,[e(L,{label:"Pilih paket",dense:"",outlined:"","emit-value":"","map-options":"",options:y(),loading:m.value,behavior:"menu",clearable:"",hint:f().toRupiah(),modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=a=>l.value=a),rules:[a=>!!a||"Harus diisi!"],class:N([n.$attrs.class])},{after:t(()=>[v(e(Q,{"no-caps":"",icon:"settings",to:"/iuran/paket",outline:"",dense:"",class:"q-pa-sm"},null,512),[[J]]),e(Q,{color:"green","no-caps":"",icon:"info",outline:"",dense:"",class:"q-pa-sm",onClick:s[0]||(s[0]=a=>u.value=!u.value)})]),_:1},8,["options","loading","hint","modelValue","rules","class"]),e(G,{appear:""},{default:t(()=>[v(e(_,{class:"no-padding q-my-sm"},{default:t(()=>[e(V,{bordered:"",flat:"",class:"bg-green-1 scroll",style:{height:"150px"}},{default:t(()=>[e(_,{class:"q-pa-sm q-card--bordered"},{default:t(()=>[e(F,{separator:""},{default:t(()=>[(p(!0),k(g,null,B(d(),(a,C)=>(p(),R(S,{key:C,dense:""},{default:t(()=>[e(b,null,{default:t(()=>[e(h,{class:"flex"},{default:t(()=>[c(i(a.urut??"#")+". "+i(a.item)+" ",1),e(T),c(" "+i(Number(a.nominal).toRupiah()),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(S,{dense:""},{default:t(()=>[e(b,null,{default:t(()=>[e(h,{class:"text-right text-bold"},{default:t(()=>[c(i(f().toRupiah()),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[D,u.value]])]),_:1})],64))}};export{W as _};
