import{ad as J,ac as na,q as v,A as oa,s as L,E as q,c as Q,o as m,w as t,g as e,Q as S,v as k,e as $,a as _,b as x,F as D,D as N,t as g,J as O,G as K,l as P,af as G,f as z,a9 as j,K as W,C as X,al as ra}from"./index-7CSwp2_F.js";import{Q as H,a as I}from"./QToolbar-srmB26WJ.js";import{Q as ua}from"./QImg-fbMYNx2Y.js";import{a as A}from"./api-get-DuO3SvCA.js";import{f as da}from"./format-date-OVhbBx9F.js";import{_ as ia}from"./ImageUploader-DS1FXJT_.js";import{_ as ma}from"./PersonaliaForm-CkDOf7lp.js";import{f as pa}from"./format-text-DnCGEu2I.js";import{Q as E}from"./QTab-Cj0vLROu.js";import{Q as ca}from"./QTabs-BuUDseLx.js";import{Q as _a,a as R}from"./QTabPanels-BJsg6pt7.js";import{Q as Y}from"./QSkeleton-Ch0op0kb.js";import{Q as U}from"./QItemLabel-CKlMwpGR.js";import{Q as Z,a as T}from"./QItem-uQPZRiJn.js";import{Q as aa}from"./QList-DqKL7ctj.js";import{g as ea}from"./array-object-BytDdNh7.js";import{Q as ta}from"./QForm-Wp0ew8cl.js";import{_ as va}from"./InputSelectTingkatPendidikan-CErvag1_.js";import{_ as M}from"./InputSelectArray-DIhSM0DE.js";import{u as la}from"./useCrudForm-C0exMzeG.js";import{A as sa}from"./ApiCrud-CNV_kxn9.js";import{_ as fa}from"./InputSelectTahunAjaran-BKQK0pTN.js";import{Q as ga}from"./QSelect-C5VRSbJv.js";import"./index-qM3xE_ij.js";import"./index-CHInT04R.js";import"./api-error-KIhzVtr9.js";import"./id-BuNGTsqN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CarouselAlamat-Bi5y8seC.js";import"./use-panel-BtFCflif.js";import"./touch-BjYP5sR0.js";import"./selection-DtPN7vAs.js";import"./use-fullscreen-DEWgrZtG.js";import"./QBtnGroup-6k6u8-rp.js";import"./alamat-store-CnpgIunK.js";import"./Alamat-BOlrSSGq.js";import"./Api-DAThqvT-.js";import"./QBtnDropdown-DGBrfUIS.js";import"./QMenu-k-hbOwkm.js";import"./ClosePopup-zu4I2LUp.js";import"./hijri-Bs48DFvR.js";import"./format-number-B34ySHL_.js";import"./InputSelectKotaLahir-4afC6OyZ.js";import"./QResizeObserver-BdGG6q2D.js";import"./rtl-DFPa-2ov.js";import"./lists-store-C5eIjKmn.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-B4dGzzK-.js";import"./Lists-Bkh-ygfR.js";import"./QChip-BMjI67Ti.js";import"./format-CJebrXOQ.js";const ba={class:"row"},ha={class:"col-4 q-pr-sm"},ka={class:"col"},ya={class:"text-caption text-italic"},Va={class:"q-mb-sm"},xa={__name:"CardIdentitas",emits:["on-load"],setup(y,{emit:i}){const r=J(),o=na(),a=v({}),d=v(!1),f=v(!1),b=i;async function w(c){c.id==r.params.id?(a.value=c,b("on-load",a.value)):o.push(`/personalia/${c.id}`)}async function V(){const c=await A({endPoint:`aparatur/${r.params.id}`,loading:d});c&&(a.value=c.aparatur,await p(),b("on-load",a.value))}async function p(){const c=await A({endPoint:`images/aparatur/${a.value.id}`});c&&(a.value.image=c.image_url)}const u=oa(()=>({Nama:`${a.value.nama?.toUpperCase()} (${a.value.sex?.toUpperCase()})`,Alamat:pa(a.value.jl,a.value.rt,a.value.rw,a.value.desa,a.value.kecamatan,a.value.kabupaten,a.value.provinsi,a.value.kode_pos),Kelahiran:`${a.value.tmp_lahir||"-"}, ${da(a.value.tgl_lahir)}`,Telepon:a.value.telepon||"-",Email:a.value.email||"-"}));L(async()=>{r.params.id&&await V()});const l=v(!1),n=c=>l.value=c;async function F(){l.value=!1,await p()}return(c,h)=>{const s=q("CardLoading");return m(),Q(P,{flat:"",bordered:"",class:""},{default:t(()=>[e(S,{class:"bg-green-7 no-padding"},{default:t(()=>[e(H,{class:"no-padding no-margin"},{default:t(()=>[e(I,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...h[4]||(h[4]=[k(" Identitas ",-1)])]),_:1}),e($,{dense:"",flat:"",class:"q-px-md q-mr-sm","no-caps":"",icon:"sync",color:"green-2",onClick:V}),e($,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:h[0]||(h[0]=C=>f.value=!0)})]),_:1})]),_:1}),e(S,{class:"q-pa-sm"},{default:t(()=>[_("div",ba,[_("div",ha,[e(ua,{src:a.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),e($,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:h[1]||(h[1]=C=>l.value=!0)})]),_("div",ka,[(m(!0),x(D,null,N(u.value,(C,B)=>(m(),x("div",{key:B},[_("div",ya,g(B),1),_("div",Va,g(C),1)]))),128))])])]),_:1}),e(s,{showing:d.value},null,8,["showing"]),e(O,{persistent:"",modelValue:f.value,"onUpdate:modelValue":h[3]||(h[3]=C=>f.value=C)},{default:t(()=>[e(ma,{data:a.value,onSuccessSubmit:w,onSuccessDelete:h[2]||(h[2]=C=>c.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"]),e(ia,{"show-uploader":l.value,url:`/images/aparatur/${K(r).params.id}`,"img-format":"webp",onUpdateUploader:n,onSuccessUpload:F},null,8,["show-uploader","url"])]),_:1})}}};class wa extends sa{constructor(){super("aparatur-madrasah")}}const qa=new wa,Qa={__name:"PersonaliaMadrasahForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(y,{emit:i}){const r=y,o=i,a=v({...r.data}),d=!r.data.id,{handleDelete:f,handleCreate:b,handleUpdate:w,loading:V}=la(qa,{emit:o,responseKey:"aparatur_madrasah"}),p=async()=>{const l={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,tingkat_id:a.value.tingkat_id,kelas:a.value.kelas,ruang:a.value.ruang,keterangan:a.value.keterangan};return d?await b(l,!0):await w(r.data.id,l,!0)},u=async()=>await f(r.data.id);return(l,n)=>{const F=q("FormHeader"),c=q("FormLoading"),h=q("FormActions");return m(),Q(P,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ta,{onSubmit:G(p,["prevent"])},{default:t(()=>[e(F,{title:"Input Jabatan Madrasiyah","is-new":d}),K(V)?(m(),Q(c,{key:0})):z("",!0),e(S,null,{default:t(()=>[e(j,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(M,{modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=s=>a.value.jabatan=s),url:"jabatan-madrasiyah",label:"Jabatan",class:"q-my-sm",rules:[s=>!!s||"Harus diisi!"]},null,8,["modelValue","rules"]),e(fa,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=s=>a.value.th_ajaran_h=s),rules:[s=>!!s||"Harus diisi!"],class:"q-my-sm"},null,8,["modelValue","rules"]),e(va,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":n[2]||(n[2]=s=>a.value.tingkat_id=s),class:"q-my-sm",rules:[s=>!!s||"Harus diisi!"]},null,8,["modelValue","rules"]),e(M,{modelValue:a.value.kelas,"onUpdate:modelValue":n[3]||(n[3]=s=>a.value.kelas=s),url:"kelas",label:"Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=s=>a.value.ruang=s)},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=s=>a.value.keterangan=s),autogrow:""},null,8,["modelValue"])]),_:1}),e(h,{"btn-delete":!d,onOnDelete:u},null,8,["btn-delete"])]),_:1})]),_:1})}}},$a={class:"q-card--bordered"},ja={class:"q-px-md"},Ca={key:0},Ua={key:1},Sa={class:"text-bold"},Fa={__name:"CardJabatanMadrasah",setup(y){const i=J(),r=v(!1),o=v([]),a=v(!1),d=v({}),f=W("aparatur");async function b(){if(i.params.id){const p=await A({endPoint:"aparatur-madrasah",params:{aparatur_id:i.params.id},loading:r});p&&(o.value=p.aparatur_madrasah)}}L(async()=>await b());const w=()=>{d.value={aparatur_id:f.value.id,nama:f.value.nama},a.value=!0},V=p=>{d.value=ea(o.value,p),a.value=!0};return(p,u)=>(m(),x(D,null,[_("div",$a,[_("div",ja,[e(H,{class:"no-padding no-margin"},{default:t(()=>[e(I,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...u[1]||(u[1]=[k(" Jabatan Madrasah ",-1)])]),_:1}),e($,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:w})]),_:1})]),e(X,{class:""}),e(aa,{separator:"",class:""},{default:t(()=>[r.value?(m(),x("div",Ca,[e(Y,{height:"80px"})])):o.value?.length?(m(!0),x(D,{key:2},N(o.value,l=>(m(),Q(Z,{key:l.id,class:""},{default:t(()=>[e(T,null,{default:t(()=>[e(U,{overline:""},{default:t(()=>[k(g(l.th_ajaran_h)+" | "+g(l.th_ajaran_m),1)]),_:2},1024),e(U,{lines:"1"},{default:t(()=>[_("span",Sa,g(l.jabatan),1),k("; "+g(l.tingkat)+g(l.kelas?"; "+l.kelas:"")+" "+g(l.ruang?"("+l.ruang+")":""),1)]),_:2},1024),e(U,{caption:"",class:"text-italic"},{default:t(()=>[k(g(l.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(T,{side:""},{default:t(()=>[e($,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:n=>V(l.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(m(),x("div",Ua,[...u[2]||(u[2]=[_("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[k(" Tidak data data untuk ditampilkan."),_("br"),k("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(O,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=l=>a.value=l)},{default:t(()=>[e(Qa,{data:d.value,onSuccessSubmit:b,onSuccessDelete:b},null,8,["data"])]),_:1},8,["modelValue"])],64))}};class Da extends sa{constructor(){super("aparatur-quran")}}const Aa=new Da,Ta={__name:"PersonaliaQuranForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(y,{emit:i}){const r=y,o=i,a=v({jabatan:"Muallim",...r.data}),d=!r.data?.id,{handleDelete:f,handleCreate:b,handleUpdate:w,loading:V}=la(Aa,{emit:o,responseKey:"aparatur_quran"}),p=async()=>{const l={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,marhalah:a.value.marhalah,faslah:a.value.faslah,ruang:a.value.ruang,keterangan:a.value.keterangan};return d?await b(l,!0):await w(r.data.id,l,!0)},u=async()=>await f(r.data.id);return(l,n)=>{const F=q("FormHeader"),c=q("FormLoading"),h=q("FormActions");return m(),Q(P,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ta,{onSubmit:G(p,["prevent"])},{default:t(()=>[e(F,{title:"Input Jabatan Madrasiyah","is-new":d}),K(V)?(m(),Q(c,{key:0})):z("",!0),e(S,null,{default:t(()=>[e(j,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(j,{dense:"",class:"q-my-sm",outlined:"",filled:"",label:"Jabatan",modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=s=>a.value.jabatan=s),disable:""},null,8,["modelValue"]),e(M,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=s=>a.value.th_ajaran_h=s),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-my-sm",rules:[s=>!!s||"Harus diisi!"],selected:a.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),e(ga,{dense:"",outlined:"",modelValue:a.value.marhalah,"onUpdate:modelValue":n[2]||(n[2]=s=>a.value.marhalah=s),label:"Marhalah *",class:"q-my-sm",rules:[s=>!!s||"Harus diisi!"],options:["Ula","Wustho","Ulya"]},null,8,["modelValue","rules"]),e(M,{modelValue:a.value.faslah,"onUpdate:modelValue":n[3]||(n[3]=s=>a.value.faslah=s),url:"faslah-quran",label:"Faslah/Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=s=>a.value.ruang=s)},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=s=>a.value.keterangan=s),autogrow:""},null,8,["modelValue"])]),_:1}),e(h,{"btn-delete":!d,onOnDelete:u},null,8,["btn-delete"])]),_:1})]),_:1})}}},Ma={class:"q-card--bordered"},Pa={class:"q-px-md"},Ha={key:0},Ia={key:1},Ja={__name:"CardJabatanQuran",setup(y){const i=J(),r=v(!1),o=v([]),a=v(!1),d=v({}),f=W("aparatur");async function b(){if(i.params.id){const p=await A({endPoint:"aparatur-quran",params:{aparatur_id:i.params.id},loading:r});p&&(o.value=p.aparatur_quran)}}L(async()=>await b());const w=()=>{d.value={aparatur_id:f.value.id,nama:f.value.nama},a.value=!0},V=p=>{d.value=ea(o.value,p),a.value=!0};return(p,u)=>(m(),x(D,null,[_("div",Ma,[_("div",Pa,[e(H,{class:"no-padding no-margin"},{default:t(()=>[e(I,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...u[1]||(u[1]=[k(" Jabatan Quran ",-1)])]),_:1}),e($,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:w})]),_:1})]),e(X,{class:""}),e(aa,{separator:"",class:""},{default:t(()=>[r.value?(m(),x("div",Ha,[e(Y,{height:"80px"})])):o.value?.length?(m(!0),x(D,{key:2},N(o.value,l=>(m(),Q(Z,{key:l.id,class:""},{default:t(()=>[e(T,null,{default:t(()=>[e(U,{overline:""},{default:t(()=>[k(g(l.th_ajaran_h)+" | "+g(l.th_ajaran_m),1)]),_:2},1024),e(U,{lines:"1"},{default:t(()=>[u[3]||(u[3]=_("span",{class:"text-bold"},"Muallim",-1)),k("; "+g(l.marhalah)+g(l.faslah?"; "+l.faslah:"")+" "+g(l.ruang?"("+l.ruang+")":""),1)]),_:2},1024),e(U,{caption:"",class:"text-italic"},{default:t(()=>[k(g(l.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(T,{side:""},{default:t(()=>[e($,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:n=>V(l.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(m(),x("div",Ia,[...u[2]||(u[2]=[_("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[k(" Tidak data data untuk ditampilkan."),_("br"),k("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(O,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=l=>a.value=l)},{default:t(()=>[e(Ta,{data:d.value,onSuccessSubmit:b,onSuccessDelete:b},null,8,["data"])]),_:1},8,["modelValue"])],64))}},La={__name:"CardJabatan",setup(y){const i=v("madrasah");return(r,o)=>(m(),Q(P,{flat:"",bordered:"",class:""},{default:t(()=>[e(S,{class:"bg-green-7 no-padding"},{default:t(()=>[e(H,{class:"no-padding no-margin"},{default:t(()=>[e(I,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...o[2]||(o[2]=[k(" Jabatan ",-1)])]),_:1}),e(ca,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=a=>i.value=a),"narrow-indicator":"",class:"text-green-11","no-caps":"",dense:""},{default:t(()=>[e(E,{name:"madrasah",label:"Madrasah"}),e(E,{name:"quran",label:"Quran"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_a,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=a=>i.value=a),animated:"",class:"q-pa-sm"},{default:t(()=>[e(R,{name:"madrasah",class:"no-padding"},{default:t(()=>[e(Fa)]),_:1}),e(R,{name:"quran",class:"no-padding"},{default:t(()=>[e(Ja)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Na={class:"col-12 col-md-6 q-pa-sm"},Oa={class:"col-12 col-md-6 q-pa-sm"},Le={__name:"PersonaliaDetail",setup(y){const i=v({});return ra("aparatur",i),(r,o)=>{const a=q("CardHeader"),d=q("CardPage");return m(),Q(d,null,{default:t(()=>[e(a,{title:"Detail Personalia",showReload:!1},{buttons:t(()=>[e($,{"no-caps":"",label:"Personalia",icon:"badge",dense:"",color:"green-13",class:"q-px-md text-green-10",to:"/personalia"})]),_:1}),e(S,{class:"row no-padding",style:{"max-width":"1200px"}},{default:t(()=>[_("div",Na,[e(xa,{onOnLoad:o[0]||(o[0]=f=>i.value=f)})]),_("div",Oa,[e(La)])]),_:1})]),_:1})}}};export{Le as default};
