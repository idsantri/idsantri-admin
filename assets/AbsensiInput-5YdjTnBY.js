import{Q as S}from"./QSpace-RyUqKbav.js";import{Q as j}from"./QTooltip-BKSwt_je.js";import{q as V,ad as I,ac as T,s as Q,b as c,o as p,g as a,G as i,w as d,Q as _,a as e,v as y,t as g,p as C,f as q,F as $,D,e as b,a9 as o,l as L}from"./index-DutRA_CO.js";import{Q as M}from"./QSkeleton-DR1gHoWS.js";import{Q as P}from"./QMarkupTable-soH4YcMw.js";import{A as f,_ as B}from"./FilterKelas-Doj-5VHZ.js";import{t as F}from"./format-text-DnCGEu2I.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QMenu-JGhTZEq-.js";import"./selection-BSDJEjKX.js";import"./QToolbar-DJQywJGe.js";import"./lists-madrasah-store-CN3dd_S1.js";import"./QSelect-LIcm9uTB.js";import"./QField-BhEqSw-i.js";import"./QChip-D_SQIzNi.js";import"./QItem-qGBVeF8-.js";import"./QItemLabel-WimR8O_E.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./Kelas-78SoOI7m.js";import"./ApiCrud-CZFmsy5d.js";import"./Api-AjNxW92f.js";import"./index-BAyNzCk6.js";import"./index-Cpf3S9fo.js";import"./apiPost-BTbDNFlR.js";import"./AbsensiSetting--j-UYtgS.js";const K={class:"text-subtitle1"},z=["innerHTML"],J={key:0},O={key:1},R={colspan:"50"},E={key:2},G={class:"text-center"},W={class:"text-center"},X={class:"text-center"},Y={class:"text-left"},Z={class:"bg-grey-1"},ee={class:"bg-grey-1"},te={class:"bg-grey-1"},le={class:"bg-grey-1"},ae={class:"bg-green-1"},se={class:"bg-green-1"},ne={class:"bg-green-1"},oe={class:"bg-green-1"},de={class:"bg-grey-1"},re={class:"bg-grey-1"},ue={class:"bg-grey-1"},ie={class:"bg-grey-1"},ce={class:"bg-green-1"},pe={class:"bg-green-1"},me={class:"bg-green-1"},ge={class:"bg-green-1"},_e={class:"bg-grey-1"},he={class:"bg-grey-1"},Ve={class:"bg-grey-1"},be={class:"bg-grey-1"},ke={class:"bg-green-2"},xe={class:"bg-green-2"},ye={class:"bg-green-2"},fe={class:"bg-green-2"},Ue={__name:"AbsensiInput",setup(ve){const r=V(!1),U=I(),v=T(),k=V(""),m=V([]),{params:s}=U,h=s.absensi?.toLowerCase()==="sekolah"?f.Sekolah:s.absensi?.toLowerCase()==="musyawarah"?f.Musyawarah:null;async function N(){const u={th_ajaran_h:s.th_ajaran_h,tingkat_id:s.tingkat_id,kelas:s.kelas,bulan_ujian:s.bulan_ujian};try{r.value=!0,await h.removeAbsensi(u),m.value=[];const n=`/madrasah/absensi/input/${s.absensi}/${s.th_ajaran_h}/${s.tingkat_id}/${s.kelas}`;v.push(n)}catch(n){console.error("ðŸš€ ~ deleteAbsensi ~ error:",n)}finally{r.value=!1}}async function w(){const u={absensi:JSON.parse(JSON.stringify(m.value))};try{r.value=!0;const n=await h.create({data:u,message:'<span style="color:blue">Kirim data absensi?</span>'});m.value=n["absensi_"+s.absensi]}catch(n){console.error("ðŸš€ ~ submitAbsensi ~ error:",n)}finally{await x(),r.value=!1}}async function x(){const u={th_ajaran_h:s.th_ajaran_h,tingkat_id:s.tingkat_id,kelas:s.kelas,bulan_ujian:s.bulan_ujian};try{r.value=!0;const n=await h.getAll({params:u});m.value=n["absensi_"+s.absensi]}catch(n){console.error("ðŸš€ ~ fetchAbsensi ~ error:",n)}finally{r.value=!1}}return Q(async()=>{s.th_ajaran_h&&s.tingkat_id&&s.kelas&&s.bulan_ujian&&await x()}),(u,n)=>(p(),c("div",null,[a(B,{"show-set-bulan-ujian":!0,"start-url":`/madrasah/absensi/input/${i(s).absensi}`,onDataFilter:n[0]||(n[0]=t=>k.value=t)},null,8,["start-url"]),a(L,{class:"q-mt-sm",flat:"",bordered:""},{default:d(()=>[a(_,{class:"bg-green-7 text-green-1 text-subtitle1 q-px-sm q-py-xs flex items-center"},{default:d(()=>[e("div",K,[n[1]||(n[1]=y(" âž¡ï¸ ",-1)),e("strong",null," Absensi "+g(i(F)(i(s).absensi)),1)]),a(S),a(C,{name:"info",color:"green-11",size:"sm"},{default:d(()=>[a(j,{class:"bg-green-1 text-green-10"},{default:d(()=>[...n[2]||(n[2]=[y("Untuk update ke kosong gunakan angka 0",-1)])]),_:1})]),_:1})]),_:1}),a(_,{class:"bg-green-3 text-green-10 text-subtitle1 q-pa-sm"},{default:d(()=>[e("div",null,[e("span",{innerHTML:k.value||"Tentukan filter!"},null,8,z)])]),_:1}),a(_,{class:"no-padding"},{default:d(()=>[a(P,{flat:""},{default:d(()=>[n[4]||(n[4]=e("thead",null,[e("tr",null,[e("th",{rowspan:"2",class:"text-center"},"No."),e("th",{rowspan:"2",class:"text-center"},"ID Santri"),e("th",{rowspan:"2",class:"text-center"},"ID Kelas"),e("th",{rowspan:"2",class:"text-left"},"Nama"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-1"),e("th",{colspan:"4",class:"bg-green-1"},"Pekan-2"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-3"),e("th",{colspan:"4",class:"bg-green-1"},"Pekan-4"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-5"),e("th",{colspan:"4",class:"bg-green-2"},"Sebulan")]),e("tr",null,[e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-1"},"S"),e("th",{class:"bg-green-1"},"I"),e("th",{class:"bg-green-1"},"A"),e("th",{class:"bg-green-1"},"T"),e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-1"},"S"),e("th",{class:"bg-green-1"},"I"),e("th",{class:"bg-green-1"},"A"),e("th",{class:"bg-green-1"},"T"),e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-2"},"S"),e("th",{class:"bg-green-2"},"I"),e("th",{class:"bg-green-2"},"A"),e("th",{class:"bg-green-2"},"T")])],-1)),!i(s).th_ajaran_h||!i(s).tingkat_id||!i(s).kelas||!i(s).bulan_ujian?(p(),c("tbody",J,[...n[3]||(n[3]=[e("tr",null,[e("td",{colspan:"50"},[e("div",{class:"text-center text-negative text-body1 text-italic bg-red-1 q-pa-md"}," Tentukan filter! ")])],-1)])])):q("",!0),r.value?(p(),c("tbody",O,[e("tr",null,[e("td",R,[a(M,{height:"50px"})])])])):(p(),c("tbody",E,[(p(!0),c($,null,D(m.value,(t,A)=>(p(),c("tr",{key:A},[e("td",G,g(t.no_absen?t.no_absen.toString().padStart(2,0):""),1),e("td",W,g(t.santri_id),1),e("td",X,[a(b,{flat:"",dense:"","no-caps":"",class:"text-green-10 bg-green-11 q-px-sm",style:{"min-width":"50px"},onClick:l=>u.$router.push(`/madrasah/kelas/${t.kelas_id}/riwayat`)},{default:d(()=>[e("small",null,g(t.kelas_id),1)]),_:2},1032,["onClick"])]),e("td",Y,g(t.nama),1),e("td",Z,[a(o,{outlined:"",dense:"",modelValue:t.p1s,"onUpdate:modelValue":l=>t.p1s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ee,[a(o,{outlined:"",dense:"",modelValue:t.p1i,"onUpdate:modelValue":l=>t.p1i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",te,[a(o,{outlined:"",dense:"",modelValue:t.p1a,"onUpdate:modelValue":l=>t.p1a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",le,[a(o,{outlined:"",dense:"",modelValue:t.p1t,"onUpdate:modelValue":l=>t.p1t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ae,[a(o,{outlined:"",dense:"",modelValue:t.p2s,"onUpdate:modelValue":l=>t.p2s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",se,[a(o,{outlined:"",dense:"",modelValue:t.p2i,"onUpdate:modelValue":l=>t.p2i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ne,[a(o,{outlined:"",dense:"",modelValue:t.p2a,"onUpdate:modelValue":l=>t.p2a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",oe,[a(o,{outlined:"",dense:"",modelValue:t.p2t,"onUpdate:modelValue":l=>t.p2t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",de,[a(o,{outlined:"",dense:"",modelValue:t.p3s,"onUpdate:modelValue":l=>t.p3s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",re,[a(o,{outlined:"",dense:"",modelValue:t.p3i,"onUpdate:modelValue":l=>t.p3i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ue,[a(o,{outlined:"",dense:"",modelValue:t.p3a,"onUpdate:modelValue":l=>t.p3a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ie,[a(o,{outlined:"",dense:"",modelValue:t.p3t,"onUpdate:modelValue":l=>t.p3t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ce,[a(o,{outlined:"",dense:"",modelValue:t.p4s,"onUpdate:modelValue":l=>t.p4s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",pe,[a(o,{outlined:"",dense:"",modelValue:t.p4i,"onUpdate:modelValue":l=>t.p4i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",me,[a(o,{outlined:"",dense:"",modelValue:t.p4a,"onUpdate:modelValue":l=>t.p4a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ge,[a(o,{outlined:"",dense:"",modelValue:t.p4t,"onUpdate:modelValue":l=>t.p4t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",_e,[a(o,{outlined:"",dense:"",modelValue:t.p5s,"onUpdate:modelValue":l=>t.p5s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",he,[a(o,{outlined:"",dense:"",modelValue:t.p5i,"onUpdate:modelValue":l=>t.p5i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Ve,[a(o,{outlined:"",dense:"",modelValue:t.p5a,"onUpdate:modelValue":l=>t.p5a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",be,[a(o,{outlined:"",dense:"",modelValue:t.p5t,"onUpdate:modelValue":l=>t.p5t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ke,[a(o,{outlined:"",dense:"","model-value":Number(t.p1s)+Number(t.p2s)+Number(t.p3s)+Number(t.p4s)+Number(t.p5s),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",xe,[a(o,{outlined:"",dense:"","model-value":Number(t.p1i)+Number(t.p2i)+Number(t.p3i)+Number(t.p4i)+Number(t.p5i),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",ye,[a(o,{outlined:"",dense:"","model-value":Number(t.p1a)+Number(t.p2a)+Number(t.p3a)+Number(t.p4a)+Number(t.p5a),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",fe,[a(o,{outlined:"",dense:"","model-value":Number(t.p1t)+Number(t.p2t)+Number(t.p3t)+Number(t.p4t)+Number(t.p5t),class:"text-center",readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])])]))),128))])),n[5]||(n[5]=e("tfoot",null,null,-1))]),_:1})]),_:1}),a(_,{class:"bg-green-6 text-green-11 text-subtitle1 q-pa-sm full-width row no-wrap justify-between items-center content-center"},{default:d(()=>[a(b,{dense:"",class:"q-px-md","no-caps":"",label:"Hapus",color:"negative",onClick:N}),n[6]||(n[6]=e("div",{class:"text-caption text-italic text-center"},"S=Sakit; I=Izin; A=Alpa; T=Terlambat",-1)),a(b,{dense:"",class:"q-px-md","no-caps":"",onClick:w,label:"Kirim",color:"green-10"})]),_:1})]),_:1})]))}},Xe=H(Ue,[["__scopeId","data-v-ef4a21db"]]);export{Xe as default};
