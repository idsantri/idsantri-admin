import{Q as w}from"./QTab-Bvt6aZAJ.js";import{Q as E}from"./QTabs-q7eXOXOC.js";import{Q as D,a as k}from"./QTabPanels-Ccsr4ZPU.js";import{v as u,R as z,r,o,k as c,i as n,p as $,y as h,l as j,w as m,a4 as O,a8 as B,t as U,f as Q,Q as x,q as T,j as N,F,s as H}from"./index-1h6WQa8x.js";import{Q as J}from"./QPage-B_WVg178.js";import{Q as V}from"./QEditor-C4ANtdqU.js";import{Q as L}from"./QSpinnerCube-CdFtSnRz.js";import{a as P}from"./api-get-BY6mtHh6.js";import{a as S}from"./api-post-C74Y7wCj.js";import{Q as C}from"./QForm-Dcqp4yj8.js";import{Q as M}from"./QSkeleton-BA_8lTLb.js";import{_ as A}from"./CardHeader-9jHTR91R.js";import"./QResizeObserver-BGqO9aRk.js";import"./rtl-DFPa-2ov.js";import"./use-panel-Dii0ibbX.js";import"./touch-BjYP5sR0.js";import"./selection-Bkxc-DqK.js";import"./QBtnDropdown-BuGH-2yX.js";import"./QBtnGroup-GiM85D-N.js";import"./QMenu-C8eKSCkY.js";import"./QTooltip-BbOK7-KT.js";import"./QItemSection-CDMonx4a.js";import"./use-fullscreen-DRV899F_.js";import"./index-CpzetzrR.js";import"./index-_Ec9HkD1.js";import"./api-error-B2Y93K9w.js";import"./QSpace-CR7bsMEl.js";const I={class:"flex justify-between items-center q-mb-sm"},W={key:0},R={key:1},G={key:0},K={key:1,class:""},X=["innerHTML"],Y={key:2},Z={__name:"PanelProfile",setup(g){const i=u(""),s=u(""),e=u(!1),a=u(!1);async function y(){const t=await P({endPoint:"config/app-wali/profile",loading:a});t&&t.profile&&(i.value=t.profile)}z(async()=>{await y()});const p=async()=>{const t=await S({endPoint:"config/app-wali/profile",loading:a,data:{profile:s.value}});t&&(e.value=!1,i.value=t.profile)};function v(){s.value=i.value,e.value=!e.value}return(t,d)=>(o(),r("div",null,[c("div",I,[d[1]||(d[1]=c("div",null,[c("div",{class:"text-italic text-weight-light"}," Teks untuk ditampilkan di halaman beranda Aplikasi Wali Santri ")],-1)),n($,{dense:"",class:"q-px-sm",icon:e.value?"close":"edit",outline:"",label:e.value?"Batal":"Edit","no-caps":"",onClick:v},null,8,["icon","label"])]),e.value?(o(),r("div",W,[n(V,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=l=>s.value=l),"min-height":"20rem",disable:a.value,definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:p}},toolbar:[[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:t.$q.lang.editor.fontSize,icon:t.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions","toolbar"])])):(o(),r("div",R,[n(j,{class:"q-mb-sm"}),a.value?(o(),r("div",G,[n(L,{size:"4em",class:"flex q-ma-lg q-mx-auto"})])):h("",!0),!a.value&&i.value?(o(),r("div",K,[c("span",{innerHTML:i.value},null,8,X)])):h("",!0),!a.value&&!i.value?(o(),r("div",Y,[...d[2]||(d[2]=[c("div",{class:""},"Belum diatur",-1)])])):h("",!0)]))]))}},ee={class:"flex justify-between items-center"},ne={key:0},ae={key:1},te={key:0},ie={key:1},oe={key:2},le={class:"text-weight-bold"},se={__name:"PanelCs",setup(g){const i=u(!1),s=u(""),e=u(!1),a=u("");async function y(){const t=await P({endPoint:"config/app-wali/cs",loading:e});t&&t.cs&&(a.value=t.cs)}z(async()=>{await y()});const p=async()=>{const t=await S({endPoint:"config/app-wali/cs",loading:e,data:{cs:s.value}});t&&(a.value=t.cs,i.value=!1)},v=()=>{s.value=a.value,i.value=!i.value};return(t,d)=>(o(),r("div",ee,[c("div",null,[d[2]||(d[2]=c("div",{class:"text-italic text-weight-light"}," Nomor WA Customer Service: ",-1)),i.value?(o(),r("div",ne,[n(C,{onSubmit:B(p,["prevent"]),class:"flex items-start q-gutter-x-sm"},{default:m(()=>[n(O,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=l=>s.value=l),outlined:"",dense:"",label:"Nomor WA",disable:e.value,clearable:"",placeholder:"628xxxx",rules:[l=>!l||!isNaN(l)||"Hanya angka!"]},null,8,["modelValue","disable","rules"]),n($,{type:"submit",color:"green-10",outline:"","no-caps":"",disabled:e.value,class:"q-px-sm",loading:e.value,icon:"save",label:"Simpan"},null,8,["disabled","loading"])]),_:1})])):(o(),r("div",ae,[e.value?(o(),r("div",te,[n(M)])):a.value===""||a.value===null?(o(),r("div",ie,[...d[1]||(d[1]=[c("div",{class:""},"Belum diatur",-1)])])):(o(),r("div",oe,[c("div",le,U(a.value.replace(/(\d{2})(\d{3})(\d{4})(\d{4})/,"$1 $2-$3-$4")),1)]))]))]),n($,{dense:"",class:"q-px-sm",icon:i.value?"close":"edit",outline:"",label:i.value?"Batal":"Edit","no-caps":"",onClick:v},null,8,["icon","label"])]))}},re={class:"text-weight-bold"},de={key:0},ue=["innerHTML"],ce={__name:"CardBanner",props:{banner:{type:Object,default:()=>{}},index:{type:Number,default:0}},emits:["onUpdate","onDelete"],setup(g,{emit:i}){const s=i,e=u(!1),a=u(g.banner?.content||"");function y(){s("onUpdate",{id:g.banner.id,content:a.value})}return(p,v)=>(o(),Q(T,{class:"q-mt-sm",flat:"",bordered:""},{default:m(()=>[n(x,{class:"q-pa-sm bg-green-1 flex justify-between items-center"},{default:m(()=>[c("div",re,"Banner "+U(g.index+1),1),c("div",null,[n($,{dense:"",class:"q-px-sm q-mr-sm",icon:e.value?"close":"edit",outline:"",label:e.value?"Batal":"Edit","no-caps":"",onClick:v[0]||(v[0]=t=>e.value=!e.value)},null,8,["icon","label"]),n($,{dense:"",class:"q-px-sm",icon:"delete",outline:"",label:"Hapus","no-caps":"",color:"negative",onClick:v[1]||(v[1]=t=>p.$emit("onDelete",g.banner.id))})])]),_:1}),n(x,{class:"q-pa-sm"},{default:m(()=>[e.value?(o(),r("div",de,[n(C,{onSubmit:B(y,["prevent"])},{default:m(()=>[n(V,{modelValue:a.value,"onUpdate:modelValue":v[2]||(v[2]=t=>a.value=t),"min-height":"20rem",definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:y}},toolbar:[[{label:p.$q.lang.editor.align,icon:p.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:p.$q.lang.editor.formatting,icon:p.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:p.$q.lang.editor.fontSize,icon:p.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","definitions","toolbar"])]),_:1})])):(o(),r("div",{key:1,innerHTML:g.banner?.content},null,8,ue))]),_:1})]),_:1}))}},me={class:"flex justify-between items-center q-mb-sm"},pe={key:0},fe={key:1},ve={key:0},be={key:1},ge={key:2},ye={__name:"PanelBanner",setup(g){const i=u(""),s=u(!1),e=u([]),a=u(!1),y=u(!1);async function p(l){const b=JSON.parse(JSON.stringify(e.value)).filter(q=>q.id!==l);await S({endPoint:"config/app-wali/banners",loading:s,data:{banners:b},notify:!0,message:"Hapus banner?"})&&(e.value=b)}async function v(l){const b=JSON.parse(JSON.stringify(e.value)).map(q=>q.id===l.id?{...q,content:l.content}:q);await S({endPoint:"config/app-wali/banners",loading:s,data:{banners:b}})&&(e.value=b)}async function t(){const l=await P({endPoint:"config/app-wali/banners",loading:s});l&&l.banners&&(e.value=l.banners)}z(async()=>{await t()});async function d(){const f=[...JSON.parse(JSON.stringify(e.value)),{id:new Date().getTime(),content:i.value}];await S({endPoint:"config/app-wali/banners",loading:s,data:{banners:f}})&&(e.value=f,a.value=!1,i.value="")}return(l,f)=>(o(),r("div",null,[c("div",me,[f[2]||(f[2]=c("div",null,[c("div",{class:"text-italic text-weight-light"}," Banner Pengumuman ")],-1)),n($,{dense:"",class:"q-px-sm",icon:a.value?"close":"add",outline:"",label:a.value?"Batal":"Baru","no-caps":"",onClick:f[0]||(f[0]=b=>a.value=!a.value)},null,8,["icon","label"])]),a.value?(o(),r("div",pe,[n(C,{onSubmit:B(d,["prevent"])},{default:m(()=>[n(V,{modelValue:i.value,"onUpdate:modelValue":f[1]||(f[1]=b=>i.value=b),"min-height":"10rem",disable:s.value,definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:d}},toolbar:[[{label:l.$q.lang.editor.align,icon:l.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:l.$q.lang.editor.formatting,icon:l.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:l.$q.lang.editor.fontSize,icon:l.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions","toolbar"])]),_:1})])):h("",!0),a.value?h("",!0):(o(),r("div",fe,[s.value?(o(),r("div",ve,[n(j,{class:"q-my-sm"}),n(L,{size:"4em",class:"flex q-ma-lg q-mx-auto"})])):!s.value&&e.value.length===0?(o(),r("div",be,[...f[3]||(f[3]=[c("div",{class:"text-center text-italic q-pa-lg text-negative"},[N(" Tidak ada data "),c("br"),N("Silakan tambahkan banner baru ")],-1)])])):!s.value&&e.value.length>0?(o(),r("div",ge,[(o(!0),r(F,null,H(e.value,(b,_)=>(o(),Q(ce,{key:b.id,banner:b,index:_,onOnUpdate:v,onOnDelete:p,errorUpdate:y.value},null,8,["banner","index","errorUpdate"]))),128))])):h("",!0)]))]))}},Ie={__name:"IndexPage",setup(g){const i=u("banner");return(s,e)=>(o(),Q(J,{class:"q-pa-sm"},{default:m(()=>[n(T,null,{default:m(()=>[n(A,{title:"Pengaturan Aplikasi Wali Santri",showReload:!1}),n(x,{class:"q-pa-sm"},{default:m(()=>[n(E,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),"inline-label":"","outside-arrows":"","mobile-arrows":"","indicator-color":"green-13","active-color":"green-11",align:"left",class:"bg-green-7 text-green-3 q-mb-sm"},{default:m(()=>[n(w,{name:"banner",label:"Banner","no-caps":""}),n(w,{name:"cs",label:"Nomor CS","no-caps":""}),n(w,{name:"profil",label:"Profil","no-caps":""})]),_:1},8,["modelValue"]),n(D,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value=a),animated:"",class:"rounded-borders q-card--bordered"},{default:m(()=>[n(k,{name:"banner",class:"q-pa-sm"},{default:m(()=>[n(ye)]),_:1}),n(k,{name:"cs",class:"q-pa-sm"},{default:m(()=>[n(se)]),_:1}),n(k,{name:"profil",class:"q-pa-sm"},{default:m(()=>[n(Z)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}};export{Ie as default};
