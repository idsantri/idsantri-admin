import{Q as $}from"./QSpace-DJeipgZa.js";import{x as v,c as y,o as k,w as r,b as t,g as E,a as F,bG as Z,F as j,t as N,p as S,v as L,f as x,R as C,y as g,a9 as A,n as V,a3 as D,s as K,B as O,G as B}from"./index-Bf-p91mW.js";import{Q as G}from"./QPage-DbeGPrD5.js";import{a as U}from"./alamat-store-DfLxYoUf.js";import{a as P}from"./api-get-CiRdORW1.js";import{a as Q,Q as M}from"./QTable-De_bPsbt.js";import{Q as T}from"./QTr-D3m5hNPw.js";import{Q as z}from"./QTd-tD3oYfA5.js";import{Q as H}from"./QForm-OmDQHoiq.js";import{A as w}from"./Alamat-CB9A-ZV7.js";import{n as I}from"./index-BtaF3-6r.js";import"./index-D7WC_quC.js";import"./api-error-C0HjZ2a3.js";import"./QList-51Eu5HNp.js";import"./QMarkupTable-BU6ysEzR.js";import"./QSelect-Co09SqkM.js";import"./QChip-DeZPZCXp.js";import"./QItemSection-Bl4rOme3.js";import"./QItemLabel-sjS6zLD0.js";import"./QMenu-BvL1IfNl.js";import"./selection-CE9S_xiH.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./use-fullscreen-CrpeCgX1.js";import"./ApiCrud-SVFtkNw7.js";const R={key:0,class:"text-center"},h={__name:"TableAlamat",props:{rows:{type:Array},columns:{type:Array},loading:{type:Boolean,default:()=>!1},noCheckBox:{type:Boolean,default:()=>!1}},setup(b){const d=v([]);return(o,u)=>(k(),y(M,{flat:"",bordered:"",rows:b.rows,columns:b.columns,"row-key":"id",selection:"single",selected:d.value,"onUpdate:selected":u[1]||(u[1]=n=>d.value=n),"rows-per-page-options":[0],"virtual-scroll":"",style:{height:"75vh"},loading:b.loading},{header:r(n=>[t(T,{props:n},{default:r(()=>[b.noCheckBox?F("",!0):(k(),y(Q,{key:0,class:"text-center"},{default:r(()=>[...u[2]||(u[2]=[S("!",-1)])]),_:1})),(k(!0),E(j,null,N(n.cols,s=>(k(),y(Q,{key:s.name,props:n},{default:r(()=>[S(L(s.label),1)]),_:2},1032,["props"]))),128)),t(Q,{class:"text-center"},{default:r(()=>[...u[3]||(u[3]=[S("!",-1)])]),_:1})]),_:2},1032,["props"])]),body:r(n=>[t(T,{props:n},{default:r(()=>[b.noCheckBox?F("",!0):(k(),E("td",R,[t(Z,{modelValue:n.selected,"onUpdate:modelValue":[s=>n.selected=s,u[0]||(u[0]=s=>o.$emit("onSelect",d.value[0]))],dense:"","checked-icon":"sym_o_check_circle","unchecked-icon":"sym_o_radio_button_unchecked"},null,8,["modelValue","onUpdate:modelValue"])])),(k(!0),E(j,null,N(n.cols,s=>(k(),y(z,{key:s.name,props:n},{default:r(()=>[S(L(s.value),1)]),_:2},1032,["props"]))),128)),t(z,{class:"text-center"},{default:r(()=>[t(x,{icon:"edit",dense:"",color:"green-10",outline:"",onClick:s=>o.$emit("onEdit",n.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","selected","loading"]))}},W={__name:"AlamatProvinsiForm",props:{data:{type:Object,required:!1,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(b,{emit:d}){const o=b,u=d,n=v({}),s=v(!1),m=!o.data?.id;C(async()=>{Object.assign(n.value,o.data)});const p=async f=>{const i=new FormData(f.target),c=Object.fromEntries(i.entries());try{s.value=!0;const e=m?await w.Provinsi.create({data:c}):await w.Provinsi.update({id:o.data.id,data:c,confirm:!0});e&&(document.getElementById("btn-close-form").click(),u("successSubmit",e?.provinsi),u(m?"successCreate":"successUpdate",e?.provinsi))}finally{s.value=!1}},_=async()=>{try{s.value=!0;const f=o.data.id;await w.Provinsi.remove({id:f})&&(document.getElementById("btn-close-form").click(),u("successDelete",f))}finally{s.value=!1}};return(f,i)=>{const c=g("FormHeader"),e=g("FormLoading"),l=g("FormActions");return k(),y(K,{class:"full-width",style:{"max-width":"425px"}},{default:r(()=>[t(H,{onSubmit:A(p,["prevent"])},{default:r(()=>[t(c,{title:"Input Provinsi","is-new":m}),s.value?(k(),y(e,{key:0})):F("",!0),t(V,null,{default:r(()=>[t(D,{modelValue:n.value.id,"onUpdate:modelValue":i[0]||(i[0]=a=>n.value.id=a),name:"id",dense:"",class:"q-my-sm",outlined:"",required:"",label:"Kode Provinsi",rules:[a=>!!a||"Harus diisi!",a=>/^[a-zA-Z0-9]+$/.test(a)||"Harus berisi huruf atau angka!"]},null,8,["modelValue","rules"]),t(D,{modelValue:n.value.provinsi,"onUpdate:modelValue":i[1]||(i[1]=a=>n.value.provinsi=a),name:"provinsi",dense:"",class:"q-my-sm",outlined:"",required:"",label:"Nama Provinsi",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"])]),_:1}),t(l,{"btn-delete":!m,onOnDelete:_},null,8,["btn-delete"])]),_:1})]),_:1})}}},J={__name:"DataProvinsi",setup(b){const d=v([]),o=v(!1),u=v({}),n=v(!1),s=U();async function m(){d.value=[];const c=s.getProvinsi();c?.length>0?d.value=c:await p()}async function p(){const c=await P({endPoint:"alamat/provinsi",loading:o});c&&c.provinsi&&(s.setProvinsi(c.provinsi),d.value=s.getProvinsi())}function _(){u.value={},n.value=!0}function f(c){u.value=c,n.value=!0}C(async()=>{await m()});const i=[{name:"id",label:"ID",align:"left",field:"id",sortable:!0},{name:"provinsi",align:"left",label:"Provinsi",field:"provinsi",sortable:!0}];return(c,e)=>(k(),y(K,null,{default:r(()=>[t(V,{class:"q-pa-sm bg-green-7 text-green-11 text-subtitle1 flex flex-center"},{default:r(()=>[e[2]||(e[2]=S(" Provinsi ",-1)),t($),t(x,{onClick:p,icon:"sync",round:"",dense:"",flat:"",class:"q-mr-md"}),t(x,{onClick:_,icon:"add",round:"",dense:"",flat:""})]),_:1}),t(h,{rows:d.value,columns:i,loading:o.value,onOnSelect:e[0]||(e[0]=l=>c.$emit("onSelect",l)),onOnEdit:f},null,8,["rows","loading"]),t(O,{modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l)},{default:r(()=>[t(W,{data:u.value,onSuccessDelete:p,onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"])]),_:1}))}},X={__name:"AlamatKabupatenForm",props:{data:{type:Object,required:!1,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(b,{emit:d}){const o=b,u=d,n=v({}),s=v(!1),m=!o.data?.id;C(async()=>{Object.assign(n.value,o.data)});const p=async f=>{const i=new FormData(f.target),c=Object.fromEntries(i.entries());try{s.value=!0;const e=m?await w.Kabupaten.create({data:c}):await w.Kabupaten.update({id:o.data.id,data:c,confirm:!0});e&&(document.getElementById("btn-close-form").click(),u("successSubmit",e?.kabupaten),u(m?"successCreate":"successUpdate",e?.kabupaten))}finally{s.value=!1}},_=async()=>{try{s.value=!0;const f=o.data.id;await w.Kabupaten.remove({id:f})&&(document.getElementById("btn-close-form").click(),u("successDelete",f))}finally{s.value=!1}};return(f,i)=>{const c=g("FormHeader"),e=g("FormLoading"),l=g("FormActions");return k(),y(K,{class:"full-width",style:{"max-width":"425px"}},{default:r(()=>[t(H,{onSubmit:A(p,["prevent"])},{default:r(()=>[t(c,{title:"Input Kabupaten/Kota","is-new":m}),s.value?(k(),y(e,{key:0})):F("",!0),t(V,null,{default:r(()=>[t(D,{modelValue:n.value.provinsi_id,"onUpdate:modelValue":i[0]||(i[0]=a=>n.value.provinsi_id=a),name:"provinsi_id",dense:"",class:"",outlined:"",required:"",label:"Kode Provinsi",rules:[a=>!!a||"Harus diisi!"],readonly:""},null,8,["modelValue","rules"]),t(D,{modelValue:n.value.id,"onUpdate:modelValue":i[1]||(i[1]=a=>n.value.id=a),name:"id",dense:"",class:"q-mt-sm",outlined:"",required:"",label:"Kode Kabupaten/Kota",rules:[a=>!!a||"Harus diisi!",a=>/^[a-zA-Z0-9]+$/.test(a)||"Harus berisi huruf atau angka!"]},null,8,["modelValue","rules"]),t(D,{modelValue:n.value.kabupaten,"onUpdate:modelValue":i[2]||(i[2]=a=>n.value.kabupaten=a),name:"kabupaten",dense:"",class:"q-mt-sm",outlined:"",required:"",label:"Nama Kabupaten/Kota",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"])]),_:1}),t(l,{"btn-delete":!m,onOnDelete:_},null,8,["btn-delete"])]),_:1})]),_:1})}}},Y={__name:"DataKabupaten",props:{provinsi_id:{type:String,required:!0,default:""}},setup(b){const d=b,o=v([]),u=v(!1),n=v({}),s=v(!1),m=U();async function p(){o.value=[];const{provinsi_id:e}=d;if(!e)return;const l=await P({endPoint:"alamat/kabupaten",loading:u,params:{provinsi_id:e}});l&&l.kabupaten&&(m.setKabupaten(l.kabupaten,{provinsi_id:e}),o.value=m.getKabupaten({provinsi_id:e}))}async function _(){o.value=[];const{provinsi_id:e}=d;if(!e)return;const l=m.getKabupaten({provinsi_id:e});l?.length>0?o.value=l:p()}function f(){const{provinsi_id:e}=d;if(!e)return I("Pilih provinsi terlebih dahulu!");n.value={provinsi_id:e},s.value=!0}function i(e){n.value=e,s.value=!0}B(()=>d.provinsi_id,async e=>{await _()});const c=[{name:"id",label:"ID",align:"left",field:"id",sortable:!0,format:e=>`${e.replace(/(\w{2})(\w{2})/,"$1.$2")}`},{name:"kabupaten",align:"left",label:"Kabupaten",field:"kabupaten",sortable:!0}];return(e,l)=>(k(),y(K,null,{default:r(()=>[t(V,{class:"q-pa-sm bg-green-7 text-green-11 text-subtitle1 flex flex-center"},{default:r(()=>[l[2]||(l[2]=S(" Kabupaten/Kota ",-1)),t($),t(x,{onClick:p,icon:"sync",round:"",dense:"",flat:"",class:"q-mr-md"}),t(x,{onClick:f,icon:"add",round:"",dense:"",flat:""})]),_:1}),t(h,{rows:o.value,columns:c,loading:u.value,onOnSelect:l[0]||(l[0]=a=>e.$emit("onSelect",a)),onOnEdit:i},null,8,["rows","loading"]),t(O,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a)},{default:r(()=>[t(X,{data:n.value,onSuccessDelete:p,onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"])]),_:1}))}},ee={__name:"AlamatKecamatanForm",props:{data:{type:Object,required:!1,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(b,{emit:d}){const o=b,u=d,n=v({}),s=v(!1),m=!o.data?.id;C(async()=>{Object.assign(n.value,o.data)});const p=async f=>{const i=new FormData(f.target),c=Object.fromEntries(i.entries());try{s.value=!0;const e=m?await w.Kecamatan.create({data:c}):await w.Kecamatan.update({id:o.data.id,data:c,confirm:!0});e&&(document.getElementById("btn-close-form").click(),u("successSubmit",e?.kecamatan),u(m?"successCreate":"successUpdate",e?.kecamatan))}finally{s.value=!1}},_=async()=>{try{s.value=!0;const f=o.data.id;await w.Kecamatan.remove({id:f})&&(document.getElementById("btn-close-form").click(),u("successDelete",f))}finally{s.value=!1}};return(f,i)=>{const c=g("FormHeader"),e=g("FormLoading"),l=g("FormActions");return k(),y(K,{class:"full-width",style:{"max-width":"425px"}},{default:r(()=>[t(H,{onSubmit:A(p,["prevent"])},{default:r(()=>[t(c,{title:"Input Kecamatan/Distrik","is-new":m}),s.value?(k(),y(e,{key:0})):F("",!0),t(V,null,{default:r(()=>[t(D,{modelValue:n.value.kabupaten_id,"onUpdate:modelValue":i[0]||(i[0]=a=>n.value.kabupaten_id=a),name:"kabupaten_id",dense:"",class:"q-my-sm",outlined:"",required:"",label:"Kode Kabupaten/Kota",rules:[a=>!!a||"Harus diisi!"],readonly:""},null,8,["modelValue","rules"]),t(D,{modelValue:n.value.id,"onUpdate:modelValue":i[1]||(i[1]=a=>n.value.id=a),name:"id",dense:"",class:"q-my-sm",outlined:"",required:"",label:"Kode Kecamatan/Distrik",rules:[a=>!!a||"Harus diisi!",a=>/^[a-zA-Z0-9]+$/.test(a)||"Harus berisi huruf atau angka!"]},null,8,["modelValue","rules"]),t(D,{modelValue:n.value.kecamatan,"onUpdate:modelValue":i[2]||(i[2]=a=>n.value.kecamatan=a),name:"kecamatan",dense:"",class:"q-my-sm",outlined:"",required:"",label:"Nama Kecamatan/Distrik",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"])]),_:1}),t(l,{"btn-delete":!m,onOnDelete:_},null,8,["btn-delete"])]),_:1})]),_:1})}}},ae={__name:"DataKecamatan",props:{provinsi_id:{type:String,required:!0,default:""},kabupaten_id:{type:String,required:!0,default:""}},setup(b){const d=b,o=v([]),u=v(!1),n=v({}),s=v(!1),m=U();async function p(){o.value=[];const{provinsi_id:e,kabupaten_id:l}=d;if(!l||!e)return;const a=await P({endPoint:"alamat/kecamatan",loading:u,params:{kabupaten_id:l}});a&&a.kecamatan&&(m.setKecamatan(a.kecamatan,{provinsi_id:e,kabupaten_id:l}),o.value=m.getKecamatan({provinsi_id:e,kabupaten_id:l}))}async function _(){o.value=[];const{provinsi_id:e,kabupaten_id:l}=d;if(!l||!e)return;const a=m.getKecamatan({provinsi_id:e,kabupaten_id:l});a?.length>0?o.value=a:await p()}function f(){const{kabupaten_id:e}=d;if(!e)return I("Pilih kabupaten terlebih dahulu!");n.value={kabupaten_id:e},s.value=!0}function i(e){n.value=e,s.value=!0}B(()=>d.kabupaten_id,async e=>{await _()});const c=[{name:"id",label:"ID",align:"left",field:"id",sortable:!0,format:e=>`${e.replace(/(\w{2})(\w{2})(\w{2})/,"$1.$2.$3")}`},{name:"kecamatan",align:"left",label:"Kecamatan",field:"kecamatan",sortable:!0}];return(e,l)=>(k(),y(K,null,{default:r(()=>[t(V,{class:"q-pa-sm bg-green-7 text-green-11 text-subtitle1 flex flex-center"},{default:r(()=>[l[2]||(l[2]=S(" Kecamatan/Distrik ",-1)),t($),t(x,{onClick:p,icon:"sync",round:"",dense:"",flat:"",class:"q-mr-md"}),t(x,{onClick:f,icon:"add",round:"",dense:"",flat:""})]),_:1}),t(h,{rows:o.value,columns:c,loading:u.value,onOnSelect:l[0]||(l[0]=a=>e.$emit("onSelect",a)),onOnEdit:i},null,8,["rows","loading"]),t(O,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=a=>s.value=a)},{default:r(()=>[t(ee,{data:n.value,onSuccessDelete:p,onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"])]),_:1}))}},te={__name:"AlamatDesaForm",props:{data:{type:Object,required:!1,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(b,{emit:d}){const o=b,u=d,n=v({}),s=v(!1),m=!o.data?.id;C(async()=>{Object.assign(n.value,o.data)});const p=async f=>{const i=new FormData(f.target),c=Object.fromEntries(i.entries());try{s.value=!0;const e=m?await w.Desa.create({data:c}):await w.Desa.update({id:o.data.id,data:c,confirm:!0});e&&(document.getElementById("btn-close-form").click(),u("successSubmit",e?.desa),u(m?"successCreate":"successUpdate",e?.desa))}finally{s.value=!1}},_=async()=>{try{s.value=!0;const f=o.data.id;await w.Desa.remove({id:f})&&(document.getElementById("btn-close-form").click(),u("successDelete",f))}finally{s.value=!1}};return(f,i)=>{const c=g("FormHeader"),e=g("FormLoading"),l=g("FormActions");return k(),y(K,{class:"full-width",style:{"max-width":"425px"}},{default:r(()=>[t(H,{onSubmit:A(p,["prevent"])},{default:r(()=>[t(c,{title:"Input Desa/Kelurahan","is-new":m}),s.value?(k(),y(e,{key:0})):F("",!0),t(V,null,{default:r(()=>[t(D,{modelValue:n.value.kecamatan_id,"onUpdate:modelValue":i[0]||(i[0]=a=>n.value.kecamatan_id=a),name:"kecamatan_id",dense:"",class:"q-my-sm",outlined:"",required:"",label:"Kode Kecamatan/Distrik",rules:[a=>!!a||"Harus diisi!"],readonly:""},null,8,["modelValue","rules"]),t(D,{modelValue:n.value.id,"onUpdate:modelValue":i[1]||(i[1]=a=>n.value.id=a),name:"id",dense:"",class:"q-my-sm",outlined:"",required:"",label:"Kode Desa/Kelurahan",rules:[a=>!!a||"Harus diisi!",a=>/^[a-zA-Z0-9]+$/.test(a)||"Harus berisi huruf atau angka!"]},null,8,["modelValue","rules"]),t(D,{modelValue:n.value.desa,"onUpdate:modelValue":i[2]||(i[2]=a=>n.value.desa=a),name:"desa",dense:"",class:"q-my-sm",outlined:"",required:"",label:"Nama Desa/Kelurahan",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"])]),_:1}),t(l,{"btn-delete":!m,onOnDelete:_},null,8,["btn-delete"])]),_:1})]),_:1})}}},ne={__name:"DataDesa",props:{provinsi_id:{type:String,required:!0,default:""},kabupaten_id:{type:String,required:!0,default:""},kecamatan_id:{type:String,required:!0,default:""}},setup(b){const d=b,o=v([]),u=v(!1),n=v({}),s=v(!1),m=U();async function p(){o.value=[];const{provinsi_id:e,kabupaten_id:l,kecamatan_id:a}=d;if(!l||!e||!a)return;const q=await P({endPoint:"alamat/desa",loading:u,params:{kecamatan_id:a}});q&&q.desa&&(m.setDesa(q.desa,{provinsi_id:e,kabupaten_id:l,kecamatan_id:a}),o.value=m.getDesa({provinsi_id:e,kabupaten_id:l,kecamatan_id:a}))}async function _(){o.value=[];const{provinsi_id:e,kabupaten_id:l,kecamatan_id:a}=d;if(!l||!e||!a)return;const q=m.getDesa({provinsi_id:e,kabupaten_id:l,kecamatan_id:a});q?.length>0?o.value=q:await p()}function f(){const{kecamatan_id:e}=d;if(!e)return I("Pilih kecamatan terlebih dahulu!");n.value={kecamatan_id:e},s.value=!0}function i(e){n.value=e,s.value=!0}B(()=>d.kecamatan_id,async e=>{await _()});const c=[{name:"id",label:"ID",align:"left",field:"id",sortable:!0,format:e=>`${e.replace(/(\w{2})(\w{2})(\w{2})(\w{4})/,"$1.$2.$3.$4")}`},{name:"desa",align:"left",label:"Desa",field:"desa",sortable:!0}];return(e,l)=>(k(),y(K,null,{default:r(()=>[t(V,{class:"q-pa-sm bg-green-7 text-green-11 text-subtitle1 flex flex-center"},{default:r(()=>[l[1]||(l[1]=S(" Desa/Kelurahan ",-1)),t($),t(x,{onClick:p,icon:"sync",round:"",dense:"",flat:"",class:"q-mr-md"}),t(x,{onClick:f,icon:"add",round:"",dense:"",flat:""})]),_:1}),t(h,{rows:o.value,columns:c,loading:u.value,onOnSelect:a=>null,"no-check-box":!0,onOnEdit:i},null,8,["rows","loading"]),t(O,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a)},{default:r(()=>[t(te,{data:n.value,onSuccessDelete:p,onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"])]),_:1}))}},$e={__name:"IndexAlamat",setup(b){const d=v(""),o=v(""),u=v("");function n(p){d.value=p?.id??"",o.value="",u.value=""}function s(p){o.value=p?.id??"",u.value=""}function m(p){u.value=p?.id??""}return(p,_)=>(k(),y(G,{class:"q-pa-sm"},{default:r(()=>[t(K,null,{default:r(()=>[t(V,{class:"q-pa-sm bg-green-8 text-green-11 text-subtitle1 flex"},{default:r(()=>[_[1]||(_[1]=S(" Pengaturan Alamat ",-1)),t($),t(x,{"no-caps":"",label:"Kembali",icon:"reply",dense:"",class:"q-px-md",outline:"",onClick:_[0]||(_[0]=f=>p.$router.go(-1))})]),_:1}),t(V,{class:"no-padding full-width row no-wrap justify-start items-start content-start scroll"},{default:r(()=>[t(J,{class:"q-ma-sm",style:{"min-width":"400px","max-width":"400px"},onOnSelect:n}),t(Y,{class:"q-ma-sm",style:{"min-width":"400px","max-width":"400px"},onOnSelect:s,provinsi_id:d.value},null,8,["provinsi_id"]),t(ae,{class:"q-ma-sm",style:{"min-width":"400px","max-width":"400px"},onOnSelect:m,provinsi_id:d.value,kabupaten_id:o.value},null,8,["provinsi_id","kabupaten_id"]),t(ne,{class:"q-ma-sm",style:{"min-width":"400px","max-width":"400px"},provinsi_id:d.value,kabupaten_id:o.value,kecamatan_id:u.value},null,8,["provinsi_id","kabupaten_id","kecamatan_id"])]),_:1})]),_:1})]),_:1}))}};export{$e as default};
