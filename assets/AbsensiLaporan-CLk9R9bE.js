import{q as p,ad as x,s as k,b as o,o as i,g as l,G as c,w as r,Q as d,a as t,v as w,t as e,f as S,F as v,D as T,e as A,l as I}from"./index-B5Gb-mLe.js";import{Q as j}from"./QSkeleton-DGDHysUD.js";import{Q as C}from"./QMarkupTable-aVQEVO1E.js";import{A as b,_ as q}from"./FilterKelas-VpuaNEBn.js";import{t as N}from"./format-text-DnCGEu2I.js";import{d as Q}from"./index-w3oJRLyV.js";import"./QToolbar-DxK_sqSc.js";import"./QSpace-2DRHuWxM.js";import"./lists-madrasah-store-Ba-XlXdB.js";import"./QSelect-BqMes2y4.js";import"./QField-Bbp2qmBb.js";import"./QChip-D_d4F4g7.js";import"./QItem-BCXtxr0M.js";import"./QItemLabel-CLmt2hLx.js";import"./QMenu-CBRP4CDX.js";import"./selection-BzMZOoQD.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./Kelas-CQD_ZF5L.js";import"./ApiCrud-DSLkdATC.js";import"./Api-CNGT1L8P.js";import"./index-B2zugsq1.js";import"./apiPost-9wQ754O6.js";import"./AbsensiSetting-BFOOP_du.js";const D={class:"text-subtitle1"},L=["innerHTML"],M={key:0},P={key:1},$={colspan:"50"},B={key:2},F={class:"text-center"},V={class:"text-center"},K={class:"text-center"},H={class:"text-left"},z={class:"text-left"},E={class:"text-left"},G={class:"bg-grey-1"},R={class:"bg-grey-1"},J={class:"bg-grey-1"},O={class:"bg-grey-1"},U={class:"bg-green-1"},W={class:"bg-green-1"},X={class:"bg-green-1"},Y={class:"bg-green-1"},Z={class:"bg-grey-1"},tt={class:"bg-grey-1"},st={class:"bg-grey-1"},et={class:"bg-grey-1"},at={class:"bg-green-1"},nt={class:"bg-green-1"},lt={class:"bg-green-1"},rt={class:"bg-green-1"},ot={class:"bg-grey-1"},it={class:"bg-grey-1"},ct={class:"bg-grey-1"},gt={class:"bg-grey-1"},dt={class:"bg-green-2"},_t={class:"bg-green-2"},ht={class:"bg-green-2"},pt={class:"bg-green-2"},ut={class:"bg-green-11"},bt={class:"bg-green-11"},mt={class:"bg-green-11"},yt={class:"bg-green-11"},Gt={__name:"AbsensiLaporan",setup(ft){const _=p(!1),{params:a}=x(),u=p(""),h=p([]),m=a.absensi?.toLowerCase()==="sekolah"?b.Sekolah:a.absensi?.toLowerCase()==="musyawarah"?b.Musyawarah:null;async function y(){try{_.value=!0;const g=await m.getNotNull({th_ajaran_h:a.th_ajaran_h,tingkat_id:a.tingkat_id,bulan_ujian:a.list_bulan_ujian});h.value=g["absensi_"+a.absensi],h.value.length||Q("Tidak ada murid absen pada filter yang dipilih!")}catch(g){console.error("ðŸš€ ~ fetchAbsensi ~ error:",g)}finally{_.value=!1}}return k(async()=>{a.th_ajaran_h&&a.tingkat_id&&a.list_bulan_ujian&&await y()}),(g,n)=>(i(),o("div",null,[l(q,{"show-list-bulan-ujian":!0,showKelas:!1,"start-url":`/madrasah/absensi/laporan/${c(a).absensi}`,onDataFilter:n[0]||(n[0]=s=>u.value=s)},null,8,["start-url"]),l(I,{class:"q-mt-sm",flat:"",bordered:""},{default:r(()=>[l(d,{class:"bg-green-7 text-green-1 text-subtitle1 q-px-sm q-py-xs"},{default:r(()=>[t("div",D,[n[1]||(n[1]=w(" âž¡ï¸ ",-1)),t("strong",null," Absensi "+e(c(N)(c(a).absensi)),1)])]),_:1}),l(d,{class:"bg-green-3 text-green-10 text-subtitle1 q-pa-sm"},{default:r(()=>[t("div",null,[t("span",{innerHTML:u.value||"Tentukan filter!"},null,8,L)])]),_:1}),l(d,{class:"no-padding"},{default:r(()=>[l(C,{flat:""},{default:r(()=>[n[3]||(n[3]=t("thead",null,[t("tr",null,[t("th",{rowspan:"2",class:"text-center"},"No."),t("th",{rowspan:"2",class:"text-center"},"ID Santri"),t("th",{rowspan:"2",class:"text-center"},"ID Kelas"),t("th",{rowspan:"2",class:"text-left"},"Nama"),t("th",{rowspan:"2",class:"text-left"},"Kelas"),t("th",{rowspan:"2",class:"text-left"},"Domisili"),t("th",{colspan:"4",class:"bg-grey-1"},"Pekan-1"),t("th",{colspan:"4",class:"bg-green-1"},"Pekan-2"),t("th",{colspan:"4",class:"bg-grey-1"},"Pekan-3"),t("th",{colspan:"4",class:"bg-green-1"},"Pekan-4"),t("th",{colspan:"4",class:"bg-grey-1"},"Pekan-5"),t("th",{colspan:"4",class:"bg-green-2"},"Sebulan"),t("th",{colspan:"4",class:"bg-green-11"},"Setahun")]),t("tr",null,[t("th",{class:"bg-grey-1"},"S"),t("th",{class:"bg-grey-1"},"I"),t("th",{class:"bg-grey-1"},"A"),t("th",{class:"bg-grey-1"},"T"),t("th",{class:"bg-green-1"},"S"),t("th",{class:"bg-green-1"},"I"),t("th",{class:"bg-green-1"},"A"),t("th",{class:"bg-green-1"},"T"),t("th",{class:"bg-grey-1"},"S"),t("th",{class:"bg-grey-1"},"I"),t("th",{class:"bg-grey-1"},"A"),t("th",{class:"bg-grey-1"},"T"),t("th",{class:"bg-green-1"},"S"),t("th",{class:"bg-green-1"},"I"),t("th",{class:"bg-green-1"},"A"),t("th",{class:"bg-green-1"},"T"),t("th",{class:"bg-grey-1"},"S"),t("th",{class:"bg-grey-1"},"I"),t("th",{class:"bg-grey-1"},"A"),t("th",{class:"bg-grey-1"},"T"),t("th",{class:"bg-green-2"},"S"),t("th",{class:"bg-green-2"},"I"),t("th",{class:"bg-green-2"},"A"),t("th",{class:"bg-green-2"},"T"),t("th",{class:"bg-green-11"},"S"),t("th",{class:"bg-green-11"},"I"),t("th",{class:"bg-green-11"},"A"),t("th",{class:"bg-green-11"},"T")])],-1)),!c(a).th_ajaran_h||!c(a).tingkat_id||!c(a).list_bulan_ujian?(i(),o("tbody",M,[...n[2]||(n[2]=[t("tr",null,[t("td",{colspan:"50"},[t("div",{class:"text-center text-negative text-body1 text-italic bg-red-1 q-pa-md"}," Tentukan filter! ")])],-1)])])):S("",!0),_.value?(i(),o("tbody",P,[t("tr",null,[t("td",$,[l(j,{height:"50px"})])])])):(i(),o("tbody",B,[(i(!0),o(v,null,T(h.value,(s,f)=>(i(),o("tr",{key:f},[t("td",F,e(s.no_absen?s.no_absen.toString().padStart(2,0):""),1),t("td",V,e(s.santri_id),1),t("td",K,[l(A,{flat:"",dense:"","no-caps":"",class:"text-green-10 bg-green-11 q-px-sm",style:{"min-width":"50px"},onClick:xt=>g.$router.push(`/madrasah/kelas/${s.kelas_id}/riwayat`)},{default:r(()=>[t("small",null,e(s.kelas_id),1)]),_:2},1032,["onClick"])]),t("td",H,e(s.nama),1),t("td",z,e(s.kelas),1),t("td",E,e(s.domisili),1),t("td",G,e(s.p1s),1),t("td",R,e(s.p1i),1),t("td",J,e(s.p1a),1),t("td",O,e(s.p1t),1),t("td",U,e(s.p2s),1),t("td",W,e(s.p2i),1),t("td",X,e(s.p2a),1),t("td",Y,e(s.p2t),1),t("td",Z,e(s.p3s),1),t("td",tt,e(s.p3i),1),t("td",st,e(s.p3a),1),t("td",et,e(s.p3t),1),t("td",at,e(s.p4s),1),t("td",nt,e(s.p4i),1),t("td",lt,e(s.p4a),1),t("td",rt,e(s.p4t),1),t("td",ot,e(s.p5s),1),t("td",it,e(s.p5i),1),t("td",ct,e(s.p5a),1),t("td",gt,e(s.p5t),1),t("td",dt,e(s.sum_s),1),t("td",_t,e(s.sum_i),1),t("td",ht,e(s.sum_a),1),t("td",pt,e(s.sum_t),1),t("td",ut,e(s.all_s),1),t("td",bt,e(s.all_i),1),t("td",mt,e(s.all_a),1),t("td",yt,e(s.all_t),1)]))),128))])),n[4]||(n[4]=t("tfoot",null,null,-1))]),_:1})]),_:1}),l(d,{class:"bg-green-6 text-green-11 text-subtitle1 q-pa-sm full-width flex flex-center"},{default:r(()=>[...n[5]||(n[5]=[t("div",{class:"text-caption text-italic text-center"},"S=Sakit; I=Izin; A=Alpa; T=Terlambat",-1)])]),_:1})]),_:1})]))}};export{Gt as default};
