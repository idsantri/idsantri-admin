import{a4 as j,a7 as P,v as f,R as U,f as q,o as C,w as o,i as t,a8 as D,Q as V,k as d,t as w,a3 as i,m as _,n as y,p,Z as B,q as L}from"./index-BOc7y3E3.js";import{Q as I}from"./QSelect-Br9kkI5Z.js";import{Q as J,a as c,_ as O,b as T}from"./CarouselAlamat-C2qV7QGi.js";import{Q as $}from"./QSpace-CoisEuyS.js";import{Q as H}from"./QForm-CxO-I-hC.js";import{C as E}from"./ClosePopup-CcGROVC7.js";import{l as M}from"./loading-store-Dk6OalC_.js";import{a as R}from"./api-delete-DLV1eJE-.js";import{a as z}from"./api-update-DaN0juSD.js";import{a as A}from"./api-post-CPwNAYjq.js";import{_ as x}from"./InputSelectArray-GW0fQ7ez.js";import{_ as G}from"./FormHeader-pf3CU3SV.js";const K={class:"text-subtitle2"},F={class:"text-subtitle2"},W={class:"row justify-center"},re={__name:"PjgtCrud",props:{data:Object,isNew:Boolean},emits:["successSubmit","successDelete"],setup(g,{emit:h}){const Q=M(),{loadingMain:r}=j(Q),m=g,b=h,v=P(),l=f({});U(async()=>{Object.assign(l.value,m.data),l.value.provinsi||(l.value.provinsi="Jawa Timur")});const S=async()=>{const n=JSON.parse(JSON.stringify(l.value));let a=null;m.isNew?a=await A({endPoint:"ugt/pjgt",data:n,loading:r}):a=await z({endPoint:`ugt/pjgt/${v.params.id}`,data:n,confirm:!0,notify:!0,loading:r}),a&&(document.getElementById("btn-close-crud").click(),b("successSubmit",a?.pjgt))},N=async()=>{await R({endPoint:`ugt/pjgt/${v.params.id}`,loading:r})&&(document.getElementById("btn-close-crud").click(),b("successDelete"))},s={identitas:{title:"Identitas Diri",button:"1"},alamat:{title:"Data Alamat",button:"2"},others:{title:"Lain-Lain",button:"3"}},u=f(s.identitas.button),k=[{label:s.identitas.button,value:s.identitas.button},{label:s.alamat.button,value:s.alamat.button},{label:s.others.button,value:s.others.button}];return(n,a)=>(C(),q(L,{class:"full-width",style:{"max-width":"425px"}},{default:o(()=>[t(H,{onSubmit:D(S,["prevent"])},{default:o(()=>[t(G,{title:"Input Data PJGT","is-new":m.isNew},null,8,["is-new"]),t(V,{class:"no-padding"},{default:o(()=>[t(J,{modelValue:u.value,"onUpdate:modelValue":a[9]||(a[9]=e=>u.value=e),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"full-width",style:{height:"60vh"},swipeable:"",infinite:""},{default:o(()=>[t(c,{name:s.identitas.button,class:"no-wrap flex-center"},{default:o(()=>[d("div",K,w(s.identitas.title),1),t(i,{dense:"",hint:g.isNew?"Kosongkan jika ingin diisi otomatis!":"",class:"q-mt-sm",outlined:"",label:"ID",modelValue:l.value.id,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.id=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),t(i,{dense:"",hint:"",class:"q-mt-sm",outlined:"",label:"Nama*",modelValue:l.value.nama,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.nama=e),rules:[e=>!!e||"Harus diisi!",e=>e?.length>=5||"Setidaknya 5 huruf!"],"error-color":"negative",autocapitalize:"words"},null,8,["modelValue","rules"]),t(I,{dense:"",hint:l.value.sex=="L"?"Laki-Laki":l.value.sex=="P"?"Perempuan":"",class:"q-mt-sm",outlined:"",label:"Jenis Kelamin",modelValue:l.value.sex,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.sex=e),options:["L","P"],"emit-value":"","map-options":"","error-color":"negative",behavior:"menu"},null,8,["hint","modelValue"]),t(x,{modelValue:l.value.jenis_lembaga,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.jenis_lembaga=e),url:"jenis-lembaga-pendidikan",label:"Jenis Lembaga",hint:"",class:"q-mt-sm"},null,8,["modelValue"]),t(i,{dense:"",hint:"",class:"q-mt-sm",outlined:"",label:"Nama Lembaga",modelValue:l.value.nama_lembaga,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.nama_lembaga=e),rules:[e=>!!e||"Harus diisi!"],"error-color":"negative",autocapitalize:"words"},null,8,["modelValue","rules"])]),_:1},8,["name"]),t(c,{name:s.alamat.button,class:"no-wrap flex-center"},{default:o(()=>[t(O,{onEmitInput:a[5]||(a[5]=e=>Object.assign(l.value,e)),data:l.value},null,8,["data"])]),_:1},8,["name"]),t(c,{name:s.others.button,class:"no-wrap flex-center"},{default:o(()=>[d("div",F,w(s.others.title),1),t(x,{modelValue:l.value.wilayah,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.wilayah=e),url:"wilayah-ugt",label:"Wilayah PJGT",class:"q-mt-sm",hint:""},null,8,["modelValue"]),t(i,{dense:"",hint:"08123456789",class:"q-mt-sm",outlined:"",label:"Telepon",modelValue:l.value.telepon,"onUpdate:modelValue":a[7]||(a[7]=e=>l.value.telepon=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(i,{dense:"",hint:"",class:"q-mt-sm",outlined:"",label:"Email",modelValue:l.value.email,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.email=e)},null,8,["modelValue"])]),_:1},8,["name"])]),_:1},8,["modelValue"])]),_:1}),t(V,{class:"q-pa-sm"},{default:o(()=>[d("div",W,[t(T,{"toggle-color":"green-10","text-color":"text-green-11","no-caps":"",glossy:"",modelValue:u.value,"onUpdate:modelValue":a[10]||(a[10]=e=>u.value=e),options:k},null,8,["modelValue"])])]),_:1}),t(_,{class:"flex bg-green-6"},{default:o(()=>[y(t(p,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:N},null,512),[[B,!n.$props.isNew]]),t($),y(t(p,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close-crud"},null,512),[[E]]),t(p,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})]),_:1})]),_:1})]),_:1}))}};export{re as _};
