import{q as n,ac as q,s as V,E as d,c as f,o as c,w as o,g as e,Q as v,a as t,l as g,v as D,e as Q,t as r,ag as N,J as P}from"./index-BKgLw7qS.js";import{Q as R,a as S}from"./QToolbar-ClFVgE74.js";import{Q as A}from"./QMarkupTable-DnYbRcfn.js";import{Q as k}from"./QRouteTab-DSPju051.js";import{Q as B}from"./QTabs-VnuoKGsd.js";import{a as K}from"./api-get-Gv1bWbvV.js";import{a as M}from"./api-update-M_gkVoIM.js";import{_ as U}from"./CardSantri-D0r3f1on.js";import{_ as j}from"./KelasForm-BTrDgZ5y.js";import"./QResizeObserver-CUDBILSm.js";import"./rtl-DFPa-2ov.js";import"./index-pAYl4WkA.js";import"./index-CN_R4Poo.js";import"./api-error-Dc8TQ_NU.js";import"./QSkeleton-gUE_O0RX.js";import"./QImg-BUIa_-gb.js";import"./QItemSection-Cp_-slAD.js";import"./QItemLabel-ErlEMvu3.js";import"./QList-C7-ir8SS.js";import"./santri-store-C8Uiy-NM.js";import"./QForm-Bd5rsjRV.js";import"./InputSelectArray-BFymZrXS.js";import"./QSelect-D6dKkbgb.js";import"./QChip-CdmmyoJI.js";import"./QMenu-CDFwy_7K.js";import"./selection-CuC3BnQZ.js";import"./format-CJebrXOQ.js";import"./lists-store-Bm0br98Z.js";import"./DropDownAfter-B6ZPph_D.js";import"./QBtnDropdown-FSOTAPYO.js";import"./QBtnGroup-8_Gv106n.js";import"./ClosePopup-BWix-O7W.js";import"./Lists-BdE10_X8.js";import"./ApiCrud-D4h2pOZE.js";import"./Api-BDEd3YK9.js";import"./InputSelectTingkatPendidikan-C8s2s48o.js";import"./useCrudForm-Dqk8Q6vs.js";import"./InputSelectTahunAjaran-BmiqEAOB.js";const z={class:"row",style:{"max-width":"1400px"}},L={class:"col-12 col-md-6 q-pa-sm"},E={class:"col-12 col-md-6 q-pa-sm"},Da={__name:"KelasIndex",setup(H){const _=n(0),b=q().params.id,l=n({}),w=n(!1),u=n(!1),y=n({});async function C(i){const a=i==1,p=i==1?0:1;await M({endPoint:`kelas/${b}/set-active`,data:{aktif:a},confirm:!1})||(l.value.aktif=p)}async function m(){const i=await K({endPoint:`kelas/${b}`,loading:w});i.kelas&&(l.value=i.kelas)}return V(async()=>{await m()}),(i,a)=>{const p=d("CardHeader"),x=d("CardLoading"),$=d("router-view"),T=d("CardPage");return c(),f(T,null,{default:o(()=>[e(p,{title:"Data Murid",onOnReload:m}),e(v,{class:"no-padding"},{default:o(()=>[t("div",z,[t("div",L,[e(g,{bordered:"",flat:""},{default:o(()=>[e(U,{id:l.value.santri_id,onLoaded:a[0]||(a[0]=s=>y.value=s)},null,8,["id"])]),_:1}),e(g,{class:"q-mt-sm",bordered:"",flat:""},{default:o(()=>[e(v,{class:"q-pa-sm"},{default:o(()=>[e(R,{class:"bg-green-1"},{default:o(()=>[e(S,{class:"text-subtitle1"},{default:o(()=>[...a[6]||(a[6]=[D(" Data Kelas ",-1)])]),_:1}),e(Q,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),e(Q,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:a[1]||(a[1]=s=>u.value=!0),label:"Edit","no-caps":""})]),_:1}),e(A,{flat:""},{default:o(()=>[t("tbody",null,[t("tr",null,[a[7]||(a[7]=t("td",{class:"text-italic"},"Tahun Ajaran",-1)),t("td",null,r(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),t("tr",null,[a[8]||(a[8]=t("td",{class:"text-italic"},"Tingkat",-1)),t("td",null,r(l.value.tingkat),1)]),t("tr",null,[a[9]||(a[9]=t("td",{class:"text-italic"},"Kelas",-1)),t("td",null,r(l.value.kelas),1)]),t("tr",null,[a[10]||(a[10]=t("td",{class:"text-italic"},"Nomor Absen",-1)),t("td",null,r(l.value.no_absen),1)]),t("tr",null,[a[11]||(a[11]=t("td",{class:"text-italic"},"Aktif",-1)),t("td",null,[e(N,{modelValue:l.value.aktif,"onUpdate:modelValue":[a[2]||(a[2]=s=>l.value.aktif=s),C],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),t("tr",null,[a[12]||(a[12]=t("td",{class:"text-italic"},"Keterangan",-1)),t("td",null,r(l.value.keterangan),1)])])]),_:1}),e(x,{showing:w.value},null,8,["showing"])]),_:1})]),_:1})]),t("div",E,[e(g,{bordered:"",flat:""},{default:o(()=>[e(B,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:o(()=>[e(k,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),e(k,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),e(k,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(c(),f(v,{class:"q-pa-sm",key:_.value},{default:o(()=>[(c(),f($,{key:i.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),e(P,{modelValue:u.value,"onUpdate:modelValue":a[5]||(a[5]=s=>u.value=s)},{default:o(()=>[e(j,{data:l.value,onSuccessUpdate:a[3]||(a[3]=s=>{l.value=s,_.value++}),onSuccessDelete:a[4]||(a[4]=s=>i.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Da as default};
