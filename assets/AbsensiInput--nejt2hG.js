import{v as V,a7 as v,a6 as j,R as w,r,o as p,i as s,w as u,Q as h,k as e,j as S,t as g,z as A,y as I,F as y,s as T,p as b,a4 as n,q as $}from"./index-Cju_WcQt.js";import{Q as q}from"./QSkeleton-B-Is-kw1.js";import{Q as C}from"./QMarkupTable-CVJrzePZ.js";import{a as P}from"./api-delete-BEmNpbPy.js";import{a as Q}from"./api-get-C-ZFMqL_.js";import{_ as D}from"./FilterKelas-lYSPgHYs.js";import{t as B}from"./format-text-BhuG3ucy.js";import{a as F}from"./api-post-P8g4q4LG.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DgCvXGx8.js";import"./index-pFkrbuLE.js";import"./api-error-BS7WyEhR.js";import"./QToolbarTitle-DriFd-N5.js";import"./QToolbar-DOvpToKQ.js";import"./QSpace-e5nOhYJp.js";import"./lists-madrasah-store-Da_j5MNb.js";import"./QSelect-D99lhOsm.js";import"./QChip-DJA81wTZ.js";import"./QItemSection-CL0X_XCy.js";import"./QItemLabel-97msGuv9.js";import"./QMenu-BUIDrqEf.js";import"./selection-noklRUze.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./api-get-lists-BfH1ZDRf.js";const M={class:"text-subtitle1"},K=["innerHTML"],L={key:0},R={key:1},z={colspan:"50"},J={key:2},O={class:"text-center"},E={class:"text-center"},G={class:"text-center"},W={class:"text-left"},X={class:"bg-grey-1"},Y={class:"bg-grey-1"},Z={class:"bg-grey-1"},ee={class:"bg-grey-1"},te={class:"bg-green-1"},le={class:"bg-green-1"},se={class:"bg-green-1"},ae={class:"bg-green-1"},ne={class:"bg-grey-1"},oe={class:"bg-grey-1"},de={class:"bg-grey-1"},ue={class:"bg-grey-1"},ie={class:"bg-green-1"},re={class:"bg-green-1"},pe={class:"bg-green-1"},me={class:"bg-green-1"},ce={class:"bg-grey-1"},ge={class:"bg-grey-1"},_e={class:"bg-grey-1"},he={class:"bg-grey-1"},Ve={class:"bg-green-2"},be={class:"bg-green-2"},ke={class:"bg-green-2"},xe={class:"bg-green-2"},ye={__name:"AbsensiInput",setup(fe){const _=V(!1),m=v(),f=j(),k=V(""),i=V([]),a={absensi:m.params.absensi,th_ajaran_h:m.params.th_ajaran_h,tingkat_id:m.params.tingkat_id,kelas:m.params.kelas,set_bulan_ujian:m.params.set_bulan_ujian};async function U(){const d=i.value.map(c=>c.kelas_id),o=a.set_bulan_ujian;if(await P({endPoint:"absensi/"+a.absensi,message:'<span style="color:red">Hapus data absensi untuk kelas ini?</span>',params:{bulan_ujian:o,kelas_id:d},loading:_})){i.value=[];const c=`/madrasah/absensi/input/${a.absensi}/${a.th_ajaran_h}/${a.tingkat_id}/${a.kelas}`;f.push(c)}}async function N(){const d={absensi:JSON.parse(JSON.stringify(i.value))},o=await F({endPoint:`absensi/${a.absensi}`,data:d,confirm:!0,message:'<span style="color:blue">Kirim data absensi?</span>',loading:_});o?i.value=o["absensi_"+a.absensi]:await x()}async function x(){if(a.th_ajaran_h&&a.tingkat_id&&a.kelas&&a.set_bulan_ujian){const d=await Q({endPoint:`absensi/${a.absensi}`,params:{th_ajaran_h:a.th_ajaran_h,tingkat_id:a.tingkat_id,kelas:a.kelas,bulan_ujian:a.set_bulan_ujian},notify:!1,loading:_});i.value=d["absensi_"+a.absensi]}}return w(async()=>{await x()}),(d,o)=>(p(),r(y,null,[s(D,{"show-set-bulan-ujian":!0,"start-url":`/madrasah/absensi/input/${a.absensi}`,onDataFilter:o[0]||(o[0]=t=>k.value=t)},null,8,["start-url"]),s($,{class:"q-mt-sm"},{default:u(()=>[s(h,{class:"bg-green-7 text-green-1 text-subtitle1 q-px-sm q-py-xs"},{default:u(()=>[e("div",M,[o[1]||(o[1]=S(" ➡️ ",-1)),e("strong",null," Absensi "+g(A(B)(a.absensi)),1)])]),_:1}),s(h,{class:"bg-green-3 text-green-10 text-subtitle1 q-pa-sm"},{default:u(()=>[e("div",null,[e("span",{innerHTML:k.value||"Tentukan filter!"},null,8,K)])]),_:1}),s(h,{class:"no-padding"},{default:u(()=>[s(C,{flat:""},{default:u(()=>[o[3]||(o[3]=e("thead",null,[e("tr",null,[e("th",{rowspan:"2",class:"text-center"},"No."),e("th",{rowspan:"2",class:"text-center"},"ID Santri"),e("th",{rowspan:"2",class:"text-center"},"ID Kelas"),e("th",{rowspan:"2",class:"text-left"},"Nama"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-1"),e("th",{colspan:"4",class:"bg-green-1"},"Pekan-2"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-3"),e("th",{colspan:"4",class:"bg-green-1"},"Pekan-4"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-5"),e("th",{colspan:"4",class:"bg-green-2"},"Sebulan")]),e("tr",null,[e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-1"},"S"),e("th",{class:"bg-green-1"},"I"),e("th",{class:"bg-green-1"},"A"),e("th",{class:"bg-green-1"},"T"),e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-1"},"S"),e("th",{class:"bg-green-1"},"I"),e("th",{class:"bg-green-1"},"A"),e("th",{class:"bg-green-1"},"T"),e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-2"},"S"),e("th",{class:"bg-green-2"},"I"),e("th",{class:"bg-green-2"},"A"),e("th",{class:"bg-green-2"},"T")])],-1)),!a.th_ajaran_h||!a.tingkat_id||!a.kelas||!a.set_bulan_ujian?(p(),r("tbody",L,[...o[2]||(o[2]=[e("tr",null,[e("td",{colspan:"50"},[e("div",{class:"text-center text-negative text-body1 text-italic bg-red-1 q-pa-md"}," Tentukan filter! ")])],-1)])])):I("",!0),_.value?(p(),r("tbody",R,[e("tr",null,[e("td",z,[s(q,{height:"50px"})])])])):(p(),r("tbody",J,[(p(!0),r(y,null,T(i.value,(t,c)=>(p(),r("tr",{key:c},[e("td",O,g(t.no_absen?t.no_absen.toString().padStart(2,0):""),1),e("td",E,g(t.santri_id),1),e("td",G,[s(b,{flat:"",dense:"","no-caps":"",class:"text-green-10 bg-green-11 q-px-sm",style:{"min-width":"50px"},onClick:l=>d.$router.push(`/madrasah/kelas/${t.kelas_id}/riwayat`)},{default:u(()=>[e("small",null,g(t.kelas_id),1)]),_:2},1032,["onClick"])]),e("td",W,g(t.nama),1),e("td",X,[s(n,{outlined:"",dense:"",modelValue:t.p1s,"onUpdate:modelValue":l=>t.p1s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Y,[s(n,{outlined:"",dense:"",modelValue:t.p1i,"onUpdate:modelValue":l=>t.p1i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Z,[s(n,{outlined:"",dense:"",modelValue:t.p1a,"onUpdate:modelValue":l=>t.p1a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ee,[s(n,{outlined:"",dense:"",modelValue:t.p1t,"onUpdate:modelValue":l=>t.p1t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",te,[s(n,{outlined:"",dense:"",modelValue:t.p2s,"onUpdate:modelValue":l=>t.p2s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",le,[s(n,{outlined:"",dense:"",modelValue:t.p2i,"onUpdate:modelValue":l=>t.p2i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",se,[s(n,{outlined:"",dense:"",modelValue:t.p2a,"onUpdate:modelValue":l=>t.p2a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ae,[s(n,{outlined:"",dense:"",modelValue:t.p2t,"onUpdate:modelValue":l=>t.p2t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ne,[s(n,{outlined:"",dense:"",modelValue:t.p3s,"onUpdate:modelValue":l=>t.p3s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",oe,[s(n,{outlined:"",dense:"",modelValue:t.p3i,"onUpdate:modelValue":l=>t.p3i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",de,[s(n,{outlined:"",dense:"",modelValue:t.p3a,"onUpdate:modelValue":l=>t.p3a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ue,[s(n,{outlined:"",dense:"",modelValue:t.p3t,"onUpdate:modelValue":l=>t.p3t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ie,[s(n,{outlined:"",dense:"",modelValue:t.p4s,"onUpdate:modelValue":l=>t.p4s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",re,[s(n,{outlined:"",dense:"",modelValue:t.p4i,"onUpdate:modelValue":l=>t.p4i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",pe,[s(n,{outlined:"",dense:"",modelValue:t.p4a,"onUpdate:modelValue":l=>t.p4a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",me,[s(n,{outlined:"",dense:"",modelValue:t.p4t,"onUpdate:modelValue":l=>t.p4t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ce,[s(n,{outlined:"",dense:"",modelValue:t.p5s,"onUpdate:modelValue":l=>t.p5s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ge,[s(n,{outlined:"",dense:"",modelValue:t.p5i,"onUpdate:modelValue":l=>t.p5i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",_e,[s(n,{outlined:"",dense:"",modelValue:t.p5a,"onUpdate:modelValue":l=>t.p5a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",he,[s(n,{outlined:"",dense:"",modelValue:t.p5t,"onUpdate:modelValue":l=>t.p5t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Ve,[s(n,{outlined:"",dense:"","model-value":Number(t.p1s)+Number(t.p2s)+Number(t.p3s)+Number(t.p4s)+Number(t.p5s),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",be,[s(n,{outlined:"",dense:"","model-value":Number(t.p1i)+Number(t.p2i)+Number(t.p3i)+Number(t.p4i)+Number(t.p5i),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",ke,[s(n,{outlined:"",dense:"","model-value":Number(t.p1a)+Number(t.p2a)+Number(t.p3a)+Number(t.p4a)+Number(t.p5a),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",xe,[s(n,{outlined:"",dense:"","model-value":Number(t.p1t)+Number(t.p2t)+Number(t.p3t)+Number(t.p4t)+Number(t.p5t),class:"text-center",readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])])]))),128))])),o[4]||(o[4]=e("tfoot",null,null,-1))]),_:1})]),_:1}),s(h,{class:"bg-green-6 text-green-11 text-subtitle1 q-pa-sm full-width row no-wrap justify-between items-center content-center"},{default:u(()=>[s(b,{dense:"",class:"q-px-md","no-caps":"",label:"Hapus",color:"negative",onClick:U}),o[5]||(o[5]=e("div",{class:"text-caption text-italic text-center"}," S=Sakit; I=Izin; A=Alpa; T=Terlambat ",-1)),s(b,{dense:"",class:"q-px-md","no-caps":"",onClick:N,label:"Kirim",color:"green-10"})]),_:1})]),_:1})],64))}},Ee=H(ye,[["__scopeId","data-v-3ae49c79"]]);export{Ee as default};
