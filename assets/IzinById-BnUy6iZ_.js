import{Q as F}from"./QToolbarTitle-CH0GyKDM.js";import{A as d,J as j,B as S,c as y,o as f,w as s,b as l,ab as P,e as $,Q as k,a5 as E,C as r,x as B,a9 as H,U as N,a,t as D,g as q,f as C,z as o,v as U,E as V}from"./index-DwrbA0R8.js";import{Q as A}from"./QToolbar-BCLZ34c-.js";import{Q as M}from"./QSpace-DIvX2TzF.js";import{Q as L}from"./QSpinnerCube-CuByR_Bu.js";import{Q as O}from"./QPage-BU8r9xHl.js";import{a as R}from"./api-get-D4W4lze7.js";import{a as G,i as J,f as x}from"./format-date-DlwYCgkJ.js";import{b as T,m as z}from"./hijri-BBdEhqDI.js";import{_ as W}from"./ReportViewer-25QRZbnp.js";import{_ as X}from"./IzinRiwayat-BhsWpO9k.js";import{_ as Y}from"./CardSantriSimple-BCbE6ndP.js";import{I,_ as Z}from"./IzinPesantrenForm-CCVGop31.js";import{Q as h}from"./QForm-DCEv1Ikv.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B6LiMDVO.js";import"./index-BlZcD66n.js";import"./api-error-DGWaEiw1.js";import"./id-BuNGTsqN.js";import"./format-number-B34ySHL_.js";import"./QItemSection-CeSY4hvW.js";import"./QList-Cc6jCv1k.js";import"./tahun-ajaran-Dhryo64N.js";import"./QSkeleton-BtQ289R_.js";import"./QImg--g9yT0uK.js";import"./QItemLabel-Dzdetwv2.js";import"./santri-store-B8u08Q6k.js";import"./QSelect-CrgZ1FsI.js";import"./QChip-DvUCR8tL.js";import"./QMenu-BEnErdhw.js";import"./selection-DRCgFU0J.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./InputSelectSantriId-bdXDP9_G.js";import"./Santri-nY8sg7h2.js";import"./ApiCrud-KwrbSuI8.js";import"./Api-DWdZFNbG.js";import"./InputSelectArray-DFe88pva.js";import"./lists-store-Cp7AZ7Mr.js";import"./DropDownAfter-D2Wgui76.js";import"./QBtnDropdown-DqbNLFX1.js";import"./QBtnGroup-CPjXoyXA.js";import"./ClosePopup-kZj4_oIv.js";import"./Lists-g9uME9Wy.js";import"./useCrudForm-DF0rM6hG.js";const at={__name:"IzinPesantrenKembaliForm",props:{data:Object},emits:["successSubmit"],setup(w,{emit:g}){const p=w,b=g,e=d({...p.data}),m=d(!1);async function v(){try{m.value=!0;const n=await I.setKembali({id:p.data.id,data:{kembali_tgl:e.value.kembali_tgl},message:"Tetapkan sudah kembali ke pesantren pada tanggal ini?"});n&&(document.getElementById("btn-close-form").click(),b("successSubmit",n?.izin_pesantren))}catch(n){console.error("err set not back",n)}finally{m.value=!1}}async function _(){try{m.value=!0;const n=await I.setKembali({id:p.data.id,data:{kembali_tgl:null},message:"Tetapkan belum kembali ke pesantren?"});n&&(document.getElementById("btn-close-form").click(),b("successSubmit",n?.izin_pesantren))}catch(n){console.error("err set not back",n)}finally{m.value=!1}}return j(()=>e.value.kembali_tgl,n=>{e.value.kembali_tgl=G(n)}),(n,c)=>{const Q=S("FormHeader"),u=S("FormLoading"),t=S("FormActions");return f(),y(B,{class:"full-width",style:{"max-width":"425px"}},{default:s(()=>[l(h,{onSubmit:P(v,["prevent"])},{default:s(()=>[l(Q,{title:"Tetapkan Tanggal Kembali","is-new":!1}),m.value?(f(),y(u,{key:0})):$("",!0),l(k,{class:"q-pa-sm"},{default:s(()=>[l(E,{dense:"",hint:r(J)(e.value.kembali_tgl)?r(x)(e.value.kembali_tgl):"",class:"q-my-sm",outlined:"",label:"Tanggal (M)*",modelValue:e.value.kembali_tgl,"onUpdate:modelValue":c[0]||(c[0]=i=>e.value.kembali_tgl=i),type:"datetime-local",rules:[i=>!!i||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"])]),_:1}),l(t,{"btn-delete":!!w.data.kembali_tgl,onOnDelete:_,"label-delete":"Belum Kembali"},null,8,["btn-delete"])]),_:1})]),_:1})}}},et={class:"row",style:{"max-width":"1200px"}},lt={class:"col-xs-12 col-sm-6"},st={key:0},nt={key:1,class:"full-width"},it={colspan:"2"},ot={class:"col-xs-12 col-sm-6"},rt={__name:"IzinById",setup(w){const g=d(!1),p=d(""),b=H(),e=d({}),m=d(!1),v=d(!1),_=d(!1);function n(){p.value=`reports/izin-pesantren/view?id=${e.value.id}`,g.value=!0}async function c(){const u=await R({endPoint:`izin-pesantren/${b.params.id}`,loading:m});u&&(e.value=u.izin_pesantren)}N(async()=>{b.params.id&&await c()});function Q(u){const t=/\(\+(\d+)\)/g;return u.replace(t,(mt,K)=>`(terlambat ${K} hari)`)}return(u,t)=>(f(),y(O,{class:""},{default:s(()=>[a("div",et,[a("div",lt,[l(B,{class:"q-ma-sm"},{default:s(()=>[l(k,{class:"bg-green-8 no-padding"},{default:s(()=>[l(A,{class:"no-padding no-margin"},{default:s(()=>[l(F,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:s(()=>[...t[6]||(t[6]=[D(" Data Perizinan ",-1)])]),_:1}),l(q,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Cetak","no-caps":"",icon:"print",color:"green-11",onClick:n}),l(q,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-11",onClick:t[0]||(t[0]=i=>v.value=!0)})]),_:1})]),_:1}),e.value?(f(),y(k,{key:0,class:"q-pa-sm"},{default:s(()=>[l(Y,{id:e.value.santri_id},null,8,["id"]),l(B,{bordered:"",flat:"",class:"q-mt-sm"},{default:s(()=>[l(k,{class:"q-pa-sm text-subtitle1 bg-green-11 flex"},{default:s(()=>[t[7]||(t[7]=D(" Data Izin ",-1)),l(M),l(q,{dense:"",label:"Kembali",icon:"manage_history","no-caps":"",class:"q-px-sm bg-green-10 text-green-12",onClick:t[1]||(t[1]=i=>_.value=!0)})]),_:1}),l(k,{class:"q-pa-sm"},{default:s(()=>[m.value?(f(),C("div",st,[l(L,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):(f(),C("table",nt,[a("tbody",null,[a("tr",null,[t[8]||(t[8]=a("td",{class:"text-italic"},"Sifat:",-1)),a("td",null,o(e.value.sifat),1)]),a("tr",null,[t[9]||(t[9]=a("td",{class:"text-italic"}," Pengajuan: ",-1)),a("td",null,o(e.value.pengajuan),1)]),a("tr",null,[t[10]||(t[10]=a("td",{class:"text-italic"},"Durasi:",-1)),a("td",null,o(e.value.durasi+" hari"),1)]),a("tr",null,[t[11]||(t[11]=a("td",{class:"text-italic"}," Dari Tanggal: ",-1)),a("td",null,o(r(x)(e.value.dari_tgl)+" | "+r(T)(r(z)(e.value.dari_tgl))),1)]),a("tr",null,[t[12]||(t[12]=a("td",{class:"text-italic"}," Sampai Tanggal: ",-1)),a("td",null,o(r(x)(e.value.sampai_tgl)+" | "+r(T)(r(z)(e.value.sampai_tgl))),1)]),a("tr",null,[t[13]||(t[13]=a("td",{class:"text-italic"}," Keperluan: ",-1)),a("td",null,o(e.value.keperluan),1)]),a("tr",null,[t[14]||(t[14]=a("td",{class:"text-italic"}," Keterangan: ",-1)),a("td",null,o(e.value.keterangan??"-"),1)]),a("tr",null,[t[15]||(t[15]=a("td",{class:"text-italic"},"Tujuan:",-1)),a("td",null,o(e.value.tujuan),1)]),a("tr",null,[t[16]||(t[16]=a("td",{class:"text-italic"}," Catatan: ",-1)),a("td",null,o(e.value.catatan||"-"),1)]),a("tr",null,[a("td",it,[l(U,{color:"green-8"})])]),a("tr",null,[t[17]||(t[17]=a("td",{class:"text-italic"}," Kembali: ",-1)),a("td",null,o(r(x)(e.value.kembali_tgl)+" | "+r(T)(r(z)(e.value.kembali_tgl))),1)]),a("tr",null,[t[18]||(t[18]=a("td",{class:"text-italic"},"Status:",-1)),a("td",null,o(e.value.status?Q(e.value.status):""),1)])])]))]),_:1})]),_:1})]),_:1})):$("",!0)]),_:1})]),a("div",ot,[l(X,{class:"q-ma-sm",santri_id:e.value.santri_id},null,8,["santri_id"])])]),l(V,{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=i=>v.value=i)},{default:s(()=>[l(Z,{data:e.value,onSuccessDelete:t[2]||(t[2]=i=>u.$router.go(-1)),onSuccessSubmit:c},null,8,["data"])]),_:1},8,["modelValue"]),l(V,{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=i=>_.value=i)},{default:s(()=>[l(at,{data:{id:e.value.id,kembali_tgl:e.value.kembali_tgl},onSuccessSubmit:c},null,8,["data"])]),_:1},8,["modelValue"]),l(V,{modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=i=>g.value=i)},{default:s(()=>[l(W,{url:p.value},null,8,["url"])]),_:1},8,["modelValue"])]),_:1}))}},aa=tt(rt,[["__scopeId","data-v-f756ba1e"]]);export{aa as default};
