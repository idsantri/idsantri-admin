import{Q as P}from"./QToolbarTitle-Bi6rSosy.js";import{x as m,R as I,G as j,y as q,c as y,o as c,w as s,b as l,a9 as H,a as F,n as _,a3 as N,z as o,s as z,a7 as U,q as a,p as B,f as Q,g as D,v as n,r as E,B as V}from"./index-Bf-p91mW.js";import{Q as M}from"./QToolbar-CUFZpZSE.js";import{Q as R}from"./QSpace-DJeipgZa.js";import{Q as A}from"./QSpinnerCube-CRIto8Mg.js";import{Q as G}from"./QPage-DbeGPrD5.js";import{a as L}from"./api-get-CiRdORW1.js";import{a as O,i as J,f as x}from"./format-date-DlwYCgkJ.js";import{b as T,m as $}from"./hijri-BBdEhqDI.js";import{_ as W}from"./ReportViewer-BPWo2oEb.js";import{_ as X}from"./IzinRiwayat-BwnBVaxG.js";import{_ as Y}from"./CardSantriSimple-JMo4QFGj.js";import{_ as Z}from"./IzinPesantrenForm-BepF5mc8.js";import{Q as h}from"./QForm-OmDQHoiq.js";import{a as C}from"./api-update-BYe6B3v5.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D7WC_quC.js";import"./index-BtaF3-6r.js";import"./api-error-C0HjZ2a3.js";import"./id-BuNGTsqN.js";import"./format-number-B34ySHL_.js";import"./QItemSection-Bl4rOme3.js";import"./QList-51Eu5HNp.js";import"./tahun-ajaran-Dhryo64N.js";import"./QSkeleton-DEYFlc1v.js";import"./QImg-DJapb2Ub.js";import"./QItemLabel-sjS6zLD0.js";import"./santri-store-Bj24Fsef.js";import"./QSelect-Co09SqkM.js";import"./QChip-DeZPZCXp.js";import"./QMenu-BvL1IfNl.js";import"./selection-CE9S_xiH.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./api-post-CHcQycZS.js";import"./api-delete-BVHfd1pG.js";import"./InputSelectSantriId-Dr_LO5a7.js";import"./Santri-BlBn6n9Q.js";import"./ApiCrud-SVFtkNw7.js";import"./InputSelectArray-Jz4ksDX6.js";import"./lists-store-F5P_xNBX.js";import"./lists-data-mcTvx2m2.js";import"./DropDownAfter-wYSCUu7Z.js";import"./QBtnDropdown-Br6y2eVM.js";import"./QBtnGroup-BDP931ZD.js";import"./ClosePopup-HTVnKVBl.js";import"./Lists-DSwT9YX9.js";const at={__name:"IzinPesantrenKembaliForm",props:{data:Object},emits:["successSubmit"],setup(w,{emit:f}){const k=w,g=f,e=m({}),u=m(!1);async function v(){await C({endPoint:`izin-pesantren/${e.value.id}/set-kembali`,loading:u,data:{kembali_tgl:e.value.kembali_tgl},message:"Tetapkan sudah kembali ke pesantren pada tanggal ini?"})&&(document.getElementById("btn-close-form").click(),g("successSubmit"))}async function b(){await C({endPoint:`izin-pesantren/${e.value.id}/set-kembali`,loading:u,data:{kembali_tgl:null},message:"Tetapkan belum kembali ke pesantren?"})&&(document.getElementById("btn-close-form").click(),g("successSubmit"))}return I(()=>{e.value=k.data}),j(()=>e.value.kembali_tgl,d=>{e.value.kembali_tgl=O(d)}),(d,p)=>{const S=q("FormHeader"),r=q("FormLoading"),t=q("FormActions");return c(),y(z,{class:"full-width",style:{"max-width":"425px"}},{default:s(()=>[l(h,{onSubmit:H(v,["prevent"])},{default:s(()=>[l(S,{title:"Tetapkan Tanggal Kembali","is-new":!1}),u.value?(c(),y(r,{key:0})):F("",!0),l(_,{class:"q-pa-sm"},{default:s(()=>[l(N,{dense:"",hint:o(J)(e.value.kembali_tgl)?o(x)(e.value.kembali_tgl):"",class:"q-my-sm",outlined:"",label:"Tanggal (M)*",modelValue:e.value.kembali_tgl,"onUpdate:modelValue":p[0]||(p[0]=i=>e.value.kembali_tgl=i),type:"datetime-local",rules:[i=>!!i||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"])]),_:1}),l(t,{"btn-delete":!!w.data.kembali_tgl,onOnDelete:b,"label-delete":"Belum Kembali"},null,8,["btn-delete"])]),_:1})]),_:1})}}},et={class:"row",style:{"max-width":"1200px"}},lt={class:"col-xs-12 col-sm-6"},st={key:0},it={key:1,class:"full-width"},nt={colspan:"2"},ot={class:"col-xs-12 col-sm-6"},rt={__name:"IzinById",setup(w){const f=m(!1),k=m(""),g=U(),e=m({}),u=m(!1),v=m(!1),b=m(!1);function d(){k.value=`reports/izin-pesantren/view?id=${e.value.id}`,f.value=!0}async function p(){const r=await L({endPoint:`izin-pesantren/${g.params.id}`,loading:u});r&&(e.value=r.izin_pesantren)}I(async()=>{g.params.id&&await p()});function S(r){const t=/\(\+(\d+)\)/g;return r.replace(t,(mt,K)=>`(terlambat ${K} hari)`)}return(r,t)=>(c(),y(G,{class:""},{default:s(()=>[a("div",et,[a("div",lt,[l(z,{class:"q-ma-sm"},{default:s(()=>[l(_,{class:"bg-green-8 no-padding"},{default:s(()=>[l(M,{class:"no-padding no-margin"},{default:s(()=>[l(P,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:s(()=>[...t[6]||(t[6]=[B(" Data Perizinan ",-1)])]),_:1}),l(Q,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Cetak","no-caps":"",icon:"print",color:"green-11",onClick:d}),l(Q,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-11",onClick:t[0]||(t[0]=i=>v.value=!0)})]),_:1})]),_:1}),e.value?(c(),y(_,{key:0,class:"q-pa-sm"},{default:s(()=>[l(Y,{id:e.value.santri_id},null,8,["id"]),l(z,{bordered:"",flat:"",class:"q-mt-sm"},{default:s(()=>[l(_,{class:"q-pa-sm text-subtitle1 bg-green-11 flex"},{default:s(()=>[t[7]||(t[7]=B(" Data Izin ",-1)),l(R),l(Q,{dense:"",label:"Kembali",icon:"manage_history","no-caps":"",class:"q-px-sm bg-green-10 text-green-12",onClick:t[1]||(t[1]=i=>b.value=!0)})]),_:1}),l(_,{class:"q-pa-sm"},{default:s(()=>[u.value?(c(),D("div",st,[l(A,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):(c(),D("table",it,[a("tbody",null,[a("tr",null,[t[8]||(t[8]=a("td",{class:"text-italic"},"Sifat:",-1)),a("td",null,n(e.value.sifat),1)]),a("tr",null,[t[9]||(t[9]=a("td",{class:"text-italic"}," Pengajuan: ",-1)),a("td",null,n(e.value.pengajuan),1)]),a("tr",null,[t[10]||(t[10]=a("td",{class:"text-italic"},"Durasi:",-1)),a("td",null,n(e.value.durasi+" hari"),1)]),a("tr",null,[t[11]||(t[11]=a("td",{class:"text-italic"}," Dari Tanggal: ",-1)),a("td",null,n(o(x)(e.value.dari_tgl)+" | "+o(T)(o($)(e.value.dari_tgl))),1)]),a("tr",null,[t[12]||(t[12]=a("td",{class:"text-italic"}," Sampai Tanggal: ",-1)),a("td",null,n(o(x)(e.value.sampai_tgl)+" | "+o(T)(o($)(e.value.sampai_tgl))),1)]),a("tr",null,[t[13]||(t[13]=a("td",{class:"text-italic"}," Keperluan: ",-1)),a("td",null,n(e.value.keperluan),1)]),a("tr",null,[t[14]||(t[14]=a("td",{class:"text-italic"}," Keterangan: ",-1)),a("td",null,n(e.value.keterangan??"-"),1)]),a("tr",null,[t[15]||(t[15]=a("td",{class:"text-italic"},"Tujuan:",-1)),a("td",null,n(e.value.tujuan),1)]),a("tr",null,[t[16]||(t[16]=a("td",{class:"text-italic"}," Catatan: ",-1)),a("td",null,n(e.value.catatan||"-"),1)]),a("tr",null,[a("td",nt,[l(E,{color:"green-8"})])]),a("tr",null,[t[17]||(t[17]=a("td",{class:"text-italic"}," Kembali: ",-1)),a("td",null,n(o(x)(e.value.kembali_tgl)+" | "+o(T)(o($)(e.value.kembali_tgl))),1)]),a("tr",null,[t[18]||(t[18]=a("td",{class:"text-italic"},"Status:",-1)),a("td",null,n(e.value.status?S(e.value.status):""),1)])])]))]),_:1})]),_:1})]),_:1})):F("",!0)]),_:1})]),a("div",ot,[l(X,{class:"q-ma-sm",santri_id:e.value.santri_id},null,8,["santri_id"])])]),l(V,{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=i=>v.value=i)},{default:s(()=>[l(Z,{data:e.value,onSuccessDelete:t[2]||(t[2]=i=>r.$router.go(-1)),onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"]),l(V,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=i=>b.value=i)},{default:s(()=>[l(at,{data:{id:e.value.id,kembali_tgl:e.value.kembali_tgl},onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"]),l(V,{modelValue:f.value,"onUpdate:modelValue":t[5]||(t[5]=i=>f.value=i)},{default:s(()=>[l(W,{url:k.value},null,8,["url"])]),_:1},8,["modelValue"])]),_:1}))}},la=tt(rt,[["__scopeId","data-v-f756ba1e"]]);export{la as default};
