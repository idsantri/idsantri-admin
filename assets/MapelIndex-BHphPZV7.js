import{q as c,E as g,c as F,o as r,w as i,g as l,af as M,f as S,G as U,Q as q,a9 as V,l as T,N,m as j,a as t,b as y,v as C,F as A,D as H,t as f,ap as I,e as $,J as B}from"./index-DU_HTlLB.js";import{Q as O}from"./QSkeleton-cHWQFqLB.js";import{Q as E}from"./QMarkupTable-Bf_AFg38.js";import{a as K}from"./api-get-C_HGQ1i3.js";import{Q as L}from"./QSelect-aBcEPTX0.js";import{Q as G}from"./QForm-DITd0Hw9.js";import{_ as Q}from"./InputSelectTingkatPendidikan-Bh2yjtsn.js";import{u as J}from"./useCrudForm-qI80plRT.js";import{A as R}from"./ApiCrud-CEbaue1g.js";import{_ as z}from"./InputToggle-C4kcvuD1.js";import"./index-qAgkCKpN.js";import"./index-Bkc3wIyA.js";import"./api-error-B8ANjOsk.js";import"./QField-D_RK9dyS.js";import"./QChip-D50d__-6.js";import"./QItem-BbodOwCO.js";import"./QItemLabel-L7dSSnSA.js";import"./QMenu-CI7rZ4oV.js";import"./selection-DVZ_h5Pg.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-DOh1Pajr.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-BhmZwgir.js";import"./QBtnDropdown-Dc57Ck4Y.js";import"./QBtnGroup-C4NJIEbX.js";import"./ClosePopup-rX8lBwqX.js";import"./Lists-BX2MfUpl.js";import"./Api-NxoWfBb3.js";class W extends R{constructor(){super("mapel")}}const X=new W,Y={__name:"MapelForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(w,{emit:m}){const s=w,k=m,a=c({category:"Fan Dasar",show:1,...s.data}),d=!s.data?.id,{handleDelete:p,handleCreate:_,handleUpdate:b,loading:u}=J(X,{emit:k,responseKey:"mapel"}),n=async()=>{const v={sequence:a.value.sequence,id:a.value.id.toLowerCase(),tingkat_id:a.value.tingkat_id,name:a.value.name,alias:a.value.alias,category:a.value.category,show:a.value.show};return d?await _(v,!0):await b(s.data.id,v,!0)},x=async()=>await p(s.data.id);return(v,e)=>{const h=g("FormHeader"),D=g("FormLoading"),P=g("FormActions");return r(),F(T,{class:"full-width",style:{"max-width":"425px"}},{default:i(()=>[l(G,{onSubmit:M(n,["prevent"])},{default:i(()=>[l(h,{title:"Input Mata Pelajaran","is-new":d}),U(u)?(r(),F(D,{key:0})):S("",!0),l(q,null,{default:i(()=>[l(V,{dense:"",outlined:"",label:"Urut",modelValue:a.value.sequence,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.sequence=o),hint:"Nomor urut tampil",class:"q-my-sm"},null,8,["modelValue"]),l(Q,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.tingkat_id=o),class:"q-my-sm",rules:[o=>!!o||"Harus diisi!"]},null,8,["modelValue","rules"]),l(V,{class:"q-my-sm",dense:"",outlined:"",label:"Kode/ID Mapel",modelValue:a.value.id,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.id=o),hint:"Format: tingkat_id—kode_mapel (ibt-qur; ts-taj; aly-tau)"},null,8,["modelValue"]),l(V,{dense:"",class:"q-my-sm",outlined:"",label:"Mata Pelajaran",modelValue:a.value.name,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.name=o),hint:"Hanya huruf dan spasi"},null,8,["modelValue"]),l(V,{dense:"",class:"q-my-sm",outlined:"",label:"Mata Pelajaran (Alias)",modelValue:a.value.alias,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.alias=o)},null,8,["modelValue"]),l(L,{dense:"",class:"q-my-sm",outlined:"",label:"Kategori Fan","emit-value":"","map-options":"",modelValue:a.value.category,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.category=o),options:["Fan Pokok","Fan Dasar","Fan Tambahan"],behavior:"menu"},null,8,["modelValue"]),l(z,{modelValue:a.value.show,"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.show=o),label:"Tampilkan"},null,8,["modelValue"])]),_:1}),l(P,{"btn-delete":!d,onOnDelete:x},null,8,["btn-delete"])]),_:1})]),_:1})}}},Z={key:0},ee={colspan:"7"},ae={key:1},te={class:"text-center"},Se={__name:"MapelIndex",setup(w){const m=c([]),s=c(""),k=c(!1),a=c({}),d=c(!1);async function p(u){const n=await K({endPoint:"mapel",loading:k,params:{tingkat_id:u}});m.value=n.mapel}N(s,async u=>{u?await p(u):m.value=[]});function _(u){a.value=u,d.value=!0}function b(){a.value={tingkat_id:s.value},d.value=!0}return(u,n)=>{const x=g("CardHeader"),v=g("CardPage");return r(),F(v,null,{default:i(()=>[l(x,{title:"Daftar Mata Pelajaran",onOnReload:n[0]||(n[0]=e=>p(s.value)),"show-reload":!!s.value,"show-add":!0,onOnAdd:b},null,8,["show-reload"]),l(j,{align:"right",class:"bg-green-1"},{default:i(()=>[n[5]||(n[5]=t("div",{class:"text-subtitle2 q-mr-sm text-italic"},"Pilih Tingkat Pendidikan:",-1)),l(Q,{style:{width:"300px"},modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=e=>s.value=e),label:"Tingkat Pendidikan","with-hint":!1},null,8,["modelValue"])]),_:1}),l(q,{class:"q-pa-sm"},{default:i(()=>[l(E,{flat:""},{default:i(()=>[n[7]||(n[7]=t("thead",null,[t("tr",{class:"text-left"},[t("th",null,"No"),t("th",null,"Kode/ID"),t("th",null,"Mata Pelajaran"),t("th",null,"Alias"),t("th",null,"Status Fan"),t("th",null,"Tampil"),t("th",{class:"text-center"},"Edit")])],-1)),t("tbody",null,[k.value?(r(),y("tr",Z,[t("td",ee,[l(O,{height:"50px"})])])):m.value.length==0?(r(),y("tr",ae,[...n[6]||(n[6]=[t("td",{colspan:"7",class:"text-center text-green-10 text-italic"},[C(" — Tidak ada data untuk ditampilkan — "),t("br"),C(" — Pilih Tingkat Pendidikan — ")],-1)])])):(r(!0),y(A,{key:2},H(m.value,e=>(r(),y("tr",{key:e.id},[t("td",null,f(e.sequence),1),t("td",null,f(e.id),1),t("td",null,f(e.name),1),t("td",null,f(e.alias),1),t("td",null,f(e.category),1),t("td",null,[l(I,{"model-value":!!e.show,color:"green",disable:""},null,8,["model-value"])]),t("td",te,[l($,{icon:"edit",flat:"",color:"green",onClick:h=>_(e)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1}),l(B,{modelValue:d.value,"onUpdate:modelValue":n[4]||(n[4]=e=>d.value=e)},{default:i(()=>[l(Y,{data:a.value,onSuccessSubmit:n[2]||(n[2]=e=>p(e.tingkat_id)),onSuccessDelete:n[3]||(n[3]=e=>p(e.tingkat_id))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Se as default};
