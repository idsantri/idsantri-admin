import{Q as w,a as V}from"./QToolbar-D6If-037.js";import{ac as D,ab as T,q as n,s as B,c as P,o as u,w as a,g as o,Q as g,r as C,a as _,b,f as x,bD as N,bE as O,v as y,t as c,l as U}from"./index-B5O5P5Ry.js";import{Q as h}from"./QItemLabel-3gBEkM0R.js";import{Q as E,a as z}from"./QItem-Cr1Dcaui.js";import{Q as G}from"./QSelect-xTRYeUSd.js";import{a as Q}from"./api-get-ZrjIYo6i.js";const K={class:"flex content-start items-center",style:{"max-width":"1000px",width:"100%"}},L={key:0,class:"q-pa-sm"},M={key:1,class:"q-pa-sm text-negative"},X={__name:"FilterSantri",props:{startUrl:String,activeOnly:{type:Boolean}},emits:["dataFilter"],setup(k,{emit:S}){const l=k,p=S,F=D(),m=T(),I={id:F.params.id},i=n(I.id),f=n(!1),r=n([]),v=n(!1);B(async()=>{if(p("dataFilter",{display:'<div class="text-green-13 text-italic">Tentukan filter!</div>'}),i.value){const t=await Q({endPoint:`santri/${i.value}`}),e={display:`
			➡️ ${i.value}
			| <strong>${t.santri.nama}</strong>
			| ${t.santri.data_akhir}
			`};p("dataFilter",e)}});function $(t){t?m.push(`${l.startUrl}/${t}`):m.push(`${l.startUrl}`)}async function q(t,e){if(!t){e(()=>{r.value=[]});return}const s=await Q({endPoint:"santri/ids",loading:f,params:{active_only:!!l.activeOnly,q:t}});v.value=!s.lists.length,e(()=>r.value=s.lists,d=>{t!==""&&d.options.length&&(d.setOptionIndex(-1),d.moveOptionSelection(1,!0))})}return(t,e)=>(u(),P(U,{flat:"",bordered:""},{default:a(()=>[o(g,{class:"q-px-sm q-py-sm bg-green-11"},{default:a(()=>[o(w,{class:"no-padding",style:{"min-height":"0"}},{default:a(()=>[o(V,{class:"text-subtitle1"},{default:a(()=>[...e[1]||(e[1]=[_("div",{class:"text-subtitle2 text-weight-bold"},"Filter ID Santri",-1)])]),_:1}),C(t.$slots,"default")]),_:3})]),_:3}),o(g,{class:"no-padding"},{default:a(()=>[_("div",K,[o(G,{class:"q-pa-sm",dense:"",outlined:"",label:"ID Santri",modelValue:i.value,"onUpdate:modelValue":[e[0]||(e[0]=s=>i.value=s),$],options:r.value,"emit-value":"","map-options":"","option-value":"id","option-label":"id","error-color":"negative",loading:f.value,"use-input":"",clearable:"",onFilter:q,behavior:"menu"},{option:a(s=>[o(E,N(O(s.itemProps)),{default:a(()=>[o(z,null,{default:a(()=>[o(h,null,{default:a(()=>[y(c(s.opt.id)+" — "+c(s.opt.nama),1)]),_:2},1024),o(h,{caption:""},{default:a(()=>[y(c(s.opt.data_akhir),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","loading"]),i.value?x("",!0):(u(),b("div",L,"Ketikkan ID Santri")),v.value?(u(),b("div",M,"Data Tidak ditemukan")):x("",!0)])]),_:1})]),_:3}))}};export{X as _};
