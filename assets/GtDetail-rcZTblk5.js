import{Q as w,a as b}from"./QToolbar-B9An3t_d.js";import{ad as P,q as r,s as R,E as k,c as U,o as J,w as n,g as a,a as t,l as _,Q as v,v as d,e as i,t as o,m as L,ay as C,bE as q,p as T,G as H,J as Q}from"./index-pZrLq5mJ.js";import{Q as D}from"./QSpace-CKIpTfZc.js";import{Q as j}from"./QMarkupTable-BREGYPoS.js";import{d as M}from"./format-number-B34ySHL_.js";import{_ as F}from"./UgtGtForm-CU4slImy.js";import{_ as O}from"./ReportViewer-4iR_fjmK.js";import{U as W}from"./UgtGt-lCGCR7rK.js";import{D as G}from"./DownloadFile-CldsX1ks.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QItemLabel-Bwx5WFYM.js";import"./QItem-BFfMJvn2.js";import"./QSelect-k-tmmdSE.js";import"./QField-ByZgUA8d.js";import"./QChip-CwCryKcV.js";import"./QMenu-BSk4QlWC.js";import"./selection-BxqoZMwD.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./QForm-D5YebsyC.js";import"./InputSelectSantriId-LuU3G0p2.js";import"./Santri-D9Vb9MH7.js";import"./ApiCrud-eTMA_Cyz.js";import"./Api-DigGwjx2.js";import"./index-BM4f_s8_.js";import"./index-DZnVFf85.js";import"./apiPost-I4cgF0Lm.js";import"./useCrudForm-CR858gff.js";import"./InputSelectTahunAjaran-CI4vg0A0.js";import"./lists-store-QaWfmjut.js";import"./ArrayCrud-CByp4EUn.js";import"./DropDownAfter-DBme4Vbx.js";import"./QBtnDropdown-ZdKGmqjq.js";import"./QBtnGroup-DFOI09UX.js";import"./ClosePopup-Mv3wbYB4.js";import"./Lists-DP3CPe92.js";import"./UgtPjgt-LQBJ-ELt.js";const K={class:"row",style:{"max-width":"1200px"}},X={class:"col-12 col-md-6 q-my-sm"},Y={class:"flex flex-center"},Z={class:"flex q-gutter-x-sm"},h={class:"flex q-gutter-x-sm"},tt={class:"col-12 col-md-6 q-my-sm"},lt={class:"flex flex-center"},at={__name:"GtDetail",setup(et){const V=P().params.id,m=r(!1),e=r({}),x=r(!1),c=r(""),p=r(!1),f=r(!1);async function y(){try{m.value=!0;const s=await W.getById({id:V,notifySuccess:!0});e.value=s.gt}catch{console.log("error get gt")}finally{m.value=!1}}R(async()=>{await y()});const g=r(!1);async function $(){c.value=`reports/ugt/surat-tugas/view?id=${e.value.id}`,g.value=!0}async function I(){c.value=`reports/ugt/sertifikat/view?id=${e.value.id}`,g.value=!0}async function E(){try{p.value=!0,await G.GtSuratTugas(e.value.id,"gt-surat-tugas-"+e.value.id+".pdf")}catch(s){console.error("Error downloading surat tugas:",s)}finally{p.value=!1}}async function N(){try{f.value=!0,await G.GtSertifikat(e.value.id,"gt-sertifikat-"+e.value.id+".pdf")}catch(s){console.error("Error downloading sertifikat:",s)}finally{f.value=!1}}return(s,l)=>{const A=k("CardHeader"),S=k("CardLoading"),B=k("CardPage");return J(),U(B,null,{default:n(()=>[a(A,{title:"Data Guru Tugas",onOnReload:y}),t("div",K,[t("div",X,[a(_,{class:"q-mx-sm",flat:"",bordered:""},{default:n(()=>[a(v,{class:"bg-green-7 no-padding"},{default:n(()=>[a(w,{class:"no-padding no-margin"},{default:n(()=>[a(b,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:n(()=>[...l[5]||(l[5]=[d(" Identitas GT ",-1)])]),_:1}),a(i,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:l[0]||(l[0]=u=>x.value=!0)})]),_:1})]),_:1}),a(v,{class:"q-pa-sm"},{default:n(()=>[a(j,{flat:"",class:"text-green-10"},{default:n(()=>[t("tbody",null,[t("tr",null,[l[6]||(l[6]=t("td",null,"ID",-1)),t("td",null,o(e.value.id),1)]),t("tr",null,[l[7]||(l[7]=t("td",null,"Tahun Ajaran",-1)),t("td",null,o(e.value.th_ajaran_h),1)]),t("tr",null,[l[8]||(l[8]=t("td",null,"Santri ID",-1)),t("td",null,[t("div",Y,[t("div",null,o(e.value.santri_id),1),a(D),a(i,{class:"bg-green-11",icon:"info",glossy:"",round:"",dense:"",to:`/santri/${e.value.santri_id}`},null,8,["to"])])])]),t("tr",null,[l[9]||(l[9]=t("td",null,"Nama",-1)),t("td",null,o(e.value.nama),1)]),t("tr",null,[l[10]||(l[10]=t("td",null,"Data Akhir",-1)),t("td",null,o(e.value.data_akhir),1)]),t("tr",null,[l[11]||(l[11]=t("td",null,"No Telepon",-1)),t("td",null,o(e.value.telepon),1)]),t("tr",null,[l[12]||(l[12]=t("td",null,"Email",-1)),t("td",null,o(e.value.email),1)])])]),_:1}),a(S,{showing:m.value},null,8,["showing"])]),_:1}),a(L,{class:"bg-green-7 flex items-center justify-between q-pt-none q-gutter-y-sm"},{default:n(()=>[t("div",Z,[a(i,{dense:"","no-caps":"",color:"green-11",class:"q-px-md text-green-10",onClick:N,title:"Cetak Sertifikat",disable:f.value},C({_:2},[f.value?{name:"default",fn:n(()=>[a(q),l[13]||(l[13]=d(" Sertifikat ",-1))]),key:"0"}:{name:"default",fn:n(()=>[a(T,{name:"download"}),l[14]||(l[14]=d(" Sertifikat ",-1))]),key:"1"}]),1032,["disable"]),a(i,{dense:"","no-caps":"",color:"green-11",class:"q-px-md text-green-10",onClick:E,title:"Cetak Surat Tugas",disable:p.value},C({_:2},[p.value?{name:"default",fn:n(()=>[a(q),l[15]||(l[15]=d(" Surat Tugas ",-1))]),key:"0"}:{name:"default",fn:n(()=>[a(T,{name:"download"}),l[16]||(l[16]=d(" Surat Tugas ",-1))]),key:"1"}]),1032,["disable"])]),t("div",h,[a(i,{label:"Sertifikat",dense:"","no-caps":"",icon:"print",color:"green-11",class:"q-px-md text-green-10",onClick:I,title:"Cetak Sertifikat"}),a(i,{label:"Surat Tugas",dense:"","no-caps":"",icon:"print",color:"green-11",class:"q-px-md text-green-10",onClick:$,title:"Cetak Surat Tugas"})])]),_:1})]),_:1})]),t("div",tt,[a(_,{class:"q-mx-sm",flat:"",bordered:""},{default:n(()=>[a(v,{class:"bg-green-7 no-padding"},{default:n(()=>[a(w,{class:"no-padding no-margin"},{default:n(()=>[a(b,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:n(()=>[...l[17]||(l[17]=[d(" Data PJGT ",-1)])]),_:1})]),_:1})]),_:1}),a(v,{class:"q-pa-sm"},{default:n(()=>[a(j,{flat:"",class:"text-green-10"},{default:n(()=>[t("tbody",null,[t("tr",null,[l[18]||(l[18]=t("td",null,"PJGT ID",-1)),t("td",null,[t("div",lt,[t("div",null,o(e.value.pjgt_id),1),a(D),a(i,{class:"bg-green-11",icon:"info",glossy:"",round:"",dense:"",to:`/ugt/pjgt/${e.value.pjgt_id}`},null,8,["to"])])])]),t("tr",null,[l[19]||(l[19]=t("td",null,"Nama",-1)),t("td",null,o(e.value.pjgt_nama),1)]),t("tr",null,[l[20]||(l[20]=t("td",null,"Alamat",-1)),t("td",null,o(e.value.pjgt_alamat),1)]),t("tr",null,[l[21]||(l[21]=t("td",null,"Wilayah",-1)),t("td",null,o(e.value.pjgt_wilayah),1)]),t("tr",null,[l[22]||(l[22]=t("td",null,"Lembaga",-1)),t("td",null,o(e.value.pjgt_lembaga),1)]),t("tr",null,[l[23]||(l[23]=t("td",null,"Administrasi",-1)),t("td",null," Rp"+o(H(M)(e.value.administrasi_nominal||0))+" ("+o(e.value.administrasi_count||0)+"x) ",1)])])]),_:1}),a(S,{showing:m.value},null,8,["showing"])]),_:1})]),_:1})])]),a(Q,{persistent:"",modelValue:x.value,"onUpdate:modelValue":l[3]||(l[3]=u=>x.value=u)},{default:n(()=>[a(F,{data:e.value,onSuccessSubmit:l[1]||(l[1]=u=>y()),onSuccessDelete:l[2]||(l[2]=u=>s.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"]),a(Q,{modelValue:g.value,"onUpdate:modelValue":l[4]||(l[4]=u=>g.value=u)},{default:n(()=>[a(O,{url:c.value},null,8,["url"])]),_:1},8,["modelValue"])]),_:1})}}},Lt=z(at,[["__scopeId","data-v-a343cc50"]]);export{Lt as default};
