import{q as f,ap as X,s as P,Y as M,E as T,c as q,o as m,w as t,g as a,af as E,f as J,G as j,Q,n as H,a4 as ma,a9 as K,l as O,b as S,v as w,e as F,bE as pa,p as z,J as R,F as Z,ad as aa,K as ca,N as fa,a as r,t as U,D as sa,aq as la,C as va,ac as _a,ak as ga}from"./index-BhNrssHr.js";import{Q as ya}from"./QSpace-cuOXsmDj.js";import{Q as ka}from"./QRouteTab-CnEF0CHb.js";import{Q as ba}from"./QTabs-hkeAWIeM.js";import{Q as D,a as V}from"./QItem-Cr1HBVIS.js";import{Q as L}from"./QItemLabel-BODfowdk.js";import{Q as ea}from"./QList-DxuGxdz8.js";import{c as wa}from"./format-date-OVhbBx9F.js";import{Q as ta}from"./QForm-DomdkE2s.js";import{_ as oa}from"./InputCurrency-z8B068M1.js";import{_ as ua}from"./InputSelectSantriId-CkAK1Q9X.js";import{_ as W}from"./InputSelectArray-jHPK6X1E.js";import{u as xa}from"./useCrudForm-D7gRVo0u.js";import{I as N}from"./Iuran-w-aeKCTn.js";import{l as Va}from"./lists-store-Wjhiehi1.js";import{_ as ra}from"./InputSelectTahunAjaran-DWCw9OiC.js";import{r as na,d as qa}from"./array-object-BytDdNh7.js";import{s as Ia,a as ha,b as Ca,c as Sa}from"./utils-CiaEZYac.js";import{Q as ia}from"./QBtnDropdown-CKvAkW5R.js";import{C as B}from"./ClosePopup-Dc0LwGVK.js";import{_ as $a}from"./ReportViewer-Bn2ffb9e.js";import{D as G}from"./DownloadFile-2SiQzXqp.js";import{_ as ja}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as La}from"./FilterSantri-ChpY1-oV.js";import{_ as Aa}from"./CardSantriSimple-BcdjSizy.js";import{_ as Ta}from"./InputSelectIuranPaket-DgydVUwY.js";import"./QResizeObserver-DZZg-7Iz.js";import"./rtl-DFPa-2ov.js";import"./id-BuNGTsqN.js";import"./QSelect-BPcFPUdZ.js";import"./QField-CTzMATWn.js";import"./QChip-3Bxr7esK.js";import"./QMenu-lfUwDmLC.js";import"./selection-Ar_MOr7D.js";import"./format-CJebrXOQ.js";import"./Santri-C09cpkAF.js";import"./ApiCrud-Y9YyvD4T.js";import"./Api-AFAYKZcw.js";import"./index-DcSvzz47.js";import"./index-BTJ4P_xk.js";import"./apiPost-Cy9rOp67.js";import"./DropDownAfter-BUGSFTKq.js";import"./Lists-cqCQ-d7A.js";import"./ArrayCrud-DeaxgM1Q.js";import"./QBtnGroup-CWuo4TYS.js";import"./QToolbar-Dji6c8Gz.js";import"./QSkeleton-CffS5Tfr.js";import"./QImg-DiFSPV4f.js";import"./santri-store-C76ru1XO.js";import"./QSlideTransition-DMMUXx7w.js";import"./IuranPaket-BKnIAnAt.js";const da={__name:"IuranForm",props:{data:{type:Object,required:!1,default:()=>{}},disableSantriId:{type:Boolean,default:!1},disableThAjaran:{type:Boolean,default:!1}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup($,{emit:o}){const i=$,v=o,n=Va().getStateByKey("iuran"),l=f({...i.data}),y=f([...n]),p=!i.data?.id,_=X("firstInput");P(async()=>{await M(),_.value&&_.value.focus()});const{handleDelete:c,handleCreate:b,handleUpdate:x,loading:h}=xa(N,{emit:v,responseKey:"iuran"}),d=k=>{const e=y.value.find(I=>I.val0===k);e&&(l.value.nominal=e.val1)},u=async()=>{const k={santri_id:l.value.santri_id,th_ajaran_h:l.value.th_ajaran_h,item:l.value.item,nominal:l.value.nominal,via:l.value.via,keterangan:l.value.keterangan};return p?await b(k,!0):await x(i.data.id,k,!0)},C=async()=>await c(i.data.id);return(k,e)=>{const I=T("FormHeader"),s=T("FormLoading"),A=T("FormActions");return m(),q(O,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[a(ta,{onSubmit:E(u,["prevent"])},{default:t(()=>[a(I,{title:"Input Iuran","is-new":p}),j(h)?(m(),q(s,{key:0})):J("",!0),a(Q,null,{default:t(()=>[a(ua,{"active-only":!0,onEmitInput:e[0]||(e[0]=g=>Object.assign(l.value,g)),data:i.data,class:"q-my-sm",ref:l.value.santri_id?null:"firstInput"},null,8,["data"]),a(ra,{modelValue:l.value.th_ajaran_h,"onUpdate:modelValue":e[1]||(e[1]=g=>l.value.th_ajaran_h=g),rules:[g=>!!g||"Harus diisi!"],class:"q-my-sm",disable:i.disableThAjaran,ref:l.value.santri_id&&!i.disableThAjaran?"firstInput":null},null,8,["modelValue","rules","disable"]),a(W,{modelValue:l.value.item,"onUpdate:modelValue":[e[2]||(e[2]=g=>l.value.item=g),d],url:"iuran",label:"Nama Iuran",class:"q-my-sm",ref:l.value.santri_id&&i.disableThAjaran?"firstInput":null},null,8,["modelValue"]),a(oa,{dense:"",class:"q-my-sm",outlined:"",modelValue:l.value.nominal,"onUpdate:modelValue":e[3]||(e[3]=g=>l.value.nominal=g),required:"",label:"Nominal",rules:[g=>!!g||"Harus diisi!"]},null,8,["modelValue","rules"]),H(a(W,{modelValue:l.value.via,"onUpdate:modelValue":e[4]||(e[4]=g=>l.value.via=g),url:"metode-pembayaran",label:"Via",class:"q-my-sm"},null,8,["modelValue"]),[[ma,l.value.id&&l.value.lunas]]),a(K,{label:"Keterangan",modelValue:l.value.keterangan,"onUpdate:modelValue":e[5]||(e[5]=g=>l.value.keterangan=g),dense:"",outlined:"",class:"q-my-sm",autogrow:""},null,8,["modelValue"])]),_:1}),a(A,{"btn-delete":!p,onOnDelete:C},null,8,["btn-delete"])]),_:1})]),_:1})}}},Ua={__name:"DropDownPrint",props:{data:{}},setup($){const o=f(""),i=f(!1),v=$,n=f(""),l=f(!1);P(()=>{n.value=new URLSearchParams(v.data).toString()});async function y(){try{l.value=!0,await G.iuranCard(v.data,"iuran-card-"+v.data.santri_id+".pdf")}catch(h){console.error("Error downloading card:",h)}finally{l.value=!1}}async function p(){try{l.value=!0,await G.iuranCover(v.data,"iuran-cover-"+v.data.santri_id+".pdf")}catch(h){console.error("Error downloading cover:",h)}finally{l.value=!1}}async function _(){try{l.value=!0,await G.iuranKuitansi(v.data,"iuran-kuitansi-"+v.data.santri_id+".pdf")}catch(h){console.error("Error downloading kuitansi:",h)}finally{l.value=!1}}function c(){o.value=`reports/iuran-card/view?${n.value}`,i.value=!0}function b(){o.value=`reports/iuran-cover/view?${n.value}`,i.value=!0}function x(){o.value=`reports/iuran-kuitansi/view?${n.value}`,i.value=!0}return(h,d)=>(m(),S(Z,null,[a(ia,{color:"green-11","no-caps":"",class:"text-green-10 q-px-md",dense:"",disable:l.value},{label:t(()=>[l.value?(m(),q(pa,{key:0,class:"q-mr-sm"})):(m(),q(z,{key:1,name:"print",class:"q-mr-sm"})),d[1]||(d[1]=w(" Cetak / Unduh ",-1))]),default:t(()=>[a(ea,null,{default:t(()=>[H((m(),q(D,null,{default:t(()=>[a(V,null,{default:t(()=>[a(L,null,{default:t(()=>[...d[2]||(d[2]=[w("Kartu",-1)])]),_:1})]),_:1}),a(V,{avatar:""},{default:t(()=>[a(F,{icon:"download",flat:"",onClick:y})]),_:1}),a(V,{avatar:""},{default:t(()=>[a(F,{icon:"print",flat:"",onClick:c})]),_:1})]),_:1})),[[B]]),H((m(),q(D,null,{default:t(()=>[a(V,null,{default:t(()=>[a(L,null,{default:t(()=>[...d[3]||(d[3]=[w("Cover",-1)])]),_:1})]),_:1}),a(V,{avatar:""},{default:t(()=>[a(F,{icon:"download",flat:"",onClick:p})]),_:1}),a(V,{avatar:""},{default:t(()=>[a(F,{icon:"print",flat:"",onClick:b})]),_:1})]),_:1})),[[B]]),H((m(),q(D,null,{default:t(()=>[a(V,null,{default:t(()=>[a(L,null,{default:t(()=>[...d[4]||(d[4]=[w("Kuitansi",-1)])]),_:1})]),_:1}),a(V,{avatar:""},{default:t(()=>[a(F,{icon:"download",flat:"",onClick:_})]),_:1}),a(V,{avatar:""},{default:t(()=>[a(F,{icon:"print",flat:"",onClick:x})]),_:1})]),_:1})),[[B]])]),_:1})]),_:1},8,["disable"]),a(R,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=u=>i.value=u)},{default:t(()=>[a($a,{url:o.value},null,8,["url"])]),_:1},8,["modelValue"])],64))}},Da={__name:"IuranLunasForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup($,{emit:o}){const i=$,v=o,n=f({...i.data}),l=f(!1),y=X("firstInput");P(async()=>{await M(),y.value&&y.value.focus()});const p=async()=>{try{l.value=!0;const _=await N.setLunas({id:i.data.id,data:{via:n.value.via},message:"Iuran/tagihan lunas?"});_&&(document.getElementById("btn-close-form").click(),v("successSubmit",_?.iuran),v("successUpdate",_?.iuran))}catch(_){console.error("err set lunas ",_)}finally{l.value=!1}};return(_,c)=>{const b=T("FormHeader"),x=T("FormLoading"),h=T("FormActions");return m(),q(O,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[a(ta,{onSubmit:E(p,["prevent"])},{default:t(()=>[a(b,{title:"Set Iuran Lunas","is-new":!1}),l.value?(m(),q(x,{key:0})):J("",!0),a(Q,null,{default:t(()=>[a(K,{disable:"",label:"Nama",modelValue:n.value.nama,"onUpdate:modelValue":c[0]||(c[0]=d=>n.value.nama=d),dense:"",outlined:"",class:"q-my-sm"},null,8,["modelValue"]),a(K,{disable:"",label:"Tahun Ajaran",modelValue:n.value.th_ajaran_h,"onUpdate:modelValue":c[1]||(c[1]=d=>n.value.th_ajaran_h=d),dense:"",outlined:"",class:"q-my-sm"},null,8,["modelValue"]),a(K,{disable:"",label:"Nama Iuran",modelValue:n.value.item,"onUpdate:modelValue":c[2]||(c[2]=d=>n.value.item=d),dense:"",outlined:"",class:"q-my-sm"},null,8,["modelValue"]),a(oa,{disable:"",dense:"",class:"q-my-sm",outlined:"",modelValue:n.value.nominal,"onUpdate:modelValue":c[3]||(c[3]=d=>n.value.nominal=d),required:"",label:"Nominal"},null,8,["modelValue"]),a(W,{modelValue:n.value.via,"onUpdate:modelValue":c[4]||(c[4]=d=>n.value.via=d),url:"metode-pembayaran",label:"Via",class:"q-my-sm",rules:[d=>!!d||"Harus diisi!"],ref_key:"firstInput",ref:y},null,8,["modelValue","rules"])]),_:1}),a(h,{"btn-delete":!1})]),_:1})]),_:1})}}},Fa={class:"relative-position"},Qa={key:0},Na={class:"",style:{"min-width":"250px","max-width":"300px"}},Ha={class:"text-right"},Pa={class:"text-right"},Ka={class:"text-right text-weight-bold"},Ba={class:"flex items-center q-gutter-x-sm"},Ea={class:"q-card--bordered rounded-borders q-px-sm"},Oa={class:"q-card--bordered rounded-borders q-px-sm"},Ra={class:"text-subtitle1 text-weight-bold"},Ma={class:"flex flex-center"},Ja={key:1,class:"q-ma-lg"},Ya={__name:"IuranSantriByTh",setup($){const{params:o}=aa(),i=f(o.thAjaranH),v=f(o.id),n=f(!1),l=f([]),y=f(!1),p=f({}),_=ca("santri"),c=f(!1);function b(k){p.value=k,p.value.nama=_.value.nama,p.value.data_akhir=_.value.data_akhir,y.value=!0}async function x(){if(i.value&&v.value)try{n.value=!0;const k=await N.bySantriByThAjaran(v.value,i.value);l.value=C(k.iuran)}catch(k){console.error("ðŸš€ ~ loadData ~ error:",k)}finally{n.value=!1}}P(async()=>await x());async function h(k,e,I,s){try{await N.toggleCetak(I.id)}catch(A){l.value[s].cetak=k==1?0:1,console.error("ðŸš€ ~ toggleCetak ~ error:",A)}}async function d(k,e,I,s){if(k)return u(I,s);try{n.value=!0;const A=await N.setNotLunas(I.id,"Iuran/tagihan TIDAK lunas?");l.value[s]=A.iuran}catch(A){l.value[s].isLunas=k!=!0,console.error("ðŸš€ ~ toggleLunas ~ error:",A)}finally{n.value=!1}}async function u(k,e){p.value=k,p.value.nama=_.value.nama,p.value.data_akhir=_.value.data_akhir,c.value=!0,l.value[e].isLunas=!1}fa(l,async(k,e)=>{await M();const I=C([...k]);JSON.stringify(I)!==JSON.stringify(e)&&(l.value=I)},{deep:!0});function C(k){return k.sort((e,I)=>e.lunas===null&&I.lunas===null?0:e.lunas===null?1:I.lunas===null?-1:new Date(e.lunas)-new Date(I.lunas)).map(e=>({...e,isLunas:!!e.lunas,show:Object.prototype.hasOwnProperty.call(e,"show")?e.show:!1}))}return(k,e)=>{const I=T("CardLoading");return m(),S("div",Fa,[l.value.length>0?(m(),S("div",Qa,[a(ea,null,{default:t(()=>[a(D,{class:"q-pa-sm bg-green-11"},{default:t(()=>[a(V,{class:"flex"},{default:t(()=>[r("table",Na,[r("tbody",null,[r("tr",null,[e[6]||(e[6]=r("td",{class:"text-caption text-italic q-pr-md"},"Total Tagihan",-1)),r("td",Ha,U(j(Ia)(l.value).toRupiah()),1)]),r("tr",null,[e[7]||(e[7]=r("td",{class:"text-caption text-italic q-pr-md"},"Total Pembayaran",-1)),r("td",Pa,U(j(ha)(l.value).toRupiah()),1)]),r("tr",null,[e[8]||(e[8]=r("td",{class:"text-caption text-italic q-pr-md"},"Sisa Tagihan",-1)),r("td",Ka,U(j(Ca)(l.value).toRupiah()),1)])])])]),_:1})]),_:1}),(m(!0),S(Z,null,sa(l.value,(s,A)=>(m(),S("div",{key:A},[a(D,{class:"q-px-sm",clickable:"",onClick:E(g=>s.show=!s.show,["stop"])},{default:t(()=>[a(V,null,{default:t(()=>[a(L,{overline:""},{default:t(()=>[w(U(s.item),1)]),_:2},1024),a(L,null,{default:t(()=>[w(U(s.nominal.toRupiah()),1)]),_:2},1024)]),_:2},1024),a(V,{side:""},{default:t(()=>[r("div",Ba,[r("div",Ea,[a(la,{label:"Lunas",color:"green",class:"text-green-10",modelValue:s.isLunas,"onUpdate:modelValue":[g=>s.isLunas=g,(g,Y)=>d(g,Y,s,A)],"checked-icon":"check","unchecked-icon":"clear","true-value":!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue"])]),r("div",Oa,[a(la,{disable:!s.lunas,label:"Cetak",color:"green",class:"text-green-10",modelValue:s.cetak,"onUpdate:modelValue":[g=>s.cetak=g,(g,Y)=>h(g,Y,s,A)],"checked-icon":"check","unchecked-icon":"clear","true-value":1,"false-value":0},null,8,["disable","modelValue","onUpdate:modelValue"])]),a(F,{icon:"edit",glossy:"",outline:"",dense:"",round:"",color:"green-8",unelevated:"",onClick:E(g=>b(s),["stop"])},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["onClick"]),s.show?(m(),q(D,{key:0,class:"q-px-sm q-pb-sm q-pt-none"},{default:t(()=>[a(V,null,{default:t(()=>[a(L,null,{default:t(()=>[e[9]||(e[9]=r("em",null,"Lunas:",-1)),w("Â  "+U(s.lunas?j(wa)(s.lunas,"'hari' EEEE, 'tanggal' dd MMMM yyyy, 'pukul' HH:mm"):"-"),1)]),_:2},1024),a(L,{caption:""},{default:t(()=>[e[10]||(e[10]=r("em",null,"Kasir:",-1)),e[11]||(e[11]=w("Â ",-1)),r("strong",null,U(s.kasir||"-"),1),e[12]||(e[12]=w("; ",-1)),e[13]||(e[13]=r("em",null,"Via:",-1)),e[14]||(e[14]=w("Â ",-1)),r("strong",null,U(s.via||"-"),1),e[15]||(e[15]=w("; ",-1)),e[16]||(e[16]=r("em",null,"Ket.:",-1)),e[17]||(e[17]=w("Â ",-1)),r("strong",null,U(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)):J("",!0),a(va)]))),128)),a(D,{class:"q-pa-sm bg-green-8"},{default:t(()=>[a(V,{class:"text-green-11"},{default:t(()=>[a(L,{overline:"",class:"text-green-1"},{default:t(()=>[e[18]||(e[18]=w(" TOTAL CETAK ",-1)),r("span",Ra,U(j(Sa)(l.value).toRupiah()),1)]),_:1})]),_:1}),a(V,{side:"",class:""},{default:t(()=>[r("div",Ma,[a(Ua,{data:{santri_id:v.value,th_ajaran_h:i.value}},null,8,["data"])])]),_:1})]),_:1})]),_:1})])):(m(),S("div",Ja,[...e[19]||(e[19]=[r("div",{class:"text-body2 text-italic text-center"},"Tidak ada data untuk ditampilkan!",-1),r("hr",null,null,-1),r("div",{class:"text-weight-thin text-italic text-center"},"Klik angka tahun disamping, atau tambahkan data!",-1)])])),a(I,{showing:n.value},null,8,["showing"]),a(R,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s)},{default:t(()=>[a(da,{data:p.value,onSuccessDelete:e[0]||(e[0]=s=>j(qa)(l.value,s)),onSuccessCreate:e[1]||(e[1]=s=>l.value.push(s)),onSuccessUpdate:e[2]||(e[2]=s=>j(na)(l.value,s.id,s)),"disable-santri-id":!0,"disable-th-ajaran":!0},null,8,["data"])]),_:1},8,["modelValue"]),a(R,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=s=>c.value=s)},{default:t(()=>[a(Da,{data:p.value,onSuccessUpdate:e[4]||(e[4]=s=>j(na)(l.value,s.id,s))},null,8,["data"])]),_:1},8,["modelValue"])])}}},Ga={class:"relative-position"},za={key:0,class:"row"},Wa={class:"col bg-green-1",style:{"max-width":"90px"}},Xa={class:"col"},Za={key:0,class:"q-ma-lg"},ae={key:1},ee={key:1,class:"q-ma-lg"},te={__name:"TabThAjaran",setup($){const o=f([]),i=f(!1),{params:v}=aa(),n=f([]);async function l(){try{i.value=!0;const y=await N.bySantri(v.id);o.value=y.iuran??[],n.value=o.value.map(p=>p.th_ajaran_h)}catch(y){console.error("ðŸš€ ~ loadData ~ error:",y)}finally{i.value=!1}}return P(async()=>{v.id&&await l()}),(y,p)=>{const _=T("CardLoading");return m(),S("div",Ga,[o.value?.length>0?(m(),S("div",za,[r("div",Wa,[a(ba,{vertical:"",dense:"",align:"left","no-caps":"","active-bg-color":"green-11"},{default:t(()=>[(m(!0),S(Z,null,sa(n.value,(c,b)=>(m(),S("div",{key:b},[a(ka,{name:c,label:c,to:`/iuran/santri/${j(v).id}/${c}`},null,8,["name","label","to"])]))),128))]),_:1})]),r("div",Xa,[j(v).thAjaranH?(m(),S("div",ae,[a(Ya)])):(m(),S("div",Za,[...p[0]||(p[0]=[r("div",{class:"text-italic text-center"},"Klik angka tahun disamping, atau tambahkan data!",-1)])]))])])):(m(),S("div",ee,[...p[1]||(p[1]=[r("div",{class:"text-body2 text-italic text-center"},"Tidak ada data untuk ditampilkan!",-1),r("hr",null,null,-1),r("div",{class:"text-weight-thin text-italic text-center"},[w(" Yang bersangkutan belum pernah melakuan pembayaran. "),r("br"),w(" Silakan klik tombol tambah! ")],-1)])])),a(_,{showing:i.value},null,8,["showing"])])}}},le={};function ne($,o){return m(),q(ia,{split:"",dense:"",label:"Tambah","no-caps":"",icon:"add",color:"green-10",padding:"xs sm","text-color":"green-11",onClick:o[1]||(o[1]=i=>$.$emit("onAdd"))},{default:t(()=>[a(ea,null,{default:t(()=>[H((m(),q(D,{clickable:"",onClick:o[0]||(o[0]=i=>$.$emit("showPaket"))},{default:t(()=>[a(V,{avatar:""},{default:t(()=>[a(z,{name:"local_atm",color:"green"})]),_:1}),a(V,null,{default:t(()=>[a(L,null,{default:t(()=>[...o[2]||(o[2]=[w("Paket",-1)])]),_:1}),a(L,{caption:""},{default:t(()=>[...o[3]||(o[3]=[w("Pembayaran/Tagihan",-1)])]),_:1})]),_:1})]),_:1})),[[B]]),H((m(),q(D,{clickable:"",to:"/iuran/paket"},{default:t(()=>[a(V,{avatar:""},{default:t(()=>[a(z,{name:"settings",color:"green"})]),_:1}),a(V,null,{default:t(()=>[a(L,null,{default:t(()=>[...o[4]||(o[4]=[w("Setting",-1)])]),_:1}),a(L,{caption:""},{default:t(()=>[...o[5]||(o[5]=[w("Atur Paket",-1)])]),_:1})]),_:1})]),_:1})),[[B]])]),_:1})]),_:1})}const se=ja(le,[["render",ne]]),oe={__name:"IuranPaketSantriForm",props:{data:{type:Object,required:!1,default:()=>{}},title:{type:String,default:()=>"Input"}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup($,{emit:o}){const i=$,v=o,n=f({...i.data}),l=f(!1),y=f([]),p=X("firstInput");P(async()=>{await M(),p.value&&p.value.focus()});const _=async()=>{const c=y.value.map(x=>({item:x.item,nominal:x.nominal})),b={santri_id:n.value.santri_id,th_ajaran_h:n.value.th_ajaran_h,keterangan:n.value.keterangan||"",paket:c};try{l.value=!0;const x=await N.storePaketSantri({data:b,message:"PERHATIAN<br/>Jika item iuran sudah terdapat dalam daftar maka akan diabaikan."});x&&(document.getElementById("btn-close-form").click(),v("successSubmit",x?.iuran),v("successCreate",x?.iuran))}catch(x){console.error("err set paket iuran",x)}finally{l.value=!1}};return(c,b)=>{const x=T("FormHeader"),h=T("FormLoading"),d=T("FormActions");return m(),q(O,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[a(ta,{onSubmit:E(_,["prevent"])},{default:t(()=>[a(x,{title:"Modul Paket","is-new":!0}),l.value?(m(),q(h,{key:0})):J("",!0),a(Q,null,{default:t(()=>[a(ua,{"active-only":!0,onEmitInput:b[0]||(b[0]=u=>Object.assign(n.value,u)),data:i.data,class:"q-my-sm"},null,8,["data"]),a(ra,{modelValue:n.value.th_ajaran_h,"onUpdate:modelValue":b[1]||(b[1]=u=>n.value.th_ajaran_h=u),rules:[u=>!!u||"Harus diisi!"],class:"q-my-sm",disable:i.disableThAjaran,ref_key:"firstInput",ref:p},null,8,["modelValue","rules","disable"]),a(Ta,{class:"q-my-sm",onOnInput:b[2]||(b[2]=u=>y.value=u)}),a(K,{label:"Keterangan",modelValue:n.value.keterangan,"onUpdate:modelValue":b[3]||(b[3]=u=>n.value.keterangan=u),dense:"",outlined:"",class:"q-my-sm"},null,8,["modelValue"])]),_:1}),a(d,{"btn-delete":!1})]),_:1})]),_:1})}}},ue={class:"q-mt-sm"},st={__name:"PageIuranSantri",setup($){const{params:o}=aa(),i=_a(),v=f({}),n=f(0),l=f({}),y=f(!1),p=f(!1),_=f({});ga("santri",_);function c(){l.value={santri_id:_.value.id,nama:_.value.nama,data_akhir:_.value.data_akhir,th_ajaran_h:o.thAjaranH||""}}function b(){c(),y.value=!0}function x(){c(),p.value=!0}const h=d=>{d.th_ajaran_h==o.thAjaranH&&n.value++,i.push(`/iuran/santri/${d.santri_id}/${d.th_ajaran_h}`)};return(d,u)=>(m(),S("div",null,[a(La,{"start-url":"/iuran/santri",onDataFilter:u[0]||(u[0]=C=>v.value=C),"active-only":!1,bordered:"",flat:"",class:""}),r("div",ue,[j(o).id?(m(),q(Aa,{key:0,id:j(o).id,onLoaded:u[1]||(u[1]=C=>_.value=C)},null,8,["id"])):(m(),q(O,{key:1,bordered:"",flat:""},{default:t(()=>[a(Q,{class:"q-pa-sm bg-green-11 text-subtitle2"},{default:t(()=>[...u[6]||(u[6]=[w(" No data ",-1)])]),_:1}),a(Q,{class:"q-pa-lg text-body1 text-center"},{default:t(()=>[...u[7]||(u[7]=[w(" Pilih Santri ",-1)])]),_:1})]),_:1}))]),a(O,{flat:"",bordered:"",class:"q-mt-sm"},{default:t(()=>[a(Q,{class:"q-pa-sm text-subtitle1 bg-green-6 text-green-11 flex items-center"},{default:t(()=>[u[8]||(u[8]=w(" Data Iuran ",-1)),a(ya),a(F,{icon:"sync",outline:"",dense:"",onClick:u[2]||(u[2]=C=>n.value++),class:"q-px-sm q-mr-sm"}),a(se,{onOnAdd:b,onShowPaket:x})]),_:1}),a(Q,{class:"no-padding"},{default:t(()=>[(m(),q(te,{key:n.value}))]),_:1})]),_:1}),a(R,{modelValue:y.value,"onUpdate:modelValue":u[3]||(u[3]=C=>y.value=C)},{default:t(()=>[a(da,{data:l.value,onSuccessCreate:h,"disable-santri-id":!0},null,8,["data"])]),_:1},8,["modelValue"]),a(R,{modelValue:p.value,"onUpdate:modelValue":u[5]||(u[5]=C=>p.value=C)},{default:t(()=>[a(oe,{data:l.value,onSuccessSubmit:u[4]||(u[4]=C=>n.value++)},null,8,["data"])]),_:1},8,["modelValue"])]))}};export{st as default};
