import{Q as f}from"./QItemLabel-Dxu0F0OG.js";import{Q as S,a as Q}from"./QItem-C5WCjBq0.js";import{Q as V}from"./QSelect-2e6-oRqA.js";import{q as p,ap as O,s as w,c as x,o as P,w as i,g as l,Q as q,bG as D,bH as B,v as c,t as m,a9 as C,l as N}from"./index-C_t1p4NN.js";import{S as R}from"./Santri-BJix5U-P.js";import{n as j}from"./index-CaYCq6F4.js";const G={__name:"InputSelectSantriId",props:{activeOnly:{type:Boolean},data:{type:Object}},emits:["emitInput"],setup(v,{expose:_,emit:b}){const r=v,k=b,e=p({}),u=p(!1),o=p([]);function y(){e.value.nama=o.value.find(a=>a.id==e.value?.santri_id)?.nama,e.value.data_akhir=o.value.find(a=>a.id==e.value?.santri_id)?.data_akhir,k("emitInput",e.value)}const s=O("selectRef");_({focus:()=>{s.value&&s.value.focus()},showPopup:()=>{s.value&&s.value.showPopup()}}),w(async()=>{const a={santri_id:r.data?.santri_id,nama:r.data?.nama,data_akhir:r.data?.data_akhir};Object.assign(e.value,a)});async function I(a){try{u.value=!0;const t=await R.getIds({active_only:!!r.activeOnly,q:a});return t.lists.length||j("ID Santri tidak ditemukan"),t.lists}finally{u.value=!1}}async function g(a,t,n){if(!a){t(()=>{o.value=[]});return}if(a.length<3){n();return}const h=await I(a);t(()=>o.value=h,d=>{a!==""&&d.options.length&&(d.setOptionIndex(-1),d.moveOptionSelection(1,!0))})}return(a,t)=>(P(),x(N,{class:"",flat:"",bordered:""},{default:i(()=>[l(q,{class:"q-pa-sm"},{default:i(()=>[l(V,{dense:"",hint:a.$props.activeOnly?"Hanya menampilkan santri aktif":"Ketikkan ID Santri",outlined:"",label:"ID Santri*",modelValue:e.value.santri_id,"onUpdate:modelValue":[t[0]||(t[0]=n=>e.value.santri_id=n),y],options:o.value,"emit-value":"","map-options":"","option-value":"id","option-label":"id","error-color":"negative",loading:u.value,"input-debounce":"400","use-input":"",clearable:"",onFilter:g,disable:!!e.value.santri_id,behavior:"menu",debounce:"500",ref_key:"selectRef",ref:s},{option:i(n=>[l(S,D(B(n.itemProps)),{default:i(()=>[l(Q,null,{default:i(()=>[l(f,null,{default:i(()=>[c(m(n.opt.id)+" â€” "+m(n.opt.nama),1)]),_:2},1024),l(f,{caption:""},{default:i(()=>[c(m(n.opt.data_akhir),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["hint","modelValue","options","loading","disable"]),l(C,{hint:e.value.data_akhir,class:"q-mt-sm",dense:"",outlined:"",label:"Nama",modelValue:e.value.nama,"onUpdate:modelValue":t[1]||(t[1]=n=>e.value.nama=n),disable:"",filled:""},null,8,["hint","modelValue"])]),_:1})]),_:1}))}};export{G as _};
