import{B as n,ac as V,X as q,C as d,c as f,o as c,w as o,g as e,Q as v,a as t,l as g,y as D,e as Q,t as r,ag as B,H as N}from"./index-BSwPLBvN.js";import{Q as P,a as R}from"./QToolbar-qqbqC3d5.js";import{Q as S}from"./QMarkupTable-BHGuGSYT.js";import{Q as k}from"./QRouteTab-K8tVCAL2.js";import{Q as A}from"./QTabs-B9KhPlay.js";import{a as K}from"./api-get-DLoYpnPD.js";import{a as M}from"./api-update-C9n3FsEO.js";import{_ as U}from"./CardSantri-D-I0mt_Y.js";import{_ as j}from"./KelasForm-K7gsPWru.js";import"./QResizeObserver-C5MeMRA2.js";import"./rtl-DFPa-2ov.js";import"./index-BaAeepf0.js";import"./index-DWKPJyX7.js";import"./api-error-CD6hOSn6.js";import"./QSkeleton-9AFyI2YJ.js";import"./QImg-hhTG6btB.js";import"./QItemSection-WqxvrlOw.js";import"./QItemLabel-CIOWhTht.js";import"./QList-Dn-IYx8z.js";import"./santri-store-BRD5aS7E.js";import"./QForm-pLnIPDm5.js";import"./InputSelectArray-CW313qGw.js";import"./QSelect-BjGQaI4Q.js";import"./QChip-Br_mmnnr.js";import"./QMenu-BnIg5_Ug.js";import"./selection-CiLPAPFJ.js";import"./format-CJebrXOQ.js";import"./lists-store-BQBJ2JOd.js";import"./DropDownAfter-B_WHSSYE.js";import"./QBtnDropdown-C4ZtMkBn.js";import"./QBtnGroup-CFUVAF62.js";import"./ClosePopup-9H5qeAFV.js";import"./Lists-kDpWTKyN.js";import"./ApiCrud-CsgpJEPb.js";import"./Api-gH9zfM44.js";import"./InputSelectTingkatPendidikan-CQMIiWoT.js";import"./useCrudForm-Di2BQFx5.js";import"./InputSelectTahunAjaran-DMwx7EBO.js";const z={class:"row",style:{"max-width":"1400px"}},H={class:"col-12 col-md-6 q-pa-sm"},L={class:"col-12 col-md-6 q-pa-sm"},Da={__name:"KelasIndex",setup(I){const _=n(0),b=V().params.id,l=n({}),w=n(!1),u=n(!1),y=n({});async function C(i){const a=i==1,p=i==1?0:1;await M({endPoint:`kelas/${b}/set-active`,data:{aktif:a},confirm:!1})||(l.value.aktif=p)}async function m(){const i=await K({endPoint:`kelas/${b}`,loading:w});i.kelas&&(l.value=i.kelas)}return q(async()=>{await m()}),(i,a)=>{const p=d("CardHeader"),x=d("CardLoading"),$=d("router-view"),T=d("CardPage");return c(),f(T,null,{default:o(()=>[e(p,{title:"Data Murid",onOnReload:m}),e(v,{class:"no-padding"},{default:o(()=>[t("div",z,[t("div",H,[e(g,{bordered:"",flat:""},{default:o(()=>[e(U,{id:l.value.santri_id,onLoaded:a[0]||(a[0]=s=>y.value=s)},null,8,["id"])]),_:1}),e(g,{class:"q-mt-sm",bordered:"",flat:""},{default:o(()=>[e(v,{class:"q-pa-sm"},{default:o(()=>[e(P,{class:"bg-green-1"},{default:o(()=>[e(R,{class:"text-subtitle1"},{default:o(()=>[...a[6]||(a[6]=[D(" Data Kelas ",-1)])]),_:1}),e(Q,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),e(Q,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:a[1]||(a[1]=s=>u.value=!0),label:"Edit","no-caps":""})]),_:1}),e(S,{flat:""},{default:o(()=>[t("tbody",null,[t("tr",null,[a[7]||(a[7]=t("td",{class:"text-italic"},"Tahun Ajaran",-1)),t("td",null,r(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),t("tr",null,[a[8]||(a[8]=t("td",{class:"text-italic"},"Tingkat",-1)),t("td",null,r(l.value.tingkat),1)]),t("tr",null,[a[9]||(a[9]=t("td",{class:"text-italic"},"Kelas",-1)),t("td",null,r(l.value.kelas),1)]),t("tr",null,[a[10]||(a[10]=t("td",{class:"text-italic"},"Nomor Absen",-1)),t("td",null,r(l.value.no_absen),1)]),t("tr",null,[a[11]||(a[11]=t("td",{class:"text-italic"},"Aktif",-1)),t("td",null,[e(B,{modelValue:l.value.aktif,"onUpdate:modelValue":[a[2]||(a[2]=s=>l.value.aktif=s),C],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),t("tr",null,[a[12]||(a[12]=t("td",{class:"text-italic"},"Keterangan",-1)),t("td",null,r(l.value.keterangan),1)])])]),_:1}),e(x,{showing:w.value},null,8,["showing"])]),_:1})]),_:1})]),t("div",L,[e(g,{bordered:"",flat:""},{default:o(()=>[e(A,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:o(()=>[e(k,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),e(k,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),e(k,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(c(),f(v,{class:"q-pa-sm",key:_.value},{default:o(()=>[(c(),f($,{key:i.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),e(N,{modelValue:u.value,"onUpdate:modelValue":a[5]||(a[5]=s=>u.value=s)},{default:o(()=>[e(j,{data:l.value,onSuccessUpdate:a[3]||(a[3]=s=>{l.value=s,_.value++}),onSuccessDelete:a[4]||(a[4]=s=>i.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Da as default};
