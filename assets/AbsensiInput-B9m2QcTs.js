import{q as V,ad as A,ac as S,s as I,b as p,o as m,g as s,G as r,w as i,Q as _,a as e,v as T,t as g,f as j,F as C,D as q,e as b,a9 as a,l as Q}from"./index-BTpW0qoK.js";import{Q as $}from"./QSkeleton-BCz5Lxkz.js";import{Q as D}from"./QMarkupTable-BbDaTCxX.js";import{A as y,_ as L}from"./FilterKelas-C2fC-Cju.js";import{t as M}from"./format-text-DnCGEu2I.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QToolbar-BY4F4qai.js";import"./QSpace-DOX5ArmE.js";import"./lists-madrasah-store-DeRmrEKz.js";import"./QSelect-DLG5Hk7y.js";import"./QField-Diu7Bopo.js";import"./QChip-PJDdAFrm.js";import"./QItem-DMT1Zy__.js";import"./QItemLabel-BqAZy4kr.js";import"./QMenu-DhhOsA7X.js";import"./selection-Wm1ZT_By.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./Kelas-TEBsR-rh.js";import"./ApiCrud-D-UyIn70.js";import"./Api-DQxWaKXW.js";import"./index-pGTdy6rp.js";import"./index-DSqU_ONB.js";import"./apiPost-CWVr4VWP.js";import"./AbsensiSetting-BR4IpdVX.js";const B={class:"text-subtitle1"},F=["innerHTML"],H={key:0},K={key:1},J={colspan:"50"},O={key:2},R={class:"text-center"},z={class:"text-center"},E={class:"text-center"},G={class:"text-left"},W={class:"bg-grey-1"},X={class:"bg-grey-1"},Y={class:"bg-grey-1"},Z={class:"bg-grey-1"},ee={class:"bg-green-1"},te={class:"bg-green-1"},le={class:"bg-green-1"},se={class:"bg-green-1"},ae={class:"bg-grey-1"},ne={class:"bg-grey-1"},oe={class:"bg-grey-1"},de={class:"bg-grey-1"},ue={class:"bg-green-1"},re={class:"bg-green-1"},ie={class:"bg-green-1"},ce={class:"bg-green-1"},pe={class:"bg-grey-1"},me={class:"bg-grey-1"},ge={class:"bg-grey-1"},_e={class:"bg-grey-1"},he={class:"bg-green-2"},Ve={class:"bg-green-2"},be={class:"bg-green-2"},ke={class:"bg-green-2"},xe={__name:"AbsensiInput",setup(ye){const d=V(!1),f=A(),U=S(),k=V(""),c=V([]),{params:n}=f,h=n.absensi?.toLowerCase()==="sekolah"?y.Sekolah:n.absensi?.toLowerCase()==="musyawarah"?y.Musyawarah:null;async function v(){const u=c.value.map(t=>t.kelas_id),o=n.bulan_ujian;try{d.value=!0,await h.removeAbsensi({bulan_ujian:o,kelas_id:u}),c.value=[];const t=`/madrasah/absensi/input/${n.absensi}/${n.th_ajaran_h}/${n.tingkat_id}/${n.kelas}`;U.push(t)}catch(t){console.error("ðŸš€ ~ deleteAbsensi ~ error:",t)}finally{d.value=!1}}async function N(){const u={absensi:JSON.parse(JSON.stringify(c.value))};try{d.value=!0;const o=await h.create({data:u,message:'<span style="color:blue">Kirim data absensi?</span>'});c.value=o["absensi_"+n.absensi]}catch(o){console.error("ðŸš€ ~ submitAbsensi ~ error:",o)}finally{await x(),d.value=!1}}async function x(){const u={th_ajaran_h:n.th_ajaran_h,tingkat_id:n.tingkat_id,kelas:n.kelas,bulan_ujian:n.bulan_ujian};try{d.value=!0;const o=await h.getAll({params:u});c.value=o["absensi_"+n.absensi]}catch(o){console.error("ðŸš€ ~ fetchAbsensi ~ error:",o)}finally{d.value=!1}}return I(async()=>{n.th_ajaran_h&&n.tingkat_id&&n.kelas&&n.bulan_ujian&&await x()}),(u,o)=>(m(),p("div",null,[s(L,{"show-set-bulan-ujian":!0,"start-url":`/madrasah/absensi/input/${r(n).absensi}`,onDataFilter:o[0]||(o[0]=t=>k.value=t)},null,8,["start-url"]),s(Q,{class:"q-mt-sm",flat:"",bordered:""},{default:i(()=>[s(_,{class:"bg-green-7 text-green-1 text-subtitle1 q-px-sm q-py-xs"},{default:i(()=>[e("div",B,[o[1]||(o[1]=T(" âž¡ï¸ ",-1)),e("strong",null," Absensi "+g(r(M)(r(n).absensi)),1)])]),_:1}),s(_,{class:"bg-green-3 text-green-10 text-subtitle1 q-pa-sm"},{default:i(()=>[e("div",null,[e("span",{innerHTML:k.value||"Tentukan filter!"},null,8,F)])]),_:1}),s(_,{class:"no-padding"},{default:i(()=>[s(D,{flat:""},{default:i(()=>[o[3]||(o[3]=e("thead",null,[e("tr",null,[e("th",{rowspan:"2",class:"text-center"},"No."),e("th",{rowspan:"2",class:"text-center"},"ID Santri"),e("th",{rowspan:"2",class:"text-center"},"ID Kelas"),e("th",{rowspan:"2",class:"text-left"},"Nama"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-1"),e("th",{colspan:"4",class:"bg-green-1"},"Pekan-2"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-3"),e("th",{colspan:"4",class:"bg-green-1"},"Pekan-4"),e("th",{colspan:"4",class:"bg-grey-1"},"Pekan-5"),e("th",{colspan:"4",class:"bg-green-2"},"Sebulan")]),e("tr",null,[e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-1"},"S"),e("th",{class:"bg-green-1"},"I"),e("th",{class:"bg-green-1"},"A"),e("th",{class:"bg-green-1"},"T"),e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-1"},"S"),e("th",{class:"bg-green-1"},"I"),e("th",{class:"bg-green-1"},"A"),e("th",{class:"bg-green-1"},"T"),e("th",{class:"bg-grey-1"},"S"),e("th",{class:"bg-grey-1"},"I"),e("th",{class:"bg-grey-1"},"A"),e("th",{class:"bg-grey-1"},"T"),e("th",{class:"bg-green-2"},"S"),e("th",{class:"bg-green-2"},"I"),e("th",{class:"bg-green-2"},"A"),e("th",{class:"bg-green-2"},"T")])],-1)),!r(n).th_ajaran_h||!r(n).tingkat_id||!r(n).kelas||!r(n).bulan_ujian?(m(),p("tbody",H,[...o[2]||(o[2]=[e("tr",null,[e("td",{colspan:"50"},[e("div",{class:"text-center text-negative text-body1 text-italic bg-red-1 q-pa-md"}," Tentukan filter! ")])],-1)])])):j("",!0),d.value?(m(),p("tbody",K,[e("tr",null,[e("td",J,[s($,{height:"50px"})])])])):(m(),p("tbody",O,[(m(!0),p(C,null,q(c.value,(t,w)=>(m(),p("tr",{key:w},[e("td",R,g(t.no_absen?t.no_absen.toString().padStart(2,0):""),1),e("td",z,g(t.santri_id),1),e("td",E,[s(b,{flat:"",dense:"","no-caps":"",class:"text-green-10 bg-green-11 q-px-sm",style:{"min-width":"50px"},onClick:l=>u.$router.push(`/madrasah/kelas/${t.kelas_id}/riwayat`)},{default:i(()=>[e("small",null,g(t.kelas_id),1)]),_:2},1032,["onClick"])]),e("td",G,g(t.nama),1),e("td",W,[s(a,{outlined:"",dense:"",modelValue:t.p1s,"onUpdate:modelValue":l=>t.p1s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",X,[s(a,{outlined:"",dense:"",modelValue:t.p1i,"onUpdate:modelValue":l=>t.p1i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Y,[s(a,{outlined:"",dense:"",modelValue:t.p1a,"onUpdate:modelValue":l=>t.p1a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Z,[s(a,{outlined:"",dense:"",modelValue:t.p1t,"onUpdate:modelValue":l=>t.p1t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ee,[s(a,{outlined:"",dense:"",modelValue:t.p2s,"onUpdate:modelValue":l=>t.p2s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",te,[s(a,{outlined:"",dense:"",modelValue:t.p2i,"onUpdate:modelValue":l=>t.p2i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",le,[s(a,{outlined:"",dense:"",modelValue:t.p2a,"onUpdate:modelValue":l=>t.p2a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",se,[s(a,{outlined:"",dense:"",modelValue:t.p2t,"onUpdate:modelValue":l=>t.p2t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ae,[s(a,{outlined:"",dense:"",modelValue:t.p3s,"onUpdate:modelValue":l=>t.p3s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ne,[s(a,{outlined:"",dense:"",modelValue:t.p3i,"onUpdate:modelValue":l=>t.p3i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",oe,[s(a,{outlined:"",dense:"",modelValue:t.p3a,"onUpdate:modelValue":l=>t.p3a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",de,[s(a,{outlined:"",dense:"",modelValue:t.p3t,"onUpdate:modelValue":l=>t.p3t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ue,[s(a,{outlined:"",dense:"",modelValue:t.p4s,"onUpdate:modelValue":l=>t.p4s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",re,[s(a,{outlined:"",dense:"",modelValue:t.p4i,"onUpdate:modelValue":l=>t.p4i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ie,[s(a,{outlined:"",dense:"",modelValue:t.p4a,"onUpdate:modelValue":l=>t.p4a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ce,[s(a,{outlined:"",dense:"",modelValue:t.p4t,"onUpdate:modelValue":l=>t.p4t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",pe,[s(a,{outlined:"",dense:"",modelValue:t.p5s,"onUpdate:modelValue":l=>t.p5s=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",me,[s(a,{outlined:"",dense:"",modelValue:t.p5i,"onUpdate:modelValue":l=>t.p5i=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ge,[s(a,{outlined:"",dense:"",modelValue:t.p5a,"onUpdate:modelValue":l=>t.p5a=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",_e,[s(a,{outlined:"",dense:"",modelValue:t.p5t,"onUpdate:modelValue":l=>t.p5t=l,"input-class":"text-center",mask:"##"},null,8,["modelValue","onUpdate:modelValue"])]),e("td",he,[s(a,{outlined:"",dense:"","model-value":Number(t.p1s)+Number(t.p2s)+Number(t.p3s)+Number(t.p4s)+Number(t.p5s),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",Ve,[s(a,{outlined:"",dense:"","model-value":Number(t.p1i)+Number(t.p2i)+Number(t.p3i)+Number(t.p4i)+Number(t.p5i),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",be,[s(a,{outlined:"",dense:"","model-value":Number(t.p1a)+Number(t.p2a)+Number(t.p3a)+Number(t.p4a)+Number(t.p5a),readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])]),e("td",ke,[s(a,{outlined:"",dense:"","model-value":Number(t.p1t)+Number(t.p2t)+Number(t.p3t)+Number(t.p4t)+Number(t.p5t),class:"text-center",readonly:"","input-class":"text-center",mask:"##"},null,8,["model-value"])])]))),128))])),o[4]||(o[4]=e("tfoot",null,null,-1))]),_:1})]),_:1}),s(_,{class:"bg-green-6 text-green-11 text-subtitle1 q-pa-sm full-width row no-wrap justify-between items-center content-center"},{default:i(()=>[s(b,{dense:"",class:"q-px-md","no-caps":"",label:"Hapus",color:"negative",onClick:v}),o[5]||(o[5]=e("div",{class:"text-caption text-italic text-center"},"S=Sakit; I=Izin; A=Alpa; T=Terlambat",-1)),s(b,{dense:"",class:"q-px-md","no-caps":"",onClick:N,label:"Kirim",color:"green-10"})]),_:1})]),_:1})]))}},ze=P(xe,[["__scopeId","data-v-f2616edd"]]);export{ze as default};
