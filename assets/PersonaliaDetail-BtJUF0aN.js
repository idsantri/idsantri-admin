import{ab as J,aa as sa,A as v,q as na,W as H,f as y,o as d,b as e,w as t,Q as U,v as h,g as w,a as _,F as C,z as O,t as f,y as D,G as N,C as L,B as j,c as $,ad as E,e as z,a7 as Q,H as W,x as G,aj as oa}from"./index-0PBDf7I0.js";import{Q as ra}from"./QPage-B2JjDCGV.js";import{Q as P}from"./QToolbarTitle-Bi7GnpK1.js";import{Q as I}from"./QToolbar-CIornAnt.js";import{Q as ua}from"./QSpinnerCube-Dxm5aSBA.js";import{Q as da}from"./QImg-BtLhfr-G.js";import{a as A}from"./api-get-CJU_3mwN.js";import{f as ia}from"./format-date-DlwYCgkJ.js";import{_ as ma}from"./ImageUploader-DcjShdbY.js";import{_ as pa}from"./PersonaliaForm-BhjF_8Gc.js";import{Q as K}from"./QTab-Fd9v2ElX.js";import{Q as ca}from"./QTabs-DQ3kVZ7f.js";import{Q as _a,a as R}from"./QTabPanels-ClrLa5zh.js";import{Q as X}from"./QSkeleton-DlTQ_uqq.js";import{Q as S}from"./QItemLabel-DR97WW3U.js";import{Q as Y,a as T}from"./QItemSection-DpSW8XO7.js";import{Q as Z}from"./QList-BR1VLd4M.js";import{g as aa}from"./array-object-BytDdNh7.js";import{Q as ea}from"./QForm-ieTYlGnS.js";import{_ as va}from"./InputSelectTingkatPendidikan-T6npfMRK.js";import{_ as M}from"./InputSelectArray-BGoSDEHL.js";import{u as ta}from"./useCrudForm-C4qLnD9W.js";import{A as la}from"./ApiCrud-CgUuq5zB.js";import{_ as fa}from"./InputSelectTahunAjaran-BATXiotR.js";import{Q as ga}from"./QSelect-Cpr8vW2V.js";import"./index-BXLuJznK.js";import"./index-BDNa_dSq.js";import"./api-error-C1WPqECD.js";import"./id-BuNGTsqN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CarouselAlamat-BSPoH8nk.js";import"./use-panel-B-ZVr9yZ.js";import"./touch-BjYP5sR0.js";import"./selection-DeDWR_N3.js";import"./use-fullscreen-u92Ep5d8.js";import"./QBtnGroup-BBlBx6YD.js";import"./alamat-store-0RPgYajK.js";import"./Alamat-C9yFpZEa.js";import"./Api--YdEMrhi.js";import"./QBtnDropdown-CEycuZRG.js";import"./QMenu-3oalsLjd.js";import"./ClosePopup-5qpDiF0T.js";import"./hijri-BBdEhqDI.js";import"./format-number-B34ySHL_.js";import"./InputSelectKotaLahir-DGOwzbzx.js";import"./QResizeObserver-DonTkqYd.js";import"./rtl-DFPa-2ov.js";import"./lists-store-C4dqSiKA.js";import"./DropDownAfter-f-uzuh2w.js";import"./Lists-B91eApHM.js";import"./QChip-DG5_EyRB.js";import"./format-CJebrXOQ.js";const ba={key:0},ha={key:1,class:"row"},ka={class:"col-4 q-pr-sm"},ya={class:"col"},xa={class:"text-caption text-italic"},Va={class:"q-mb-sm"},qa={__name:"CardIdentitas",emits:["on-load"],setup(x,{emit:m}){const r=J(),o=sa(),a=v({}),i=v(!1),k=v(!1),g=m;async function q(c){c.id==r.params.id?(a.value=c,g("on-load",a.value)):o.push(`/personalia/${c.id}`)}async function V(){const c=await A({endPoint:`aparatur/${r.params.id}`,loading:i});c&&(a.value=c.aparatur,await p(),g("on-load",a.value))}async function p(){const c=await A({endPoint:`images/aparatur/${a.value.id}`});c&&(a.value.image=c.image_url)}const u=na(()=>({Nama:`${a.value.nama?.toUpperCase()} (${a.value.sex?.toUpperCase()})`,Alamat:`${a.value.jl||" "} RT ${String(a.value.rt||0).padStart(3,0)} RW ${String(a.value.rw||0).padStart(3,"0")} ${a.value.desa||" "} ${a.value.kecamatan||" "} ${a.value.kabupaten||" "} ${a.value.provinsi||" "} ${a.value.kode_pos||" "}`.replace(/\s\s+/g," "),Kelahiran:`${a.value.tmp_lahir||"-"}, ${ia(a.value.tgl_lahir)}`,Telepon:a.value.telepon||"-",Email:a.value.email||"-"}));H(async()=>{r.params.id&&await V()});const s=v(!1),n=c=>s.value=c;async function F(){s.value=!1,await p()}return(c,b)=>(d(),y(C,null,[e(D,{flat:"",bordered:"",class:""},{default:t(()=>[e(U,{class:"bg-green-7 no-padding"},{default:t(()=>[e(I,{class:"no-padding no-margin"},{default:t(()=>[e(P,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...b[4]||(b[4]=[h(" Identitas ",-1)])]),_:1}),e(w,{dense:"",flat:"",class:"q-px-md q-mr-sm","no-caps":"",icon:"sync",color:"green-2",onClick:V}),e(w,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:b[0]||(b[0]=l=>k.value=!0)})]),_:1})]),_:1}),e(U,{class:"q-pa-sm"},{default:t(()=>[i.value?(d(),y("div",ba,[e(ua,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):(d(),y("div",ha,[_("div",ka,[e(da,{src:a.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),e(w,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:b[1]||(b[1]=l=>s.value=!0)})]),_("div",ya,[(d(!0),y(C,null,O(u.value,(l,B)=>(d(),y("div",{key:B},[_("div",xa,f(B),1),_("div",Va,f(l),1)]))),128))])]))]),_:1})]),_:1}),e(N,{persistent:"",modelValue:k.value,"onUpdate:modelValue":b[3]||(b[3]=l=>k.value=l)},{default:t(()=>[e(pa,{data:a.value,onSuccessSubmit:q,onSuccessDelete:b[2]||(b[2]=l=>c.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"]),e(ma,{"show-uploader":s.value,url:`/images/aparatur/${L(r).params.id}`,"img-format":"webp",onUpdateUploader:n,onSuccessUpload:F},null,8,["show-uploader","url"])],64))}};class wa extends la{constructor(){super("aparatur-madrasah")}}const $a=new wa,Qa={__name:"PersonaliaMadrasahForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(x,{emit:m}){const r=x,o=m,a=v({...r.data}),i=!r.data.id,{handleDelete:k,handleCreate:g,handleUpdate:q,loading:V}=ta($a,{emit:o,responseKey:"aparatur_madrasah"}),p=async()=>{const s={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,tingkat_id:a.value.tingkat_id,kelas:a.value.kelas,ruang:a.value.ruang,keterangan:a.value.keterangan};return i?await g(s,!0):await q(r.data.id,s,!0)},u=async()=>await k(r.data.id);return(s,n)=>{const F=j("FormHeader"),c=j("FormLoading"),b=j("FormActions");return d(),$(D,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ea,{onSubmit:E(p,["prevent"])},{default:t(()=>[e(F,{title:"Input Jabatan Madrasiyah","is-new":i}),L(V)?(d(),$(c,{key:0})):z("",!0),e(U,null,{default:t(()=>[e(Q,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(M,{modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.jabatan=l),url:"jabatan-madrasiyah",label:"Jabatan",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"]},null,8,["modelValue","rules"]),e(fa,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.th_ajaran_h=l),rules:[l=>!!l||"Harus diisi!"],class:"q-my-sm"},null,8,["modelValue","rules"]),e(va,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.tingkat_id=l),class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"]},null,8,["modelValue","rules"]),e(M,{modelValue:a.value.kelas,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.kelas=l),url:"kelas",label:"Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(Q,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.ruang=l)},null,8,["modelValue"]),e(Q,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=l=>a.value.keterangan=l),autogrow:""},null,8,["modelValue"])]),_:1}),e(b,{"btn-delete":!i,onOnDelete:u},null,8,["btn-delete"])]),_:1})]),_:1})}}},ja={class:"q-card--bordered"},Sa={class:"q-px-md"},Ua={key:0},Ca={key:1},Fa={class:"text-bold"},Da={__name:"CardJabatanMadrasah",setup(x){const m=J(),r=v(!1),o=v([]),a=v(!1),i=v({}),k=W("aparatur");async function g(){if(m.params.id){const p=await A({endPoint:"aparatur-madrasah",params:{aparatur_id:m.params.id},loading:r});p&&(o.value=p.aparatur_madrasah)}}H(async()=>await g());const q=()=>{i.value={aparatur_id:k.value.id,nama:k.value.nama},a.value=!0},V=p=>{i.value=aa(o.value,p),a.value=!0};return(p,u)=>(d(),y(C,null,[_("div",ja,[_("div",Sa,[e(I,{class:"no-padding no-margin"},{default:t(()=>[e(P,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...u[1]||(u[1]=[h(" Jabatan Madrasah ",-1)])]),_:1}),e(w,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(G,{class:""}),e(Z,{separator:"",class:""},{default:t(()=>[r.value?(d(),y("div",Ua,[e(X,{height:"80px"})])):o.value?.length?(d(!0),y(C,{key:2},O(o.value,s=>(d(),$(Y,{key:s.id,class:""},{default:t(()=>[e(T,null,{default:t(()=>[e(S,{overline:""},{default:t(()=>[h(f(s.th_ajaran_h)+" | "+f(s.th_ajaran_m),1)]),_:2},1024),e(S,{lines:"1"},{default:t(()=>[_("span",Fa,f(s.jabatan),1),h("; "+f(s.tingkat)+f(s.kelas?"; "+s.kelas:"")+" "+f(s.ruang?"("+s.ruang+")":""),1)]),_:2},1024),e(S,{caption:"",class:"text-italic"},{default:t(()=>[h(f(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(T,{side:""},{default:t(()=>[e(w,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:n=>V(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),y("div",Ca,[...u[2]||(u[2]=[_("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[h(" Tidak data data untuk ditampilkan."),_("br"),h("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(N,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=s=>a.value=s)},{default:t(()=>[e(Qa,{data:i.value,onSuccessSubmit:g,onSuccessDelete:g},null,8,["data"])]),_:1},8,["modelValue"])],64))}};class Aa extends la{constructor(){super("aparatur-quran")}}const Ta=new Aa,Ma={__name:"PersonaliaQuranForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(x,{emit:m}){const r=x,o=m,a=v({jabatan:"Muallim"}),i=!r.data?.id,{handleDelete:k,handleCreate:g,handleUpdate:q,loading:V}=ta(Ta,{emit:o,responseKey:"aparatur_quran"});H(async()=>{Object.assign(a.value,r.data)});const p=async()=>{const s={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,marhalah:a.value.marhalah,faslah:a.value.faslah,ruang:a.value.ruang,keterangan:a.value.keterangan};return i?await g(s,!0):await q(r.data.id,s,!0)},u=async()=>await k(r.data.id);return(s,n)=>{const F=j("FormHeader"),c=j("FormLoading"),b=j("FormActions");return d(),$(D,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ea,{onSubmit:E(p,["prevent"])},{default:t(()=>[e(F,{title:"Input Jabatan Madrasiyah","is-new":i}),L(V)?(d(),$(c,{key:0})):z("",!0),e(U,null,{default:t(()=>[e(Q,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(Q,{dense:"",class:"q-my-sm",outlined:"",filled:"",label:"Jabatan",modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.jabatan=l),disable:""},null,8,["modelValue"]),e(M,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.th_ajaran_h=l),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],selected:a.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),e(ga,{dense:"",outlined:"",modelValue:a.value.marhalah,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.marhalah=l),label:"Marhalah *",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],options:["Ula","Wustho","Ulya"]},null,8,["modelValue","rules"]),e(M,{modelValue:a.value.faslah,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.faslah=l),url:"faslah-quran",label:"Faslah/Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(Q,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.ruang=l)},null,8,["modelValue"]),e(Q,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=l=>a.value.keterangan=l),autogrow:""},null,8,["modelValue"])]),_:1}),e(b,{"btn-delete":!i,onOnDelete:u},null,8,["btn-delete"])]),_:1})]),_:1})}}},Ha={class:"q-card--bordered"},Pa={class:"q-px-md"},Ia={key:0},Ja={key:1},Oa={__name:"CardJabatanQuran",setup(x){const m=J(),r=v(!1),o=v([]),a=v(!1),i=v({}),k=W("aparatur");async function g(){if(m.params.id){const p=await A({endPoint:"aparatur-quran",params:{aparatur_id:m.params.id},loading:r});p&&(o.value=p.aparatur_quran)}}H(async()=>await g());const q=()=>{i.value={aparatur_id:k.value.id,nama:k.value.nama},a.value=!0},V=p=>{i.value=aa(o.value,p),a.value=!0};return(p,u)=>(d(),y(C,null,[_("div",Ha,[_("div",Pa,[e(I,{class:"no-padding no-margin"},{default:t(()=>[e(P,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...u[1]||(u[1]=[h(" Jabatan Quran ",-1)])]),_:1}),e(w,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(G,{class:""}),e(Z,{separator:"",class:""},{default:t(()=>[r.value?(d(),y("div",Ia,[e(X,{height:"80px"})])):o.value?.length?(d(!0),y(C,{key:2},O(o.value,s=>(d(),$(Y,{key:s.id,class:""},{default:t(()=>[e(T,null,{default:t(()=>[e(S,{overline:""},{default:t(()=>[h(f(s.th_ajaran_h)+" | "+f(s.th_ajaran_m),1)]),_:2},1024),e(S,{lines:"1"},{default:t(()=>[u[3]||(u[3]=_("span",{class:"text-bold"},"Muallim",-1)),h("; "+f(s.marhalah)+f(s.faslah?"; "+s.faslah:"")+" "+f(s.ruang?"("+s.ruang+")":""),1)]),_:2},1024),e(S,{caption:"",class:"text-italic"},{default:t(()=>[h(f(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(T,{side:""},{default:t(()=>[e(w,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:n=>V(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),y("div",Ja,[...u[2]||(u[2]=[_("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[h(" Tidak data data untuk ditampilkan."),_("br"),h("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(N,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=s=>a.value=s)},{default:t(()=>[e(Ma,{data:i.value,onSuccessSubmit:g,onSuccessDelete:g},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Na={__name:"CardJabatan",setup(x){const m=v("madrasah");return(r,o)=>(d(),$(D,{flat:"",bordered:"",class:""},{default:t(()=>[e(U,{class:"bg-green-7 no-padding"},{default:t(()=>[e(I,{class:"no-padding no-margin"},{default:t(()=>[e(P,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...o[2]||(o[2]=[h(" Jabatan ",-1)])]),_:1}),e(ca,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a),"narrow-indicator":"",class:"text-green-11","no-caps":"",dense:""},{default:t(()=>[e(K,{name:"madrasah",label:"Madrasah"}),e(K,{name:"quran",label:"Quran"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_a,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=a=>m.value=a),animated:"",class:"q-pa-sm"},{default:t(()=>[e(R,{name:"madrasah",class:"no-padding"},{default:t(()=>[e(Da)]),_:1}),e(R,{name:"quran",class:"no-padding"},{default:t(()=>[e(Oa)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},La={class:"col-12 col-md-6 q-pa-sm"},Ba={class:"col-12 col-md-6 q-pa-sm"},Le={__name:"PersonaliaDetail",setup(x){const m=v({});return oa("aparatur",m),(r,o)=>{const a=j("CardHeader");return d(),$(ra,{class:"q-pa-sm"},{default:t(()=>[e(D,null,{default:t(()=>[e(a,{title:"Detail Personalia",showReload:!1},{left:t(()=>[e(w,{"no-caps":"",label:"Personalia",icon:"badge",dense:"",color:"green-13",class:"q-px-md q-mr-sm text-green-10",to:"/personalia"})]),_:1}),e(U,{class:"row no-padding",style:{"max-width":"1200px"}},{default:t(()=>[_("div",La,[e(qa,{onOnLoad:o[0]||(o[0]=i=>m.value=i)})]),_("div",Ba,[e(Na)])]),_:1})]),_:1})]),_:1})}}};export{Le as default};
