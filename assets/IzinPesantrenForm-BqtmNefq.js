import{Q as q}from"./QSelect-BkBU4KOv.js";import{q as F,E as d,c as g,o as v,w as m,g as l,ae as z,f as S,G as p,Q as D,a8 as u,l as I}from"./index-DfaJsQuV.js";import{Q as P}from"./QForm-Bl0353G9.js";import{i as Q,f as H}from"./format-date-DlwYCgkJ.js";import{_ as x}from"./InputSelectSantriId-D7-SAqRG.js";import{_ as f}from"./InputSelectArray-CjBCeDBB.js";import{A as N}from"./ApiCrud-B1nLKXKt.js";import{u as $}from"./useCrudForm-DpbLGOfs.js";class A extends N{constructor(){super("izin-pesantren")}async setKembali({id:r,data:n,message:i}){if(!await this._notifyConfirm(i||"Update data ini?"))return!1;const s=await this._apiUpdate({endPoint:`${this._path}/${r}/set-kembali`,data:n});return this._showSuccess(s.message),s.data||!0}}const B=new A,J={__name:"IzinPesantrenForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(c,{emit:r}){const n=c,i=r,a=F({pengajuan:"Baru",tujuan:"Sesuai alamat rumah",...n.data}),s=!n.data?.id,{handleDelete:V,handleCreate:b,handleUpdate:y,loading:k}=$(B,{emit:i,responseKey:"izin_pesantren"});async function _(){const o={santri_id:a.value.santri_id,sifat:a.value.sifat,pengajuan:a.value.pengajuan,dari_tgl:a.value.dari_tgl,durasi:a.value.durasi,keperluan:a.value.keperluan,keterangan:a.value.keterangan,tujuan:a.value.tujuan,catatan:a.value.catatan};return s?await b(o,!0):await y(n.data.id,o,!0)}const j=async()=>await V(n.data.id);return(o,t)=>{const w=d("FormHeader"),C=d("FormLoading"),U=d("FormActions");return v(),g(I,{class:"full-width",style:{"max-width":"425px"}},{default:m(()=>[l(P,{onSubmit:z(_,["prevent"])},{default:m(()=>[l(w,{title:"Input Izin Santri","is-new":s}),p(k)?(v(),g(C,{key:0})):S("",!0),l(D,{class:"q-pa-sm"},{default:m(()=>[l(x,{"active-only":!0,onEmitInput:t[0]||(t[0]=e=>Object.assign(a.value,e)),data:n.data,class:"q-my-sm"},null,8,["data"]),l(f,{modelValue:a.value.sifat,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.sifat=e),url:"sifat-izin",label:"Sifat",class:"q-my-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),l(q,{label:"Pengajuan",modelValue:a.value.pengajuan,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value.pengajuan=e),dense:"",outlined:"",class:"q-my-sm",options:["Baru","Perpanjangan ke-1","Perpanjangan ke-2"],disable:a.value.sifat!="Pulang"},null,8,["modelValue","disable"]),l(u,{dense:"",hint:p(Q)(a.value.dari_tgl)?p(H)(a.value.dari_tgl):"",class:"q-my-sm",outlined:"",label:"Tanggal (M)*",modelValue:a.value.dari_tgl,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.dari_tgl=e),type:"date",rules:[e=>!!e||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),l(u,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Durasi (hari)*",modelValue:a.value.durasi,"onUpdate:modelValue":t[4]||(t[4]=e=>a.value.durasi=e),rules:[e=>!!e||"Harus diisi!",e=>!e||!isNaN(e)||"Hanya angka"],"error-color":"negative"},null,8,["modelValue","rules"]),l(f,{modelValue:a.value.keperluan,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value.keperluan=e),url:"keperluan-izin",label:"Keperluan *",class:"q-my-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),l(f,{modelValue:a.value.keterangan,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.keterangan=e),url:"keterangan-izin",label:"Keterangan",class:"q-my-sm"},null,8,["modelValue"]),l(u,{dense:"",class:"q-my-sm",outlined:"",label:"Tujuan",modelValue:a.value.tujuan,"onUpdate:modelValue":t[7]||(t[7]=e=>a.value.tujuan=e),autogrow:""},null,8,["modelValue"]),l(u,{dense:"",class:"q-my-sm",outlined:"",label:"Catatan",modelValue:a.value.catatan,"onUpdate:modelValue":t[8]||(t[8]=e=>a.value.catatan=e),autogrow:""},null,8,["modelValue"])]),_:1}),l(U,{"btn-delete":!s,onOnDelete:j},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{B as I,J as _};
