import{a7 as J,a6 as na,x as d,k as oa,R as P,g as k,o as u,b as e,w as t,n as C,p as b,f as x,q as v,F as D,t as E,v as f,s as T,B as H,z as ra,y as S,c as $,a9 as R,a as z,a3 as j,C as W,r as G,ag as ua}from"./index-Bf-p91mW.js";import{Q as da}from"./QPage-DbeGPrD5.js";import{_ as ia}from"./CardHeader-AnL1K4iE.js";import{Q as A}from"./QToolbarTitle-Bi6rSosy.js";import{Q as M}from"./QToolbar-CUFZpZSE.js";import{Q as ma}from"./QSpinnerCube-CRIto8Mg.js";import{Q as pa}from"./QImg-DJapb2Ub.js";import{a as I}from"./api-get-CiRdORW1.js";import{f as ca}from"./format-date-DlwYCgkJ.js";import{_ as va}from"./ImageUploader-CsjUpCz_.js";import{_ as _a}from"./PersonaliaForm-Doo3UmlK.js";import{Q as K}from"./QTab-EFt_zopG.js";import{Q as fa}from"./QTabs-vx_STaPS.js";import{Q as ga,a as L}from"./QTabPanels-DXSRJD-j.js";import{Q as X}from"./QSkeleton-DEYFlc1v.js";import{Q as U}from"./QItemLabel-sjS6zLD0.js";import{Q as Y,a as B}from"./QItemSection-Bl4rOme3.js";import{Q as Z}from"./QList-51Eu5HNp.js";import{g as aa}from"./array-object-BytDdNh7.js";import{Q as ea}from"./QForm-OmDQHoiq.js";import{l as O}from"./lists-store-F5P_xNBX.js";import{a as ta}from"./api-delete-BVHfd1pG.js";import{a as la}from"./api-post-CHcQycZS.js";import{a as sa}from"./api-update-BYe6B3v5.js";import{_ as ba}from"./InputSelectTingkatPendidikan-C_EqL8ok.js";import{_ as F}from"./InputSelectArray-Jz4ksDX6.js";import{Q as ha}from"./QSelect-Co09SqkM.js";import"./QSpace-DJeipgZa.js";import"./index-D7WC_quC.js";import"./index-BtaF3-6r.js";import"./api-error-C0HjZ2a3.js";import"./id-BuNGTsqN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CarouselAlamat-B35cFH5A.js";import"./use-panel-CFhv5Wp3.js";import"./touch-BjYP5sR0.js";import"./selection-CE9S_xiH.js";import"./use-fullscreen-CrpeCgX1.js";import"./QBtnGroup-BDP931ZD.js";import"./alamat-store-DfLxYoUf.js";import"./Alamat-CB9A-ZV7.js";import"./ApiCrud-SVFtkNw7.js";import"./QBtnDropdown-Br6y2eVM.js";import"./QMenu-BvL1IfNl.js";import"./ClosePopup-HTVnKVBl.js";import"./hijri-BBdEhqDI.js";import"./format-number-B34ySHL_.js";import"./InputSelectKotaLahir-xX05QBoo.js";import"./QResizeObserver-CbBcyoPU.js";import"./rtl-DFPa-2ov.js";import"./lists-data-mcTvx2m2.js";import"./DropDownAfter-wYSCUu7Z.js";import"./Lists-DSwT9YX9.js";import"./QChip-DeZPZCXp.js";import"./format-CJebrXOQ.js";const ka={key:0},ya={key:1,class:"row"},qa={class:"col-4 q-pr-sm"},Va={class:"col"},xa={class:"text-caption text-italic"},$a={class:"q-mb-sm"},wa={__name:"CardIdentitas",emits:["on-load"],setup(V,{emit:m}){const c=J(),o=na(),a=d({}),i=d(!1),h=d(!1),g=m;async function q(r){r.id==c.params.id?(a.value=r,g("on-load",a.value)):o.push(`/personalia/${r.id}`)}async function _(){const r=await I({endPoint:`aparatur/${c.params.id}`,loading:i});r&&(a.value=r.aparatur,await s(),g("on-load",a.value))}async function s(){const r=await I({endPoint:`images/aparatur/${a.value.id}`});r&&(a.value.image=r.image_url)}const l=oa(()=>({Nama:`${a.value.nama?.toUpperCase()} (${a.value.sex?.toUpperCase()})`,Alamat:`${a.value.jl||" "} RT ${String(a.value.rt||0).padStart(3,0)} RW ${String(a.value.rw||0).padStart(3,"0")} ${a.value.desa||" "} ${a.value.kecamatan||" "} ${a.value.kabupaten||" "} ${a.value.provinsi||" "} ${a.value.kode_pos||" "}`.replace(/\s\s+/g," "),Kelahiran:`${a.value.tmp_lahir||"-"}, ${ca(a.value.tgl_lahir)}`,Telepon:a.value.telepon||"-",Email:a.value.email||"-"}));P(async()=>{c.params.id&&await _()});const n=d(!1),w=r=>n.value=r;async function p(){n.value=!1,await s()}return(r,y)=>(u(),k(D,null,[e(T,{flat:"",bordered:"",class:""},{default:t(()=>[e(C,{class:"bg-green-7 no-padding"},{default:t(()=>[e(M,{class:"no-padding no-margin"},{default:t(()=>[e(A,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...y[4]||(y[4]=[b(" Identitas ",-1)])]),_:1}),e(x,{dense:"",flat:"",class:"q-px-md q-mr-sm","no-caps":"",icon:"sync",color:"green-2",onClick:_}),e(x,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:y[0]||(y[0]=Q=>h.value=!0)})]),_:1})]),_:1}),e(C,{class:"q-pa-sm"},{default:t(()=>[i.value?(u(),k("div",ka,[e(ma,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):(u(),k("div",ya,[v("div",qa,[e(pa,{src:a.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),e(x,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:y[1]||(y[1]=Q=>n.value=!0)})]),v("div",Va,[(u(!0),k(D,null,E(l.value,(Q,N)=>(u(),k("div",{key:N},[v("div",xa,f(N),1),v("div",$a,f(Q),1)]))),128))])]))]),_:1})]),_:1}),e(H,{persistent:"",modelValue:h.value,"onUpdate:modelValue":y[3]||(y[3]=Q=>h.value=Q)},{default:t(()=>[e(_a,{data:a.value,onSuccessSubmit:q,onSuccessDelete:y[2]||(y[2]=Q=>r.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"]),e(va,{"show-uploader":n.value,url:`/images/aparatur/${ra(c).params.id}`,"img-format":"webp",onUpdateUploader:w,onSuccessUpload:p},null,8,["show-uploader","url"])],64))}},ja={__name:"PersonaliaMadrasahForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(V,{emit:m}){const c=V,o=m,a=d({}),i=d(!1),h=d([]),g=d([]);P(async()=>{Object.assign(a.value,c.data),g.value=O().getStateByKey("tahun-ajaran"),h.value=O().getStateByKey("tingkat-pendidikan")});const q=async()=>{const s={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,tingkat_id:a.value.tingkat_id,kelas:a.value.kelas,ruang:a.value.ruang,keterangan:a.value.keterangan};let l=null;const n=!a.value.id;n?l=await la({endPoint:"aparatur-madrasah",data:s,loading:i}):l=await sa({endPoint:`aparatur-madrasah/${a.value.id}`,data:s,confirm:!0,loading:i}),l&&(document.getElementById("btn-close-form").click(),o("successSubmit",l?.aparatur_madrasah),o(n?"successCreate":"successUpdate",l?.aparatur_madrasah))},_=async()=>{const s=a.value.id;await ta({endPoint:`aparatur-madrasah/${s}`,loading:i})&&(document.getElementById("btn-close-form").click(),o("successDelete",s))};return(s,l)=>{const n=S("FormHeader"),w=S("FormLoading"),p=S("FormActions");return u(),$(T,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ea,{onSubmit:R(q,["prevent"])},{default:t(()=>[e(n,{title:"Input Jabatan Madrasiyah","is-new":!a.value.id},null,8,["is-new"]),i.value?(u(),$(w,{key:0})):z("",!0),e(C,null,{default:t(()=>[e(j,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(F,{modelValue:a.value.jabatan,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value.jabatan=r),url:"jabatan-madrasiyah",label:"Jabatan",class:"q-my-sm",rules:[r=>!!r||"Harus diisi!"]},null,8,["modelValue","rules"]),e(F,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value.th_ajaran_h=r),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-my-sm",rules:[r=>!!r||"Harus diisi!"],selected:a.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),e(ba,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":l[2]||(l[2]=r=>a.value.tingkat_id=r),class:"q-my-sm",rules:[r=>!!r||"Harus diisi!"],selected:a.value.tingkat_id},null,8,["modelValue","rules","selected"]),e(F,{modelValue:a.value.kelas,"onUpdate:modelValue":l[3]||(l[3]=r=>a.value.kelas=r),url:"kelas",label:"Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":l[4]||(l[4]=r=>a.value.ruang=r)},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":l[5]||(l[5]=r=>a.value.keterangan=r),autogrow:""},null,8,["modelValue"])]),_:1}),e(p,{"btn-delete":!!a.value.id,onOnDelete:_},null,8,["btn-delete"])]),_:1})]),_:1})}}},Qa={class:"q-card--bordered"},Sa={class:"q-px-md"},Ua={key:0},Ca={key:1},Da={class:"text-bold"},Fa={__name:"CardJabatanMadrasah",setup(V){const m=J(),c=d(!1),o=d([]),a=d(!1),i=d({}),h=W("aparatur");async function g(){if(m.params.id){const s=await I({endPoint:"aparatur-madrasah",params:{aparatur_id:m.params.id},loading:c});s&&(o.value=s.aparatur_madrasah)}}P(async()=>await g());const q=()=>{i.value={aparatur_id:h.value.id,nama:h.value.nama},a.value=!0},_=s=>{i.value=aa(o.value,s),a.value=!0};return(s,l)=>(u(),k(D,null,[v("div",Qa,[v("div",Sa,[e(M,{class:"no-padding no-margin"},{default:t(()=>[e(A,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...l[1]||(l[1]=[b(" Jabatan Madrasah ",-1)])]),_:1}),e(x,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(G,{class:""}),e(Z,{separator:"",class:""},{default:t(()=>[c.value?(u(),k("div",Ua,[e(X,{height:"80px"})])):o.value?.length?(u(!0),k(D,{key:2},E(o.value,n=>(u(),$(Y,{key:n.id,class:""},{default:t(()=>[e(B,null,{default:t(()=>[e(U,{overline:""},{default:t(()=>[b(f(n.th_ajaran_h)+" | "+f(n.th_ajaran_m),1)]),_:2},1024),e(U,{lines:"1"},{default:t(()=>[v("span",Da,f(n.jabatan),1),b("; "+f(n.tingkat)+f(n.kelas?"; "+n.kelas:"")+" "+f(n.ruang?"("+n.ruang+")":""),1)]),_:2},1024),e(U,{caption:"",class:"text-italic"},{default:t(()=>[b(f(n.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:t(()=>[e(x,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:w=>_(n.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(u(),k("div",Ca,[...l[2]||(l[2]=[v("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[b(" Tidak data data untuk ditampilkan."),v("br"),b("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(H,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=n=>a.value=n)},{default:t(()=>[e(ja,{data:i.value,onSuccessSubmit:g,onSuccessDelete:g},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Pa={__name:"PersonaliaQuranForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(V,{emit:m}){const c=V,o=m,a=d({jabatan:"Muallim"}),i=d(!1),h=d([]);P(async()=>{Object.assign(a.value,c.data),h.value=O().getStateByKey("tahun-ajaran")});const g=async()=>{const _={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,marhalah:a.value.marhalah,faslah:a.value.faslah,ruang:a.value.ruang,keterangan:a.value.keterangan};let s=null;const l=!a.value.id;l?s=await la({endPoint:"aparatur-quran",data:_,loading:i}):s=await sa({endPoint:`aparatur-quran/${a.value.id}`,data:_,confirm:!0,loading:i}),s&&(document.getElementById("btn-close-form").click(),o("successSubmit",s?.aparatur_quran),o(l?"successCreate":"successUpdate",s?.aparatur_quran))},q=async()=>{const _=a.value.id;await ta({endPoint:`aparatur-quran/${_}`,loading:i})&&(document.getElementById("btn-close-form").click(),o("successDelete",_))};return(_,s)=>{const l=S("FormHeader"),n=S("FormLoading"),w=S("FormActions");return u(),$(T,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ea,{onSubmit:R(g,["prevent"])},{default:t(()=>[e(l,{title:"Input Jabatan Madrasiyah","is-new":!a.value.id},null,8,["is-new"]),i.value?(u(),$(n,{key:0})):z("",!0),e(C,null,{default:t(()=>[e(j,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(j,{dense:"",class:"q-my-sm",outlined:"",filled:"",label:"Jabatan",modelValue:a.value.jabatan,"onUpdate:modelValue":s[0]||(s[0]=p=>a.value.jabatan=p),disable:""},null,8,["modelValue"]),e(F,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":s[1]||(s[1]=p=>a.value.th_ajaran_h=p),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-my-sm",rules:[p=>!!p||"Harus diisi!"],selected:a.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),e(ha,{dense:"",outlined:"",modelValue:a.value.marhalah,"onUpdate:modelValue":s[2]||(s[2]=p=>a.value.marhalah=p),label:"Marhalah *",class:"q-my-sm",rules:[p=>!!p||"Harus diisi!"],options:["Ula","Wustho","Ulya"]},null,8,["modelValue","rules"]),e(F,{modelValue:a.value.faslah,"onUpdate:modelValue":s[3]||(s[3]=p=>a.value.faslah=p),url:"faslah-quran",label:"Faslah/Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":s[4]||(s[4]=p=>a.value.ruang=p)},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":s[5]||(s[5]=p=>a.value.keterangan=p),autogrow:""},null,8,["modelValue"])]),_:1}),e(w,{"btn-delete":!!a.value.id,onOnDelete:q},null,8,["btn-delete"])]),_:1})]),_:1})}}},Ta={class:"q-card--bordered"},Ia={class:"q-px-md"},Ba={key:0},Aa={key:1},Ma={__name:"CardJabatanQuran",setup(V){const m=J(),c=d(!1),o=d([]),a=d(!1),i=d({}),h=W("aparatur");async function g(){if(m.params.id){const s=await I({endPoint:"aparatur-quran",params:{aparatur_id:m.params.id},loading:c});s&&(o.value=s.aparatur_quran)}}P(async()=>await g());const q=()=>{i.value={aparatur_id:h.value.id,nama:h.value.nama},a.value=!0},_=s=>{i.value=aa(o.value,s),a.value=!0};return(s,l)=>(u(),k(D,null,[v("div",Ta,[v("div",Ia,[e(M,{class:"no-padding no-margin"},{default:t(()=>[e(A,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...l[1]||(l[1]=[b(" Jabatan Quran ",-1)])]),_:1}),e(x,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(G,{class:""}),e(Z,{separator:"",class:""},{default:t(()=>[c.value?(u(),k("div",Ba,[e(X,{height:"80px"})])):o.value?.length?(u(!0),k(D,{key:2},E(o.value,n=>(u(),$(Y,{key:n.id,class:""},{default:t(()=>[e(B,null,{default:t(()=>[e(U,{overline:""},{default:t(()=>[b(f(n.th_ajaran_h)+" | "+f(n.th_ajaran_m),1)]),_:2},1024),e(U,{lines:"1"},{default:t(()=>[l[3]||(l[3]=v("span",{class:"text-bold"},"Muallim",-1)),b("; "+f(n.marhalah)+f(n.faslah?"; "+n.faslah:"")+" "+f(n.ruang?"("+n.ruang+")":""),1)]),_:2},1024),e(U,{caption:"",class:"text-italic"},{default:t(()=>[b(f(n.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:t(()=>[e(x,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:w=>_(n.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(u(),k("div",Aa,[...l[2]||(l[2]=[v("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[b(" Tidak data data untuk ditampilkan."),v("br"),b("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(H,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=n=>a.value=n)},{default:t(()=>[e(Pa,{data:i.value,onSuccessSubmit:g,onSuccessDelete:g},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Oa={__name:"CardJabatan",setup(V){const m=d("madrasah");return(c,o)=>(u(),$(T,{flat:"",bordered:"",class:""},{default:t(()=>[e(C,{class:"bg-green-7 no-padding"},{default:t(()=>[e(M,{class:"no-padding no-margin"},{default:t(()=>[e(A,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...o[2]||(o[2]=[b(" Jabatan ",-1)])]),_:1}),e(fa,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a),"narrow-indicator":"",class:"text-green-11","no-caps":"",dense:""},{default:t(()=>[e(K,{name:"madrasah",label:"Madrasah"}),e(K,{name:"quran",label:"Quran"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ga,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=a=>m.value=a),animated:"",class:"q-pa-sm"},{default:t(()=>[e(L,{name:"madrasah",class:"no-padding"},{default:t(()=>[e(Fa)]),_:1}),e(L,{name:"quran",class:"no-padding"},{default:t(()=>[e(Ma)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ja={class:"col-12 col-md-6 q-pa-sm"},Ea={class:"col-12 col-md-6 q-pa-sm"},Ne={__name:"PersonaliaDetail",setup(V){const m=d({});return ua("aparatur",m),(c,o)=>(u(),$(da,{class:"q-pa-sm"},{default:t(()=>[e(T,null,{default:t(()=>[e(ia,{title:"Detail Personalia",showReload:!1},{left:t(()=>[e(x,{"no-caps":"",label:"Personalia",icon:"badge",dense:"",color:"green-13",class:"q-px-md q-mr-sm text-green-10",to:"/personalia"})]),_:1}),e(C,{class:"row no-padding",style:{"max-width":"1200px"}},{default:t(()=>[v("div",Ja,[e(wa,{onOnLoad:o[0]||(o[0]=a=>m.value=a)})]),v("div",Ea,[e(Oa)])]),_:1})]),_:1})]),_:1}))}};export{Ne as default};
