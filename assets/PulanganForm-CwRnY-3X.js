import{Q as j}from"./QSelect-CylIL8wH.js";import{q as P,ap as T,s as x,Y as D,N as _,E as g,c as p,o as v,w as d,g as n,af as I,f as S,G as t,Q as N,a9 as o,l as K}from"./index-Bq9vEVpm.js";import{Q as $}from"./QForm-SO4eXMV7.js";import{u as A}from"./useCrudForm-ClP9AI2Z.js";import{_ as B}from"./InputSelectTahunAjaran-DuNSoio8.js";import{P as L}from"./pulangan-store-9jEWpQIk.js";import{m as h,b as c}from"./hijri-CTUg_lXm.js";import{i as m,c as b}from"./format-date-DBaFa2rd.js";const X={__name:"PulanganForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(f,{emit:k}){const s=f,y=k,e=P({...s.data}),i=!s.data?.id,r=T("firstInput");x(async()=>{await D(),r.value&&r.value.focus()});const{handleDelete:V,handleCreate:M,handleUpdate:H,loading:w}=A(L,{emit:y,responseKey:"pulangan"}),C=async()=>{const u={th_ajaran_h:e.value.th_ajaran_h,nama:e.value.nama,tgl_pulang_m:e.value.tgl_pulang_m,tgl_pulang_h:e.value.tgl_pulang_h,tgl_kembali_m:e.value.tgl_kembali_m,tgl_kembali_h:e.value.tgl_kembali_h};return i?await M(u,!0):await H(s.data.id,u,!0)},F=async()=>await V(s.data.id);return _(()=>e.value.tgl_pulang_h,(u,a)=>{u?.length&&(e.value.tgl_pulang_h=u.replace(/-/g,""))}),_(()=>e.value.tgl_kembali_h,(u,a)=>{u?.length&&(e.value.tgl_kembali_h=u.replace(/-/g,""))}),(u,a)=>{const q=g("FormHeader"),Q=g("FormLoading"),U=g("FormActions");return v(),p(K,{class:"full-width",style:{"max-width":"425px"}},{default:d(()=>[n($,{onSubmit:I(C,["prevent"])},{default:d(()=>[n(q,{title:"Input Pulangan","is-new":i}),t(w)?(v(),p(Q,{key:0})):S("",!0),n(N,null,{default:d(()=>[n(B,{modelValue:e.value.th_ajaran_h,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.th_ajaran_h=l),rules:[l=>!!l||"Harus diisi!"],class:"q-my-sm",ref_key:"firstInput",ref:r},null,8,["modelValue","rules"]),n(j,{modelValue:e.value.nama,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.nama=l),label:"Pulangan *",rules:[l=>!!l||"Harus diisi!"],class:"q-my-sm",dense:"",outlined:"",options:["Ramadan","Maulid"]},null,8,["modelValue","rules"]),n(o,{dense:"",hint:t(m)(e.value.tgl_pulang_m)?t(b)(e.value.tgl_pulang_m,"cccc, dd MMMM yyyy"):"",class:"q-my-sm",outlined:"",label:"Tanggal Pulang (M)*",modelValue:e.value.tgl_pulang_m,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.tgl_pulang_m=l),type:"date",onChange:a[3]||(a[3]=l=>t(m)(e.value.tgl_pulang_m)?e.value.tgl_pulang_h=t(h)(e.value.tgl_pulang_m):e.value.tgl_pulang_h=""),rules:[l=>!!l||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),n(o,{dense:"",hint:e.value.tgl_pulang_h?.length?t(c)(e.value.tgl_pulang_h):"",class:"q-my-sm",outlined:"",label:"Tanggal Pulang (H)*",modelValue:e.value.tgl_pulang_h,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.tgl_pulang_h=l),rules:[l=>!!l||"Harus diisi!",l=>l?.length==8||"8 digit angka!"],"error-color":"negative",mask:"####-##-##"},null,8,["hint","modelValue","rules"]),n(o,{dense:"",hint:t(m)(e.value.tgl_kembali_m)?t(b)(e.value.tgl_kembali_m,"cccc, dd MMMM yyyy"):"",class:"q-my-sm",outlined:"",label:"Tanggal Kembali (M)*",modelValue:e.value.tgl_kembali_m,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.tgl_kembali_m=l),type:"date",onChange:a[6]||(a[6]=l=>t(m)(e.value.tgl_kembali_m)?e.value.tgl_kembali_h=t(h)(e.value.tgl_kembali_m):e.value.tgl_kembali_h=""),rules:[l=>!!l||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),n(o,{dense:"",hint:e.value.tgl_kembali_h?.length?t(c)(e.value.tgl_kembali_h):"",class:"q-my-sm",outlined:"",label:"Tanggal Kembali (H)*",modelValue:e.value.tgl_kembali_h,"onUpdate:modelValue":a[7]||(a[7]=l=>e.value.tgl_kembali_h=l),rules:[l=>!!l||"Harus diisi!",l=>l?.length==8||"8 digit angka!"],"error-color":"negative",mask:"####-##-##"},null,8,["hint","modelValue","rules"])]),_:1}),n(U,{"btn-delete":!i,onOnDelete:F},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{X as _};
