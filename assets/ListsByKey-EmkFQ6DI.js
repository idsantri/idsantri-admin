import{Q as L}from"./QSpace-CoisEuyS.js";import{v as _,R as T,f as p,o as u,w as l,i as a,a8 as $,Q as S,j as b,k as I,t as f,z as x,y as k,a3 as C,m as N,n as B,p as w,Z as U,q as O,a7 as A,r as D,B as j,F as P}from"./index-BOc7y3E3.js";import{l as J}from"./lists-data-L-iOlbK0.js";import{g as F}from"./api-get-lists-CRvCG-zL.js";import{Q as H}from"./QForm-CxO-I-hC.js";import{C as K}from"./ClosePopup-CcGROVC7.js";import{a as M}from"./api-delete-DLV1eJE-.js";import{a as R}from"./api-post-CPwNAYjq.js";import{a as z}from"./api-update-DaN0juSD.js";import{k as G}from"./format-text-BhuG3ucy.js";import{Q as m}from"./QTd-Nz-8Jtk4.js";import{Q}from"./QTr-fSHomvuw.js";import{Q as E}from"./QTable-CATdYY-T.js";import{l as Z}from"./lists-store-BaLrngMx.js";import"./index-CHOBZr16.js";import"./index-CdkvXyXH.js";import"./api-error-CtGrtfSx.js";import"./QList-DGdmu--E.js";import"./QMarkupTable-Dp9ldZmi.js";import"./QSelect-Br9kkI5Z.js";import"./QChip-DferuxmN.js";import"./QItemSection-U4VUPMG0.js";import"./QItemLabel-CrvmL7Ku.js";import"./QMenu-iXJrGXAP.js";import"./selection-CUoFkLvB.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./use-fullscreen-DZQzNGwS.js";const W={__name:"ListsCrud",props:{dataInput:{type:Object,required:!0},showInput:{type:Object,required:!0}},emits:["successSubmit","successDelete"],setup(v,{emit:r}){const i=v,s=r,o=_(!1),t=_({});T(()=>{Object.assign(t.value,i.dataInput)});async function g(){const d=JSON.parse(JSON.stringify(t.value));if(d.id){delete d.id;const n=await z({endPoint:`lists/${t.value.id}`,loading:o,data:d});n&&(document.getElementById("btn-close-crud").click(),s("successSubmit",n))}else{const n=await R({endPoint:"lists",loading:o,data:d});n&&(document.getElementById("btn-close-crud").click(),s("successSubmit",n))}}async function e(){if(!t.value.id)return;await M({endPoint:`lists/${t.value.id}`,loading:o})&&(document.getElementById("btn-close-crud").click(),s("successDelete"))}return(d,n)=>(u(),p(O,{class:"full-width",style:{"max-width":"425px"}},{default:l(()=>[a(H,{onSubmit:$(g,["prevent"])},{default:l(()=>[a(S,{class:"bg-green-7 text-green-11 q-px-sm q-py-md"},{default:l(()=>[b(f(x(G)(t.value.key||"list"))+" â€” ",1),I("em",null,f(t.value.id?"edit":"baru"),1)]),_:1}),a(S,{class:"q-pa-sm"},{default:l(()=>[i.showInput.val0?(u(),p(C,{key:0,label:"text1",dense:"",class:"",outlined:"",modelValue:t.value.val0,"onUpdate:modelValue":n[0]||(n[0]=y=>t.value.val0=y),autogrow:"",loading:o.value},null,8,["modelValue","loading"])):k("",!0),i.showInput.val1?(u(),p(C,{key:1,label:"text2",dense:"",class:"q-mt-sm",outlined:"",modelValue:t.value.val1,"onUpdate:modelValue":n[1]||(n[1]=y=>t.value.val1=y),autogrow:"",loading:o.value},null,8,["modelValue","loading"])):k("",!0),i.showInput.val2?(u(),p(C,{key:2,label:"text3",dense:"",class:"q-mt-sm",outlined:"",modelValue:t.value.val2,"onUpdate:modelValue":n[2]||(n[2]=y=>t.value.val2=y),autogrow:"",loading:o.value},null,8,["modelValue","loading"])):k("",!0)]),_:1}),a(N,{class:"flex bg-green-6"},{default:l(()=>[B(a(w,{label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:e,disable:o.value},null,8,["disable"]),[[U,t.value.id]]),a(L),B(a(w,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close-crud",disable:o.value},null,8,["disable"]),[[K]]),a(w,{type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":"",disable:o.value},null,8,["disable"])]),_:1})]),_:1})]),_:1}))}},X={__name:"ListsStyleSingle",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(v,{emit:r}){const i=r,s=v,o=[{name:"val0",label:"Lists",align:"left",field:t=>`${t.val0}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(t,g)=>(u(),p(E,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(e=>[a(Q,{props:e},{default:l(()=>[a(m,{props:e,key:"val0"},{default:l(()=>[b(f(e.row.val0),1)]),_:2},1032,["props"]),a(m,{props:e,key:"id"},{default:l(()=>[a(w,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>i("handleEdit",e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},Y={__name:"ListsStyleDouble",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(v,{emit:r}){const i=r,s=v,o=[{name:"val0",label:"Text 1",align:"left",field:t=>`${t.val0}`,sortable:!0},{name:"val1",label:"Text 2",align:"left",field:t=>`${t.val1}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(t,g)=>(u(),p(E,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(e=>[a(Q,{props:e},{default:l(()=>[a(m,{props:e,key:"val0"},{default:l(()=>[b(f(e.row.val0),1)]),_:2},1032,["props"]),a(m,{props:e,key:"val1"},{default:l(()=>[b(f(e.row.val1),1)]),_:2},1032,["props"]),a(m,{props:e,key:"id"},{default:l(()=>[a(w,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>i("handleEdit",e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},ee={__name:"ListsStyleTriple",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(v,{emit:r}){const i=r,s=v,o=[{name:"val0",label:"Text 1",align:"left",field:t=>`${t.val0}`,sortable:!0},{name:"val1",label:"Text 2",align:"left",field:t=>`${t.val1}`,sortable:!0},{name:"val2",label:"Text 3",align:"left",field:t=>`${t.val2}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(t,g)=>(u(),p(E,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(e=>[a(Q,{props:e},{default:l(()=>[a(m,{props:e,key:"val0"},{default:l(()=>[b(f(e.row.val0),1)]),_:2},1032,["props"]),a(m,{props:e,key:"val1"},{default:l(()=>[b(f(e.row.val1),1)]),_:2},1032,["props"]),a(m,{props:e,key:"val2"},{default:l(()=>[b(f(e.row.val2),1)]),_:2},1032,["props"]),a(m,{props:e,key:"id"},{default:l(()=>[a(w,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>i("handleEdit",e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},te={key:2},Be={__name:"ListsByKey",setup(v){const r=_(!1),{params:i}=A(),s=_(!1),o=_([]),t=_({}),g=_({});T(async()=>{await d()});const e=J.find(({url:c})=>c==i.listKey);async function d(){const c=await F({loading:s,key:e.url,sort:e.sort});o.value=c;const h=Z();h.checkState(e.url)&&h.$patch({[e.url]:c})}function n(){if(e.column==1)return{val0:!0,val1:!1,val2:!1};if(e.column==2)return{val0:!0,val1:!0,val2:!1};if(e.column==3)return{val0:!0,val1:!0,val2:!0}}function y(){g.value=n(),t.value={},t.value.key=i.listKey,r.value=!0}function V(c){g.value=n(),t.value=JSON.parse(JSON.stringify(c)),r.value=!0}return(c,h)=>(u(),D(P,null,[a(S,{class:"bg-green-7 text-green-11 text-subtitle1 q-pa-sm flex flex-center"},{default:l(()=>[b(f(x(e)?.label||"List")+" ",1),a(L),a(w,{icon:"add",label:"Baru","no-caps":"",dense:"",class:"q-px-md",outline:"",onClick:y})]),_:1}),a(S,{class:"q-pa-sm"},{default:l(()=>[x(e).style=="single"?(u(),p(X,{key:0,data:o.value,loading:s.value,onHandleEdit:V},null,8,["data","loading"])):k("",!0),x(e).style=="double"?(u(),p(Y,{key:1,data:o.value,loading:s.value,onHandleEdit:V},null,8,["data","loading"])):k("",!0),x(e).style=="triple"?(u(),D("div",te,[a(ee,{data:o.value,onUpdateList:c.handleUpdate,onDeleteList:c.handleDelete,onAddList:y},null,8,["data","onUpdateList","onDeleteList"])])):k("",!0)]),_:1}),a(j,{modelValue:r.value,"onUpdate:modelValue":h[0]||(h[0]=q=>r.value=q)},{default:l(()=>[a(W,{"data-input":t.value,"show-input":g.value,onSuccessDelete:d,onSuccessSubmit:d},null,8,["data-input","show-input"])]),_:1},8,["modelValue"])],64))}};export{Be as default};
