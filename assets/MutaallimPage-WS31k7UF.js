import{bi as Q,a8 as _,b as y,o as c,g as l,w as n,bG as A,bH as C,v as S,t as U,aq as k,q as u,A as v,s as T,N as $,ah as q,a as g,T as I,c as N,f as B,Q as D,G as E,l as P}from"./index-D027sPii.js";import{Q as R}from"./QTable-Dmt98edc.js";import{a as G,_ as K,M as O}from"./column-header-vmhwx3vv.js";import{_ as z}from"./TableHeader-8-35Pko5.js";import{Q as F}from"./QSelect-Ugd6-GYN.js";import{Q as H}from"./QItemLabel-BkEEHqCi.js";import{Q as L,a as w}from"./QItem-D9NARC_U.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QList-v8ixJrf5.js";import"./QMarkupTable-ZGyFruYa.js";import"./use-fullscreen-Njtq0hx6.js";import"./QSkeleton-BKph7B4h.js";import"./QForm-BsHe9OCF.js";import"./InputSelectArray-DQta_llP.js";import"./lists-store-9b147bVJ.js";import"./ArrayCrud-CByp4EUn.js";import"./DropDownAfter-Ba8p_E8z.js";import"./QBtnDropdown-B9BJ5Khr.js";import"./QBtnGroup-CmxqNDhL.js";import"./QMenu-kWLrrC8d.js";import"./selection-Bl80UEH0.js";import"./ClosePopup-Ci37ZDCN.js";import"./Lists-CCGqOLsQ.js";import"./ApiCrud-DL4BL-wf.js";import"./Api-Ivu-dWRs.js";import"./index-j_lT3OE8.js";import"./index-BDbb42pe.js";import"./apiPost-CKVkSPax.js";import"./useCrudForm-m3A4pJ4W.js";import"./InputToggle-DNVTsZCj.js";import"./QField-C1tA_PuE.js";import"./CardSantriSimple-DPX0Lr8P.js";import"./QSpace-DTUJXiEo.js";import"./QImg-DWrWqAa6.js";import"./Santri-BE-Z-aLU.js";import"./santri-store-BQO2kzO0.js";import"./array-object-BytDdNh7.js";import"./format-date-DBaFa2rd.js";import"./id-BuNGTsqN.js";import"./hijri-CTUg_lXm.js";import"./format-number-B34ySHL_.js";import"./QChip-C2j8B3tv.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";const J={class:"flex items-center q-gutter-x-sm"},W={__name:"FilterMarhalah",props:Q({optionsMarhalah:{type:Array,default:()=>[]},optionsFaslah:{type:Array,default:()=>[]}},{modelMarhalah:{type:String,default:()=>""},modelMarhalahModifiers:{},modelFaslah:{type:Array,default:()=>[]},modelFaslahModifiers:{}}),emits:["update:modelMarhalah","update:modelFaslah"],setup(p){const d=_(p,"modelMarhalah"),s=_(p,"modelFaslah");return(h,i)=>(c(),y("div",J,[l(F,{dense:"",outlined:"",label:"Filter Marhalah",style:{width:"300px"},clearable:"",options:p.optionsMarhalah,modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=o=>d.value=o)},null,8,["options","modelValue"]),l(F,{dense:"",outlined:"",multiple:"",label:"Filter Faslah/Kelas",options:p.optionsFaslah,modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=o=>s.value=o),style:{width:"300px"},clearable:""},{option:n(({itemProps:o,opt:t,selected:m,toggleOption:f})=>[l(L,A(C(o)),{default:n(()=>[l(w,null,{default:n(()=>[l(H,null,{default:n(()=>[S(U(t),1)]),_:2},1024)]),_:2},1024),l(w,{side:""},{default:n(()=>[l(k,{"model-value":m,"onUpdate:modelValue":M=>f(t),color:"green-6"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["options","modelValue"])]))}},X={class:"flex items-start q-gutter-sm"},Y={class:"col-grow"},Z={class:""},aa={__name:"MutaallimPage",setup(p){const d=u({}),s=u([]),h=u(!1),i=u(""),o=u(!1),t=u(""),m=u([]);async function f(){try{h.value=!0;const e=await O.aktif();s.value=e.mutaallim}catch(e){console.error("ðŸš€ ~ loadData ~ e:",e)}finally{h.value=!1}}const M=v(()=>t.value?m.value?.length?s.value.filter(e=>e.marhalah===t.value&&m.value.includes(e.faslah)):s.value.filter(e=>e.marhalah===t.value):s.value);T(async()=>{await f()}),$(t,()=>{m.value=[]}),q(()=>{o.value||(t.value="",m.value=[])});const V=v(()=>{const e=new Set;return s.value.forEach(a=>{a.marhalah&&e.add(a.marhalah)}),Array.from(e).sort((a,r)=>a.localeCompare(r))}),b=v(()=>{if(!t.value)return[];const e=new Set;return s.value.forEach(a=>{a.marhalah===t.value&&a.faslah&&e.add(a.faslah)}),Array.from(e).sort((a,r)=>a.localeCompare(r))});return(e,a)=>(c(),y("div",X,[g("div",Y,[l(P,{flat:"",bordered:""},{default:n(()=>[l(z,{title:"Data Mutaallim AKTIF",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=r=>i.value=r),onOnReload:f,onOnFilter:a[1]||(a[1]=r=>o.value=!o.value),"show-filter":o.value},null,8,["modelValue","show-filter"]),l(I,{name:"fade"},{default:n(()=>[o.value?(c(),N(D,{key:0,class:"q-pa-sm"},{default:n(()=>[l(W,{modelMarhalah:t.value,"onUpdate:modelMarhalah":a[2]||(a[2]=r=>t.value=r),modelFaslah:m.value,"onUpdate:modelFaslah":a[3]||(a[3]=r=>m.value=r),optionsMarhalah:V.value,optionsFaslah:b.value},null,8,["modelMarhalah","modelFaslah","optionsMarhalah","optionsFaslah"])]),_:1})):B("",!0)]),_:1}),l(R,{rows:M.value,filter:i.value,loading:h.value,"rows-per-page-options":[10,25,50,100,0],flat:"",onRowClick:a[4]||(a[4]=(r,x,ea)=>d.value=x),columns:E(G),"table-header-class":"bg-green-1 text-green-10 text-subtitle1"},null,8,["rows","filter","loading","columns"])]),_:1})]),g("div",Z,[l(K,{santri:{id:d.value.santri_id,nama:d.value.nama}},null,8,["santri"])])]))}},Ha=j(aa,[["__scopeId","data-v-8f7c0ed0"]]);export{Ha as default};
