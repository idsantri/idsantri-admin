import{q as c,ah as j,c as n,o as i,w as a,g as t,Q as C,v as S,e as b,bO as I,b as x,t as u,a as o,C as K,l as N,ad as z,s as P,E as q,aq as U,J as W}from"./index-BhNrssHr.js";import{Q as L,a as O}from"./QToolbar-Dji6c8Gz.js";import{Q as H}from"./QMarkupTable-B4LKpcsr.js";import{Q as V}from"./QRouteTab-CnEF0CHb.js";import{Q as J}from"./QTabs-hkeAWIeM.js";import{Q as v}from"./QSkeleton-CffS5Tfr.js";import{Q as h}from"./QImg-DiFSPV4f.js";import{Q as A,a as p}from"./QItem-Cr1HBVIS.js";import{Q as k}from"./QItemLabel-BODfowdk.js";import{Q as F}from"./QList-DxuGxdz8.js";import{s as w}from"./santri-store-C76ru1XO.js";import{S as G}from"./Santri-C09cpkAF.js";import{_ as X}from"./KelasForm-CKAMqF7p.js";import{K as E}from"./Kelas-DPMc6H02.js";import"./QResizeObserver-DZZg-7Iz.js";import"./rtl-DFPa-2ov.js";import"./ApiCrud-Y9YyvD4T.js";import"./Api-AFAYKZcw.js";import"./index-DcSvzz47.js";import"./index-BTJ4P_xk.js";import"./apiPost-Cy9rOp67.js";import"./QForm-DomdkE2s.js";import"./InputSelectArray-jHPK6X1E.js";import"./QSelect-BPcFPUdZ.js";import"./QField-CTzMATWn.js";import"./QChip-3Bxr7esK.js";import"./QMenu-lfUwDmLC.js";import"./selection-Ar_MOr7D.js";import"./format-CJebrXOQ.js";import"./lists-store-Wjhiehi1.js";import"./ArrayCrud-DeaxgM1Q.js";import"./DropDownAfter-BUGSFTKq.js";import"./QBtnDropdown-CKvAkW5R.js";import"./QBtnGroup-CWuo4TYS.js";import"./ClosePopup-Dc0LwGVK.js";import"./Lists-cqCQ-d7A.js";import"./InputSelectTingkatPendidikan-D5h2QOWN.js";import"./useCrudForm-D7gRVo0u.js";import"./InputSelectTahunAjaran-DWCw9OiC.js";const Y={key:1},Z={key:1},tt={key:1},at={key:1},et={key:1},lt={__name:"CardSantri",props:{id:{type:[Number,String],validator(d){if(typeof d=="number")return!isNaN(d);if(typeof d=="string"){const _=Number(d);return!isNaN(_)}return!1}}},emits:["loaded"],setup(d,{emit:_}){const D=_,g=d,l=c(!1),s=c({}),y=c({}),Q=c({}),$=async()=>{try{l.value=!0;const m=await G.getById({id:g.id});s.value=m.santri,Q.value=m.wali,y.value=m.ortu,w().setSantri(m.santri),w().setOrtu(m.ortu),w().setWali(m.wali)}catch(m){console.error("Error loading santri data:",m)}finally{l.value=!1}};return j(async()=>{if(g.id){const m=w().getSantri,r=w().getWali,e=w().getOrtu;m.id==g.id?(s.value=m,y.value=e,Q.value=r):await $(),D("loaded",s.value)}}),(m,r)=>(i(),n(N,{flat:"",bordered:""},{default:a(()=>[t(C,{class:"no-padding"},{default:a(()=>[t(L,{class:"bg-green-1"},{default:a(()=>[t(O,{class:"text-subtitle1"},{default:a(()=>[...r[0]||(r[0]=[S(" Identitas Santri ",-1)])]),_:1}),t(b,{icon:"sync",outline:"",onClick:$})]),_:1})]),_:1}),t(C,{class:"q-py-sm q-px-none"},{default:a(()=>[t(F,{dense:""},{default:a(()=>[t(A,null,{default:a(()=>[t(p,{avatar:""},{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"QAvatar"})):(i(),n(I,{key:1,class:"d-flex"},{default:a(()=>[t(h,{src:s.value?.image_url||"/user-default.png",ratio:1,cover:""},null,8,["src"])]),_:1}))]),_:1}),t(p,null,{default:a(()=>[t(k,{overline:""},{default:a(()=>[...r[1]||(r[1]=[S(" Santri ",-1)])]),_:1}),t(k,null,{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"text"})):(i(),x("div",Y,u(s.value.nama)+" ("+u(s.value.sex)+")",1))]),_:1}),t(k,{caption:"",lines:"1"},{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"text"})):(i(),x("div",Z,u(s.value?.alamat_pendek||"-"),1))]),_:1}),t(k,{caption:"",lines:"1",class:"text-italic"},{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"text"})):(i(),x("div",tt,u(s.value?.data_akhir||"-"),1))]),_:1})]),_:1}),t(p,{avatar:""},{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"QBtn",class:"full-width"})):(i(),n(b,{key:1,outline:"",color:"green",to:`/santri/${s.value?.id}`},{default:a(()=>[o("small",null,u(s.value?.id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),t(K,{inset:"item"}),t(A,null,{default:a(()=>[t(p,{top:"",avatar:""},{default:a(()=>[t(I)]),_:1}),t(p,null,{default:a(()=>[t(k,{overline:""},{default:a(()=>[...r[2]||(r[2]=[S(" Wali ",-1)])]),_:1}),t(k,null,{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"text"})):(i(),x("div",at,u(Q.value?.nama)+" ("+u(Q.value?.sex)+"; "+u(s.value?.wali_status)+")",1))]),_:1})]),_:1}),t(p,{avatar:""},{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"QBtn",class:"full-width"})):(i(),n(b,{key:1,outline:"",color:"green",to:`/wali/${s.value?.wali_id}`},{default:a(()=>[o("small",null,u(s.value?.wali_id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),t(K,{inset:"item"}),t(A,null,{default:a(()=>[t(p,{top:"",avatar:""},{default:a(()=>[t(I)]),_:1}),t(p,null,{default:a(()=>[t(k,{overline:""},{default:a(()=>[...r[3]||(r[3]=[S(" Orang Tua ",-1)])]),_:1}),t(k,null,{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"text"})):(i(),x("div",et,u(y.value?.ayah)+" | "+u(y.value?.ibu),1))]),_:1})]),_:1}),t(p,{avatar:""},{default:a(()=>[l.value||!d.id?(i(),n(v,{key:0,type:"QBtn",class:"full-width"})):(i(),n(b,{key:1,outline:"",color:"green",to:`/ortu/${s.value?.ortu_id}`},{default:a(()=>[o("small",null,u(s.value?.ortu_id),1)]),_:1},8,["to"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ot={class:"row",style:{"max-width":"1400px"}},it={class:"col-12 col-md-6 q-pa-sm"},rt={class:"col-12 col-md-6 q-pa-sm"},Ht={__name:"KelasIndex",setup(d){const _=c(0),g=z().params.id,l=c({}),s=c(!1),y=c(!1),Q=c({});async function $(r){const e=r==1,T=r==1?0:1;try{await E.updateAktif(g,e)}catch(B){l.value.aktif=T,console.error("ðŸš€ ~ updateAktif ~ error:",B)}}async function m(){try{s.value=!0;const r=await E.getById({id:g});l.value=r.kelas}catch(r){console.error("ðŸš€ ~ loadData ~ error:",r)}finally{s.value=!1}}return P(async()=>{await m()}),(r,e)=>{const T=q("CardHeader"),B=q("CardLoading"),R=q("router-view"),M=q("CardPage");return i(),n(M,null,{default:a(()=>[t(T,{title:"Data Murid",onOnReload:m}),t(C,{class:"no-padding"},{default:a(()=>[o("div",ot,[o("div",it,[t(N,{bordered:"",flat:""},{default:a(()=>[t(lt,{id:l.value.santri_id,onLoaded:e[0]||(e[0]=f=>Q.value=f)},null,8,["id"])]),_:1}),t(N,{class:"q-mt-sm",bordered:"",flat:""},{default:a(()=>[t(C,{class:"q-pa-sm"},{default:a(()=>[t(L,{class:"bg-green-1"},{default:a(()=>[t(O,{class:"text-subtitle1"},{default:a(()=>[...e[6]||(e[6]=[S(" Data Kelas ",-1)])]),_:1}),t(b,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),t(b,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:e[1]||(e[1]=f=>y.value=!0),label:"Edit","no-caps":""})]),_:1}),t(H,{flat:""},{default:a(()=>[o("tbody",null,[o("tr",null,[e[7]||(e[7]=o("td",{class:"text-italic"},"Tahun Ajaran",-1)),o("td",null,u(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),o("tr",null,[e[8]||(e[8]=o("td",{class:"text-italic"},"Tingkat",-1)),o("td",null,u(l.value.tingkat),1)]),o("tr",null,[e[9]||(e[9]=o("td",{class:"text-italic"},"Kelas",-1)),o("td",null,u(l.value.kelas),1)]),o("tr",null,[e[10]||(e[10]=o("td",{class:"text-italic"},"Nomor Absen",-1)),o("td",null,u(l.value.no_absen),1)]),o("tr",null,[e[11]||(e[11]=o("td",{class:"text-italic"},"Aktif",-1)),o("td",null,[t(U,{modelValue:l.value.aktif,"onUpdate:modelValue":[e[2]||(e[2]=f=>l.value.aktif=f),$],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),o("tr",null,[e[12]||(e[12]=o("td",{class:"text-italic"},"Keterangan",-1)),o("td",null,u(l.value.keterangan),1)])])]),_:1}),t(B,{showing:s.value},null,8,["showing"])]),_:1})]),_:1})]),o("div",rt,[t(N,{bordered:"",flat:""},{default:a(()=>[t(J,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:a(()=>[t(V,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),t(V,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),t(V,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(i(),n(C,{class:"q-pa-sm",key:_.value},{default:a(()=>[(i(),n(R,{key:r.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),t(W,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=f=>y.value=f)},{default:a(()=>[t(X,{data:l.value,onSuccessUpdate:e[3]||(e[3]=f=>{l.value=f,_.value++}),onSuccessDelete:e[4]||(e[4]=f=>r.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Ht as default};
