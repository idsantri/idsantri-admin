import{ad as L,ac as ra,q as f,A as ua,s as I,E as q,c as Q,o as _,w as t,g as e,Q as S,v as y,e as j,a as v,b as x,F,D as N,t as g,J as O,G as P,l as M,ap as R,Y as z,af as G,f as W,a9 as C,K as Y,C as X,ak as da}from"./index-CEqRNMKa.js";import{Q as H,a as J}from"./QToolbar-wE0hZ0P4.js";import{Q as ia}from"./QImg-QOdUUYq6.js";import{f as ma}from"./format-date-DBaFa2rd.js";import{_ as pa}from"./ImageUploader-4XKlWdR5.js";import{_ as ca,A as _a}from"./PersonaliaForm-0HAijHEL.js";import{f as va}from"./format-text-DnCGEu2I.js";import{I as fa}from"./Image-DmlUJLko.js";import{Q as B}from"./QTab-C3nueQWK.js";import{Q as ga}from"./QTabs-DqORDLXu.js";import{Q as ba,a as E}from"./QTabPanels-BIhitSBx.js";import{Q as Z}from"./QSkeleton-0P7MF2sQ.js";import{Q as U}from"./QItemLabel-DHWqC7wC.js";import{Q as aa,a as A}from"./QItem-CE7Gw7UR.js";import{Q as ea}from"./QList-BwIiBKrg.js";import{g as ta}from"./array-object-BytDdNh7.js";import{Q as la}from"./QForm-BLkSNr4R.js";import{_ as ha}from"./InputSelectTingkatPendidikan-LTgksedL.js";import{_ as T}from"./InputSelectArray-BdV20Le8.js";import{u as sa}from"./useCrudForm-B6DzUwVC.js";import{A as na}from"./AparaturMadrasah-1UCuoLRT.js";import{_ as ya}from"./InputSelectTahunAjaran-BN0RCkGs.js";import{Q as ka}from"./QSelect-Cq7a2gGZ.js";import{A as oa}from"./AparaturQuran-Cr2wU9Oz.js";import"./id-BuNGTsqN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DMQSfvx3.js";import"./index-DUDauND2.js";import"./CarouselAlamat-DehBdHhm.js";import"./use-panel-YJ8WCiii.js";import"./touch-BjYP5sR0.js";import"./selection-Dn82c7hT.js";import"./use-fullscreen-CA6Cw_DM.js";import"./QBtnGroup-BeWlmbWW.js";import"./alamat-store-CUEeJydy.js";import"./Alamat-CjdUe_bn.js";import"./Api-BLJ5CcMO.js";import"./apiPost-D18tN-j-.js";import"./ApiCrud-DQp7e7nl.js";import"./QBtnDropdown-xGuuc5eh.js";import"./QMenu-CIUGaSD_.js";import"./ClosePopup-CfU5FfYf.js";import"./hijri-CTUg_lXm.js";import"./format-number-B34ySHL_.js";import"./InputSelectKotaLahir-Y44gwkHx.js";import"./QResizeObserver-B-j-PP23.js";import"./rtl-DFPa-2ov.js";import"./lists-store-DgR8HQaa.js";import"./ArrayCrud-CByp4EUn.js";import"./DropDownAfter-9gl95ku2.js";import"./Lists-Bb6B22On.js";import"./QField-D4menuIJ.js";import"./QChip-CJrHXeq1.js";import"./format-CJebrXOQ.js";const Va={class:"row"},xa={class:"col-4 q-pr-sm"},wa={class:"col"},qa={class:"text-caption text-italic"},Qa={class:"q-mb-sm"},$a={__name:"CardIdentitas",emits:["on-load"],setup($,{emit:p}){const r=L(),o=ra(),a=f({}),u=f(!1),c=f(!1),b=p;async function w(m){m.id==r.params.id?(a.value=m,b("on-load",a.value)):o.push(`/personalia/${m.id}`)}async function V(){try{u.value=!0;const m=await _a.getById({id:r.params.id});a.value=m.aparatur,await i(),b("on-load",a.value)}catch(m){console.error("ðŸš€ ~ loadData ~ e:",m)}finally{u.value=!1}}async function i(){try{const m=await fa.aparatur(a.value.id);a.value.image=m?.image_url?m.image_url+`?t=${new Date().getTime()}`:"/user-default.png"}catch(m){console.log("ðŸš€ ~ loadImage ~ error:",m)}}const d=ua(()=>({Nama:`${a.value.nama?.toUpperCase()} (${a.value.sex?.toUpperCase()})`,Alamat:va(a.value.jl,a.value.rt,a.value.rw,a.value.desa,a.value.kecamatan,a.value.kabupaten,a.value.provinsi,a.value.kode_pos),Kelahiran:`${a.value.tmp_lahir||"-"}, ${ma(a.value.tgl_lahir)}`,Telepon:a.value.telepon||"-",Email:a.value.email||"-"}));I(async()=>{r.params.id&&await V()});const s=f(!1),k=m=>s.value=m;async function n(){s.value=!1,await i()}return(m,h)=>{const D=q("CardLoading");return _(),Q(M,{flat:"",bordered:"",class:""},{default:t(()=>[e(S,{class:"bg-green-7 no-padding"},{default:t(()=>[e(H,{class:"no-padding no-margin"},{default:t(()=>[e(J,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...h[4]||(h[4]=[y(" Identitas ",-1)])]),_:1}),e(j,{dense:"",flat:"",class:"q-px-md q-mr-sm","no-caps":"",icon:"sync",color:"green-2",onClick:V}),e(j,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:h[0]||(h[0]=l=>c.value=!0)})]),_:1})]),_:1}),e(S,{class:"q-pa-sm"},{default:t(()=>[v("div",Va,[v("div",xa,[e(ia,{src:a.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),e(j,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:h[1]||(h[1]=l=>s.value=!0)})]),v("div",wa,[(_(!0),x(F,null,N(d.value,(l,K)=>(_(),x("div",{key:K},[v("div",qa,g(K),1),v("div",Qa,g(l),1)]))),128))])])]),_:1}),e(D,{showing:u.value},null,8,["showing"]),e(O,{persistent:"",modelValue:c.value,"onUpdate:modelValue":h[3]||(h[3]=l=>c.value=l)},{default:t(()=>[e(ca,{data:a.value,onSuccessSubmit:w,onSuccessDelete:h[2]||(h[2]=l=>m.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"]),e(pa,{"show-uploader":s.value,url:`/images/aparatur/${P(r).params.id}`,"img-format":"webp",onUpdateUploader:k,onSuccessUpload:n},null,8,["show-uploader","url"])]),_:1})}}},ja={__name:"PersonaliaMadrasahForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup($,{emit:p}){const r=$,o=p,a=f({...r.data}),u=!r.data.id,c=R("firstInput");I(async()=>{await z(),c.value&&c.value.focus()});const{handleDelete:b,handleCreate:w,handleUpdate:V,loading:i}=sa(na,{emit:o,responseKey:"aparatur_madrasah"}),d=async()=>{const k={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,tingkat_id:a.value.tingkat_id,kelas:a.value.kelas,ruang:a.value.ruang,keterangan:a.value.keterangan};return u?await w(k,!0):await V(r.data.id,k,!0)},s=async()=>await b(r.data.id);return(k,n)=>{const m=q("FormHeader"),h=q("FormLoading"),D=q("FormActions");return _(),Q(M,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(la,{onSubmit:G(d,["prevent"])},{default:t(()=>[e(m,{title:"Input Jabatan Madrasiyah","is-new":u}),P(i)?(_(),Q(h,{key:0})):W("",!0),e(S,null,{default:t(()=>[e(C,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(T,{modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.jabatan=l),url:"jabatan-madrasiyah",label:"Jabatan",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],ref_key:"firstInput",ref:c},null,8,["modelValue","rules"]),e(ya,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.th_ajaran_h=l),rules:[l=>!!l||"Harus diisi!"],class:"q-my-sm"},null,8,["modelValue","rules"]),e(ha,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.tingkat_id=l),class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"]},null,8,["modelValue","rules"]),e(T,{modelValue:a.value.kelas,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.kelas=l),url:"kelas",label:"Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(C,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.ruang=l)},null,8,["modelValue"]),e(C,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=l=>a.value.keterangan=l),autogrow:""},null,8,["modelValue"])]),_:1}),e(D,{"btn-delete":!u,onOnDelete:s},null,8,["btn-delete"])]),_:1})]),_:1})}}},Ca={class:"q-card--bordered"},Ua={class:"q-px-md"},Sa={key:0},Da={key:1},Fa={class:"text-bold"},Ia={__name:"CardJabatanMadrasah",setup($){const p=L(),r=f(!1),o=f([]),a=f(!1),u=f({}),c=Y("aparatur");async function b(){if(p.params.id)try{r.value=!0;const i=await na.getAll({params:{aparatur_id:p.params.id}});o.value=i.aparatur_madrasah}catch(i){console.error("ðŸš€ ~ loadData ~ e:",i)}finally{r.value=!1}}I(async()=>await b());const w=()=>{u.value={aparatur_id:c.value.id,nama:c.value.nama},a.value=!0},V=i=>{u.value=ta(o.value,i),a.value=!0};return(i,d)=>(_(),x(F,null,[v("div",Ca,[v("div",Ua,[e(H,{class:"no-padding no-margin"},{default:t(()=>[e(J,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...d[1]||(d[1]=[y(" Jabatan Madrasah ",-1)])]),_:1}),e(j,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:w})]),_:1})]),e(X,{class:""}),e(ea,{separator:"",class:""},{default:t(()=>[r.value?(_(),x("div",Sa,[e(Z,{height:"80px"})])):o.value?.length?(_(!0),x(F,{key:2},N(o.value,s=>(_(),Q(aa,{key:s.id,class:""},{default:t(()=>[e(A,null,{default:t(()=>[e(U,{overline:""},{default:t(()=>[y(g(s.th_ajaran_h)+" | "+g(s.th_ajaran_m),1)]),_:2},1024),e(U,{lines:"1"},{default:t(()=>[v("span",Fa,g(s.jabatan),1),y("; "+g(s.tingkat)+g(s.kelas?"; "+s.kelas:"")+" "+g(s.ruang?"("+s.ruang+")":""),1)]),_:2},1024),e(U,{caption:"",class:"text-italic"},{default:t(()=>[y(g(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(A,{side:""},{default:t(()=>[e(j,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:k=>V(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(_(),x("div",Da,[...d[2]||(d[2]=[v("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[y(" Tidak data data untuk ditampilkan."),v("br"),y("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(O,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=s=>a.value=s)},{default:t(()=>[e(ja,{data:u.value,onSuccessSubmit:b,onSuccessDelete:b},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Aa={__name:"PersonaliaQuranForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup($,{emit:p}){const r=$,o=p,a=f({jabatan:"Muallim",...r.data}),u=!r.data?.id,c=R("firstInput");I(async()=>{await z(),c.value&&c.value.focus()});const{handleDelete:b,handleCreate:w,handleUpdate:V,loading:i}=sa(oa,{emit:o,responseKey:"aparatur_quran"}),d=async()=>{const k={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,marhalah:a.value.marhalah,faslah:a.value.faslah,ruang:a.value.ruang,keterangan:a.value.keterangan};return u?await w(k,!0):await V(r.data.id,k,!0)},s=async()=>await b(r.data.id);return(k,n)=>{const m=q("FormHeader"),h=q("FormLoading"),D=q("FormActions");return _(),Q(M,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(la,{onSubmit:G(d,["prevent"])},{default:t(()=>[e(m,{title:"Input Jabatan Madrasiyah","is-new":u}),P(i)?(_(),Q(h,{key:0})):W("",!0),e(S,null,{default:t(()=>[e(C,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(C,{dense:"",class:"q-my-sm",outlined:"",filled:"",label:"Jabatan",modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.jabatan=l),disable:""},null,8,["modelValue"]),e(T,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.th_ajaran_h=l),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],selected:a.value.th_ajaran_h,ref_key:"firstInput",ref:c},null,8,["modelValue","rules","selected"]),e(ka,{dense:"",outlined:"",modelValue:a.value.marhalah,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.marhalah=l),label:"Marhalah *",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],options:["Ula","Wustho","Ulya"]},null,8,["modelValue","rules"]),e(T,{modelValue:a.value.faslah,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.faslah=l),url:"faslah-quran",label:"Faslah/Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(C,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.ruang=l)},null,8,["modelValue"]),e(C,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=l=>a.value.keterangan=l),autogrow:""},null,8,["modelValue"])]),_:1}),e(D,{"btn-delete":!u,onOnDelete:s},null,8,["btn-delete"])]),_:1})]),_:1})}}},Ta={class:"q-card--bordered"},Ma={class:"q-px-md"},Ha={key:0},Ja={key:1},La={__name:"CardJabatanQuran",setup($){const p=L(),r=f(!1),o=f([]),a=f(!1),u=f({}),c=Y("aparatur");async function b(){if(p.params.id)try{r.value=!0;const i=await oa.getAll({params:{aparatur_id:p.params.id}});o.value=i.aparatur_quran}catch(i){console.error("ðŸš€ ~ loadData ~ e:",i)}finally{r.value=!1}}I(async()=>await b());const w=()=>{u.value={aparatur_id:c.value.id,nama:c.value.nama},a.value=!0},V=i=>{u.value=ta(o.value,i),a.value=!0};return(i,d)=>(_(),x(F,null,[v("div",Ta,[v("div",Ma,[e(H,{class:"no-padding no-margin"},{default:t(()=>[e(J,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...d[1]||(d[1]=[y(" Jabatan Quran ",-1)])]),_:1}),e(j,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:w})]),_:1})]),e(X,{class:""}),e(ea,{separator:"",class:""},{default:t(()=>[r.value?(_(),x("div",Ha,[e(Z,{height:"80px"})])):o.value?.length?(_(!0),x(F,{key:2},N(o.value,s=>(_(),Q(aa,{key:s.id,class:""},{default:t(()=>[e(A,null,{default:t(()=>[e(U,{overline:""},{default:t(()=>[y(g(s.th_ajaran_h)+" | "+g(s.th_ajaran_m),1)]),_:2},1024),e(U,{lines:"1"},{default:t(()=>[d[3]||(d[3]=v("span",{class:"text-bold"},"Muallim",-1)),y("; "+g(s.marhalah)+g(s.faslah?"; "+s.faslah:"")+" "+g(s.ruang?"("+s.ruang+")":""),1)]),_:2},1024),e(U,{caption:"",class:"text-italic"},{default:t(()=>[y(g(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(A,{side:""},{default:t(()=>[e(j,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:k=>V(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(_(),x("div",Ja,[...d[2]||(d[2]=[v("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[y(" Tidak data data untuk ditampilkan."),v("br"),y("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(O,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=s=>a.value=s)},{default:t(()=>[e(Aa,{data:u.value,onSuccessSubmit:b,onSuccessDelete:b},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Na={__name:"CardJabatan",setup($){const p=f("madrasah");return(r,o)=>(_(),Q(M,{flat:"",bordered:"",class:""},{default:t(()=>[e(S,{class:"bg-green-7 no-padding"},{default:t(()=>[e(H,{class:"no-padding no-margin"},{default:t(()=>[e(J,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...o[2]||(o[2]=[y(" Jabatan ",-1)])]),_:1}),e(ga,{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=a=>p.value=a),"narrow-indicator":"",class:"text-green-11","no-caps":"",dense:""},{default:t(()=>[e(B,{name:"madrasah",label:"Madrasah"}),e(B,{name:"quran",label:"Quran"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ba,{modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=a=>p.value=a),animated:"",class:"q-pa-sm"},{default:t(()=>[e(E,{name:"madrasah",class:"no-padding"},{default:t(()=>[e(Ia)]),_:1}),e(E,{name:"quran",class:"no-padding"},{default:t(()=>[e(La)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Oa={class:"col-12 col-md-6 q-pa-sm"},Pa={class:"col-12 col-md-6 q-pa-sm"},Ke={__name:"PersonaliaDetail",setup($){const p=f({});return da("aparatur",p),(r,o)=>{const a=q("CardHeader"),u=q("CardPage");return _(),Q(u,null,{default:t(()=>[e(a,{title:"Detail Personalia",showReload:!1},{buttons:t(()=>[e(j,{"no-caps":"",label:"Personalia",icon:"badge",dense:"",color:"green-13",class:"q-px-md text-green-10",to:"/personalia"})]),_:1}),e(S,{class:"row no-padding",style:{"max-width":"1200px"}},{default:t(()=>[v("div",Oa,[e($a,{onOnLoad:o[0]||(o[0]=c=>p.value=c)})]),v("div",Pa,[e(Na)])]),_:1})]),_:1})}}};export{Ke as default};
