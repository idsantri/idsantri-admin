import{Q as P}from"./QToolbarTitle-Bi7GnpK1.js";import{A as c,W as j,B as Q,c as F,o as m,w as u,b as e,ad as N,e as A,C as B,Q as C,a7 as y,y as h,v as V,af as M,K as I,g as q,k as K,a as l,f as b,F as H,z as L,t as g,G as O}from"./index-0PBDf7I0.js";import{Q as $}from"./QToolbar-CIornAnt.js";import{Q as E}from"./QSkeleton-DlTQ_uqq.js";import{Q as G}from"./QMarkupTable-s8nx6cOi.js";import{Q as z}from"./QPage-B2JjDCGV.js";import{a as W}from"./api-get-CJU_3mwN.js";import{Q as J}from"./QSelect-Cpr8vW2V.js";import{Q as R}from"./QForm-ieTYlGnS.js";import{_ as D}from"./InputSelectTingkatPendidikan-T6npfMRK.js";import{u as X}from"./useCrudForm-C4qLnD9W.js";import{A as Y}from"./ApiCrud-CgUuq5zB.js";import"./index-BXLuJznK.js";import"./index-BDNa_dSq.js";import"./api-error-C1WPqECD.js";import"./QChip-DG5_EyRB.js";import"./QItemSection-DpSW8XO7.js";import"./QItemLabel-DR97WW3U.js";import"./QMenu-3oalsLjd.js";import"./selection-DeDWR_N3.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-C4dqSiKA.js";import"./DropDownAfter-f-uzuh2w.js";import"./QBtnDropdown-CEycuZRG.js";import"./QBtnGroup-BBlBx6YD.js";import"./ClosePopup-5qpDiF0T.js";import"./Lists-B91eApHM.js";import"./Api--YdEMrhi.js";class Z extends Y{constructor(){super("mapel")}}const ee=new Z,ae={__name:"MapelForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(w,{emit:p}){const d=w,v=p,a=c({category:"Fan Dasar",show:1}),i=!d.data?.id,{handleDelete:f,handleCreate:_,handleUpdate:x,loading:r}=X(ee,{emit:v,responseKey:"mapel"});j(async()=>{Object.assign(a.value,d.data)});const t=async()=>{const k={sequence:a.value.sequence,id:a.value.id.toLowerCase(),tingkat_id:a.value.tingkat_id,name:a.value.name,alias:a.value.alias,category:a.value.category,show:a.value.show};return i?await _(k,!0):await x(d.data.id,k,!0)},o=async()=>await f(d.data.id);return(k,n)=>{const S=Q("FormHeader"),T=Q("FormLoading"),U=Q("FormActions");return m(),F(h,{class:"full-width",style:{"max-width":"425px"}},{default:u(()=>[e(R,{onSubmit:N(t,["prevent"])},{default:u(()=>[e(S,{title:"Input Mata Pelajaran","is-new":i}),B(r)?(m(),F(T,{key:0})):A("",!0),e(C,null,{default:u(()=>[e(y,{dense:"",outlined:"",label:"Urut",modelValue:a.value.sequence,"onUpdate:modelValue":n[0]||(n[0]=s=>a.value.sequence=s),hint:"Nomor urut tampil",class:"q-my-sm"},null,8,["modelValue"]),e(D,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":n[1]||(n[1]=s=>a.value.tingkat_id=s),class:"q-my-sm",rules:[s=>!!s||"Harus diisi!"]},null,8,["modelValue","rules"]),e(y,{class:"q-my-sm",dense:"",outlined:"",label:"Kode/ID Mapel",modelValue:a.value.id,"onUpdate:modelValue":n[2]||(n[2]=s=>a.value.id=s),hint:"Format: tingkat_id—kode_mapel (ibt-qur; ts-taj; aly-tau)"},null,8,["modelValue"]),e(y,{dense:"",class:"q-my-sm",outlined:"",label:"Mata Pelajaran",modelValue:a.value.name,"onUpdate:modelValue":n[3]||(n[3]=s=>a.value.name=s),hint:"Hanya huruf dan spasi"},null,8,["modelValue"]),e(y,{dense:"",class:"q-my-sm",outlined:"",label:"Mata Pelajaran (Alias)",modelValue:a.value.alias,"onUpdate:modelValue":n[4]||(n[4]=s=>a.value.alias=s)},null,8,["modelValue"]),e(J,{dense:"",class:"q-my-sm",outlined:"",label:"Kategori Fan","emit-value":"","map-options":"",modelValue:a.value.category,"onUpdate:modelValue":n[5]||(n[5]=s=>a.value.category=s),options:["Fan Pokok","Fan Dasar","Fan Tambahan"],behavior:"menu"},null,8,["modelValue"]),e(h,{bordered:"",flat:"",class:"q-px-sm q-my-sm"},{default:u(()=>[n[7]||(n[7]=V(" Tampilkan: ",-1)),e(M,{modelValue:a.value.show,"onUpdate:modelValue":n[6]||(n[6]=s=>a.value.show=s),color:"green","true-value":1,"false-value":0},null,8,["modelValue"])]),_:1})]),_:1}),e(U,{"btn-delete":!i,onOnDelete:o},null,8,["btn-delete"])]),_:1})]),_:1})}}},le={key:0},te={colspan:"7"},oe={key:1},ne={class:"text-center"},je={__name:"MapelIndex",setup(w){const p=c([]),d=c(""),v=c(!1),a=c({}),i=c(!1);async function f(r){const t=await W({endPoint:"mapel",loading:v,params:{tingkat_id:r}});p.value=t.mapel}I(d,async r=>{r?await f(r):p.value=[]});function _(r){a.value=r,i.value=!0}function x(){a.value={},i.value=!0}return(r,t)=>(m(),F(z,{class:"q-pa-sm"},{default:u(()=>[e(h,null,{default:u(()=>[e(C,{class:"bg-green-8 text-green-11 q-px-sm q-py-none"},{default:u(()=>[e($,{class:"no-padding no-margin"},{default:u(()=>[e(P,{class:"text-subtitle1"},{default:u(()=>[...t[4]||(t[4]=[V(" Daftar Mata Pelajaran ",-1)])]),_:1}),e(q,{label:"Nilai Mapel",to:"/madrasah/nilai-mapel",dense:"",outline:"","no-caps":"",icon:"arrow_back",class:"q-px-sm q-mr-md"}),e(q,{class:"text-green-10",label:"Baru",icon:"add","no-caps":"",color:"green-11",onClick:x})]),_:1})]),_:1}),e(K,{align:"right",class:"bg-green-1"},{default:u(()=>[e(D,{style:{width:"300px"},modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),label:"Tingkat Pendidikan","with-hint":!1},null,8,["modelValue"])]),_:1}),e(C,{class:"q-pa-sm"},{default:u(()=>[e(G,{flat:""},{default:u(()=>[t[6]||(t[6]=l("thead",null,[l("tr",{class:"text-left"},[l("th",null,"No"),l("th",null,"Kode/ID"),l("th",null,"Mata Pelajaran"),l("th",null,"Alias"),l("th",null,"Status Fan"),l("th",null,"Tampil"),l("th",{class:"text-center"},"Edit")])],-1)),l("tbody",null,[v.value?(m(),b("tr",le,[l("td",te,[e(E,{height:"50px"})])])):p.value.length==0?(m(),b("tr",oe,[...t[5]||(t[5]=[l("td",{colspan:"7",class:"text-center text-green-10 text-italic"},[V(" — Tidak ada data untuk ditampilkan — "),l("br"),V(" — Pilih Tingkat Pendidikan — ")],-1)])])):(m(!0),b(H,{key:2},L(p.value,o=>(m(),b("tr",{key:o.id},[l("td",null,g(o.sequence),1),l("td",null,g(o.id),1),l("td",null,g(o.name),1),l("td",null,g(o.alias),1),l("td",null,g(o.category),1),l("td",null,[e(M,{"model-value":!!o.show,color:"green",disable:""},null,8,["model-value"])]),l("td",ne,[e(q,{icon:"edit",flat:"",color:"green",onClick:k=>_(o)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),e(O,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=o=>i.value=o)},{default:u(()=>[e(ae,{data:a.value,onSuccessSubmit:t[1]||(t[1]=o=>f(o.tingkat_id)),onSuccessDelete:t[2]||(t[2]=o=>f(o.tingkat_id))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1}))}};export{je as default};
