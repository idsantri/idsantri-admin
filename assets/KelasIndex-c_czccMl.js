import{q as c,ah as M,c as u,o,w as t,g as a,Q as $,v as S,e as b,bO as V,b as x,t as r,G as U,a as i,C as P,l as N,ad as j,s as z,E as q,ap as W,J as G}from"./index-DU_HTlLB.js";import{Q as L,a as O}from"./QToolbar-2LTtOpej.js";import{Q as H}from"./QMarkupTable-Bf_AFg38.js";import{Q as B}from"./QRouteTab-yccmxXDV.js";import{Q as J}from"./QTabs-hSWqx3uf.js";import{a as R}from"./api-get-C_HGQ1i3.js";import{a as Y}from"./api-update-D1PEGX4C.js";import{Q as p}from"./QSkeleton-cHWQFqLB.js";import{Q as h}from"./QImg-DkL3_Rkg.js";import{Q as A,a as v}from"./QItem-BbodOwCO.js";import{Q as _}from"./QItemLabel-L7dSSnSA.js";import{Q as F}from"./QList-DmBsZOwe.js";import{s as w}from"./santri-store-CoBrUaru.js";import{d as X}from"./format-date-DBaFa2rd.js";import{_ as Z}from"./KelasForm-8pzdgkkM.js";import"./QResizeObserver-D-HUoSLs.js";import"./rtl-DFPa-2ov.js";import"./index-qAgkCKpN.js";import"./index-Bkc3wIyA.js";import"./api-error-B8ANjOsk.js";import"./id-BuNGTsqN.js";import"./QForm-DITd0Hw9.js";import"./InputSelectArray-DYbXt-XS.js";import"./QSelect-aBcEPTX0.js";import"./QField-D_RK9dyS.js";import"./QChip-D50d__-6.js";import"./QMenu-CI7rZ4oV.js";import"./selection-DVZ_h5Pg.js";import"./format-CJebrXOQ.js";import"./lists-store-DOh1Pajr.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-BhmZwgir.js";import"./QBtnDropdown-Dc57Ck4Y.js";import"./QBtnGroup-C4NJIEbX.js";import"./ClosePopup-rX8lBwqX.js";import"./Lists-BX2MfUpl.js";import"./ApiCrud-CEbaue1g.js";import"./Api-NxoWfBb3.js";import"./InputSelectTingkatPendidikan-Bh2yjtsn.js";import"./useCrudForm-qI80plRT.js";import"./InputSelectTahunAjaran-B1KvEtvP.js";const aa={key:1},ta={key:1},ea={key:1},la={key:1},ia={key:1},oa={__name:"CardSantri",props:{id:{type:[Number,String],validator(d){if(typeof d=="number")return!isNaN(d);if(typeof d=="string"){const g=Number(d);return!isNaN(g)}return!1}}},emits:["loaded"],setup(d,{emit:g}){const D=g,y=d,l=c(!1),s=c({}),k=c({}),Q=c({}),C=async()=>{const m=await R({endPoint:"santri/"+y.id,loading:l});m&&(s.value=m.santri,Q.value=m.wali,k.value=m.ortu,w().setSantri(m.santri),w().setOrtu(m.ortu),w().setWali(m.wali))};return M(async()=>{if(y.id){const m=w().getSantri,n=w().getWali,e=w().getOrtu;m.id==y.id?(s.value=m,k.value=e,Q.value=n):await C(),D("loaded",s.value)}}),(m,n)=>(o(),u(N,{flat:"",bordered:""},{default:t(()=>[a($,{class:"no-padding"},{default:t(()=>[a(L,{class:"bg-green-1"},{default:t(()=>[a(O,{class:"text-subtitle1"},{default:t(()=>[...n[0]||(n[0]=[S(" Identitas Santri ",-1)])]),_:1}),a(b,{icon:"sync",outline:"",onClick:C})]),_:1})]),_:1}),a($,{class:"q-py-sm q-px-none"},{default:t(()=>[a(F,{dense:""},{default:t(()=>[a(A,null,{default:t(()=>[a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"QAvatar"})):(o(),u(V,{key:1,class:"d-flex"},{default:t(()=>[a(h,{src:s.value?.image_url||"/user-default.png",ratio:1,cover:""},null,8,["src"])]),_:1}))]),_:1}),a(v,null,{default:t(()=>[a(_,{overline:""},{default:t(()=>[...n[1]||(n[1]=[S(" Santri ",-1)])]),_:1}),a(_,null,{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",aa,r(s.value.nama)+" ("+r(s.value.sex)+"; "+r(s.value.tgl_lahir?U(X)(s.value.tgl_lahir):"?")+" tahun) ",1))]),_:1}),a(_,{caption:"",lines:"1"},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",ta,r(s.value?.alamat_pendek||"-"),1))]),_:1}),a(_,{caption:"",lines:"1",class:"text-italic"},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",ea,r(s.value?.data_akhir||"-"),1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"QBtn",class:"full-width"})):(o(),u(b,{key:1,outline:"",color:"green",to:`/santri/${s.value?.id}`},{default:t(()=>[i("small",null,r(s.value?.id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),a(P,{inset:"item"}),a(A,null,{default:t(()=>[a(v,{top:"",avatar:""},{default:t(()=>[a(V)]),_:1}),a(v,null,{default:t(()=>[a(_,{overline:""},{default:t(()=>[...n[2]||(n[2]=[S(" Wali ",-1)])]),_:1}),a(_,null,{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",la,r(Q.value?.nama)+" ("+r(Q.value?.sex)+"; "+r(s.value?.wali_status)+")",1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"QBtn",class:"full-width"})):(o(),u(b,{key:1,outline:"",color:"green",to:`/wali/${s.value?.wali_id}`},{default:t(()=>[i("small",null,r(s.value?.wali_id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),a(P,{inset:"item"}),a(A,null,{default:t(()=>[a(v,{top:"",avatar:""},{default:t(()=>[a(V)]),_:1}),a(v,null,{default:t(()=>[a(_,{overline:""},{default:t(()=>[...n[3]||(n[3]=[S(" Orang Tua ",-1)])]),_:1}),a(_,null,{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",ia,r(k.value?.ayah)+" | "+r(k.value?.ibu),1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"QBtn",class:"full-width"})):(o(),u(b,{key:1,outline:"",color:"green",to:`/ortu/${s.value?.ortu_id}`},{default:t(()=>[i("small",null,r(s.value?.ortu_id),1)]),_:1},8,["to"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},sa={class:"row",style:{"max-width":"1400px"}},na={class:"col-12 col-md-6 q-pa-sm"},ra={class:"col-12 col-md-6 q-pa-sm"},ha={__name:"KelasIndex",setup(d){const g=c(0),y=j().params.id,l=c({}),s=c(!1),k=c(!1),Q=c({});async function C(n){const e=n==1,T=n==1?0:1;await Y({endPoint:`kelas/${y}/set-active`,data:{aktif:e},confirm:!1})||(l.value.aktif=T)}async function m(){const n=await R({endPoint:`kelas/${y}`,loading:s});n.kelas&&(l.value=n.kelas)}return z(async()=>{await m()}),(n,e)=>{const T=q("CardHeader"),I=q("CardLoading"),E=q("router-view"),K=q("CardPage");return o(),u(K,null,{default:t(()=>[a(T,{title:"Data Murid",onOnReload:m}),a($,{class:"no-padding"},{default:t(()=>[i("div",sa,[i("div",na,[a(N,{bordered:"",flat:""},{default:t(()=>[a(oa,{id:l.value.santri_id,onLoaded:e[0]||(e[0]=f=>Q.value=f)},null,8,["id"])]),_:1}),a(N,{class:"q-mt-sm",bordered:"",flat:""},{default:t(()=>[a($,{class:"q-pa-sm"},{default:t(()=>[a(L,{class:"bg-green-1"},{default:t(()=>[a(O,{class:"text-subtitle1"},{default:t(()=>[...e[6]||(e[6]=[S(" Data Kelas ",-1)])]),_:1}),a(b,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),a(b,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:e[1]||(e[1]=f=>k.value=!0),label:"Edit","no-caps":""})]),_:1}),a(H,{flat:""},{default:t(()=>[i("tbody",null,[i("tr",null,[e[7]||(e[7]=i("td",{class:"text-italic"},"Tahun Ajaran",-1)),i("td",null,r(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),i("tr",null,[e[8]||(e[8]=i("td",{class:"text-italic"},"Tingkat",-1)),i("td",null,r(l.value.tingkat),1)]),i("tr",null,[e[9]||(e[9]=i("td",{class:"text-italic"},"Kelas",-1)),i("td",null,r(l.value.kelas),1)]),i("tr",null,[e[10]||(e[10]=i("td",{class:"text-italic"},"Nomor Absen",-1)),i("td",null,r(l.value.no_absen),1)]),i("tr",null,[e[11]||(e[11]=i("td",{class:"text-italic"},"Aktif",-1)),i("td",null,[a(W,{modelValue:l.value.aktif,"onUpdate:modelValue":[e[2]||(e[2]=f=>l.value.aktif=f),C],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),i("tr",null,[e[12]||(e[12]=i("td",{class:"text-italic"},"Keterangan",-1)),i("td",null,r(l.value.keterangan),1)])])]),_:1}),a(I,{showing:s.value},null,8,["showing"])]),_:1})]),_:1})]),i("div",ra,[a(N,{bordered:"",flat:""},{default:t(()=>[a(J,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:t(()=>[a(B,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),a(B,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),a(B,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(o(),u($,{class:"q-pa-sm",key:g.value},{default:t(()=>[(o(),u(E,{key:n.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),a(G,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=f=>k.value=f)},{default:t(()=>[a(Z,{data:l.value,onSuccessUpdate:e[3]||(e[3]=f=>{l.value=f,g.value++}),onSuccessDelete:e[4]||(e[4]=f=>n.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{ha as default};
