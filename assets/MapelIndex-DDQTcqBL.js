import{q as c,E as f,c as q,o as i,w as u,g as t,ae as T,f as N,G as j,Q as D,a8 as y,l as Q,v as C,ag as P,N as A,e as h,m as B,a as l,b as V,F as H,D as I,t as g,J as $}from"./index-BKgLw7qS.js";import{Q as E}from"./QSkeleton-gUE_O0RX.js";import{Q as K}from"./QMarkupTable-DnYbRcfn.js";import{a as L}from"./api-get-Gv1bWbvV.js";import{Q as O}from"./QSelect-D6dKkbgb.js";import{Q as G}from"./QForm-Bd5rsjRV.js";import{_ as M}from"./InputSelectTingkatPendidikan-C8s2s48o.js";import{u as J}from"./useCrudForm-Dqk8Q6vs.js";import{A as R}from"./ApiCrud-D4h2pOZE.js";import"./index-pAYl4WkA.js";import"./index-CN_R4Poo.js";import"./api-error-Dc8TQ_NU.js";import"./QChip-CdmmyoJI.js";import"./QItemSection-Cp_-slAD.js";import"./QItemLabel-ErlEMvu3.js";import"./QMenu-CDFwy_7K.js";import"./selection-CuC3BnQZ.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-Bm0br98Z.js";import"./DropDownAfter-B6ZPph_D.js";import"./QBtnDropdown-FSOTAPYO.js";import"./QBtnGroup-8_Gv106n.js";import"./ClosePopup-BWix-O7W.js";import"./Lists-BdE10_X8.js";import"./Api-BDEd3YK9.js";class z extends R{constructor(){super("mapel")}}const W=new z,X={__name:"MapelForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(b,{emit:m}){const s=b,k=m,a=c({category:"Fan Dasar",show:1,...s.data}),r=!s.data?.id,{handleDelete:p,handleCreate:w,handleUpdate:_,loading:d}=J(W,{emit:k,responseKey:"mapel"}),n=async()=>{const v={sequence:a.value.sequence,id:a.value.id.toLowerCase(),tingkat_id:a.value.tingkat_id,name:a.value.name,alias:a.value.alias,category:a.value.category,show:a.value.show};return r?await w(v,!0):await _(s.data.id,v,!0)},x=async()=>await p(s.data.id);return(v,e)=>{const F=f("FormHeader"),S=f("FormLoading"),U=f("FormActions");return i(),q(Q,{class:"full-width",style:{"max-width":"425px"}},{default:u(()=>[t(G,{onSubmit:T(n,["prevent"])},{default:u(()=>[t(F,{title:"Input Mata Pelajaran","is-new":r}),j(d)?(i(),q(S,{key:0})):N("",!0),t(D,null,{default:u(()=>[t(y,{dense:"",outlined:"",label:"Urut",modelValue:a.value.sequence,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.sequence=o),hint:"Nomor urut tampil",class:"q-my-sm"},null,8,["modelValue"]),t(M,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.tingkat_id=o),class:"q-my-sm",rules:[o=>!!o||"Harus diisi!"]},null,8,["modelValue","rules"]),t(y,{class:"q-my-sm",dense:"",outlined:"",label:"Kode/ID Mapel",modelValue:a.value.id,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.id=o),hint:"Format: tingkat_id—kode_mapel (ibt-qur; ts-taj; aly-tau)"},null,8,["modelValue"]),t(y,{dense:"",class:"q-my-sm",outlined:"",label:"Mata Pelajaran",modelValue:a.value.name,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.name=o),hint:"Hanya huruf dan spasi"},null,8,["modelValue"]),t(y,{dense:"",class:"q-my-sm",outlined:"",label:"Mata Pelajaran (Alias)",modelValue:a.value.alias,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.alias=o)},null,8,["modelValue"]),t(O,{dense:"",class:"q-my-sm",outlined:"",label:"Kategori Fan","emit-value":"","map-options":"",modelValue:a.value.category,"onUpdate:modelValue":e[5]||(e[5]=o=>a.value.category=o),options:["Fan Pokok","Fan Dasar","Fan Tambahan"],behavior:"menu"},null,8,["modelValue"]),t(Q,{bordered:"",flat:"",class:"q-px-sm q-my-sm"},{default:u(()=>[e[7]||(e[7]=C(" Tampilkan: ",-1)),t(P,{modelValue:a.value.show,"onUpdate:modelValue":e[6]||(e[6]=o=>a.value.show=o),color:"green","true-value":1,"false-value":0},null,8,["modelValue"])]),_:1})]),_:1}),t(U,{"btn-delete":!r,onOnDelete:x},null,8,["btn-delete"])]),_:1})]),_:1})}}},Y={key:0},Z={colspan:"7"},ee={key:1},ae={class:"text-center"},he={__name:"MapelIndex",setup(b){const m=c([]),s=c(""),k=c(!1),a=c({}),r=c(!1);async function p(d){const n=await L({endPoint:"mapel",loading:k,params:{tingkat_id:d}});m.value=n.mapel}A(s,async d=>{d?await p(d):m.value=[]});function w(d){a.value=d,r.value=!0}function _(){a.value={tingkat_id:s.value},r.value=!0}return(d,n)=>{const x=f("CardHeader"),v=f("CardPage");return i(),q(v,null,{default:u(()=>[t(x,{title:"Daftar Mata Pelajaran",onOnReload:n[0]||(n[0]=e=>p(s.value)),"show-reload":!!s.value},{buttons:u(()=>[t(h,{class:"text-green-10 q-px-sm",label:"Baru",icon:"add","no-caps":"",color:"green-11",onClick:_,dense:""})]),_:1},8,["show-reload"]),t(B,{align:"right",class:"bg-green-1"},{default:u(()=>[n[5]||(n[5]=l("div",{class:"text-subtitle2 q-mr-sm text-italic"},"Pilih Tingkat Pendidikan:",-1)),t(M,{style:{width:"300px"},modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=e=>s.value=e),label:"Tingkat Pendidikan","with-hint":!1},null,8,["modelValue"])]),_:1}),t(D,{class:"q-pa-sm"},{default:u(()=>[t(K,{flat:""},{default:u(()=>[n[7]||(n[7]=l("thead",null,[l("tr",{class:"text-left"},[l("th",null,"No"),l("th",null,"Kode/ID"),l("th",null,"Mata Pelajaran"),l("th",null,"Alias"),l("th",null,"Status Fan"),l("th",null,"Tampil"),l("th",{class:"text-center"},"Edit")])],-1)),l("tbody",null,[k.value?(i(),V("tr",Y,[l("td",Z,[t(E,{height:"50px"})])])):m.value.length==0?(i(),V("tr",ee,[...n[6]||(n[6]=[l("td",{colspan:"7",class:"text-center text-green-10 text-italic"},[C(" — Tidak ada data untuk ditampilkan — "),l("br"),C(" — Pilih Tingkat Pendidikan — ")],-1)])])):(i(!0),V(H,{key:2},I(m.value,e=>(i(),V("tr",{key:e.id},[l("td",null,g(e.sequence),1),l("td",null,g(e.id),1),l("td",null,g(e.name),1),l("td",null,g(e.alias),1),l("td",null,g(e.category),1),l("td",null,[t(P,{"model-value":!!e.show,color:"green",disable:""},null,8,["model-value"])]),l("td",ae,[t(h,{icon:"edit",flat:"",color:"green",onClick:F=>w(e)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1}),t($,{modelValue:r.value,"onUpdate:modelValue":n[4]||(n[4]=e=>r.value=e)},{default:u(()=>[t(X,{data:a.value,onSuccessSubmit:n[2]||(n[2]=e=>p(e.tingkat_id)),onSuccessDelete:n[3]||(n[3]=e=>p(e.tingkat_id))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{he as default};
