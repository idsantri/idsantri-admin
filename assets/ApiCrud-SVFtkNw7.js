import{e as h,d as f,c as u}from"./index-BtaF3-6r.js";import{a as c}from"./index-D7WC_quC.js";import{a as p}from"./api-error-C0HjZ2a3.js";async function d({endPoint:e,params:t}){try{return(await c.get(e,{params:t})).data}catch(a){throw p(a),a}}async function _({endPoint:e,data:t,params:a}){try{return(await c.post(e,t,{params:a})).data}catch(s){throw p(s),s}}async function w({endPoint:e,data:t,params:a}){try{return(await c.put(e,t,{params:a})).data}catch(s){throw p(s),s}}async function y({endPoint:e,params:t}){try{return(await c.delete(e,{params:t}))?.data??!0}catch(a){throw p(a),a}}class m{constructor(t){this._path=t,this._apiGet=d,this._apiPost=_,this._apiUpdate=w,this._apiDelete=y}_showSuccess(t){h(t)}_showError(t){f(t)}async _notifyConfirm(t,a="Konfirmasi"){return await u(t,!0,a)}}class S extends m{async getAll({params:t={},notifySuccess:a=!0}){const s=await this._apiGet({endPoint:this._path,params:t});return a&&this._showSuccess(s.message),s.data}async getById({id:t,params:a={},notifySuccess:s=!0}){const i=await this._apiGet({endPoint:`${this._path}/${t}`,params:a});return s&&this._showSuccess(i.message),i.data}async create({data:t,params:a={},notifySuccess:s=!0,confirm:i=!1,message:n=""}){if((n||i)&&!await this._notifyConfirm(n||"Simpan data ini?"))return!1;const r=await this._apiPost({endPoint:this._path,data:t,params:a});return s&&this._showSuccess(r.message),r.data||!0}async update({id:t,data:a,params:s={},notifySuccess:i=!0,confirm:n=!1,message:r=""}){if((r||n)&&!await this._notifyConfirm(r||"Update data ini?"))return!1;const o=await this._apiUpdate({endPoint:`${this._path}/${t}`,data:a,params:s});return i&&this._showSuccess(o.message),o.data||!0}async remove({id:t,params:a={},notifySuccess:s=!0,confirm:i=!0,message:n=""}){if((n||i)&&!await this._notifyConfirm(n||'<span style="color: red">Hapus data ini?</span>'))return!1;const r=await this._apiDelete({endPoint:`${this._path}/${t}`,params:a});return s&&this._showSuccess(r.message),r.data||!0}}export{S as A,m as a};
