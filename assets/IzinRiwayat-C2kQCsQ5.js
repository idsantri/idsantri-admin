import{q as v,ac as S,s as q,as as C,E as T,c as u,o as i,w as l,g as s,a as e,Q as k,e as y,v as m,b as I,F as $,D as V,aj as B,G as o,t as n,J as D,l as R}from"./index-BD0rPuwI.js";import{Q as j,a as L}from"./QToolbar-DtZkS60q.js";import{Q as F}from"./QSpace-5xN-RTD3.js";import{Q as N,a as Q}from"./QItemSection-IwpTB_GG.js";import{Q as A}from"./QList-BEPgv0aR.js";import{b as E}from"./format-date-DlwYCgkJ.js";import{a as M,m as P}from"./hijri--5qD4USW.js";import{h as U}from"./tahun-ajaran-Dhryo64N.js";import{_ as G}from"./IzinPesantrenForm-DBMlIQBu.js";import{I as H}from"./IzinPesantren-B13Ox4Uj.js";const J={class:"relative-position"},K={class:"flex"},sa={__name:"IzinRiwayat",props:{santri_id:{required:!0}},setup(p){const d=p,r=v([]),f=v(!1),g=v(!1),{params:_}=S();q(async()=>{d.santri_id?await c(d.santri_id):r.value=[]}),C(async()=>{d.santri_id?await c(d.santri_id):r.value=[]});async function c(b){try{f.value=!0;const a=await H.getAll({params:{santri_id:b}});r.value=a.izin_pesantren}catch(a){console.log("ðŸš€ ~ getRiwayat ~ error:",a)}finally{f.value=!1}}return(b,a)=>{const w=T("CardLoading");return i(),u(R,{flat:"",bordered:"",class:""},{default:l(()=>[s(k,{class:"bg-green-7 no-padding"},{default:l(()=>[s(j,{class:"no-padding no-margin"},{default:l(()=>[s(y,{icon:"sync","no-caps":"",onClick:a[0]||(a[0]=t=>c(p.santri_id)),flat:"",dense:"",class:"q-pl-sm",color:"green-11",title:"Muat ulang"}),s(L,{class:"text-subtitle1 text-green-11 q-px-none"},{default:l(()=>[...a[4]||(a[4]=[m(" Riwayat Perizinan ",-1)])]),_:1}),s(y,{color:"green-11",outline:"",dense:"","no-caps":"",icon:"add",label:"Tambah",class:"q-mr-sm q-px-md",onClick:a[1]||(a[1]=t=>g.value=!0)})]),_:1})]),_:1}),e("div",J,[r.value?.length?(i(),u(k,{key:1,class:"q-pa-sm"},{default:l(()=>[s(A,{separator:"",bordered:""},{default:l(()=>[(i(!0),I($,null,V(r.value,(t,x)=>(i(),u(N,{key:x,class:B([t.id==o(_).id?"bg-green-1":"","q-pa-sm"])},{default:l(()=>[s(Q,null,{default:l(()=>[e("table",null,[e("tbody",null,[e("tr",null,[a[6]||(a[6]=e("td",{class:"label"},"Tanggal:",-1)),e("td",K,[m(n(o(E)(t.dari_tgl)+" | "+o(M)(t.dari_tgl))+" ",1),s(F),m(" "+n(o(U)(o(P)(t.dari_tgl))),1)])]),e("tr",null,[a[7]||(a[7]=e("td",{class:"label"},"Izin",-1)),e("td",null,n(t.sifat)+" | "+n(t.durasi)+" hari | "+n(t.pengajuan),1)]),e("tr",null,[a[8]||(a[8]=e("td",{class:"label"},"Keperluan",-1)),e("td",null,n(t.keperluan)+" "+n(t.keterangan?" ("+t.keterangan+")":""),1)]),e("tr",null,[a[9]||(a[9]=e("td",{class:"label"},"Status",-1)),e("td",null,n(t.status),1)])])])]),_:2},1024),s(Q,{side:"",class:"no-padding"},{default:l(()=>[s(y,{disable:t.id==o(_).id,icon:"info",glossy:"",dense:"",round:"",outline:"",color:"green",to:`/keamanan/izin-pesantren/${t.id}`},null,8,["disable","to"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})):(i(),u(k,{key:0,class:"text-italic text-center q-pa-lg"},{default:l(()=>[...a[5]||(a[5]=[m(" Tidak ada untuk ditampilkan ",-1)])]),_:1})),s(w,{showing:f.value},null,8,["showing"])]),s(D,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=t=>g.value=t)},{default:l(()=>[s(G,{data:{santri_id:p.santri_id,nama:r.value[0]?.nama,data_akhir:r.value[0]?.data_akhir},onSuccessDelete:t=>null,onSuccessSubmit:a[2]||(a[2]=t=>b.$router.push(`/keamanan/izin-pesantren/${t.id}`))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{sa as _};
