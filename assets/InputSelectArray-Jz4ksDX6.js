import{Q as S}from"./QSelect-Co09SqkM.js";import{l as A}from"./lists-store-F5P_xNBX.js";import{_ as b}from"./DropDownAfter-wYSCUu7Z.js";import{L as x}from"./Lists-DSwT9YX9.js";import{x as g,R as C,c as h,o as v,w as L,a as k}from"./index-Bf-p91mW.js";const w=(()=>{const i=t=>{if(!t||typeof t!="object")throw new Error("Parameter harus berupa object yang valid")},a=t=>{if(t!=="first"&&t!=="last")throw new Error('Position harus "first" atau "last"')};function l(t,e,r="last"){i(e),a(r);const o=[...t];return r==="first"?o.unshift(e):o.push(e),o}function c(t,e,r){return i(r),t.map(f=>f.id===e?{...f,...r}:f)}function u(t,e){return t.filter(r=>r.id!==e)}function s(t,e){return t.find(r=>r.id===e)||null}function m(t,e){return t.some(r=>r.id===e)}function y(t,e){if(typeof e!="function")throw new Error("Parameter callback harus berupa function");return t.filter(e)}function n(t,e,r="asc"){const o=[...t];return typeof e=="string"?o.sort((f,_)=>{let d=f[e],p=_[e];return typeof d=="string"&&typeof p=="string"&&(d=d.toLowerCase(),p=p.toLowerCase()),d<p?r==="asc"?-1:1:d>p?r==="asc"?1:-1:0}):typeof e=="function"&&o.sort(e),o}return{create:l,update:c,remove:u,findById:s,exists:m,filter:y,sort:n}})(),I={__name:"InputSelectArray",props:{url:{type:String,require:!0},sort:{type:String,default:"asc"},selected:{type:String,default:""},btnSetting:{type:Boolean,default:!0}},setup(i){const a=i,l=g(!1),c=g([]),u=A(),s=a.url.replace(/-/g,"_");function m(){let n="";return a.selected&&a.url=="tahun-ajaran"&&(n=u.getStateByKey(s).find(e=>e.val0===a.selected)?.val1),n}C(async()=>{const n=u.getStateByKey_Arr(s);if(n.length)c.value=w.sort(n,"val0",a.sort);else{await y();const t=u.getStateByKey_Arr(s);c.value=w.sort(t,"val0",a.sort)}});async function y(){try{l.value=!0;const n=await x.getByKey(a.url);u.$patch({[s]:n[s]})}catch(n){console.log("error get list ",n)}finally{l.value=!1}}return(n,t)=>(v(),h(S,{dense:"",outlined:"","emit-value":"","map-options":"",options:c.value,loading:l.value,behavior:"menu",clearable:"",hint:m()},{after:L(()=>[i.btnSetting?(v(),h(b,{key:0,"route-to":i.url,onReload:y},null,8,["route-to"])):k("",!0)]),_:1},8,["options","loading","hint"]))}};export{I as _};
