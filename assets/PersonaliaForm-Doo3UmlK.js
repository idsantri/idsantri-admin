import{Q as L,a as V,_ as P,b as A}from"./CarouselAlamat-B35cFH5A.js";import{a2 as U,g as h,o as c,q as k,b as t,a3 as d,z as f,F as N,x as g,R as I,y,c as x,w as u,a9 as B,a as O,n as _,s as $}from"./index-Bf-p91mW.js";import{Q as H}from"./QForm-OmDQHoiq.js";import{Q as j}from"./QSelect-Co09SqkM.js";import{b as E,m as M}from"./hijri-BBdEhqDI.js";import{i as J,f as K}from"./format-date-DlwYCgkJ.js";import{_ as T}from"./InputSelectKotaLahir-xX05QBoo.js";import{_ as w}from"./InputSelectArray-Jz4ksDX6.js";import{A as z}from"./ApiCrud-SVFtkNw7.js";const R={__name:"PersonaliaIdentity",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(r){const a=U(r,"modelValue");return(i,l)=>(c(),h(N,null,[l[6]||(l[6]=k("div",{class:"text-subtitle2"},"Identitas Diri",-1)),t(d,{dense:"",hint:i.isNew?"Kosongkan jika ingin diisi otomatis!":"",class:"q-my-sm",outlined:"",label:"ID",modelValue:a.value.id,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.id=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),t(d,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Nama*",modelValue:a.value.nama,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.nama=e),rules:[e=>!!e||"Harus diisi!",e=>e?.length>=3||"Setidaknya 3 huruf!"],"error-color":"negative",autocapitalize:"words"},null,8,["modelValue","rules"]),t(d,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Nomor Induk Kependudukan",modelValue:a.value.nik,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.nik=e),rules:[e=>!e||e?.length==16&&!isNaN(e)||"16 digit angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(T,{modelValue:a.value.tmp_lahir,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.tmp_lahir=e),class:"q-my-sm"},null,8,["modelValue"]),t(d,{dense:"",hint:f(J)(a.value.tgl_lahir)?f(K)(a.value.tgl_lahir)+" | "+f(E)(f(M)(a.value.tgl_lahir)):"",class:"q-my-sm",outlined:"",label:"Tanggal Lahir",modelValue:a.value.tgl_lahir,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.tgl_lahir=e),type:"date"},null,8,["hint","modelValue"]),t(j,{dense:"",hint:a.value.sex=="L"?"Laki-Laki":a.value.sex=="P"?"Perempuan":"",class:"q-my-sm",outlined:"",label:"Jenis Kelamin",modelValue:a.value.sex,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.sex=e),options:["L","P"],"emit-value":"","map-options":"","error-color":"negative",behavior:"menu"},null,8,["hint","modelValue"])],64))}},G={__name:"PersonaliaOthers",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(r){const a=U(r,"modelValue");return(i,l)=>(c(),h(N,null,[l[4]||(l[4]=k("div",{class:"text-subtitle2"},"Lain-Lain",-1)),t(w,{modelValue:a.value.pa_formal,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.pa_formal=e),url:"pendidikan-akhir-formal",label:"Pendidikan Akhir Formal",class:"q-my-sm",hint:""},null,8,["modelValue"]),t(w,{modelValue:a.value.pa_diniyah,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.pa_diniyah=e),url:"pendidikan-akhir-diniyah",label:"Pendidikan Akhir Diniyah",class:"q-my-sm",hint:""},null,8,["modelValue"]),t(d,{dense:"",hint:"08123456789",class:"q-my-sm",outlined:"",label:"Telepon",modelValue:a.value.telepon,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.telepon=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(d,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Email",modelValue:a.value.email,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.email=e)},null,8,["modelValue"])],64))}};class W extends z{constructor(){super("aparatur")}}const b=new W,X={class:"row justify-center"},ue={__name:"PersonaliaForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(r,{emit:a}){const i=r,l=a,e=g({}),m=g(!1),p=!i.data?.id;I(async()=>{Object.assign(e.value,i.data)});const q=async()=>{const n=JSON.parse(JSON.stringify(e.value));delete n.image,delete n.aktif;try{m.value=!0;const o=p?await b.create({data:n}):await b.update({id:i.data.id,data:n,confirm:!0});o&&(document.getElementById("btn-close-form").click(),l("successSubmit",o?.aparatur),l(p?"successCreate":"successUpdate",o?.aparatur))}finally{m.value=!1}},F=async()=>{try{m.value=!0;const n=i.data.id;await b.remove({id:n})&&(document.getElementById("btn-close-form").click(),l("successDelete",n))}finally{m.value=!1}},v=g("identity"),C=[{label:1,value:"identity"},{label:2,value:"alamat"},{label:3,value:"others"}];return(n,o)=>{const Q=y("FormHeader"),D=y("FormLoading"),S=y("FormActions");return c(),x($,{class:"full-width",style:{"max-width":"425px"}},{default:u(()=>[t(H,{onSubmit:B(q,["prevent"])},{default:u(()=>[t(Q,{title:"Input Data Personalia","is-new":p}),m.value?(c(),x(D,{key:0})):O("",!0),t(_,{class:"no-padding"},{default:u(()=>[t(L,{modelValue:v.value,"onUpdate:modelValue":o[3]||(o[3]=s=>v.value=s),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"full-width",style:{height:"70vh"},swipeable:"",infinite:""},{default:u(()=>[t(V,{name:"identity",class:"no-wrap flex-center"},{default:u(()=>[t(R,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=s=>e.value=s)},null,8,["modelValue"])]),_:1}),t(V,{name:"alamat",class:"no-wrap flex-center"},{default:u(()=>[t(P,{modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=s=>e.value=s),onEmitRoute:s=>null},null,8,["modelValue"])]),_:1}),t(V,{name:"others",class:"no-wrap flex-center"},{default:u(()=>[t(G,{modelValue:e.value,"onUpdate:modelValue":o[2]||(o[2]=s=>e.value=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(_,{class:"q-pa-sm"},{default:u(()=>[k("div",X,[t(A,{"toggle-color":"green-10","text-color":"text-green-11","no-caps":"",glossy:"",modelValue:v.value,"onUpdate:modelValue":o[4]||(o[4]=s=>v.value=s),options:C},null,8,["modelValue"])])]),_:1}),t(S,{"btn-delete":!p,onOnDelete:F},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{ue as _};
