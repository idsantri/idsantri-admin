import{Q as x}from"./QSpace-DTUJXiEo.js";import{q as Q,ah as h,c as l,o as a,w as s,g as t,Q as k,v as b,e as _,b as f,t as d,l as w}from"./index-D027sPii.js";import{Q as o}from"./QSkeleton-BKph7B4h.js";import{Q as N}from"./QImg-DWrWqAa6.js";import{Q as B,a as p}from"./QItem-D9NARC_U.js";import{Q as y}from"./QItemLabel-BkEEHqCi.js";import{Q as C}from"./QList-v8ixJrf5.js";import{S as q}from"./Santri-BE-Z-aLU.js";import{s as u}from"./santri-store-BQO2kzO0.js";const I={key:1},D={key:1},E={key:1},A={__name:"CardSantriSimple",props:{id:{type:[Number,String],validator(e){if(typeof e=="number")return!isNaN(e);if(typeof e=="string"){const c=Number(e);return!isNaN(c)}return!1}}},emits:["loaded"],setup(e,{emit:c}){const S=c,m=e,n=Q(!1),i=Q({}),v=async()=>{try{n.value=!0;const r=await q.getById({id:m.id});i.value=r.santri,u().setSantri(r.santri),u().setOrtu(r.ortu),u().setWali(r.wali)}catch(r){console.error("Error loading santri data:",r)}finally{n.value=!1}};return h(async()=>{if(m.id){const r=u().getSantri;r.id==m.id?i.value=r:await v(),S("loaded",i.value)}}),(r,g)=>(a(),l(w,{bordered:"",flat:""},{default:s(()=>[t(k,{class:"q-pa-sm text-subtitle2 bg-green-11 flex items-center"},{default:s(()=>[g[0]||(g[0]=b(" Data Santri ",-1)),t(x),t(_,{icon:"sync",dense:"",outline:"",size:"sm",class:"q-px-sm",onClick:v})]),_:1}),t(k,{class:"q-pa-sm"},{default:s(()=>[t(C,null,{default:s(()=>[t(B,{class:"no-padding"},{default:s(()=>[t(p,{avatar:""},{default:s(()=>[n.value||!e.id?(a(),l(o,{key:0,type:"",class:"full-width full-height"})):(a(),l(N,{key:1,src:i.value?.image_url||"/user-default.png",ratio:3/4,alt:"santri"},null,8,["src"]))]),_:1}),t(p,null,{default:s(()=>[t(y,{overline:""},{default:s(()=>[n.value||!e.id?(a(),l(o,{key:0,type:"text"})):(a(),f("div",I,d(i.value.nama?.toUpperCase())+" ("+d(i.value.id)+") ",1))]),_:1}),t(y,null,{default:s(()=>[n.value||!e.id?(a(),l(o,{key:0,type:"text"})):(a(),f("div",D,d(i.value.data_akhir),1))]),_:1}),t(y,{caption:""},{default:s(()=>[n.value||!e.id?(a(),l(o,{key:0,type:"text"})):(a(),f("div",E,d(i.value.alamat_pendek),1))]),_:1})]),_:1}),t(p,{avatar:""},{default:s(()=>[n.value||!e.id?(a(),l(o,{key:0,type:"QBtn",class:"full-width"})):(a(),l(_,{key:1,round:"",dense:"",glossy:"",icon:"info","no-caps":"",class:"q-px-sm bg-green-8 text-green-11",to:`/santri/${i.value.id}`},null,8,["to"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{A as _};
