import{q as c,ai as M,c as u,o,w as t,g as a,Q as $,v as S,e as b,bO as V,b as x,t as r,a as i,C as P,l as N,ad as U,s as j,E as q,ah as z,J as W}from"./index-hOL5A6cm.js";import{Q as L,a as O}from"./QToolbar-CHx5tulD.js";import{Q as H}from"./QMarkupTable-B-16obXc.js";import{Q as B}from"./QRouteTab-DHpw3ciq.js";import{Q as G}from"./QTabs-CtCJ_CXK.js";import{a as R}from"./api-get-CNiX5O7p.js";import{a as J}from"./api-update-B21MEC7e.js";import{Q as p}from"./QSkeleton-CRG1b9Bx.js";import{Q as F}from"./QImg-WWhFQM91.js";import{Q as D,a as v}from"./QItem-BANBEVbr.js";import{Q as y}from"./QItemLabel-Cay7Uljr.js";import{Q as X}from"./QList-psTvccOF.js";import{s as w}from"./santri-store-B1-Br9Cy.js";import{_ as Y}from"./KelasForm-CRgg8Xds.js";import"./QResizeObserver-B1JAKxp1.js";import"./rtl-DFPa-2ov.js";import"./index-D-qXO6AO.js";import"./index-uhNqAWVd.js";import"./api-error-rS4-Nvfb.js";import"./QForm-DY0wo0sf.js";import"./InputSelectArray-NdwE2qGh.js";import"./QSelect-DH-3drUQ.js";import"./QChip-hOI8Fwk1.js";import"./QMenu-sXy5Axos.js";import"./selection-DaCFfV6A.js";import"./format-CJebrXOQ.js";import"./lists-store-CFqArrwJ.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-CUV7uApi.js";import"./QBtnDropdown-B9P_0geU.js";import"./QBtnGroup-CsDmZYjG.js";import"./ClosePopup-B4SXiw2W.js";import"./Lists-BWSx71ha.js";import"./ApiCrud-C0P1pqwF.js";import"./Api-COnWASsw.js";import"./InputSelectTingkatPendidikan-6NS_xoZo.js";import"./useCrudForm-CQYpASoM.js";import"./InputSelectTahunAjaran-y8ui8tjh.js";const Z={key:1},h={key:1},aa={key:1},ta={key:1},ea={key:1},la={__name:"CardSantri",props:{id:{type:[Number,String],validator(d){if(typeof d=="number")return!isNaN(d);if(typeof d=="string"){const _=Number(d);return!isNaN(_)}return!1}}},emits:["loaded"],setup(d,{emit:_}){const I=_,g=d,l=c(!1),n=c({}),k=c({}),Q=c({}),C=async()=>{const m=await R({endPoint:"santri/"+g.id,loading:l});m&&(n.value=m.santri,Q.value=m.wali,k.value=m.ortu,w().setSantri(m.santri),w().setOrtu(m.ortu),w().setWali(m.wali))};return M(async()=>{if(g.id){const m=w().getSantri,s=w().getWali,e=w().getOrtu;m.id==g.id?(n.value=m,k.value=e,Q.value=s):await C(),I("loaded",n.value)}}),(m,s)=>(o(),u(N,{flat:"",bordered:""},{default:t(()=>[a($,{class:"no-padding"},{default:t(()=>[a(L,{class:"bg-green-1"},{default:t(()=>[a(O,{class:"text-subtitle1"},{default:t(()=>[...s[0]||(s[0]=[S(" Identitas Santri ",-1)])]),_:1}),a(b,{icon:"sync",outline:"",onClick:C})]),_:1})]),_:1}),a($,{class:"q-py-sm q-px-none"},{default:t(()=>[a(X,{dense:""},{default:t(()=>[a(D,null,{default:t(()=>[a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"QAvatar"})):(o(),u(V,{key:1,class:"d-flex"},{default:t(()=>[a(F,{src:n.value?.image_url||"/user-default.png",ratio:1,cover:""},null,8,["src"])]),_:1}))]),_:1}),a(v,null,{default:t(()=>[a(y,{overline:""},{default:t(()=>[...s[1]||(s[1]=[S(" Santri ",-1)])]),_:1}),a(y,null,{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",Z,r(n.value.nama)+" ("+r(n.value.sex)+")",1))]),_:1}),a(y,{caption:"",lines:"1"},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",h,r(n.value?.alamat_pendek||"-"),1))]),_:1}),a(y,{caption:"",lines:"1",class:"text-italic"},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",aa,r(n.value?.data_akhir||"-"),1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"QBtn",class:"full-width"})):(o(),u(b,{key:1,outline:"",color:"green",to:`/santri/${n.value?.id}`},{default:t(()=>[i("small",null,r(n.value?.id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),a(P,{inset:"item"}),a(D,null,{default:t(()=>[a(v,{top:"",avatar:""},{default:t(()=>[a(V)]),_:1}),a(v,null,{default:t(()=>[a(y,{overline:""},{default:t(()=>[...s[2]||(s[2]=[S(" Wali ",-1)])]),_:1}),a(y,null,{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",ta,r(Q.value?.nama)+" ("+r(Q.value?.sex)+"; "+r(n.value?.wali_status)+")",1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"QBtn",class:"full-width"})):(o(),u(b,{key:1,outline:"",color:"green",to:`/wali/${n.value?.wali_id}`},{default:t(()=>[i("small",null,r(n.value?.wali_id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),a(P,{inset:"item"}),a(D,null,{default:t(()=>[a(v,{top:"",avatar:""},{default:t(()=>[a(V)]),_:1}),a(v,null,{default:t(()=>[a(y,{overline:""},{default:t(()=>[...s[3]||(s[3]=[S(" Orang Tua ",-1)])]),_:1}),a(y,null,{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"text"})):(o(),x("div",ea,r(k.value?.ayah)+" | "+r(k.value?.ibu),1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(o(),u(p,{key:0,type:"QBtn",class:"full-width"})):(o(),u(b,{key:1,outline:"",color:"green",to:`/ortu/${n.value?.ortu_id}`},{default:t(()=>[i("small",null,r(n.value?.ortu_id),1)]),_:1},8,["to"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ia={class:"row",style:{"max-width":"1400px"}},oa={class:"col-12 col-md-6 q-pa-sm"},sa={class:"col-12 col-md-6 q-pa-sm"},Wa={__name:"KelasIndex",setup(d){const _=c(0),g=U().params.id,l=c({}),n=c(!1),k=c(!1),Q=c({});async function C(s){const e=s==1,T=s==1?0:1;await J({endPoint:`kelas/${g}/set-active`,data:{aktif:e},confirm:!1})||(l.value.aktif=T)}async function m(){const s=await R({endPoint:`kelas/${g}`,loading:n});s.kelas&&(l.value=s.kelas)}return j(async()=>{await m()}),(s,e)=>{const T=q("CardHeader"),A=q("CardLoading"),E=q("router-view"),K=q("CardPage");return o(),u(K,null,{default:t(()=>[a(T,{title:"Data Murid",onOnReload:m}),a($,{class:"no-padding"},{default:t(()=>[i("div",ia,[i("div",oa,[a(N,{bordered:"",flat:""},{default:t(()=>[a(la,{id:l.value.santri_id,onLoaded:e[0]||(e[0]=f=>Q.value=f)},null,8,["id"])]),_:1}),a(N,{class:"q-mt-sm",bordered:"",flat:""},{default:t(()=>[a($,{class:"q-pa-sm"},{default:t(()=>[a(L,{class:"bg-green-1"},{default:t(()=>[a(O,{class:"text-subtitle1"},{default:t(()=>[...e[6]||(e[6]=[S(" Data Kelas ",-1)])]),_:1}),a(b,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),a(b,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:e[1]||(e[1]=f=>k.value=!0),label:"Edit","no-caps":""})]),_:1}),a(H,{flat:""},{default:t(()=>[i("tbody",null,[i("tr",null,[e[7]||(e[7]=i("td",{class:"text-italic"},"Tahun Ajaran",-1)),i("td",null,r(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),i("tr",null,[e[8]||(e[8]=i("td",{class:"text-italic"},"Tingkat",-1)),i("td",null,r(l.value.tingkat),1)]),i("tr",null,[e[9]||(e[9]=i("td",{class:"text-italic"},"Kelas",-1)),i("td",null,r(l.value.kelas),1)]),i("tr",null,[e[10]||(e[10]=i("td",{class:"text-italic"},"Nomor Absen",-1)),i("td",null,r(l.value.no_absen),1)]),i("tr",null,[e[11]||(e[11]=i("td",{class:"text-italic"},"Aktif",-1)),i("td",null,[a(z,{modelValue:l.value.aktif,"onUpdate:modelValue":[e[2]||(e[2]=f=>l.value.aktif=f),C],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),i("tr",null,[e[12]||(e[12]=i("td",{class:"text-italic"},"Keterangan",-1)),i("td",null,r(l.value.keterangan),1)])])]),_:1}),a(A,{showing:n.value},null,8,["showing"])]),_:1})]),_:1})]),i("div",sa,[a(N,{bordered:"",flat:""},{default:t(()=>[a(G,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:t(()=>[a(B,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),a(B,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),a(B,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(o(),u($,{class:"q-pa-sm",key:_.value},{default:t(()=>[(o(),u(E,{key:s.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),a(W,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=f=>k.value=f)},{default:t(()=>[a(Y,{data:l.value,onSuccessUpdate:e[3]||(e[3]=f=>{l.value=f,_.value++}),onSuccessDelete:e[4]||(e[4]=f=>s.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Wa as default};
