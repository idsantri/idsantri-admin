import{q as d,N as H,E as f,c as C,o as S,w as s,g as l,ae as P,f as F,Q as x,a8 as j,G as i,l as z,ac as N,s as E,a,e as y,v as K,t as o,C as L,J as T}from"./index-BD0rPuwI.js";import{Q as M,a as U}from"./QToolbar-DtZkS60q.js";import{Q as A}from"./QSpace-5xN-RTD3.js";import{a as O,i as R,f as w}from"./format-date-DlwYCgkJ.js";import{b as I,m as Q}from"./hijri--5qD4USW.js";import{_ as G}from"./ReportViewer-DSS0eYFs.js";import{_ as J}from"./IzinRiwayat-C2kQCsQ5.js";import{_ as W}from"./CardSantriSimple-Bk2bXcn2.js";import{_ as X}from"./IzinPesantrenForm-DBMlIQBu.js";import{Q as Y}from"./QForm-Bxs8j-wD.js";import{I as B}from"./IzinPesantren-B13Ox4Uj.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./id-BuNGTsqN.js";import"./format-number-B34ySHL_.js";import"./index-n6Dqaau9.js";import"./index-Bt3cYzg4.js";import"./QItemSection-IwpTB_GG.js";import"./QList-BEPgv0aR.js";import"./tahun-ajaran-Dhryo64N.js";import"./QSkeleton-XNUgrYtX.js";import"./QImg-Bw4PCoSV.js";import"./QItemLabel-D6C2_kLw.js";import"./api-get-BCXhCHlZ.js";import"./api-error-DI2-xNds.js";import"./santri-store-BNSQ2yZ2.js";import"./QSelect-CYTXzFFA.js";import"./QChip-CZ2DfYuE.js";import"./QMenu-Bb-0PlhQ.js";import"./selection-D1mjVW1G.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./InputSelectSantriId-DbY6aM65.js";import"./Santri-D4LM7LTo.js";import"./ApiCrud-C6ys5aHm.js";import"./Api-CkWZCpKy.js";import"./InputSelectArray-C3_iyAte.js";import"./lists-store-h_cLlXO2.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-DARN8D_I.js";import"./QBtnDropdown-C1QKmXiE.js";import"./QBtnGroup-PW693_0R.js";import"./ClosePopup-CCVUmZVV.js";import"./Lists-Brk1_KEv.js";import"./useCrudForm-DmdwiqlE.js";const h={__name:"IzinPesantrenKembaliForm",props:{data:Object},emits:["successSubmit"],setup(q,{emit:v}){const c=q,b=v,e=d({...c.data}),r=d(!1);async function _(){try{r.value=!0;const n=await B.setKembali({id:c.data.id,data:{kembali_tgl:e.value.kembali_tgl},message:"Tetapkan sudah kembali ke pesantren pada tanggal ini?"});n&&(document.getElementById("btn-close-form").click(),b("successSubmit",n?.izin_pesantren))}catch(n){console.error("err set not back",n)}finally{r.value=!1}}async function k(){try{r.value=!0;const n=await B.setKembali({id:c.data.id,data:{kembali_tgl:null},message:"Tetapkan belum kembali ke pesantren?"});n&&(document.getElementById("btn-close-form").click(),b("successSubmit",n?.izin_pesantren))}catch(n){console.error("err set not back",n)}finally{r.value=!1}}return H(()=>e.value.kembali_tgl,n=>{e.value.kembali_tgl=O(n)}),(n,p)=>{const V=f("FormHeader"),u=f("FormLoading"),t=f("FormActions");return S(),C(z,{class:"full-width",style:{"max-width":"425px"}},{default:s(()=>[l(Y,{onSubmit:P(_,["prevent"])},{default:s(()=>[l(V,{title:"Tetapkan Tanggal Kembali","is-new":!1}),r.value?(S(),C(u,{key:0})):F("",!0),l(x,{class:"q-pa-sm"},{default:s(()=>[l(j,{dense:"",hint:i(R)(e.value.kembali_tgl)?i(w)(e.value.kembali_tgl):"",class:"q-my-sm",outlined:"",label:"Tanggal (M)*",modelValue:e.value.kembali_tgl,"onUpdate:modelValue":p[0]||(p[0]=g=>e.value.kembali_tgl=g),type:"datetime-local",rules:[g=>!!g||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"])]),_:1}),l(t,{"btn-delete":!!q.data.kembali_tgl,onOnDelete:k,"label-delete":"Belum Kembali"},null,8,["btn-delete"])]),_:1})]),_:1})}}},tt={class:"row",style:{"max-width":"1200px"}},at={class:"col-xs-12 col-sm-6"},et={class:"q-ma-sm"},lt={class:"full-width"},st={colspan:"2"},nt={class:"col-xs-12 col-sm-6"},ot={class:"q-ma-sm"},it={__name:"IzinById",setup(q){const v=d(!1),c=d(""),b=N(),e=d({}),r=d(!1),_=d(!1),k=d(!1);function n(){c.value=`reports/izin-pesantren/view?id=${e.value.id}`,v.value=!0}async function p(){try{r.value=!0;const u=await B.getById({id:b.params.id});e.value=u.izin_pesantren}catch(u){console.log("ðŸš€ ~ loadData ~ error:",u)}finally{r.value=!1}}E(async()=>{b.params.id&&await p()});function V(u){const t=/\(\+(\d+)\)/g;return u.replace(t,($,D)=>`(terlambat ${D} hari)`)}return(u,t)=>{const g=f("CardHeader"),$=f("CardLoading"),D=f("CardPage");return S(),C(D,null,{default:s(()=>[l(g,{title:"Detail Izin Pesantren","show-reload":!1}),a("div",tt,[a("div",at,[a("div",et,[l(z,{class:"",flat:"",bordered:""},{default:s(()=>[l(x,{class:"bg-green-7 no-padding"},{default:s(()=>[l(M,{class:"no-padding no-margin"},{default:s(()=>[l(y,{icon:"sync","no-caps":"",onClick:p,flat:"",dense:"",class:"q-pl-sm",color:"green-11",title:"Muat ulang"}),l(U,{class:"text-subtitle1 text-green-11 q-px-none"},{default:s(()=>[...t[6]||(t[6]=[K(" Data Perizinan ",-1)])]),_:1}),l(y,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Cetak","no-caps":"",icon:"print",color:"green-11",onClick:n}),l(y,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-11",onClick:t[0]||(t[0]=m=>_.value=!0)})]),_:1})]),_:1}),e.value?(S(),C(x,{key:0,class:"q-pa-sm"},{default:s(()=>[l(W,{id:e.value.santri_id},null,8,["id"]),l(z,{bordered:"",flat:"",class:"q-mt-sm"},{default:s(()=>[l(x,{class:"q-pa-sm text-subtitle1 bg-green-11 flex"},{default:s(()=>[t[7]||(t[7]=K(" Data Izin ",-1)),l(A),l(y,{dense:"",label:"Kembali",icon:"manage_history","no-caps":"",class:"q-px-sm bg-green-10 text-green-12",onClick:t[1]||(t[1]=m=>k.value=!0)})]),_:1}),l(x,{class:"q-pa-sm"},{default:s(()=>[a("table",lt,[a("tbody",null,[a("tr",null,[t[8]||(t[8]=a("td",{class:"text-italic"},"Sifat:",-1)),a("td",null,o(e.value.sifat),1)]),a("tr",null,[t[9]||(t[9]=a("td",{class:"text-italic"},"Pengajuan:",-1)),a("td",null,o(e.value.pengajuan),1)]),a("tr",null,[t[10]||(t[10]=a("td",{class:"text-italic"},"Durasi:",-1)),a("td",null,o(e.value.durasi+" hari"),1)]),a("tr",null,[t[11]||(t[11]=a("td",{class:"text-italic"},"Dari Tanggal:",-1)),a("td",null,o(i(w)(e.value.dari_tgl)+" | "+i(I)(i(Q)(e.value.dari_tgl))),1)]),a("tr",null,[t[12]||(t[12]=a("td",{class:"text-italic"},"Sampai Tanggal:",-1)),a("td",null,o(i(w)(e.value.sampai_tgl)+" | "+i(I)(i(Q)(e.value.sampai_tgl))),1)]),a("tr",null,[t[13]||(t[13]=a("td",{class:"text-italic"},"Keperluan:",-1)),a("td",null,o(e.value.keperluan),1)]),a("tr",null,[t[14]||(t[14]=a("td",{class:"text-italic"},"Keterangan:",-1)),a("td",null,o(e.value.keterangan??"-"),1)]),a("tr",null,[t[15]||(t[15]=a("td",{class:"text-italic"},"Tujuan:",-1)),a("td",null,o(e.value.tujuan),1)]),a("tr",null,[t[16]||(t[16]=a("td",{class:"text-italic"},"Catatan:",-1)),a("td",null,o(e.value.catatan||"-"),1)]),a("tr",null,[a("td",st,[l(L,{color:"green-8"})])]),a("tr",null,[t[17]||(t[17]=a("td",{class:"text-italic"},"Kembali:",-1)),a("td",null,o(i(w)(e.value.kembali_tgl)+" | "+i(I)(i(Q)(e.value.kembali_tgl))),1)]),a("tr",null,[t[18]||(t[18]=a("td",{class:"text-italic"},"Status:",-1)),a("td",null,o(e.value.status?V(e.value.status):""),1)])])]),l($,{showing:r.value},null,8,["showing"])]),_:1})]),_:1})]),_:1})):F("",!0)]),_:1})])]),a("div",nt,[a("div",ot,[l(J,{class:"",santri_id:e.value.santri_id},null,8,["santri_id"])])])]),l(T,{modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=m=>_.value=m)},{default:s(()=>[l(X,{data:e.value,onSuccessDelete:t[2]||(t[2]=m=>u.$router.go(-1)),onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"]),l(T,{modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=m=>k.value=m)},{default:s(()=>[l(h,{data:{id:e.value.id,kembali_tgl:e.value.kembali_tgl},onSuccessSubmit:p},null,8,["data"])]),_:1},8,["modelValue"]),l(T,{modelValue:v.value,"onUpdate:modelValue":t[5]||(t[5]=m=>v.value=m)},{default:s(()=>[l(G,{url:c.value},null,8,["url"])]),_:1},8,["modelValue"])]),_:1})}}},Zt=Z(it,[["__scopeId","data-v-0081a45b"]]);export{Zt as default};
