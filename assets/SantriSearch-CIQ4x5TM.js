import{Q as d}from"./QSpace-DTUJXiEo.js";import{aa as y,ac as S,ai as T,q as x,s as v,c as C,o as N,w as n,g as r,Q as u,a as s,e as c,G as p,m as A,n as D,a4 as w,l as I}from"./index-D027sPii.js";import{C as Q}from"./ClosePopup-Ci37ZDCN.js";import{V as m,D as O}from"./dataTables-BQ-NDTIO.js";import{a as B}from"./index-BDbb42pe.js";import{d as E}from"./dialog-store-DqhzdH58.js";import{s as f}from"./santri-store-BQO2kzO0.js";import{e as M,d as R}from"./index-j_lT3OE8.js";import{t as W}from"./array-object-BytDdNh7.js";import"./_commonjsHelpers-DsqdWQfm.js";const J={__name:"SantriSearch",setup(q){const g=E(),{searchSantri:i,crudSantri:k}=y(g),h=()=>{f().$reset(),f().setNew(),k.value=!0},o=S(),_=T().token||"",l=`${B.defaults.baseURL}/santri/search`,b={Authorization:`Bearer ${_}`};m.use(O);const $=x({processing:!0,serverSide:!0,responsive:!0,ajax:{url:l,type:"POST",headers:b,error:a=>{const e=a.responseJSON?.message;e?W(e).forEach(t=>M(t)):console.log(`Error during get ${l}`,a)}},order:[],columns:[{title:"ID",data:"id",render:function(a,e,t){return`<button onclick='copyId(${t.id})' class='dt-btn-flat' title='Klik/Tap untuk menyalin ID'>${t.id}</button>`}},{title:"Nama",data:"nama",render:function(a,e,t){return`<span class="dt-link" onclick='goToSantri(${t.id})'>${t.nama}</span>`}},{title:"Alamat",data:"alamat_pendek",render:function(a,e){return e==="display"&&a.length>50?`<span title='${a}'>${a.substr(0,50)}&mldr;</span>`:a}},{title:"Data Akhir",data:"data_akhir"},{title:"NIK",data:"nik"},{title:"Wali",render:function(a,e,t){return`<span class="dt-link" onclick='goToWali(${t.wali_id})'>${t.wali_nama} (${t.wali_status})</span>`}},{title:"Ortu",render:function(a,e,t){return`<span class="dt-link" onclick='goToOrtu(${t.ortu_id})'>${t.ayah} | ${t.ibu}</span>`}}],language:{search:"Cari:",zeroRecords:"Tidak data data untuk ditampilkan. Coba kata kunci yang lain!",info:"Menampilkan _START_ hingga _END_, dari total _TOTAL_ data",infoFiltered:"(disaring dari _MAX_ total data)",paginate:{first:"↑",previous:"←",next:"→",last:"↓"},lengthMenu:"_MENU_ Perhalaman"},autoWidth:!1,scrollX:!0,search:{return:!0}});return v(()=>{document.goToSantri=a=>{o.push(`/santri/${a}`)},document.goToWali=a=>{o.push(`/wali/${a}`)},document.goToOrtu=a=>{o.push(`/ortu/${a}`)},document.copyId=a=>{navigator.clipboard.writeText(a),R(`ID (${a}) sudah disalin/dicopy ke clipboard`),i.value=!1}}),(a,e)=>(N(),C(I,{style:{width:"100%"},flat:""},{default:n(()=>[r(u,{class:"bg-green-7 text-green-1 q-pa-sm flex items-center"},{default:n(()=>[e[0]||(e[0]=s("h2",{class:"text-subtitle1 no-margin text-green-11"},"Cari Santri",-1)),r(d),r(c,{label:"Tambah",color:"green-12",class:"text-green-10 q-px-sm",icon:"add","no-caps":"",dense:"",onClick:h})]),_:1}),r(u,null,{default:n(()=>[r(p(m),{class:"display table nowrap dt",options:$.value,style:{overflow:"hidden"},id:"tabel"},null,8,["options"])]),_:1}),r(A,{class:"bg-green-6"},{default:n(()=>[e[1]||(e[1]=s("div",{class:"text-body2 text-green-11 text-italic"},[s("div",null,"▪️ Cari berdsarkan ID, nama santri, NIK, alamat, atau data akhir"),s("div",null,"▪️ simbol % = karakter apapun")],-1)),r(d),D(r(c,{label:"Tutup",color:"green-1",class:"text-green-10","no-caps":"",id:"btn-close-santri-search"},null,512),[[Q],[w,p(i)]])]),_:1})]),_:1}))}};export{J as default};
