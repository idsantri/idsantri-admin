import{Q as U}from"./QList-BammrKAV.js";import{Q as b}from"./QSelect-k-tmmdSE.js";import{q as v,ae as D,s as B,N as H,E as w,c as I,o as N,w as t,g as e,Q as d,l as K,n as P,G as n,ag as c,a9 as R,p as O,a as j,a4 as z,aq as E,e as F,J}from"./index-pZrLq5mJ.js";import{Q as k}from"./QTd-GU3r1Wx-.js";import{Q as L}from"./QTable-D6cs9vp4.js";import{u as M}from"./apb-accounts-store-DHgMw0iv.js";import{_ as W}from"./ApbAccountForm-CJyFFGgg.js";import{T as X}from"./ToAccountGroup-D9lqU6Kn.js";import{T as Y}from"./ToAccountAsset-BYjyfjcJ.js";import"./QField-ByZgUA8d.js";import"./QChip-CwCryKcV.js";import"./QItem-BFfMJvn2.js";import"./QItemLabel-Bwx5WFYM.js";import"./QMenu-BSk4QlWC.js";import"./selection-BxqoZMwD.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./QMarkupTable-BREGYPoS.js";import"./use-fullscreen-CKIR0-UK.js";import"./ApbAccount-DWAjAWjF.js";import"./ApiCrud-eTMA_Cyz.js";import"./Api-DigGwjx2.js";import"./index-BM4f_s8_.js";import"./index-DZnVFf85.js";import"./apiPost-I4cgF0Lm.js";import"./ArrayCrud-CByp4EUn.js";import"./QForm-D5YebsyC.js";import"./useCrudForm-CR858gff.js";import"./QBtnDropdown-ZdKGmqjq.js";import"./QBtnGroup-DFOI09UX.js";import"./ClosePopup-Mv3wbYB4.js";import"./apb-account-groups-store-Db-xZUmQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const De={__name:"PageIndex",setup(Z){const u=v(!1),m=v(!1),f=M(),{accounts:_,loading:p,optionsCategory:Q,optionsGroup:V,filterText:r,filterCategory:s,filterGroup:i,filteredAccounts:y}=D(f),{toggleHidden:T,loadAll:x,add:A}=f,C=o=>{o.hidden=0,A(o)},g=async()=>{await x(),m.value=!0,i.value="",s.value="",r.value=""},h=async(o,l)=>{await T(o,l)};B(async()=>{m.value=!1,_.value?.length==0&&await g()}),H(s,()=>{i.value=""});const q=[{name:"id",label:"ID",align:"center",field:"id",sortable:!0},{name:"category__normal_balance",label:"Kategori",align:"left",field:o=>`${o.category} (${o.normal_balance})`,sortable:!0},{name:"group",label:"Grup",field:"group",align:"left",sortable:!0},{name:"name",label:"Nama Akun",align:"left",field:"name",sortable:!0,style:"white-space: normal; word-wrap: break-word;"},{name:"hidden",label:"Hidden",field:"hidden",format:o=>o,align:"center",sortable:!0}];return(o,l)=>{const S=w("CardHeader"),$=w("CardPage");return N(),I($,null,{default:t(()=>[e(S,{title:"Daftar Akun",onOnReload:g,"show-add":!0,onOnAdd:l[0]||(l[0]=a=>u.value=!0)},{more:t(()=>[e(U,null,{default:t(()=>[e(X),e(Y)]),_:1})]),_:1}),e(d,{class:"q-pt-sm q-pb-none q-px-sm"},{default:t(()=>[e(K,{bordered:"",flat:""},{default:t(()=>[e(d,{class:"tw:grid tw:sm:flex tw:sm:justify-between tw:gap-2 q-pa-sm"},{default:t(()=>[e(b,{dense:"",class:"full-width",outlined:"",label:"Kategori Akun","emit-value":"","map-options":"",modelValue:n(s),"onUpdate:modelValue":l[1]||(l[1]=a=>c(s)?s.value=a:null),options:n(Q),loading:n(p),clearable:"",behavior:"menu"},null,8,["modelValue","options","loading"]),e(b,{dense:"",class:"full-width",outlined:"",label:"Group","emit-value":"","map-options":"",modelValue:n(i),"onUpdate:modelValue":l[2]||(l[2]=a=>c(i)?i.value=a:null),options:n(V),loading:n(p),clearable:"",behavior:"menu"},null,8,["modelValue","options","loading"]),e(R,{class:"full-width",outlined:"",dense:"",debounce:"300",modelValue:n(r),"onUpdate:modelValue":l[3]||(l[3]=a=>c(r)?r.value=a:null),placeholder:"Cari data akun/rekening...",clearable:""},{append:t(()=>[e(O,{name:"search"})]),_:1},8,["modelValue"])]),_:1}),P(e(d,{class:"bg-warning q-pa-xs text-black"},{default:t(()=>[...l[6]||(l[6]=[j("div",{class:"text-caption text-center"}," Data tidak realtime! Klik tombol muat ulang untuk mendapatkan data terbaru. ",-1)])]),_:1},512),[[z,!m.value]])]),_:1})]),_:1}),e(d,{class:"q-pa-sm"},{default:t(()=>[e(L,{bordered:"",flat:"",rows:n(y),loading:n(p),"rows-per-page-options":[10,25,50,100,0],class:"dt",columns:q,filter:n(r),"no-data-label":"Tidak ada data untuk ditampilkan!","no-results-label":"Tidak ditemukan kata kunci yang sesuai dengan pencarian Anda!","row-key":"id"},{"body-cell-id":t(a=>[e(k,{props:a},{default:t(()=>[e(F,{label:a.value,"no-caps":"",size:"sm",outline:"",class:"text-green-10",to:`/apb/accounts/${a.value}`},null,8,["label","to"])]),_:2},1032,["props"])]),"body-cell-hidden":t(a=>[e(k,{props:a},{default:t(()=>[e(E,{"model-value":a.value,"true-value":!0,"false-value":!1,"checked-icon":"check","unchecked-icon":"clear",color:"negative","onUpdate:modelValue":(G,ee)=>h(G,a.row.id)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:1},8,["rows","loading","filter"])]),_:1}),e(J,{persistent:"",modelValue:u.value,"onUpdate:modelValue":l[5]||(l[5]=a=>u.value=a)},{default:t(()=>[e(W,{data:{},onSuccessSubmit:l[4]||(l[4]=a=>{C(a),o.$router.push(`/apb/accounts/${a.id}`)})})]),_:1},8,["modelValue"])]),_:1})}}};export{De as default};
