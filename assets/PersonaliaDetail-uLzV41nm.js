import{ab as I,aa as sa,A as v,q as na,W as J,f as y,o as d,b as e,w as t,Q as C,v as h,g as w,a as _,F as S,z as L,t as f,y as D,G as N,C as O,B as j,c as Q,ad as R,e as z,a7 as $,H as G,x as W,aj as oa}from"./index-Bjf6jOrL.js";import{Q as ra}from"./QPage-CdhCNm0R.js";import{Q as H}from"./QToolbarTitle-DexAJwlS.js";import{Q as P}from"./QToolbar-Bk7787Iv.js";import{Q as ua}from"./QSpinnerCube-gZ5RTjBb.js";import{Q as da}from"./QImg-B6Zk7vAt.js";import{a as A}from"./api-get-SNzLoUbu.js";import{f as ia}from"./format-date-DlwYCgkJ.js";import{_ as ma}from"./ImageUploader-A-PU7hUt.js";import{_ as pa}from"./PersonaliaForm-DnahqoPM.js";import{f as ca}from"./format-text-DnCGEu2I.js";import{Q as K}from"./QTab-XFMQ4mbQ.js";import{Q as _a}from"./QTabs-BtnDgiOP.js";import{Q as va,a as E}from"./QTabPanels-_TfTBNqt.js";import{Q as X}from"./QSkeleton-Dg6K1xsX.js";import{Q as U}from"./QItemLabel-Clz1Xits.js";import{Q as Y,a as T}from"./QItemSection-D4HO8eJd.js";import{Q as Z}from"./QList-DrJ2aexG.js";import{g as aa}from"./array-object-BytDdNh7.js";import{Q as ea}from"./QForm-CQ61mLzh.js";import{_ as fa}from"./InputSelectTingkatPendidikan-BMK8qvEm.js";import{_ as M}from"./InputSelectArray-DTVIQacW.js";import{u as ta}from"./useCrudForm-D9Qtfi7L.js";import{A as la}from"./ApiCrud-Cz799mD5.js";import{_ as ga}from"./InputSelectTahunAjaran-iRPod9hn.js";import{Q as ba}from"./QSelect-BCDk0qVl.js";import"./index-DV84x6RN.js";import"./index-BRCx2Z00.js";import"./api-error-C_UMNjEa.js";import"./id-BuNGTsqN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CarouselAlamat-DYdOC_a3.js";import"./use-panel-CHz0jR3I.js";import"./touch-BjYP5sR0.js";import"./selection-C-yT_gHt.js";import"./use-fullscreen-CRS_nenH.js";import"./QBtnGroup-BZf-O_co.js";import"./alamat-store-CabEHZOh.js";import"./Alamat-v7XQG7yJ.js";import"./Api-v4AqqFFf.js";import"./QBtnDropdown-CATaFFO-.js";import"./QMenu-DO2tkYnP.js";import"./ClosePopup-Ced6Y-Os.js";import"./hijri--5qD4USW.js";import"./format-number-B34ySHL_.js";import"./InputSelectKotaLahir-CcjCUtJI.js";import"./QResizeObserver-DNb83RcI.js";import"./rtl-DFPa-2ov.js";import"./lists-store-Ddm_j1AX.js";import"./DropDownAfter-BWotgQpI.js";import"./Lists-DcfSSLIw.js";import"./QChip-CKBUwVMq.js";import"./format-CJebrXOQ.js";const ha={key:0},ka={key:1,class:"row"},ya={class:"col-4 q-pr-sm"},xa={class:"col"},Va={class:"text-caption text-italic"},qa={class:"q-mb-sm"},wa={__name:"CardIdentitas",emits:["on-load"],setup(x,{emit:m}){const r=I(),o=sa(),a=v({}),i=v(!1),k=v(!1),g=m;async function q(c){c.id==r.params.id?(a.value=c,g("on-load",a.value)):o.push(`/personalia/${c.id}`)}async function V(){const c=await A({endPoint:`aparatur/${r.params.id}`,loading:i});c&&(a.value=c.aparatur,await p(),g("on-load",a.value))}async function p(){const c=await A({endPoint:`images/aparatur/${a.value.id}`});c&&(a.value.image=c.image_url)}const u=na(()=>({Nama:`${a.value.nama?.toUpperCase()} (${a.value.sex?.toUpperCase()})`,Alamat:ca(a.value.jl,a.value.rt,a.value.rw,a.value.desa,a.value.kecamatan,a.value.kabupaten,a.value.provinsi,a.value.kode_pos),Kelahiran:`${a.value.tmp_lahir||"-"}, ${ia(a.value.tgl_lahir)}`,Telepon:a.value.telepon||"-",Email:a.value.email||"-"}));J(async()=>{r.params.id&&await V()});const s=v(!1),n=c=>s.value=c;async function F(){s.value=!1,await p()}return(c,b)=>(d(),y(S,null,[e(D,{flat:"",bordered:"",class:""},{default:t(()=>[e(C,{class:"bg-green-7 no-padding"},{default:t(()=>[e(P,{class:"no-padding no-margin"},{default:t(()=>[e(H,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...b[4]||(b[4]=[h(" Identitas ",-1)])]),_:1}),e(w,{dense:"",flat:"",class:"q-px-md q-mr-sm","no-caps":"",icon:"sync",color:"green-2",onClick:V}),e(w,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:b[0]||(b[0]=l=>k.value=!0)})]),_:1})]),_:1}),e(C,{class:"q-pa-sm"},{default:t(()=>[i.value?(d(),y("div",ha,[e(ua,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):(d(),y("div",ka,[_("div",ya,[e(da,{src:a.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),e(w,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:b[1]||(b[1]=l=>s.value=!0)})]),_("div",xa,[(d(!0),y(S,null,L(u.value,(l,B)=>(d(),y("div",{key:B},[_("div",Va,f(B),1),_("div",qa,f(l),1)]))),128))])]))]),_:1})]),_:1}),e(N,{persistent:"",modelValue:k.value,"onUpdate:modelValue":b[3]||(b[3]=l=>k.value=l)},{default:t(()=>[e(pa,{data:a.value,onSuccessSubmit:q,onSuccessDelete:b[2]||(b[2]=l=>c.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"]),e(ma,{"show-uploader":s.value,url:`/images/aparatur/${O(r).params.id}`,"img-format":"webp",onUpdateUploader:n,onSuccessUpload:F},null,8,["show-uploader","url"])],64))}};class Qa extends la{constructor(){super("aparatur-madrasah")}}const $a=new Qa,ja={__name:"PersonaliaMadrasahForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(x,{emit:m}){const r=x,o=m,a=v({...r.data}),i=!r.data.id,{handleDelete:k,handleCreate:g,handleUpdate:q,loading:V}=ta($a,{emit:o,responseKey:"aparatur_madrasah"}),p=async()=>{const s={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,tingkat_id:a.value.tingkat_id,kelas:a.value.kelas,ruang:a.value.ruang,keterangan:a.value.keterangan};return i?await g(s,!0):await q(r.data.id,s,!0)},u=async()=>await k(r.data.id);return(s,n)=>{const F=j("FormHeader"),c=j("FormLoading"),b=j("FormActions");return d(),Q(D,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ea,{onSubmit:R(p,["prevent"])},{default:t(()=>[e(F,{title:"Input Jabatan Madrasiyah","is-new":i}),O(V)?(d(),Q(c,{key:0})):z("",!0),e(C,null,{default:t(()=>[e($,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(M,{modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.jabatan=l),url:"jabatan-madrasiyah",label:"Jabatan",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"]},null,8,["modelValue","rules"]),e(ga,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.th_ajaran_h=l),rules:[l=>!!l||"Harus diisi!"],class:"q-my-sm"},null,8,["modelValue","rules"]),e(fa,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.tingkat_id=l),class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"]},null,8,["modelValue","rules"]),e(M,{modelValue:a.value.kelas,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.kelas=l),url:"kelas",label:"Kelas",class:"q-my-sm"},null,8,["modelValue"]),e($,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.ruang=l)},null,8,["modelValue"]),e($,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=l=>a.value.keterangan=l),autogrow:""},null,8,["modelValue"])]),_:1}),e(b,{"btn-delete":!i,onOnDelete:u},null,8,["btn-delete"])]),_:1})]),_:1})}}},Ua={class:"q-card--bordered"},Ca={class:"q-px-md"},Sa={key:0},Fa={key:1},Da={class:"text-bold"},Aa={__name:"CardJabatanMadrasah",setup(x){const m=I(),r=v(!1),o=v([]),a=v(!1),i=v({}),k=G("aparatur");async function g(){if(m.params.id){const p=await A({endPoint:"aparatur-madrasah",params:{aparatur_id:m.params.id},loading:r});p&&(o.value=p.aparatur_madrasah)}}J(async()=>await g());const q=()=>{i.value={aparatur_id:k.value.id,nama:k.value.nama},a.value=!0},V=p=>{i.value=aa(o.value,p),a.value=!0};return(p,u)=>(d(),y(S,null,[_("div",Ua,[_("div",Ca,[e(P,{class:"no-padding no-margin"},{default:t(()=>[e(H,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...u[1]||(u[1]=[h(" Jabatan Madrasah ",-1)])]),_:1}),e(w,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(W,{class:""}),e(Z,{separator:"",class:""},{default:t(()=>[r.value?(d(),y("div",Sa,[e(X,{height:"80px"})])):o.value?.length?(d(!0),y(S,{key:2},L(o.value,s=>(d(),Q(Y,{key:s.id,class:""},{default:t(()=>[e(T,null,{default:t(()=>[e(U,{overline:""},{default:t(()=>[h(f(s.th_ajaran_h)+" | "+f(s.th_ajaran_m),1)]),_:2},1024),e(U,{lines:"1"},{default:t(()=>[_("span",Da,f(s.jabatan),1),h("; "+f(s.tingkat)+f(s.kelas?"; "+s.kelas:"")+" "+f(s.ruang?"("+s.ruang+")":""),1)]),_:2},1024),e(U,{caption:"",class:"text-italic"},{default:t(()=>[h(f(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(T,{side:""},{default:t(()=>[e(w,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:n=>V(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),y("div",Fa,[...u[2]||(u[2]=[_("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[h(" Tidak data data untuk ditampilkan."),_("br"),h("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(N,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=s=>a.value=s)},{default:t(()=>[e(ja,{data:i.value,onSuccessSubmit:g,onSuccessDelete:g},null,8,["data"])]),_:1},8,["modelValue"])],64))}};class Ta extends la{constructor(){super("aparatur-quran")}}const Ma=new Ta,Ha={__name:"PersonaliaQuranForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(x,{emit:m}){const r=x,o=m,a=v({jabatan:"Muallim",...r.data}),i=!r.data?.id,{handleDelete:k,handleCreate:g,handleUpdate:q,loading:V}=ta(Ma,{emit:o,responseKey:"aparatur_quran"}),p=async()=>{const s={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,marhalah:a.value.marhalah,faslah:a.value.faslah,ruang:a.value.ruang,keterangan:a.value.keterangan};return i?await g(s,!0):await q(r.data.id,s,!0)},u=async()=>await k(r.data.id);return(s,n)=>{const F=j("FormHeader"),c=j("FormLoading"),b=j("FormActions");return d(),Q(D,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ea,{onSubmit:R(p,["prevent"])},{default:t(()=>[e(F,{title:"Input Jabatan Madrasiyah","is-new":i}),O(V)?(d(),Q(c,{key:0})):z("",!0),e(C,null,{default:t(()=>[e($,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e($,{dense:"",class:"q-my-sm",outlined:"",filled:"",label:"Jabatan",modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.jabatan=l),disable:""},null,8,["modelValue"]),e(M,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.th_ajaran_h=l),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],selected:a.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),e(ba,{dense:"",outlined:"",modelValue:a.value.marhalah,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.marhalah=l),label:"Marhalah *",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],options:["Ula","Wustho","Ulya"]},null,8,["modelValue","rules"]),e(M,{modelValue:a.value.faslah,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.faslah=l),url:"faslah-quran",label:"Faslah/Kelas",class:"q-my-sm"},null,8,["modelValue"]),e($,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.ruang=l)},null,8,["modelValue"]),e($,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=l=>a.value.keterangan=l),autogrow:""},null,8,["modelValue"])]),_:1}),e(b,{"btn-delete":!i,onOnDelete:u},null,8,["btn-delete"])]),_:1})]),_:1})}}},Pa={class:"q-card--bordered"},Ia={class:"q-px-md"},Ja={key:0},La={key:1},Na={__name:"CardJabatanQuran",setup(x){const m=I(),r=v(!1),o=v([]),a=v(!1),i=v({}),k=G("aparatur");async function g(){if(m.params.id){const p=await A({endPoint:"aparatur-quran",params:{aparatur_id:m.params.id},loading:r});p&&(o.value=p.aparatur_quran)}}J(async()=>await g());const q=()=>{i.value={aparatur_id:k.value.id,nama:k.value.nama},a.value=!0},V=p=>{i.value=aa(o.value,p),a.value=!0};return(p,u)=>(d(),y(S,null,[_("div",Pa,[_("div",Ia,[e(P,{class:"no-padding no-margin"},{default:t(()=>[e(H,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...u[1]||(u[1]=[h(" Jabatan Quran ",-1)])]),_:1}),e(w,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(W,{class:""}),e(Z,{separator:"",class:""},{default:t(()=>[r.value?(d(),y("div",Ja,[e(X,{height:"80px"})])):o.value?.length?(d(!0),y(S,{key:2},L(o.value,s=>(d(),Q(Y,{key:s.id,class:""},{default:t(()=>[e(T,null,{default:t(()=>[e(U,{overline:""},{default:t(()=>[h(f(s.th_ajaran_h)+" | "+f(s.th_ajaran_m),1)]),_:2},1024),e(U,{lines:"1"},{default:t(()=>[u[3]||(u[3]=_("span",{class:"text-bold"},"Muallim",-1)),h("; "+f(s.marhalah)+f(s.faslah?"; "+s.faslah:"")+" "+f(s.ruang?"("+s.ruang+")":""),1)]),_:2},1024),e(U,{caption:"",class:"text-italic"},{default:t(()=>[h(f(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(T,{side:""},{default:t(()=>[e(w,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:n=>V(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),y("div",La,[...u[2]||(u[2]=[_("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[h(" Tidak data data untuk ditampilkan."),_("br"),h("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(N,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=s=>a.value=s)},{default:t(()=>[e(Ha,{data:i.value,onSuccessSubmit:g,onSuccessDelete:g},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Oa={__name:"CardJabatan",setup(x){const m=v("madrasah");return(r,o)=>(d(),Q(D,{flat:"",bordered:"",class:""},{default:t(()=>[e(C,{class:"bg-green-7 no-padding"},{default:t(()=>[e(P,{class:"no-padding no-margin"},{default:t(()=>[e(H,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...o[2]||(o[2]=[h(" Jabatan ",-1)])]),_:1}),e(_a,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a),"narrow-indicator":"",class:"text-green-11","no-caps":"",dense:""},{default:t(()=>[e(K,{name:"madrasah",label:"Madrasah"}),e(K,{name:"quran",label:"Quran"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(va,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=a=>m.value=a),animated:"",class:"q-pa-sm"},{default:t(()=>[e(E,{name:"madrasah",class:"no-padding"},{default:t(()=>[e(Aa)]),_:1}),e(E,{name:"quran",class:"no-padding"},{default:t(()=>[e(Na)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ba={class:"col-12 col-md-6 q-pa-sm"},Ka={class:"col-12 col-md-6 q-pa-sm"},Ke={__name:"PersonaliaDetail",setup(x){const m=v({});return oa("aparatur",m),(r,o)=>{const a=j("CardHeader");return d(),Q(ra,{class:"q-pa-sm"},{default:t(()=>[e(D,null,{default:t(()=>[e(a,{title:"Detail Personalia",showReload:!1},{left:t(()=>[e(w,{"no-caps":"",label:"Personalia",icon:"badge",dense:"",color:"green-13",class:"q-px-md q-mr-sm text-green-10",to:"/personalia"})]),_:1}),e(C,{class:"row no-padding",style:{"max-width":"1200px"}},{default:t(()=>[_("div",Ba,[e(wa,{onOnLoad:o[0]||(o[0]=i=>m.value=i)})]),_("div",Ka,[e(Oa)])]),_:1})]),_:1})]),_:1})}}};export{Ke as default};
