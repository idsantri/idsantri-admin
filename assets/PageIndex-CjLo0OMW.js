import{Q as x}from"./QSpace-eyQBL1gg.js";import{q as o,ad as y,s as h,b as k,o as q,g as l,w as r,Q as c,a as t,e as v,a9 as Q,p as j,t as u,G as p,l as w}from"./index-BGObraKh.js";import{Q as I}from"./QTable-yNQtEhO1.js";import{s as T,a as C,b as D}from"./utils-CiaEZYac.js";import{c as L}from"./format-date-DBaFa2rd.js";import{_ as N}from"./FilterTahunAjaran-BBz3PSqn.js";import{I as R}from"./Iuran-CH-AuWHy.js";import"./QList-BBsNFqg5.js";import"./QMarkupTable-CJNTueb6.js";import"./QSelect-D5tM8e3R.js";import"./QField-Br2Qbnc0.js";import"./QChip-Ai3wvF9-.js";import"./QItem-DfMJTwsS.js";import"./QItemLabel-B-_aW8yV.js";import"./QMenu-DmBcKTCH.js";import"./selection-DjrSooP-.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./use-fullscreen-Dw8aA46T.js";import"./id-BuNGTsqN.js";import"./QToolbar-dDBfF8HM.js";import"./InputSelectArray-CcicKbUa.js";import"./lists-store-BIY5Pte8.js";import"./ArrayCrud-CByp4EUn.js";import"./DropDownAfter-bo7CSxZS.js";import"./QBtnDropdown-C__d8B2r.js";import"./QBtnGroup-zu-IcviX.js";import"./ClosePopup-C-G3Wbep.js";import"./Lists-Cwa5jAKq.js";import"./ApiCrud-BSS5T12d.js";import"./Api-CDu9vKW9.js";import"./index-CWFlz0I4.js";import"./index-pzyLC6ns.js";import"./apiPost-B_iRVN6p.js";const A=["innerHTML"],B={class:""},M={class:""},S={class:""},ya={__name:"PageIndex",setup(V){const d=o({}),n=o([]),i=o(!1),{params:f}=y(),m=o("");async function g(){try{i.value=!0;const e=await R.getAll({params:{th_ajaran_h:f.thAjaranH}});n.value=e.iuran??[]}catch(e){console.error("ðŸš€ ~ loadData ~ error:",e)}finally{i.value=!1}}h(async()=>{f.thAjaranH?await g():n.value=[]});const _=[{name:"th_ajaran_h",label:"Tahun Ajaran",align:"left",field:"th_ajaran_h",sortable:!0},{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"item",label:"Iuran",align:"left",field:"item",sortable:!0},{name:"nominal",label:"Nominal",align:"right",field:"nominal",format:e=>`${e.toRupiah()}`,sortable:!0},{name:"lunas",label:"Lunas",align:"left",field:e=>e.lunas?L(e.lunas,"yyyy-MM-dd"):"Belum dibayar",sortable:!0},{name:"kasir",label:"Penerima",align:"left",field:"kasir",sortable:!0}];return(e,a)=>(q(),k("div",null,[l(N,{"start-url":"/iuran/th-ajaran",onDataFilter:a[0]||(a[0]=s=>d.value=s),bordered:"",flat:""}),l(w,{class:"q-mt-sm",bordered:"",flat:""},{default:r(()=>[l(c,{class:"bg-green-8 text-green-1 text-subtitle1 q-pa-sm flex flex-center"},{default:r(()=>[t("span",{innerHTML:d.value.display||""},null,8,A),l(x),l(v,{dense:"",icon:"sync",onClick:g,class:"q-px-sm q-mr-sm",flat:""}),l(v,{dense:"",icon:"print",label:"Cetak","no-caps":"",color:"green-11 q-px-md",class:"text-green-10 q-mr-sm",to:"/info/download"})]),_:1}),l(I,{class:"dt q-pa-sm",rows:n.value,loading:i.value,filter:m.value,columns:_,"rows-per-page-options":[10,25,50,75,100,0],"no-data-label":"Silakan tentukan filter tanggal!","no-results-label":"Tidak ditemukan kata kunci yang sesuai dengan pencarian Anda!","row-key":"name",flat:"",onRowClick:a[2]||(a[2]=(s,b,$)=>e.$router.push(`/iuran/santri/${b.santri_id}/${b.th_ajaran_h}`))},{"top-left":r(()=>[...a[3]||(a[3]=[t("div",{class:"text-subtitle1 text-green-10"},"Data Iuran",-1)])]),"top-right":r(()=>[l(Q,{outlined:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=s=>m.value=s),placeholder:"Cari",type:"search"},{append:r(()=>[l(j,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","loading","filter"]),l(c,{class:"bg-green-7 text-green-1 text-subtitle1 q-px-sm q-py-xs flex items-center justify-between"},{default:r(()=>[t("div",B,[a[4]||(a[4]=t("em",null,"Estimasi Pendapatan: ",-1)),t("strong",null,u(p(T)(n.value).toRupiah()),1)]),t("div",M,[a[5]||(a[5]=t("em",null,"Total Lunas: ",-1)),t("strong",null,u(p(C)(n.value).toRupiah()),1)]),t("div",S,[a[6]||(a[6]=t("em",null,"Total Tidak Lunas: ",-1)),t("strong",null,u(p(D)(n.value).toRupiah()),1)])]),_:1})]),_:1})]))}};export{ya as default};
