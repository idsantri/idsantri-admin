import{Q as p}from"./QItemLabel-L7dSSnSA.js";import{Q as y,a as h}from"./QItem-BbodOwCO.js";import{Q as S}from"./QSelect-aBcEPTX0.js";import{q as u,s as Q,c as V,o as O,w as i,g as l,Q as q,bG as w,bH as x,v as c,t as m,a9 as D,l as B}from"./index-DU_HTlLB.js";import{S as C}from"./Santri-jJ7nPQ4X.js";import{n as N}from"./index-Bkc3wIyA.js";const z={__name:"InputSelectSantriId",props:{activeOnly:{type:Boolean},data:{type:Object}},emits:["emitInput"],setup(f,{emit:v}){const s=f,_=v,t=u({}),r=u(!1),o=u([]);function b(){t.value.nama=o.value.find(a=>a.id==t.value?.santri_id)?.nama,t.value.data_akhir=o.value.find(a=>a.id==t.value?.santri_id)?.data_akhir,_("emitInput",t.value)}Q(async()=>{const a={santri_id:s.data?.santri_id,nama:s.data?.nama,data_akhir:s.data?.data_akhir};Object.assign(t.value,a)});async function I(a){try{r.value=!0;const e=await C.getIds({active_only:!!s.activeOnly,q:a});return e.lists.length||N("ID Santri tidak ditemukan"),e.lists}finally{r.value=!1}}async function g(a,e,n){if(!a){e(()=>{o.value=[]});return}if(a.length<3){n();return}const k=await I(a);e(()=>o.value=k,d=>{a!==""&&d.options.length&&(d.setOptionIndex(-1),d.moveOptionSelection(1,!0))})}return(a,e)=>(O(),V(B,{class:"",flat:"",bordered:""},{default:i(()=>[l(q,{class:"q-pa-sm"},{default:i(()=>[l(S,{dense:"",hint:a.$props.activeOnly?"Hanya menampilkan santri aktif":"Ketikkan ID Santri",outlined:"",label:"ID Santri*",modelValue:t.value.santri_id,"onUpdate:modelValue":[e[0]||(e[0]=n=>t.value.santri_id=n),b],options:o.value,"emit-value":"","map-options":"","option-value":"id","option-label":"id","error-color":"negative",loading:r.value,"input-debounce":"400","use-input":"",clearable:"",onFilter:g,disable:!!t.value.santri_id,behavior:"menu",debounce:"500"},{option:i(n=>[l(y,w(x(n.itemProps)),{default:i(()=>[l(h,null,{default:i(()=>[l(p,null,{default:i(()=>[c(m(n.opt.id)+" â€” "+m(n.opt.nama),1)]),_:2},1024),l(p,{caption:""},{default:i(()=>[c(m(n.opt.data_akhir),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["hint","modelValue","options","loading","disable"]),l(D,{hint:t.value.data_akhir,class:"q-mt-sm",dense:"",outlined:"",label:"Nama",modelValue:t.value.nama,"onUpdate:modelValue":e[1]||(e[1]=n=>t.value.nama=n),disable:"",filled:""},null,8,["hint","modelValue"])]),_:1})]),_:1}))}};export{z as _};
