import{Q as w}from"./QTab-niq8CKVx.js";import{Q as D}from"./QTabs-BdmXZLCP.js";import{Q as U,a as x}from"./QTabPanels-Uyfq8sci.js";import{q as u,s as z,E as k,b as d,o as s,a as c,g as a,e as q,C as E,w as g,a9 as P,af as B,t as A,c as V,Q as C,l as T,f as L,v as j,F as W,D as O}from"./index-B48kyTDV.js";import{Q}from"./QEditor-DXQrhx0W.js";import{C as S}from"./ConfigApp-Bi2fek5u.js";import{Q as N}from"./QForm-DYg4XhX2.js";import{Q as H}from"./QSkeleton-BseSz5k_.js";import{c as F}from"./index-DjEbxsAp.js";import"./QResizeObserver-Cd1DZyJk.js";import"./rtl-DFPa-2ov.js";import"./use-panel-BbV3Gp1z.js";import"./touch-BjYP5sR0.js";import"./selection-CHzf45BF.js";import"./QBtnDropdown-BRIU44F5.js";import"./QBtnGroup-D8hR46Tw.js";import"./QMenu-jUjk97Hz.js";import"./QTooltip-FSKrleIw.js";import"./QItem-Dvyez2OH.js";import"./use-fullscreen-DaYWNQTp.js";import"./Api-C0manBLV.js";import"./index-CtANUnjw.js";import"./apiPost-DSpDAU24.js";const I={class:"flex justify-between items-center q-mb-sm"},J={key:0},M={key:1},R={key:0,class:""},Y=["innerHTML"],G={key:1},K={__name:"PanelProfile",setup(h){const l=u(""),o=u(""),e=u(!1),n=u(!1);async function m(){try{n.value=!0;const t=await S.getAppWali("profile");l.value=t?.profile||""}catch(t){console.error("ðŸš€ ~ fetchData ~ error:",t)}finally{n.value=!1}}z(async()=>{await m()});const v=async()=>{try{n.value=!0,await S.setAppWali({profile:o.value},"profile"),l.value=o.value,e.value=!1}catch(t){console.error("ðŸš€ ~ onSubmit ~ error:",t)}finally{n.value=!1}};function $(){o.value=l.value,e.value=!e.value}return(t,i)=>{const f=k("CardLoading");return s(),d("div",null,[c("div",I,[i[1]||(i[1]=c("div",null,[c("div",{class:"text-italic text-weight-light"}," Teks untuk ditampilkan di halaman beranda Aplikasi Wali Santri ")],-1)),a(q,{dense:"",class:"q-px-sm",icon:e.value?"close":"edit",outline:"",label:e.value?"Batal":"Edit","no-caps":"",onClick:$},null,8,["icon","label"])]),e.value?(s(),d("div",J,[a(Q,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=r=>o.value=r),"min-height":"20rem",disable:n.value,definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:v}},toolbar:[[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:t.$q.lang.editor.fontSize,icon:t.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions","toolbar"])])):(s(),d("div",M,[a(E,{class:"q-mb-sm"}),l.value?(s(),d("div",R,[c("span",{innerHTML:l.value},null,8,Y)])):(s(),d("div",G,[...i[2]||(i[2]=[c("div",{class:""},"Belum diatur",-1)])])),a(f,{showing:n.value},null,8,["showing"])]))])}}},X={class:"flex justify-between items-center"},Z={key:0},ee={key:1},ae={key:0},ne={key:1},te={key:2},oe={class:"text-weight-bold"},le={__name:"PanelCs",setup(h){const l=u(!1),o=u(""),e=u(!1),n=u("");async function m(){try{e.value=!0;const t=await S.getAppWali("cs");n.value=t?.cs||""}catch(t){console.error("ðŸš€ ~ fetchData ~ _err:",t)}finally{e.value=!1}}z(async()=>{await m()});const v=async()=>{try{e.value=!0,await S.setAppWali({cs:o.value},"cs"),n.value=o.value,l.value=!1}catch(t){console.error("ðŸš€ ~ onSubmit ~ error:",t)}finally{e.value=!1}},$=()=>{o.value=n.value,l.value=!l.value};return(t,i)=>(s(),d("div",X,[c("div",null,[i[2]||(i[2]=c("div",{class:"text-italic text-weight-light"},"Nomor WA Customer Service:",-1)),l.value?(s(),d("div",Z,[a(N,{onSubmit:B(v,["prevent"]),class:"flex items-start q-gutter-x-sm"},{default:g(()=>[a(P,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=f=>o.value=f),outlined:"",dense:"",label:"Nomor WA",disable:e.value,clearable:"",placeholder:"628xxxx",rules:[f=>!f||!isNaN(f)||"Hanya angka!"]},null,8,["modelValue","disable","rules"]),a(q,{type:"submit",color:"green-10",outline:"","no-caps":"",disabled:e.value,class:"q-px-sm",loading:e.value,icon:"save",label:"Simpan"},null,8,["disabled","loading"])]),_:1})])):(s(),d("div",ee,[e.value?(s(),d("div",ae,[a(H)])):n.value===""||n.value===null?(s(),d("div",ne,[...i[1]||(i[1]=[c("div",{class:""},"Belum diatur",-1)])])):(s(),d("div",te,[c("div",oe,A(n.value.replace(/(\d{2})(\d{3})(\d{4})(\d{4})/,"$1 $2-$3-$4")),1)]))]))]),a(q,{dense:"",class:"q-px-sm",icon:l.value?"close":"edit",outline:"",label:l.value?"Batal":"Edit","no-caps":"",onClick:$},null,8,["icon","label"])]))}},ie={class:"text-weight-bold"},se={key:0},re=["innerHTML"],de={__name:"CardBanner",props:{banner:{type:Object,default:()=>{}},index:{type:Number,default:0}},emits:["onUpdate","onDelete"],setup(h,{expose:l,emit:o}){const e=o,n=u(!1),m=u(h.banner?.content||"");function v(){e("onUpdate",{id:h.banner.id,content:m.value})}function $(){n.value=!1}return l({setNotEdit:$}),(t,i)=>(s(),V(T,{class:"q-mt-sm",flat:"",bordered:""},{default:g(()=>[a(C,{class:"q-pa-sm bg-green-1 flex justify-between items-center"},{default:g(()=>[c("div",ie,"Banner "+A(h.index+1),1),c("div",null,[a(q,{dense:"",class:"q-px-sm q-mr-sm",icon:n.value?"close":"edit",outline:"",label:n.value?"Batal":"Edit","no-caps":"",onClick:i[0]||(i[0]=f=>n.value=!n.value)},null,8,["icon","label"]),a(q,{dense:"",class:"q-px-sm",icon:"delete",outline:"",label:"Hapus","no-caps":"",color:"negative",onClick:i[1]||(i[1]=f=>t.$emit("onDelete",h.banner.id))})])]),_:1}),a(C,{class:"q-pa-sm"},{default:g(()=>[n.value?(s(),d("div",se,[a(N,{onSubmit:B(v,["prevent"])},{default:g(()=>[a(Q,{modelValue:m.value,"onUpdate:modelValue":i[2]||(i[2]=f=>m.value=f),"min-height":"20rem",definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:v}},toolbar:[[{label:t.$q.lang.editor.align,icon:t.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:t.$q.lang.editor.formatting,icon:t.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:t.$q.lang.editor.fontSize,icon:t.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","definitions","toolbar"])]),_:1})])):(s(),d("div",{key:1,innerHTML:h.banner?.content},null,8,re))]),_:1})]),_:1}))}},ue={class:"flex justify-between items-center q-mb-sm"},ce={key:0},me={key:1},ve={key:0},fe={key:1},pe={__name:"PanelBanner",setup(h){const l=u(""),o=u(!1),e=u([]),n=u(!1),m=u(!1),v=u(null);async function $(r){if(!await F("Yakin menghapus banner ini?"))return;const y=JSON.parse(JSON.stringify(e.value)).filter(b=>b.id!==r);try{o.value=!0,await S.setAppWali({banners:y},"banners"),e.value=y}catch(b){console.error("ðŸš€ ~ onDelete ~ error:",b)}finally{o.value=!1}}async function t(r){const _=JSON.parse(JSON.stringify(e.value)).map(b=>b.id===r.id?{...b,content:r.content}:b),y=_.findIndex(b=>b.id===r.id);try{o.value=!0,await S.setAppWali({banners:_},"bannersa"),e.value=_,m.value=!1,v.value[y].setNotEdit()}catch(b){console.error("ðŸš€ ~ onUpdate ~ error:",b),m.value=!0}finally{o.value=!1}}async function i(){try{o.value=!0;const r=await S.getAppWali("banners");e.value=r?.banners||[]}catch(r){console.error("ðŸš€ ~ fetchData ~ error:",r)}finally{o.value=!1}}z(async()=>{await i()});async function f(){const p=[...JSON.parse(JSON.stringify(e.value)),{id:new Date().getTime(),content:l.value}];try{o.value=!0,await S.setAppWali({banners:p},"banners"),e.value=p,l.value="",n.value=!1}catch(_){console.error("ðŸš€ ~ onSubmit ~ error:",_)}finally{o.value=!1}}return(r,p)=>{const _=k("CardLoading");return s(),d("div",null,[c("div",ue,[p[2]||(p[2]=c("div",null,[c("div",{class:"text-italic text-weight-light"},"Banner Pengumuman")],-1)),a(q,{dense:"",class:"q-px-sm",icon:n.value?"close":"add",outline:"",label:n.value?"Batal":"Baru","no-caps":"",onClick:p[0]||(p[0]=y=>n.value=!n.value)},null,8,["icon","label"])]),n.value?(s(),d("div",ce,[a(N,{onSubmit:B(f,["prevent"])},{default:g(()=>[a(Q,{modelValue:l.value,"onUpdate:modelValue":p[1]||(p[1]=y=>l.value=y),"min-height":"10rem",disable:o.value,definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:f}},toolbar:[[{label:r.$q.lang.editor.align,icon:r.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:r.$q.lang.editor.formatting,icon:r.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:r.$q.lang.editor.fontSize,icon:r.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions","toolbar"])]),_:1})])):L("",!0),n.value?L("",!0):(s(),d("div",me,[e.value.length?(s(),d("div",fe,[(s(!0),d(W,null,O(e.value,(y,b)=>(s(),V(de,{key:y.id,banner:y,index:b,onOnUpdate:t,onOnDelete:$,errorUpdate:m.value,ref_for:!0,ref_key:"cardRef",ref:v},null,8,["banner","index","errorUpdate"]))),128))])):(s(),d("div",ve,[...p[3]||(p[3]=[c("div",{class:"text-center text-italic q-pa-lg text-negative"},[j(" Tidak ada data "),c("br"),j("Silakan tambahkan banner baru ")],-1)])])),a(_,{showing:o.value},null,8,["showing"])]))])}}},Pe={__name:"IndexPage",setup(h){const l=u("banner");return(o,e)=>{const n=k("CardHeader"),m=k("CardPage");return s(),V(m,null,{default:g(()=>[a(n,{title:"Pengaturan Aplikasi Wali Santri",showReload:!1}),a(C,{class:"q-pa-sm"},{default:g(()=>[a(D,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=v=>l.value=v),"inline-label":"","outside-arrows":"","mobile-arrows":"","indicator-color":"green-13","active-color":"green-11",align:"left",class:"bg-green-7 text-green-3 q-mb-sm"},{default:g(()=>[a(w,{name:"banner",label:"Banner","no-caps":""}),a(w,{name:"cs",label:"Nomor CS","no-caps":""}),a(w,{name:"profil",label:"Profil","no-caps":""})]),_:1},8,["modelValue"]),a(U,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=v=>l.value=v),animated:"",class:"rounded-borders q-card--bordered"},{default:g(()=>[a(x,{name:"banner",class:"q-pa-sm"},{default:g(()=>[a(pe)]),_:1}),a(x,{name:"cs",class:"q-pa-sm"},{default:g(()=>[a(le)]),_:1}),a(x,{name:"profil",class:"q-pa-sm"},{default:g(()=>[a(K)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};export{Pe as default};
