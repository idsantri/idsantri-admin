import{B as u,ac as S,X as T,aw as q,C as $,c as m,o as i,w as n,g as s,a as e,Q as b,e as _,y as p,b as B,F as V,A as D,aj as I,D as r,t as l,H as j,l as L}from"./index-BSwPLBvN.js";import{Q as R,a as F}from"./QToolbar-qqbqC3d5.js";import{Q as N}from"./QSpace-D6pCerwp.js";import{Q as A,a as w}from"./QItemSection-WqxvrlOw.js";import{Q as H}from"./QList-Dn-IYx8z.js";import{a as M}from"./api-get-DLoYpnPD.js";import{b as P}from"./format-date-DlwYCgkJ.js";import{a as U,m as E}from"./hijri--5qD4USW.js";import{h as G}from"./tahun-ajaran-Dhryo64N.js";import{_ as K}from"./IzinPesantrenForm-Cg9pcLI-.js";const X={class:"relative-position"},J={class:"flex"},na={__name:"IzinRiwayat",props:{santri_id:{required:!0}},setup(k){const d=k,o=u([]),v=u(!1),f=u(!1),y=u({}),{params:Q}=S();T(async()=>{d.santri_id?await g(d.santri_id):o.value=[]}),q(async()=>{d.santri_id?await g(d.santri_id):o.value=[]});async function g(c){const a=await M({endPoint:"izin-pesantren",params:{santri_id:c},loading:v});a.izin_pesantren&&(o.value=a.izin_pesantren,y.value={santri_id:a.santri.id,nama:a.santri.nama,data_akhir:a.santri.data_akhir})}return(c,a)=>{const x=$("CardLoading");return i(),m(L,{flat:"",bordered:"",class:""},{default:n(()=>[s(b,{class:"bg-green-7 no-padding"},{default:n(()=>[s(R,{class:"no-padding no-margin"},{default:n(()=>[s(_,{icon:"sync","no-caps":"",onClick:a[0]||(a[0]=t=>g(k.santri_id)),flat:"",dense:"",class:"q-pl-sm",color:"green-11",title:"Muat ulang"}),s(F,{class:"text-subtitle1 text-green-11 q-px-none"},{default:n(()=>[...a[4]||(a[4]=[p(" Riwayat Perizinan ",-1)])]),_:1}),s(_,{color:"green-11",outline:"",dense:"","no-caps":"",icon:"add",label:"Tambah",class:"q-mr-sm q-px-md",onClick:a[1]||(a[1]=t=>f.value=!0)})]),_:1})]),_:1}),e("div",X,[o.value?.length?(i(),m(b,{key:1,class:"q-pa-sm"},{default:n(()=>[s(H,{separator:"",bordered:""},{default:n(()=>[(i(!0),B(V,null,D(o.value,(t,C)=>(i(),m(A,{key:C,class:I([t.id==r(Q).id?"bg-green-1":"","q-pa-sm"])},{default:n(()=>[s(w,null,{default:n(()=>[e("table",null,[e("tbody",null,[e("tr",null,[a[6]||(a[6]=e("td",{class:"label"},"Tanggal:",-1)),e("td",J,[p(l(r(P)(t.dari_tgl)+" | "+r(U)(t.dari_tgl))+" ",1),s(N),p(" "+l(r(G)(r(E)(t.dari_tgl))),1)])]),e("tr",null,[a[7]||(a[7]=e("td",{class:"label"},"Izin",-1)),e("td",null,l(t.sifat)+" | "+l(t.durasi)+" hari | "+l(t.pengajuan),1)]),e("tr",null,[a[8]||(a[8]=e("td",{class:"label"},"Keperluan",-1)),e("td",null,l(t.keperluan)+" "+l(t.keterangan?" ("+t.keterangan+")":""),1)]),e("tr",null,[a[9]||(a[9]=e("td",{class:"label"},"Status",-1)),e("td",null,l(t.status),1)])])])]),_:2},1024),s(w,{side:"",class:"no-padding"},{default:n(()=>[s(_,{disable:t.id==r(Q).id,icon:"info",glossy:"",dense:"",round:"",outline:"",color:"green",to:`/keamanan/izin-pesantren/${t.id}`},null,8,["disable","to"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})):(i(),m(b,{key:0,class:"text-italic text-center q-pa-lg"},{default:n(()=>[...a[5]||(a[5]=[p(" Tidak ada untuk ditampilkan ",-1)])]),_:1})),s(x,{showing:v.value},null,8,["showing"])]),s(j,{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=t=>f.value=t)},{default:n(()=>[s(K,{data:y.value,onSuccessDelete:t=>null,onSuccessSubmit:a[2]||(a[2]=t=>c.$router.push(`/keamanan/izin-pesantren/${t.id}`))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{na as _};
