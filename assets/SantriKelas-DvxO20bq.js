import{B as s,ac as _,v as g,X as k,b as y,o as $,g as m,w as B,D as u,H as b}from"./index-BxW-Zl0Y.js";import{_ as j}from"./TemplateArray-BqEodoxn.js";import{r as w,d as K,g as S}from"./array-object-BytDdNh7.js";import{_ as h,K as A}from"./KelasForm-DDlbQiob.js";import"./QItemSection-Bb15NIFh.js";import"./QItemLabel-mC5VkLuy.js";import"./QList-50wBOg-c.js";import"./QForm-BpJT9KkR.js";import"./InputSelectArray-D75SXVep.js";import"./QSelect-CFPp42HH.js";import"./QChip-QYCUWT9t.js";import"./QMenu-BSoZfA32.js";import"./selection-B5a09GT2.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-CdR1l3Pi.js";import"./DropDownAfter-DLtbEyCD.js";import"./QBtnDropdown-ern_rnLn.js";import"./QBtnGroup-CADL4x2_.js";import"./ClosePopup-D2OXpF_u.js";import"./Lists-BzIPsCiL.js";import"./ApiCrud-B-1sH64C.js";import"./Api-ZbNEZgR7.js";import"./index-BSCwVkgJ.js";import"./index-BVb4nAdI.js";import"./api-error-CztaqWte.js";import"./InputSelectTingkatPendidikan-DNMtvVdN.js";import"./useCrudForm-LUfIVwOp.js";import"./InputSelectTahunAjaran-CXr8CU8g.js";const na={__name:"SantriKelas",setup(D){const i=s(!1),l=s(!1),r=s({}),o=s([]),n=s({}),{params:p}=_();async function d(){try{i.value=!0;const a=await A.santri(p.id);o.value=a.kelas,n.value=a.santri}catch{console.log("error get kelas")}finally{i.value=!1}}const c=g(()=>o.value.map(a=>({"Tahun Ajaran":`${a.th_ajaran_h}  |  ${a.th_ajaran_m||""} `,Kelas:`${a.kelas} ${a.tingkat}`+(a.no_absen?` (No. ${a.no_absen})`:""),Keterangan:a.keterangan||"-",id:a.id})).reverse());k(async()=>{await d()});const v=()=>{r.value={santri_id:n.value.id,nama:n.value.nama},l.value=!0},f=({id:a})=>{r.value=S(o,a),r.value.santri_id=n.value.id,r.value.nama=n.value.nama,l.value=!0};return(a,t)=>($(),y("div",null,[m(j,{data:c.value,spinner:i.value,link:"/madrasah/kelas",onAdd:v,onEdit:f},null,8,["data","spinner"]),m(b,{modelValue:l.value,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value=e)},{default:B(()=>[m(h,{data:r.value,onSuccessDelete:t[0]||(t[0]=e=>u(K)(o.value,e)),onSuccessCreate:t[1]||(t[1]=e=>o.value.push(e)),onSuccessUpdate:t[2]||(t[2]=e=>u(w)(o.value,e.id,e))},null,8,["data"])]),_:1},8,["modelValue"])]))}};export{na as default};
