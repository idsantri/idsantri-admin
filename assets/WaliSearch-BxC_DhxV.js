import{Q as u}from"./QSpace-DcIMlGPs.js";import{aa as x,ac as v,ai as A,q as C,s as N,c as w,o as I,w as r,g as n,Q as p,a as s,n as m,e as f,a4 as g,G as i,m as D,l as W}from"./index-B_fOp8I2.js";import{C as Q}from"./ClosePopup-OWfInyoi.js";import{V as k,D as B}from"./dataTables-CQQbdD-h.js";import{a as E}from"./index-BF457XYG.js";import{d as M}from"./dialog-store-B-LvlbAW.js";import{s as R}from"./santri-store-D0uKEmX1.js";import{w as _}from"./wali-store-DIV6mlfn.js";import{e as q,d as K}from"./index-Bv8s4jzG.js";import{t as O}from"./array-object-BytDdNh7.js";import"./_commonjsHelpers-DsqdWQfm.js";const Z={__name:"WaliSearch",setup(P){const $=M(),{searchWali:o,crudWali:h,crudSantri:l}=x($),y=()=>{_().$reset(),_().setNew(),h.value=!0},d=v(),b=A().token||"",c=`${E.defaults.baseURL}/wali/search`,S={Authorization:`Bearer ${b}`};k.use(B);const T=C({processing:!0,serverSide:!0,responsive:!0,ajax:{url:c,type:"POST",headers:S,error:a=>{const e=a.responseJSON?.message;e?O(e).forEach(t=>q(t)):console.log(`Error during get ${c}`,a)}},order:[],columns:[{title:"ID",data:"id",render:function(a,e,t){return`<button onclick='copyId(${t.id})' class='dt-btn-flat' title='Klik/Tap untuk menyalin ID'>${t.id}</button>`}},{title:"Nama",data:"nama",render:function(a,e,t){return`<span class="dt-link" onclick='goToWali(${t.id})'>${t.nama}</span>`}},{title:"Alamat",data:"alamat_pendek",render:function(a,e){return e==="display"&&a.length>50?`<span title='${a}'>${a.substr(0,50)}&mldr;</span>`:a}},{title:"NIK",data:"nik"},{title:"Anak1",render:function(a,e,t){return`<span class="dt-link" onclick='goToSantri(${t.santri1_id})'>${t.santri1_nama||"-"}</span>`}},{title:"Anak2",render:function(a,e,t){return`<span class="dt-link" onclick='goToSantri(${t.santri2_id})'>${t.santri2_nama||"-"}</span>`}},{title:"Anak3",render:function(a,e,t){return`<span class="dt-link" onclick='goToSantri(${t.santri3_id})'>${t.santri3_nama||"-"}</span>`}},{title:"Anak4",render:function(a,e,t){return`<span class="dt-link" onclick='goToSantri(${t.santri4_id})'>${t.santri4_nama||"-"}</span>`}},{title:"Anak5",render:function(a,e,t){return`<span class="dt-link" onclick='goToSantri(${t.santri5_id})'>${t.santri5_nama||"-"}</span>`}}],language:{search:"Cari:",zeroRecords:"Tidak data data untuk ditampilkan. Coba kata kunci yang lain!",info:"Menampilkan _START_ hingga _END_, dari total _TOTAL_ data",infoFiltered:"(disaring dari _MAX_ total data)",paginate:{first:"↑",previous:"←",next:"→",last:"↓"},lengthMenu:"_MENU_ Perhalaman"},autoWidth:!1,scrollX:!0,search:{return:!0}});return N(()=>{document.goToSantri=a=>{d.push(`/santri/${a}`)},document.goToWali=a=>{d.push(`/wali/${a}`)},document.copyId=a=>{l.value?R().setWaliId(a):(navigator.clipboard.writeText(a),K(`ID (${a}) sudah disalin/dicopy ke clipboard`)),o.value=!1}}),(a,e)=>(I(),w(W,{style:{width:"100%"},flat:""},{default:r(()=>[n(p,{class:"bg-green-7 text-green-1 q-pa-sm flex items-center"},{default:r(()=>[e[0]||(e[0]=s("h2",{class:"text-subtitle1 no-margin text-green-11"},"Cari Wali",-1)),n(u),m(n(f,{label:"Tambah",color:"green-12",class:"text-green-10 q-px-sm",icon:"add","no-caps":"",dense:"",onClick:y},null,512),[[g,i(l)]])]),_:1}),n(p,null,{default:r(()=>[n(i(k),{class:"display table nowrap dt",options:T.value,style:{overflow:"hidden"}},null,8,["options"])]),_:1}),n(D,{class:"bg-green-6"},{default:r(()=>[e[1]||(e[1]=s("div",{class:"text-body2 text-green-11 text-italic"},[s("div",null,"▪️ Cari berdsarkan ID, nama wali, NIK, atau alamat"),s("div",null,"▪️ simbol % = karakter apapun")],-1)),n(u),m(n(f,{label:"Tutup",color:"green-1",class:"text-green-10","no-caps":"",id:"btn-close-wali-search"},null,512),[[Q],[g,i(o)]])]),_:1})]),_:1}))}};export{Z as default};
