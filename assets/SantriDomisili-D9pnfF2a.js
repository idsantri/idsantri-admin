import{A as m,B as w,c as b,o as g,w as u,b as o,ad as A,e as x,C as D,Q as B,a7 as C,y as M,ab as Q,q as $,W as h,f as I,G as U}from"./index-0PBDf7I0.js";import{_ as q}from"./TemplateArray-nkAij0dh.js";import{c as V}from"./format-date-DlwYCgkJ.js";import{a as E}from"./hijri-BBdEhqDI.js";import{r as N,d as O,g as j}from"./array-object-BytDdNh7.js";import{a as G}from"./api-get-CJU_3mwN.js";import{Q as H}from"./QForm-ieTYlGnS.js";import{_ as K}from"./InputSelectArray-BGoSDEHL.js";import{A as L}from"./ApiCrud-CgUuq5zB.js";import{u as P}from"./useCrudForm-C4qLnD9W.js";import"./QItemSection-DpSW8XO7.js";import"./QItemLabel-DR97WW3U.js";import"./QList-BR1VLd4M.js";import"./id-BuNGTsqN.js";import"./format-number-B34ySHL_.js";import"./index-BXLuJznK.js";import"./index-BDNa_dSq.js";import"./api-error-C1WPqECD.js";import"./QSelect-Cpr8vW2V.js";import"./QChip-DG5_EyRB.js";import"./QMenu-3oalsLjd.js";import"./selection-DeDWR_N3.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-C4dqSiKA.js";import"./DropDownAfter-f-uzuh2w.js";import"./QBtnDropdown-CEycuZRG.js";import"./QBtnGroup-BBlBx6YD.js";import"./ClosePopup-5qpDiF0T.js";import"./Lists-B91eApHM.js";import"./Api--YdEMrhi.js";class R extends L{constructor(){super("domisili")}async santri(r){throw await this._apiGet({endPoint:`${this._path}/santri/${r}`}),new Error("not implemented yet")}}const T=new R,W={__name:"DomisiliForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(p,{emit:r}){const s=p,l=r,e=m({...s.data}),n=!s.data?.id,{handleDelete:c,handleCreate:f,handleUpdate:v,loading:_}=P(T,{emit:l,responseKey:"domisili"}),y=async()=>{const i={santri_id:e.value.santri_id,domisili:e.value.domisili,keterangan:e.value.keterangan};return n?await f(i,!0):await v(s.data.id,i,!0)},a=async()=>await c(s.data.id);return(i,t)=>{const F=w("FormHeader"),k=w("FormLoading"),S=w("FormActions");return g(),b(M,{class:"full-width",style:{"max-width":"425px"}},{default:u(()=>[o(H,{onSubmit:A(y,["prevent"])},{default:u(()=>[o(F,{title:"Input Domisili","is-new":n}),D(_)?(g(),b(k,{key:0})):x("",!0),o(B,null,{default:u(()=>[o(C,{class:"q-my-sm",dense:"",outlined:"",label:"Nama","model-value":e.value?.nama+" ("+e.value?.santri_id+")",disable:"",filled:""},null,8,["model-value"]),o(K,{class:"q-my-sm",modelValue:e.value.domisili,"onUpdate:modelValue":t[0]||(t[0]=d=>e.value.domisili=d),url:"domisili",label:"Domisili *",rules:[d=>!!d||"Harus diisi!"]},null,8,["modelValue","rules"]),o(C,{class:"q-my-sm",dense:"",outlined:"",label:"Keterangan",modelValue:e.value.keterangan,"onUpdate:modelValue":t[1]||(t[1]=d=>e.value.keterangan=d),autogrow:""},null,8,["modelValue"])]),_:1}),o(S,{"btn-delete":!n,onOnDelete:a},null,8,["btn-delete"])]),_:1})]),_:1})}}},Se={__name:"SantriDomisili",setup(p){const r=m(!1),s=m(!1),l=m({}),e=m([]),n=m({}),{params:c}=Q();async function f(){const a=await G({endPoint:`domisili/santri/${c.id}`,loading:r});a.domisili&&(e.value=a.domisili,n.value=a.santri)}const v=$(()=>e.value.map(a=>({Tanggal:V(a.created_at,"dd-MM-yyyy")+" | "+E(V(a.created_at,"yyyy-MM-dd")),Domisili:a.domisili,Keterangan:a.keterangan||"-",id:a.id})));h(async()=>{await f()});const _=()=>{l.value={santri_id:n.value.id,nama:n.value.nama},s.value=!0},y=({id:a})=>{l.value=j(e,a),l.value.santri_id=n.value.id,l.value.nama=n.value.nama,s.value=!0};return(a,i)=>(g(),I("div",null,[o(q,{data:v.value,spinner:r.value,onAdd:_,onEdit:y},null,8,["data","spinner"]),o(U,{modelValue:s.value,"onUpdate:modelValue":i[3]||(i[3]=t=>s.value=t)},{default:u(()=>[o(W,{data:l.value,title:"Input Domisili",onSuccessDelete:i[0]||(i[0]=t=>D(O)(e.value,t)),onSuccessCreate:i[1]||(i[1]=t=>e.value.push(t)),onSuccessUpdate:i[2]||(i[2]=t=>D(N)(e.value,t.id,t))},null,8,["data"])]),_:1},8,["modelValue"])]))}};export{Se as default};
