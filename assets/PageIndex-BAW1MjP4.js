import{Q as T}from"./QSpace-DJeipgZa.js";import{a7 as v,a6 as q,x as u,R as y,G as Q,c as w,o as k,w as l,b as e,n as f,a0 as $,q as n,s as j,g as A,f as x,a3 as F,_ as R,v as g,z as b,F as C}from"./index-Bf-p91mW.js";import{Q as L}from"./QTable-De_bPsbt.js";import{a as S}from"./api-get-CiRdORW1.js";import{s as B,a as D,b as H}from"./utils-CiaEZYac.js";import{c as I}from"./format-date-DlwYCgkJ.js";import{Q as N}from"./QToolbarTitle-Bi6rSosy.js";import{Q as V}from"./QToolbar-CUFZpZSE.js";import{_ as M}from"./InputSelectArray-Jz4ksDX6.js";import"./QList-51Eu5HNp.js";import"./QMarkupTable-BU6ysEzR.js";import"./QSelect-Co09SqkM.js";import"./QChip-DeZPZCXp.js";import"./QItemSection-Bl4rOme3.js";import"./QItemLabel-sjS6zLD0.js";import"./QMenu-BvL1IfNl.js";import"./selection-CE9S_xiH.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./use-fullscreen-CrpeCgX1.js";import"./index-D7WC_quC.js";import"./index-BtaF3-6r.js";import"./api-error-C0HjZ2a3.js";import"./id-BuNGTsqN.js";import"./lists-store-F5P_xNBX.js";import"./lists-data-mcTvx2m2.js";import"./DropDownAfter-wYSCUu7Z.js";import"./QBtnDropdown-Br6y2eVM.js";import"./QBtnGroup-BDP931ZD.js";import"./ClosePopup-HTVnKVBl.js";import"./Lists-DSwT9YX9.js";import"./ApiCrud-SVFtkNw7.js";const U={class:"row",style:{"max-width":"1000px",width:"100%"}},P={__name:"FilterTahunAjaran",props:{startUrl:String},emits:["dataFilter"],setup(_,{emit:m}){const s=_,d=m,{params:p}=v(),o=q(),r=u(p.thAjaranH);y(async()=>{c()});function c(){const t={display:r.value?"➡️ Tahun Ajaran: <strong>"+r.value+"</strong>":'<div class="text-green-13 text-italic">Tentukan filter!</div>'};d("dataFilter",t)}return Q(r,(t,a)=>{if(!t){o.push(`${s.startUrl}`);return}if(t!=a){o.push(`${s.startUrl}/${t}`);return}}),(t,a)=>(k(),w(j,null,{default:l(()=>[e(f,{class:"q-px-sm q-py-sm bg-green-11"},{default:l(()=>[e(V,{class:"no-padding",style:{"min-height":"0"}},{default:l(()=>[e(N,{class:"text-subtitle1"},{default:l(()=>[...a[1]||(a[1]=[n("div",{class:"text-subtitle2 text-weight-bold"}," Filter Tahun Ajaran ",-1)])]),_:1}),$(t.$slots,"default")]),_:3})]),_:3}),e(f,{class:"no-padding"},{default:l(()=>[n("div",U,[e(M,{class:"col-12 col-md-4 q-pa-sm",modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=i=>r.value=i),url:"tahun-ajaran",label:"Tahun Ajaran",sort:"desc"},null,8,["modelValue"])])]),_:1})]),_:3}))}},E=["innerHTML"],G={class:""},z={class:""},J={class:""},wa={__name:"PageIndex",setup(_){const m=u({}),s=u([]),d=u(!1),{params:p}=v(),o=u("");async function r(){const t=await S({endPoint:"iuran",loading:d,params:{th_ajaran_h:p.thAjaranH}});t&&(s.value=t.iuran)}y(async()=>{p.thAjaranH?await r():s.value=[]});const c=[{name:"th_ajaran_h",label:"Tahun Ajaran",align:"left",field:"th_ajaran_h",sortable:!0},{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"item",label:"Iuran",align:"left",field:"item",sortable:!0},{name:"nominal",label:"Nominal",align:"right",field:"nominal",format:t=>`${t.toRupiah()}`,sortable:!0},{name:"lunas",label:"Lunas",align:"left",field:t=>t.lunas?I(t.lunas,"yyyy-MM-dd"):"Belum dibayar",sortable:!0},{name:"kasir",label:"Penerima",align:"left",field:"kasir",sortable:!0}];return(t,a)=>(k(),A(C,null,[e(P,{"start-url":"/iuran/th-ajaran",onDataFilter:a[0]||(a[0]=i=>m.value=i),bordered:"",flat:""}),e(j,{class:"q-mt-sm",bordered:"",flat:""},{default:l(()=>[e(f,{class:"bg-green-8 text-green-1 text-subtitle1 q-pa-sm flex flex-center"},{default:l(()=>[n("span",{innerHTML:m.value.display||""},null,8,E),e(T),e(x,{dense:"",icon:"sync",onClick:r,class:"q-px-sm q-mr-sm",flat:""}),e(x,{dense:"",icon:"print",label:"Cetak","no-caps":"",color:"green-11 q-px-md",class:"text-green-10 q-mr-sm",to:"/info/download"})]),_:1}),e(L,{class:"dt q-pa-sm",rows:s.value,loading:d.value,filter:o.value,columns:c,"rows-per-page-options":[10,25,50,75,100,0],"no-data-label":"Silakan tentukan filter tanggal!","no-results-label":"Tidak ditemukan kata kunci yang sesuai dengan pencarian Anda!","row-key":"name",flat:"",onRowClick:a[2]||(a[2]=(i,h,K)=>t.$router.push(`/iuran/santri/${h.santri_id}/${h.th_ajaran_h}`))},{"top-left":l(()=>[...a[3]||(a[3]=[n("div",{class:"text-subtitle1 text-green-10"},"Data Iuran",-1)])]),"top-right":l(()=>[e(F,{outlined:"",dense:"",debounce:"300",modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=i=>o.value=i),placeholder:"Cari",type:"search"},{append:l(()=>[e(R,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","loading","filter"]),e(f,{class:"bg-green-7 text-green-1 text-subtitle1 q-px-sm q-py-xs flex items-center justify-between"},{default:l(()=>[n("div",G,[a[4]||(a[4]=n("em",null,"Estimasi Pendapatan: ",-1)),n("strong",null,g(b(B)(s.value).toRupiah()),1)]),n("div",z,[a[5]||(a[5]=n("em",null,"Total Lunas: ",-1)),n("strong",null,g(b(D)(s.value).toRupiah()),1)]),n("div",J,[a[6]||(a[6]=n("em",null,"Total Tidak Lunas: ",-1)),n("strong",null,g(b(H)(s.value).toRupiah()),1)])]),_:1})]),_:1})],64))}};export{wa as default};
