import{A as i,ab as _,q as k,W as $,f as g,o as b,b as l,w as j,C as p,G as w}from"./index-0PBDf7I0.js";import{_ as y}from"./TemplateArray-nkAij0dh.js";import{r as A,d as B,g as S}from"./array-object-BytDdNh7.js";import{a as V}from"./api-get-CJU_3mwN.js";import{_ as h}from"./KelasForm-BZFcRnbX.js";import"./QItemSection-DpSW8XO7.js";import"./QItemLabel-DR97WW3U.js";import"./QList-BR1VLd4M.js";import"./index-BXLuJznK.js";import"./index-BDNa_dSq.js";import"./api-error-C1WPqECD.js";import"./QForm-ieTYlGnS.js";import"./InputSelectArray-BGoSDEHL.js";import"./QSelect-Cpr8vW2V.js";import"./QChip-DG5_EyRB.js";import"./QMenu-3oalsLjd.js";import"./selection-DeDWR_N3.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-C4dqSiKA.js";import"./DropDownAfter-f-uzuh2w.js";import"./QBtnDropdown-CEycuZRG.js";import"./QBtnGroup-BBlBx6YD.js";import"./ClosePopup-5qpDiF0T.js";import"./Lists-B91eApHM.js";import"./ApiCrud-CgUuq5zB.js";import"./Api--YdEMrhi.js";import"./InputSelectTingkatPendidikan-T6npfMRK.js";import"./useCrudForm-C4qLnD9W.js";import"./InputSelectTahunAjaran-BATXiotR.js";const ia={__name:"SantriKelas",setup(x){const m=i(!1),s=i(!1),n=i({}),o=i([]),r=i({}),{params:u}=_();async function d(){const a=await V({endPoint:`kelas/santri/${u.id}`,loading:m});a.kelas&&(o.value=a.kelas,r.value=a.santri)}const c=k(()=>o.value.map(a=>({"Tahun Ajaran":`${a.th_ajaran_h}  |  ${a.th_ajaran_m||""} `,Kelas:`${a.kelas} ${a.tingkat}`+(a.no_absen?` (No. ${a.no_absen})`:""),Keterangan:a.keterangan||"-",id:a.id})).reverse());$(async()=>{await d()});const f=()=>{n.value={santri_id:r.value.id,nama:r.value.nama},s.value=!0},v=({id:a})=>{n.value=S(o,a),n.value.santri_id=r.value.id,n.value.nama=r.value.nama,s.value=!0};return(a,t)=>(b(),g("div",null,[l(y,{data:c.value,spinner:m.value,link:"/madrasah/kelas",onAdd:f,onEdit:v},null,8,["data","spinner"]),l(w,{modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e)},{default:j(()=>[l(h,{data:n.value,onSuccessDelete:t[0]||(t[0]=e=>p(B)(o.value,e)),onSuccessCreate:t[1]||(t[1]=e=>o.value.push(e)),onSuccessUpdate:t[2]||(t[2]=e=>p(A)(o.value,e.id,e))},null,8,["data"])]),_:1},8,["modelValue"])]))}};export{ia as default};
