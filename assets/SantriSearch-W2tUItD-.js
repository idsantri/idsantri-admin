import{Q as d}from"./QSpace-CoisEuyS.js";import{a4 as b,a6 as $,v as y,R as T,f as S,o as x,w as n,i as r,Q as u,k as s,p as c,z as p,m as v,n as C,Z as D,q as N}from"./index-BOc7y3E3.js";import{C as A}from"./ClosePopup-CcGROVC7.js";import{V as m,D as I}from"./dataTables-DNxXe048.js";import{a as w,g as Q}from"./index-CHOBZr16.js";import{d as O}from"./dialog-store-BozMjCmH.js";import{s as R}from"./santri-store-DkgYMx-T.js";import{d as B,e as E}from"./index-CdkvXyXH.js";import{t as M}from"./array-object-BytDdNh7.js";import"./_commonjsHelpers-CE1G-McA.js";const J={__name:"SantriSearch",setup(W){const g=O(),{searchSantri:o,crudSantri:f}=b(g),k=()=>{R().$reset(),f.value=!0},i=$(),l=`${w.defaults.baseURL}/santri/search`,h={Authorization:`Bearer ${Q()}`};m.use(I);const _=y({processing:!0,serverSide:!0,responsive:!0,ajax:{url:l,type:"POST",headers:h,error:a=>{const e=a.responseJSON?.message;e?M(e).forEach(t=>B(t)):console.log(`Error during get ${l}`,a)}},order:[],columns:[{title:"ID",data:"id",render:function(a,e,t){return`<button onclick='copyId(${t.id})' class='dt-btn-flat' title='Klik/Tap untuk menyalin ID'>${t.id}</button>`}},{title:"Nama",data:"nama",render:function(a,e,t){return`<span class="dt-link" onclick='goToSantri(${t.id})'>${t.nama}</span>`}},{title:"Alamat",data:"alamat_pendek",render:function(a,e){return e==="display"&&a.length>50?`<span title='${a}'>${a.substr(0,50)}&mldr;</span>`:a}},{title:"Data Akhir",data:"data_akhir"},{title:"NIK",data:"nik"},{title:"Wali",render:function(a,e,t){return`<span class="dt-link" onclick='goToWali(${t.wali_id})'>${t.wali_nama} (${t.wali_status})</span>`}},{title:"Ortu",render:function(a,e,t){return`<span class="dt-link" onclick='goToOrtu(${t.ortu_id})'>${t.ayah} | ${t.ibu}</span>`}}],language:{search:"Cari:",zeroRecords:"Tidak data data untuk ditampilkan. Coba kata kunci yang lain!",info:"Menampilkan _START_ hingga _END_, dari total _TOTAL_ data",infoFiltered:"(disaring dari _MAX_ total data)",paginate:{first:"↑",previous:"←",next:"→",last:"↓"},lengthMenu:"_MENU_ Perhalaman"},autoWidth:!1,scrollX:!0,search:{return:!0}});return T(()=>{document.goToSantri=a=>{i.push(`/santri/${a}`)},document.goToWali=a=>{i.push(`/wali/${a}`)},document.goToOrtu=a=>{i.push(`/ortu/${a}`)},document.copyId=a=>{navigator.clipboard.writeText(a),E(`ID (${a}) sudah disalin/dicopy ke clipboard`),o.value=!1}}),(a,e)=>(x(),S(N,{style:{width:"100%"}},{default:n(()=>[r(u,{class:"bg-green-8 text-green-1 q-pa-sm flex items-center"},{default:n(()=>[e[0]||(e[0]=s("h2",{class:"text-subtitle1 no-margin text-green-11"},"Cari Santri",-1)),r(d),r(c,{label:"Tambah",color:"green-12",class:"text-green-10 q-px-sm",icon:"add","no-caps":"",dense:"",onClick:k})]),_:1}),r(u,null,{default:n(()=>[r(p(m),{class:"display table nowrap dt",options:_.value,style:{overflow:"hidden"},id:"tabel"},null,8,["options"])]),_:1}),r(v,{class:"bg-green-7"},{default:n(()=>[e[1]||(e[1]=s("div",{class:"text-body2 text-green-11 text-italic"},[s("div",null," ▪️ Cari berdsarkan ID, nama santri, NIK, alamat, atau data akhir "),s("div",null,"▪️ simbol % = karakter apapun")],-1)),r(d),C(r(c,{label:"Tutup",color:"green-1",class:"text-green-10","no-caps":"",id:"btn-close-santri-search"},null,512),[[A],[D,p(o)]])]),_:1})]),_:1}))}};export{J as default};
