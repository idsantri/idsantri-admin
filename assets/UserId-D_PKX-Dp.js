import{Q as S}from"./QImg-CzfdYcJ0.js";import{Q as u}from"./QItemLabel-Bwx5WFYM.js";import{Q as p,a as g}from"./QItem-BFfMJvn2.js";import{q as Q,ad as D,ac as P,s as E,E as _,c as m,o as i,w as r,g as t,Q as U,l as H,a as l,f as y,v as b,t as c,aq as w,b as V,F as h,D as j,m as F,e as K}from"./index-pZrLq5mJ.js";import{Q as O}from"./QList-BammrKAV.js";import{k as $}from"./format-text-DnCGEu2I.js";import{U as f}from"./Users-9TVhBPhE.js";import{I as G}from"./Image-BlkQYVod.js";import"./ApiCrud-eTMA_Cyz.js";import"./Api-DigGwjx2.js";import"./index-BM4f_s8_.js";import"./index-DZnVFf85.js";import"./apiPost-I4cgF0Lm.js";const M={style:{"max-width":"150px"},class:"q-mx-auto"},z={class:"row"},J={class:"col-md-6 col-sm-12"},W={class:"col-md-6 col-sm-12"},X={class:"fit row wrap justify-start items-start content-start"},ce={__name:"UserId",setup(Y){const e=Q({}),o=Q(!1),{params:I}=D(),R=P();async function A(s,a){const n=s.value,v={role:s.name,value:n};try{await f.setRole(e.value.id,v)}catch{e.value.roleArray[a].value=!n}}async function B(s){e.value.confirmed_at=!e.value.confirmed_at;const a={confirm:s};try{await f.confirm(e.value.id,a)}catch{e.value.confirmed_at=!e.value.confirmed_at}}async function T(){if(e.value?.id)try{o.value=!0;const s=await G.user(e.value.id);e.value.image=s?.image_url?s.image_url+`?t=${new Date().getTime()}`:"/user-default.png"}catch(s){console.log("ðŸš€ ~ loadImage ~ error:",s)}finally{o.value=!1}}function L(s){return Object.entries(s).map(([a,n])=>({name:a,label:$(a),value:n}))}async function x(){try{o.value=!0;const s=await f.getById({id:I.id});e.value=s.user,e.value.roleArray=L(s.user.roles)}catch{console.log("error get users")}finally{o.value=!1}}async function N(){try{o.value=!0,await f.remove({id:e.value.id})&&R.go(-1)}catch{}finally{o.value=!1}}return E(async()=>{await x(),await T()}),(s,a)=>{const n=_("CardHeader"),v=_("CardLoading"),k=_("CardPage");return i(),m(k,null,{default:r(()=>[t(n,{title:"Profil Pengguna",onOnReload:x}),t(U,{class:"q-pa-sm"},{default:r(()=>[t(H,{flat:"",bordered:"",style:{"max-width":"600px"}},{default:r(()=>[l("div",null,[t(U,{class:"q-pa-sm"},{default:r(()=>[l("div",null,[l("div",M,[t(S,{src:e.value?.image?e.value.image:"/user-default.png",ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"green",borderStyle:"solid"}},null,8,["src"])])]),t(O,{bordered:"",separator:"",class:"q-mt-sm"},{default:r(()=>[t(p,{class:"q-pa-sm"},{default:r(()=>[t(g,null,{default:r(()=>[t(u,{overline:""},{default:r(()=>[...a[0]||(a[0]=[b("User",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:r(()=>[l("table",null,[l("tbody",null,[l("tr",null,[a[1]||(a[1]=l("td",{class:"text-italic text-caption q-pr-sm"},"Nama",-1)),l("td",null,c(e.value.name),1)]),l("tr",null,[a[2]||(a[2]=l("td",{class:"text-italic text-caption q-pr-sm"},"Email",-1)),l("td",null,c(e.value.email),1)]),l("tr",null,[a[3]||(a[3]=l("td",{class:"text-italic text-caption q-pr-sm"},"Username",-1)),l("td",null,c(e.value.username),1)]),l("tr",null,[a[4]||(a[4]=l("td",{class:"text-italic text-caption q-pr-sm"},"Telepon",-1)),l("td",null,c(e.value.phone||"-"),1)])])])]),_:1})):y("",!0)]),_:1})]),_:1}),t(p,{class:"q-pa-sm"},{default:r(()=>[t(g,null,{default:r(()=>[t(u,{overline:""},{default:r(()=>[...a[5]||(a[5]=[b(" User Status",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:r(()=>[l("div",z,[l("div",J,[t(w,{"model-value":!!e.value.email_verified_at,label:"Verifikasi",disable:"",color:"green"},null,8,["model-value"]),a[6]||(a[6]=l("div",{class:"q-pl-md text-caption"}," Verifikasi akun hanya bisa dilakukan oleh user yang bersangkutan. ",-1))]),l("div",W,[t(w,{"model-value":!!e.value.confirmed_at,label:"Konfirmasi",color:"green","onUpdate:modelValue":B},null,8,["model-value"]),a[7]||(a[7]=l("div",{class:"q-pl-md text-caption"}," Konfimasi bahwa Anda mengenal user ini. ",-1))])])]),_:1})):y("",!0)]),_:1})]),_:1}),t(p,{class:"q-pa-sm"},{default:r(()=>[t(g,null,{default:r(()=>[t(u,{overline:""},{default:r(()=>[...a[8]||(a[8]=[b(" User Group (Role) ",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:r(()=>[l("div",X,[(i(!0),V(h,null,j(e.value.roleArray,(d,q)=>(i(),V("div",{key:q,class:"col-6"},[t(w,{modelValue:d.value,"onUpdate:modelValue":[C=>d.value=C,C=>A(d,q)],color:"green-6",label:d.label,"true-value":!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))])]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(F,{class:"bg-green-7 q-pa-sm"},{default:r(()=>[t(K,{label:"Hapus",color:"negative","no-caps":"",onClick:N,disable:!e.value?.id},null,8,["disable"])]),_:1}),t(v,{showing:o.value},null,8,["showing"])])]),_:1})]),_:1})]),_:1})}}};export{ce as default};
