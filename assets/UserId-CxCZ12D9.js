import{Q as S}from"./QImg-zCerElnr.js";import{Q as u}from"./QItemLabel-mC5VkLuy.js";import{Q as v,a as g}from"./QItemSection-Bb15NIFh.js";import{B as q,ac as T,ab as H,X as j,C as _,c as m,o as i,w as s,g as t,Q as U,l as D,a as l,f as y,y as b,t as c,ag as x,b as V,F as E,A as F,m as G,e as K}from"./index-BxW-Zl0Y.js";import{Q as O}from"./QList-50wBOg-c.js";import{a as $}from"./api-get-Voz9MJxZ.js";import{k as h}from"./format-text-DnCGEu2I.js";import{U as f}from"./Users-DOayKfVz.js";import"./index-BVb4nAdI.js";import"./index-BSCwVkgJ.js";import"./api-error-CztaqWte.js";import"./ApiCrud-B-1sH64C.js";import"./Api-ZbNEZgR7.js";const M={style:{"max-width":"150px"},class:"q-mx-auto"},X={class:"row"},z={class:"col-md-6 col-sm-12"},J={class:"col-md-6 col-sm-12"},W={class:"fit row wrap justify-start items-start content-start"},ce={__name:"UserId",setup(Y){const e=q({}),n=q(!1),{params:R}=T(),A=H();async function B(r,a){const o=r.value,p={role:r.name,value:o};try{await f.setRole(e.value.id,p)}catch{e.value.roleArray[a].value=!o}}async function I(r){e.value.confirmed_at=!e.value.confirmed_at;const a={confirm:r};try{await f.confirm(e.value.id,a)}catch{e.value.confirmed_at=!e.value.confirmed_at}}async function L(){if(e.value?.id){const r=await $({endPoint:`images/users/${e.value.id}`,loading:n});e.value.image=r.image_url||"/user-default.png"}}function N(r){return Object.entries(r).map(([a,o])=>({name:a,label:h(a),value:o}))}async function w(){try{n.value=!0;const r=await f.getById({id:R.id});e.value=r.user,e.value.roleArray=N(r.user.roles)}catch{console.log("error get users")}finally{n.value=!1}}async function P(){try{n.value=!0,await f.remove({id:e.value.id})&&A.go(-1)}catch{}finally{n.value=!1}}return j(async()=>{await w(),await L()}),(r,a)=>{const o=_("CardHeader"),p=_("CardLoading"),k=_("CardPage");return i(),m(k,null,{default:s(()=>[t(o,{title:"Profil Pengguna",onOnReload:w}),t(U,{class:"q-pa-sm"},{default:s(()=>[t(D,{flat:"",bordered:"",style:{"max-width":"600px"}},{default:s(()=>[l("div",null,[t(U,{class:"q-pa-sm"},{default:s(()=>[l("div",null,[l("div",M,[t(S,{src:e.value?.image?e.value.image:"/user-default.png",ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"green",borderStyle:"solid"}},null,8,["src"])])]),t(O,{bordered:"",separator:"",class:"q-mt-sm"},{default:s(()=>[t(v,{class:"q-pa-sm"},{default:s(()=>[t(g,null,{default:s(()=>[t(u,{overline:""},{default:s(()=>[...a[0]||(a[0]=[b("User",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:s(()=>[l("table",null,[l("tbody",null,[l("tr",null,[a[1]||(a[1]=l("td",{class:"text-italic text-caption q-pr-sm"},"Nama",-1)),l("td",null,c(e.value.name),1)]),l("tr",null,[a[2]||(a[2]=l("td",{class:"text-italic text-caption q-pr-sm"},"Email",-1)),l("td",null,c(e.value.email),1)]),l("tr",null,[a[3]||(a[3]=l("td",{class:"text-italic text-caption q-pr-sm"},"Username",-1)),l("td",null,c(e.value.username),1)]),l("tr",null,[a[4]||(a[4]=l("td",{class:"text-italic text-caption q-pr-sm"},"Telepon",-1)),l("td",null,c(e.value.phone||"-"),1)])])])]),_:1})):y("",!0)]),_:1})]),_:1}),t(v,{class:"q-pa-sm"},{default:s(()=>[t(g,null,{default:s(()=>[t(u,{overline:""},{default:s(()=>[...a[5]||(a[5]=[b(" User Status",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:s(()=>[l("div",X,[l("div",z,[t(x,{"model-value":!!e.value.email_verified_at,label:"Verifikasi",disable:"",color:"green"},null,8,["model-value"]),a[6]||(a[6]=l("div",{class:"q-pl-md text-caption"}," Verifikasi akun hanya bisa dilakukan oleh user yang bersangkutan. ",-1))]),l("div",J,[t(x,{"model-value":!!e.value.confirmed_at,label:"Konfirmasi",color:"green","onUpdate:modelValue":I},null,8,["model-value"]),a[7]||(a[7]=l("div",{class:"q-pl-md text-caption"}," Konfimasi bahwa Anda mengenal user ini. ",-1))])])]),_:1})):y("",!0)]),_:1})]),_:1}),t(v,{class:"q-pa-sm"},{default:s(()=>[t(g,null,{default:s(()=>[t(u,{overline:""},{default:s(()=>[...a[8]||(a[8]=[b(" User Group (Role) ",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:s(()=>[l("div",W,[(i(!0),V(E,null,F(e.value.roleArray,(d,C)=>(i(),V("div",{key:C,class:"col-6"},[t(x,{modelValue:d.value,"onUpdate:modelValue":[Q=>d.value=Q,Q=>B(d,C)],color:"green-6",label:d.label,"true-value":!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))])]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(G,{class:"bg-green-7 q-pa-sm"},{default:s(()=>[t(K,{label:"Hapus",color:"negative","no-caps":"",onClick:P,disable:!e.value?.id},null,8,["disable"])]),_:1}),t(p,{showing:n.value},null,8,["showing"])])]),_:1})]),_:1})]),_:1})}}};export{ce as default};
