import{be as w,q as n,A as l}from"./index-B_fOp8I2.js";import{A as i}from"./ApbAccount-BFtGiLvS.js";import{A as s}from"./ArrayCrud-CByp4EUn.js";const b=w("accounts-store",()=>{const a=n(!1),r=n([]),d=n(""),u=n(""),c=n(""),p=l(()=>r.value.filter(e=>e.hidden==0).map(e=>({group_name:e.group+": "+e.name,...e})).sort((e,t)=>e.group.localeCompare(t.group))),v=l(()=>{const e=r.value.map(t=>t.category).filter(t=>t!==null);return[...new Set(e)]}),g=l(()=>{if(u.value){const e=r.value.filter(t=>t.category===u.value).map(t=>t.group);return[...new Set(e)].sort()}else{const e=r.value.map(t=>t.group);return[...new Set(e)].sort()}}),y=l(()=>r.value.filter(o=>c.value?o.group===c.value:!0).filter(o=>u.value?o.category===u.value:!0));async function m(e,t){try{a.value=!0,r.value=s.update(r.value,t,{hidden:e}),await i.toggleHidden(t)}catch(o){r.value=s.update(r.value,t,{hidden:!e}),console.error("ðŸš€ ~ toggleHidden ~ err:",o)}finally{a.value=!1}}async function A(e=!0){try{a.value=!0;const t=await i.getAll({notifySuccess:e});r.value=t.accounts}catch(t){console.error("ðŸš€ ~ loadData ~ _err:",t)}finally{a.value=!1}}const f=e=>{r.value=s.updateOrCreate(r.value,e,"id","first")},S=e=>{r.value=s.remove(r.value,e)};async function h(e,t=!0){try{a.value=!0;const o=await i.getById({id:e,notifySuccess:t});f(o.account)}catch(o){console.error("ðŸš€ ~ loadData ~ _err:",o)}finally{a.value=!1}}return{loading:a,accounts:r,filteredAccounts:y,filterText:d,filterCategory:u,filterGroup:c,optionsCategory:v,optionsGroup:g,optionsSelect:p,toggleHidden:m,loadAll:A,loadById:h,add:f,remove:S}},{persist:{storage:sessionStorage}});export{b as u};
