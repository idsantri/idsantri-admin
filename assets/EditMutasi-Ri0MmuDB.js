import{Q as x}from"./QToolbarTitle-DriFd-N5.js";import{Q as y}from"./QToolbar-DOvpToKQ.js";import{c as k,aK as Q,aL as C,h,v as b,R as T,f as c,o as r,w as t,i as a,a8 as B,Q as v,r as S,y as f,j as D,k as V,a4 as u,m as q,n as N,p as g,q as E}from"./index-Cju_WcQt.js";import{Q as I}from"./QSpace-e5nOhYJp.js";import{Q as M}from"./QInnerLoading-BncEmeNt.js";import{Q as P}from"./QForm-B-IeWzDf.js";import{C as U}from"./ClosePopup-POBKOZoS.js";import{_ as j}from"./InputSelectArray-G7sFmwYz.js";import{a as A}from"./api-delete-BEmNpbPy.js";import{a as H}from"./api-update-Dm-9pXju.js";const K='<defs><linearGradient x1="8.042%" y1="0%" x2="65.682%" y2="23.865%" id="a"><stop stop-color="currentColor" stop-opacity="0" offset="0%"></stop><stop stop-color="currentColor" stop-opacity=".631" offset="63.146%"></stop><stop stop-color="currentColor" offset="100%"></stop></linearGradient></defs><g transform="translate(1 1)" fill="none" fill-rule="evenodd"><path d="M36 18c0-9.94-8.06-18-18-18" stroke="url(#a)" stroke-width="2"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></path><circle fill="currentColor" cx="36" cy="18" r="1"><animateTransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="0.9s" repeatCount="indefinite"></animateTransform></circle></g>',L=k({name:"QSpinnerTail",props:Q,setup(d){const{cSize:n,classes:i}=C(d);return()=>h("svg",{class:i.value,width:n.value,height:n.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",innerHTML:K})}}),$={key:0,class:"text-italic text-caption"},ee={__name:"EditMutasi",props:{data:{type:Object,required:!0},api:{type:Boolean,default:!1}},emits:["onDelete","onSubmit"],setup(d,{emit:n}){const i=n,s=d,e=b({}),m=b(!1);T(()=>{s.api?Object.assign(e.value,s.data):e.value=s.data});async function w(){await A({endPoint:`mutasi/${e.value.id}`,loading:m})&&(document.getElementById("btn-close").click(),i("onDelete"))}async function _(){const p={new_domisili:e.value.new_domisili,new_keterangan:e.value.new_keterangan};await H({endPoint:`mutasi/${e.value.id}`,loading:m,data:p})&&(document.getElementById("btn-close").click(),i("onSubmit"))}return(p,l)=>(r(),c(E,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[a(P,{onSubmit:B(_,["prevent"])},{default:t(()=>[a(v,{class:"bg-green-7 text-green-11 q-pa-sm"},{default:t(()=>[a(y,{class:"q-px-sm",style:{"min-height":"0"}},{default:t(()=>[a(x,{class:"text-subtitle1 text-green-11"},{default:t(()=>[...l[2]||(l[2]=[D(" Data Domisili Baru — ",-1),V("span",{class:"text-italic"},"Edit",-1)])]),_:1}),s.api?f("",!0):(r(),S("span",$," Auto Update "))]),_:1})]),_:1}),a(v,null,{default:t(()=>[a(u,{"model-value":e.value.nama+" ("+e.value.santri_id+")",class:"",disable:"",filled:"",dense:"",outlined:"",label:"Nama (ID)"},null,8,["model-value"]),a(u,{"model-value":e.value.tingkat+" — "+e.value.kelas,class:"q-mt-sm",disable:"",filled:"",dense:"",outlined:"",label:"Tingkat — Kelas"},null,8,["model-value"]),a(u,{"model-value":e.value.domisili,class:"q-mt-sm",disable:"",filled:"",dense:"",outlined:"",label:"Domisili (Asal)"},null,8,["model-value"]),a(j,{modelValue:e.value.new_domisili,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.new_domisili=o),url:"domisili",label:"Domisili (Baru) *",class:"q-mt-sm",rules:[o=>!!o||"Harus diisi!"],clearable:!1},null,8,["modelValue","rules"]),a(u,{modelValue:e.value.new_keterangan,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.new_keterangan=o),class:"q-mt-sm",dense:"",outlined:"",label:"Keterangan (Baru)",autogrow:!0},null,8,["modelValue"])]),_:1}),a(q,{class:"bg-green-6 flex"},{default:t(()=>[s.api?(r(),c(g,{key:0,label:"Hapus",class:"bg-red text-red-1","no-caps":"",onClick:w})):f("",!0),a(I),N(a(g,{label:"Tutup",class:"bg-green-11","no-caps":"",id:"btn-close"},null,512),[[U]]),s.api?(r(),c(g,{key:1,type:"submit",label:"Simpan",class:"bg-green-10 text-green-11","no-caps":""})):f("",!0)]),_:1}),a(M,{showing:m.value},{default:t(()=>[a(L,{size:"4em",color:"green"})]),_:1},8,["showing"])]),_:1})]),_:1}))}};export{ee as _};
