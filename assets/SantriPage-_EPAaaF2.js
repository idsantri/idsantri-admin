import{bi as y,a8 as b,b as x,o as g,g as l,w as i,bG as Q,bH as D,v as U,t as A,aq as C,e as M,a as _,q as p,A as k,s as I,ah as N,N as S,T as O,c as w,f as R,Q as j,G,l as z}from"./index-lfsacdTL.js";import{Q as H}from"./QTable-ZYQoPADZ.js";import{c as L,_ as J,M as W}from"./column-header-CbnKfgvd.js";import{_ as X}from"./TableHeader-C-KnLu_-.js";import{Q as P}from"./QItemLabel-DetB28No.js";import{Q as h,a as T}from"./QItem-D2V1ywYc.js";import{Q as K}from"./QSelect-vmgT3_C5.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QList-DPyI_zsk.js";import"./QMarkupTable-Bz2fobx8.js";import"./use-fullscreen-BTwdxKDl.js";import"./QSkeleton-DH6aRMMj.js";import"./QForm-DwVKhKnd.js";import"./InputSelectArray-TOoBLjnj.js";import"./lists-store-Ywu0iLUb.js";import"./ArrayCrud-CByp4EUn.js";import"./DropDownAfter-C-z_78OX.js";import"./QBtnDropdown-BlyQ6xWg.js";import"./QBtnGroup-wWkAnDNe.js";import"./QMenu-BqUuC3DM.js";import"./selection-Bw-KeTFA.js";import"./ClosePopup-UdmwPR6b.js";import"./Lists-BT4EY6Br.js";import"./ApiCrud-FTDmQjbi.js";import"./Api-DXhapTLT.js";import"./index-BjANHOw7.js";import"./index-D3OjluQT.js";import"./apiPost-61dWqKCW.js";import"./useCrudForm-CC03GL-p.js";import"./InputToggle-C8i1v8x8.js";import"./QField-hdeCXAkJ.js";import"./CardSantriSimple-vMfvOBaB.js";import"./QSpace-DMx1parf.js";import"./QImg-B8oJH5er.js";import"./Santri-DmnfRBw7.js";import"./santri-store-RdvbckiD.js";import"./array-object-BytDdNh7.js";import"./format-date-DBaFa2rd.js";import"./id-BuNGTsqN.js";import"./hijri-CTUg_lXm.js";import"./format-number-B34ySHL_.js";import"./QChip-DHaC6y90.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";const Z={class:"flex items-center justify-between"},ee={__name:"FilterDomisili",props:y({options:{type:Array,default:()=>[]}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:y(["onToggle"],["update:modelValue"]),setup(v){const m=b(v,"modelValue");return(f,d)=>(g(),x("div",Z,[l(K,{dense:"",outlined:"",multiple:"",label:"Pilih Domisili",modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=a=>m.value=a),options:v.options,style:{width:"300px"},clearable:""},{option:i(({itemProps:a,opt:s,selected:r,toggleOption:u})=>[l(h,Q(D(a)),{default:i(()=>[l(T,null,{default:i(()=>[l(P,null,{default:i(()=>[U(A(s),1)]),_:2},1024)]),_:2},1024),l(T,{side:""},{default:i(()=>[l(C,{"model-value":r,"onUpdate:modelValue":n=>u(s),color:"green-6"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),l(M,{label:"Filter by Kelas",class:"q-px-sm","no-caps":"",color:"green-6",dense:"",onClick:d[1]||(d[1]=a=>f.$emit("onToggle"))})]))}},le={class:"flex items-center justify-between"},te={class:"flex items-center q-gutter-x-sm"},oe={__name:"FilterKelas",props:y({optionsTingkat:{type:Array,default:()=>[]},optionsKelas:{type:Array,default:()=>[]}},{modelTingkat:{type:String,default:()=>""},modelTingkatModifiers:{},modelKelas:{type:Array,default:()=>[]},modelKelasModifiers:{}}),emits:y(["onToggle"],["update:modelTingkat","update:modelKelas"]),setup(v){const m=b(v,"modelTingkat"),f=b(v,"modelKelas");return(d,a)=>(g(),x("div",le,[_("div",te,[l(K,{dense:"",outlined:"",label:"Pilih Tingkat Pendidikan",style:{width:"300px"},clearable:"",options:v.optionsTingkat,modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=s=>m.value=s)},null,8,["options","modelValue"]),l(K,{dense:"",outlined:"",multiple:"",label:"Pilih Kelas",options:v.optionsKelas,modelValue:f.value,"onUpdate:modelValue":a[1]||(a[1]=s=>f.value=s),style:{width:"300px"},clearable:""},{option:i(({itemProps:s,opt:r,selected:u,toggleOption:n})=>[l(h,Q(D(s)),{default:i(()=>[l(T,null,{default:i(()=>[l(P,null,{default:i(()=>[U(A(r),1)]),_:2},1024)]),_:2},1024),l(T,{side:""},{default:i(()=>[l(C,{"model-value":u,"onUpdate:modelValue":c=>n(r),color:"green-6"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["options","modelValue"])]),l(M,{label:"Filter by Domisili","no-caps":"",color:"green-6",dense:"",class:"q-px-sm",onClick:a[2]||(a[2]=s=>d.$emit("onToggle"))})]))}},ae={class:"flex items-start q-gutter-sm"},se={class:"col-grow"},ie={class:""},ne={__name:"SantriPage",setup(v){const m=p(""),f=p(!1),d=p({}),a=p([]),s=p(!1),r=p([]),u=p(!0),n=p(""),c=p([]),q=k(()=>a.value.filter(o=>{const e=!r.value?.length||r.value.includes(o.domisili),t=!n.value||o.tingkat===n.value,V=!c.value?.length||c.value.includes(o.kelas);return e&&t&&V}));async function $(){try{f.value=!0;const o=await W.getSantri();o&&(a.value=o.santri)}catch(o){console.error("ðŸš€ ~ loadData ~ e:",o)}finally{f.value=!1}}I(async()=>{await $()});const F=k(()=>{const o=new Set;return a.value.forEach(e=>{e.domisili&&o.add(e.domisili)}),Array.from(o).sort((e,t)=>e.localeCompare(t))}),B=k(()=>{const o=new Set;return a.value.forEach(e=>{e.tingkat&&o.add(e.tingkat)}),Array.from(o).sort((e,t)=>e.localeCompare(t))}),E=k(()=>{if(!n.value)return[];const o=new Set;return a.value.forEach(e=>{e.tingkat===n.value&&e.kelas&&o.add(e.kelas)}),Array.from(o).sort((e,t)=>e.localeCompare(t))});return N(()=>{s.value||(r.value=[],n.value="",c.value=[])}),S(u,()=>{r.value=[],n.value="",c.value=[]}),S(n,()=>{c.value=[]}),(o,e)=>(g(),x("div",ae,[_("div",se,[l(z,{flat:"",bordered:""},{default:i(()=>[l(X,{title:"Data Santri AKTIF",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),onOnReload:$,onOnFilter:e[1]||(e[1]=t=>s.value=!s.value),"show-filter":s.value},null,8,["modelValue","show-filter"]),l(O,{name:"fade"},{default:i(()=>[s.value?(g(),w(j,{key:0,class:"q-pa-sm"},{default:i(()=>[u.value?(g(),w(ee,{key:0,modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),options:F.value,onOnToggle:e[3]||(e[3]=t=>u.value=!u.value)},null,8,["modelValue","options"])):(g(),w(oe,{key:1,modelTingkat:n.value,"onUpdate:modelTingkat":e[4]||(e[4]=t=>n.value=t),modelKelas:c.value,"onUpdate:modelKelas":e[5]||(e[5]=t=>c.value=t),optionsTingkat:B.value,optionsKelas:E.value,onOnToggle:e[6]||(e[6]=t=>u.value=!u.value)},null,8,["modelTingkat","modelKelas","optionsTingkat","optionsKelas"]))]),_:1})):R("",!0)]),_:1}),l(H,{rows:q.value,filter:m.value,loading:f.value,"rows-per-page-options":[10,25,50,100,0],flat:"",onRowClick:e[7]||(e[7]=(t,V,re)=>d.value=V),columns:G(L),"table-header-class":"bg-green-1 text-green-10 text-subtitle1"},null,8,["rows","filter","loading","columns"])]),_:1})]),_("div",ie,[l(J,{santri:d.value},null,8,["santri"])])]))}},Ze=Y(ne,[["__scopeId","data-v-80347232"]]);export{Ze as default};
