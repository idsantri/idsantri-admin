import{Q as d}from"./QSpace-CQVl4CfZ.js";import{a9 as $,ab as y,q as T,s as S,c as x,o as v,w as n,g as r,Q as u,a as s,e as c,G as p,m as C,n as N,a4 as D,l as w}from"./index-C1T48Jlu.js";import{C as A}from"./ClosePopup-BMbJeAyt.js";import{V as m,D as I}from"./dataTables-DarcYjPQ.js";import{a as Q,g as O}from"./index-C7k5uAC5.js";import{d as B}from"./dialog-store-DEjVohhe.js";import{s as g}from"./santri-store-CKYxSwqs.js";import{d as E,e as M}from"./index-eqGrmZEw.js";import{t as R}from"./array-object-BytDdNh7.js";import"./_commonjsHelpers-DsqdWQfm.js";const G={__name:"SantriSearch",setup(W){const f=B(),{searchSantri:o,crudSantri:k}=$(f),h=()=>{g().$reset(),g().setNew(),k.value=!0},i=y(),l=`${Q.defaults.baseURL}/santri/search`,_={Authorization:`Bearer ${O()}`};m.use(I);const b=T({processing:!0,serverSide:!0,responsive:!0,ajax:{url:l,type:"POST",headers:_,error:a=>{const e=a.responseJSON?.message;e?R(e).forEach(t=>E(t)):console.log(`Error during get ${l}`,a)}},order:[],columns:[{title:"ID",data:"id",render:function(a,e,t){return`<button onclick='copyId(${t.id})' class='dt-btn-flat' title='Klik/Tap untuk menyalin ID'>${t.id}</button>`}},{title:"Nama",data:"nama",render:function(a,e,t){return`<span class="dt-link" onclick='goToSantri(${t.id})'>${t.nama}</span>`}},{title:"Alamat",data:"alamat_pendek",render:function(a,e){return e==="display"&&a.length>50?`<span title='${a}'>${a.substr(0,50)}&mldr;</span>`:a}},{title:"Data Akhir",data:"data_akhir"},{title:"NIK",data:"nik"},{title:"Wali",render:function(a,e,t){return`<span class="dt-link" onclick='goToWali(${t.wali_id})'>${t.wali_nama} (${t.wali_status})</span>`}},{title:"Ortu",render:function(a,e,t){return`<span class="dt-link" onclick='goToOrtu(${t.ortu_id})'>${t.ayah} | ${t.ibu}</span>`}}],language:{search:"Cari:",zeroRecords:"Tidak data data untuk ditampilkan. Coba kata kunci yang lain!",info:"Menampilkan _START_ hingga _END_, dari total _TOTAL_ data",infoFiltered:"(disaring dari _MAX_ total data)",paginate:{first:"↑",previous:"←",next:"→",last:"↓"},lengthMenu:"_MENU_ Perhalaman"},autoWidth:!1,scrollX:!0,search:{return:!0}});return S(()=>{document.goToSantri=a=>{i.push(`/santri/${a}`)},document.goToWali=a=>{i.push(`/wali/${a}`)},document.goToOrtu=a=>{i.push(`/ortu/${a}`)},document.copyId=a=>{navigator.clipboard.writeText(a),M(`ID (${a}) sudah disalin/dicopy ke clipboard`),o.value=!1}}),(a,e)=>(v(),x(w,{style:{width:"100%"},flat:""},{default:n(()=>[r(u,{class:"bg-green-7 text-green-1 q-pa-sm flex items-center"},{default:n(()=>[e[0]||(e[0]=s("h2",{class:"text-subtitle1 no-margin text-green-11"},"Cari Santri",-1)),r(d),r(c,{label:"Tambah",color:"green-12",class:"text-green-10 q-px-sm",icon:"add","no-caps":"",dense:"",onClick:h})]),_:1}),r(u,null,{default:n(()=>[r(p(m),{class:"display table nowrap dt",options:b.value,style:{overflow:"hidden"},id:"tabel"},null,8,["options"])]),_:1}),r(C,{class:"bg-green-6"},{default:n(()=>[e[1]||(e[1]=s("div",{class:"text-body2 text-green-11 text-italic"},[s("div",null,"▪️ Cari berdsarkan ID, nama santri, NIK, alamat, atau data akhir"),s("div",null,"▪️ simbol % = karakter apapun")],-1)),r(d),N(r(c,{label:"Tutup",color:"green-1",class:"text-green-10","no-caps":"",id:"btn-close-santri-search"},null,512),[[A],[D,p(o)]])]),_:1})]),_:1}))}};export{G as default};
