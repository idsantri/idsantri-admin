import{q as h,ac as f,s as y,b as o,o as i,g as l,G as g,w as r,Q as c,a as t,v as x,t as e,f as k,F as S,D as T,e as w,l as v}from"./index-BZpYNzr9.js";import{Q as A}from"./QSkeleton-FntSgxoN.js";import{Q as I}from"./QMarkupTable-BKkBeQvl.js";import{_ as j}from"./FilterKelas-Bl94yXnp.js";import{a as q}from"./api-get-BBMogrQv.js";import{t as Q}from"./format-text-DnCGEu2I.js";import{e as C}from"./index-DZmCiZRw.js";import"./QToolbar-WUCQVGCR.js";import"./QSpace-Cruj1a7e.js";import"./api-get-lists-DHF3jIBa.js";import"./index-CJVqrZrv.js";import"./api-error-VFSTLYv0.js";import"./QSelect-04we3Rrx.js";import"./QChip-BBs20mA3.js";import"./QItemSection-B7VNnIY5.js";import"./QItemLabel-BCjLbdsg.js";import"./QMenu-DO0vWl3t.js";import"./selection-a5U4oYIq.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";const D={class:"text-subtitle1"},N=["innerHTML"],P={key:0},$={key:1},B={colspan:"50"},F={key:2},L={class:"text-center"},M={class:"text-center"},V={class:"text-center"},K={class:"text-left"},G={class:"text-left"},H={class:"text-left"},z={class:"bg-grey-1"},E={class:"bg-grey-1"},R={class:"bg-grey-1"},J={class:"bg-grey-1"},O={class:"bg-green-1"},U={class:"bg-green-1"},W={class:"bg-green-1"},X={class:"bg-green-1"},Y={class:"bg-grey-1"},Z={class:"bg-grey-1"},tt={class:"bg-grey-1"},st={class:"bg-grey-1"},et={class:"bg-green-1"},at={class:"bg-green-1"},nt={class:"bg-green-1"},lt={class:"bg-green-1"},rt={class:"bg-grey-1"},ot={class:"bg-grey-1"},it={class:"bg-grey-1"},gt={class:"bg-grey-1"},ct={class:"bg-green-2"},dt={class:"bg-green-2"},_t={class:"bg-green-2"},ht={class:"bg-green-2"},pt={class:"bg-green-11"},ut={class:"bg-green-11"},bt={class:"bg-green-11"},mt={class:"bg-green-11"},Vt={__name:"AbsensiLaporan",setup(ft){const p=h(!1),{params:a}=f(),u=h(""),d=h([]);async function b(){if(a.th_ajaran_h&&a.tingkat_id&&a.list_bulan_ujian){const _=await q({endPoint:"absensi/"+a.absensi+"/not-null",params:{th_ajaran_h:a.th_ajaran_h,tingkat_id:a.tingkat_id,bulan_ujian:a.list_bulan_ujian},notify:!1,loading:p});d.value=_["absensi_"+a.absensi],d.value.length||C("Tidak ada murid absen pada filter yang dipilih!")}}return y(async()=>{await b()}),(_,n)=>(i(),o("div",null,[l(j,{"show-list-bulan-ujian":!0,showKelas:!1,"start-url":`/madrasah/absensi/laporan/${g(a).absensi}`,onDataFilter:n[0]||(n[0]=s=>u.value=s)},null,8,["start-url"]),l(v,{class:"q-mt-sm",flat:"",bordered:""},{default:r(()=>[l(c,{class:"bg-green-7 text-green-1 text-subtitle1 q-px-sm q-py-xs"},{default:r(()=>[t("div",D,[n[1]||(n[1]=x(" ➡️ ",-1)),t("strong",null," Absensi "+e(g(Q)(g(a).absensi)),1)])]),_:1}),l(c,{class:"bg-green-3 text-green-10 text-subtitle1 q-pa-sm"},{default:r(()=>[t("div",null,[t("span",{innerHTML:u.value||"Tentukan filter!"},null,8,N)])]),_:1}),l(c,{class:"no-padding"},{default:r(()=>[l(I,{flat:""},{default:r(()=>[n[3]||(n[3]=t("thead",null,[t("tr",null,[t("th",{rowspan:"2",class:"text-center"},"No."),t("th",{rowspan:"2",class:"text-center"},"ID Santri"),t("th",{rowspan:"2",class:"text-center"},"ID Kelas"),t("th",{rowspan:"2",class:"text-left"},"Nama"),t("th",{rowspan:"2",class:"text-left"},"Kelas"),t("th",{rowspan:"2",class:"text-left"},"Domisili"),t("th",{colspan:"4",class:"bg-grey-1"},"Pekan-1"),t("th",{colspan:"4",class:"bg-green-1"},"Pekan-2"),t("th",{colspan:"4",class:"bg-grey-1"},"Pekan-3"),t("th",{colspan:"4",class:"bg-green-1"},"Pekan-4"),t("th",{colspan:"4",class:"bg-grey-1"},"Pekan-5"),t("th",{colspan:"4",class:"bg-green-2"},"Sebulan"),t("th",{colspan:"4",class:"bg-green-11"},"Setahun")]),t("tr",null,[t("th",{class:"bg-grey-1"},"S"),t("th",{class:"bg-grey-1"},"I"),t("th",{class:"bg-grey-1"},"A"),t("th",{class:"bg-grey-1"},"T"),t("th",{class:"bg-green-1"},"S"),t("th",{class:"bg-green-1"},"I"),t("th",{class:"bg-green-1"},"A"),t("th",{class:"bg-green-1"},"T"),t("th",{class:"bg-grey-1"},"S"),t("th",{class:"bg-grey-1"},"I"),t("th",{class:"bg-grey-1"},"A"),t("th",{class:"bg-grey-1"},"T"),t("th",{class:"bg-green-1"},"S"),t("th",{class:"bg-green-1"},"I"),t("th",{class:"bg-green-1"},"A"),t("th",{class:"bg-green-1"},"T"),t("th",{class:"bg-grey-1"},"S"),t("th",{class:"bg-grey-1"},"I"),t("th",{class:"bg-grey-1"},"A"),t("th",{class:"bg-grey-1"},"T"),t("th",{class:"bg-green-2"},"S"),t("th",{class:"bg-green-2"},"I"),t("th",{class:"bg-green-2"},"A"),t("th",{class:"bg-green-2"},"T"),t("th",{class:"bg-green-11"},"S"),t("th",{class:"bg-green-11"},"I"),t("th",{class:"bg-green-11"},"A"),t("th",{class:"bg-green-11"},"T")])],-1)),!g(a).th_ajaran_h||!g(a).tingkat_id||!g(a).list_bulan_ujian?(i(),o("tbody",P,[...n[2]||(n[2]=[t("tr",null,[t("td",{colspan:"50"},[t("div",{class:"text-center text-negative text-body1 text-italic bg-red-1 q-pa-md"}," Tentukan filter! ")])],-1)])])):k("",!0),p.value?(i(),o("tbody",$,[t("tr",null,[t("td",B,[l(A,{height:"50px"})])])])):(i(),o("tbody",F,[(i(!0),o(S,null,T(d.value,(s,m)=>(i(),o("tr",{key:m},[t("td",L,e(s.no_absen?s.no_absen.toString().padStart(2,0):""),1),t("td",M,e(s.santri_id),1),t("td",V,[l(w,{flat:"",dense:"","no-caps":"",class:"text-green-10 bg-green-11 q-px-sm",style:{"min-width":"50px"},onClick:yt=>_.$router.push(`/madrasah/kelas/${s.kelas_id}/riwayat`)},{default:r(()=>[t("small",null,e(s.kelas_id),1)]),_:2},1032,["onClick"])]),t("td",K,e(s.nama),1),t("td",G,e(s.kelas),1),t("td",H,e(s.domisili),1),t("td",z,e(s.p1s),1),t("td",E,e(s.p1i),1),t("td",R,e(s.p1a),1),t("td",J,e(s.p1t),1),t("td",O,e(s.p2s),1),t("td",U,e(s.p2i),1),t("td",W,e(s.p2a),1),t("td",X,e(s.p2t),1),t("td",Y,e(s.p3s),1),t("td",Z,e(s.p3i),1),t("td",tt,e(s.p3a),1),t("td",st,e(s.p3t),1),t("td",et,e(s.p4s),1),t("td",at,e(s.p4i),1),t("td",nt,e(s.p4a),1),t("td",lt,e(s.p4t),1),t("td",rt,e(s.p5s),1),t("td",ot,e(s.p5i),1),t("td",it,e(s.p5a),1),t("td",gt,e(s.p5t),1),t("td",ct,e(s.sum_s),1),t("td",dt,e(s.sum_i),1),t("td",_t,e(s.sum_a),1),t("td",ht,e(s.sum_t),1),t("td",pt,e(s.all_s),1),t("td",ut,e(s.all_i),1),t("td",bt,e(s.all_a),1),t("td",mt,e(s.all_t),1)]))),128))])),n[4]||(n[4]=t("tfoot",null,null,-1))]),_:1})]),_:1}),l(c,{class:"bg-green-6 text-green-11 text-subtitle1 q-pa-sm full-width flex flex-center"},{default:r(()=>[...n[5]||(n[5]=[t("div",{class:"text-caption text-italic text-center"},"S=Sakit; I=Izin; A=Alpa; T=Terlambat",-1)])]),_:1})]),_:1})]))}};export{Vt as default};
