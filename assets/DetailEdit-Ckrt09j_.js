import{q as V,c as w,o as h,w as s,g as e,l as c,Q as r,a as v,e as S,C as Q,ad as N,ae as P,A as T,N as j,E as y,af as H,f as B,G as o,a9 as _,m as M,v as $}from"./index-BGObraKh.js";import{Q as D}from"./QForm-BsaO44hu.js";import{Q as I}from"./QEditor-Bj8Ppv1L.js";import{u as k}from"./pulangan-store-BrRVkHtl.js";import{m as E,b as F}from"./hijri-CTUg_lXm.js";import{i as q,c as G}from"./format-date-DBaFa2rd.js";import{Q as z}from"./QImg-B3kC2bzS.js";import{_ as A}from"./ImageUploader-CoqwHFeZ.js";import"./QBtnDropdown-C__d8B2r.js";import"./QBtnGroup-zu-IcviX.js";import"./QMenu-DmBcKTCH.js";import"./selection-DjrSooP-.js";import"./QTooltip-CxWytLkr.js";import"./QItem-DfMJTwsS.js";import"./use-fullscreen-Dw8aA46T.js";import"./ArrayCrud-CByp4EUn.js";import"./ApiCrud-BSS5T12d.js";import"./Api-CDu9vKW9.js";import"./index-CWFlz0I4.js";import"./index-pzyLC6ns.js";import"./apiPost-B_iRVN6p.js";import"./format-number-B34ySHL_.js";import"./id-BuNGTsqN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={style:{width:"200px"}},L={__name:"DetailTeken",props:{p_tt_url:{type:String,required:!0},id:{type:[String,Number],required:!0}},setup(b){const d=k(),i=b,m=V(!1),g=V(i.p_tt_url),f=n=>m.value=n;async function a(n){m.value=!1,g.value=n.pulangan.p_tt_url,d.update(i.id,{p_tt_url:n.pulangan.p_tt_url})}return(n,p)=>(h(),w(r,{class:"q-pa-sm"},{default:s(()=>[e(c,{bordered:"",flat:"",style:{"max-width":"600px"}},{default:s(()=>[e(r,{horizontal:""},{default:s(()=>[e(r,{class:"q-pa-sm"},{default:s(()=>[v("div",K,[e(z,{src:`${g.value}`,ratio:1,alt:"user","img-style":{border:"1px",borderColor:"green",borderStyle:"solid"}},null,8,["src"]),e(S,{icon:"upload",label:"Upload","no-caps":"",dense:"",outline:"",class:"full-width q-mt-md",onClick:p[0]||(p[0]=u=>m.value=!0)})])]),_:1}),e(Q,{vertical:""}),e(r,{class:"q-pa-sm"},{default:s(()=>[...p[1]||(p[1]=[v("div",{class:"text-subtitle1"},"Tanda Tangan Pengurus",-1),v("ul",{class:"text-italic q-mt-sm"},[v("li",null,"Pastikan gambar sudah transparan"),v("li",null,"Gunakan file dengan ekstensi PNG")],-1)])]),_:1})]),_:1}),e(A,{"show-uploader":m.value,url:`/pulangan/config/${b.id}/image`,width:200,height:200,"img-format":"png",onUpdateUploader:f,onSuccessUpload:a,"field-image":"p_tt"},null,8,["show-uploader","url"])]),_:1})]),_:1}))}},ca={__name:"DetailEdit",setup(b){const{id:d}=N().params,i=k(),{pulangan:m,loading:g}=P(i),f=T(()=>m.value.find(u=>u.id==d||u.slug==d)),a=V(f.value),n=async()=>{const u={no_surat:a.value.no_surat,tgl_surat_m:a.value.tgl_surat_m,tgl_surat_h:a.value.tgl_surat_h,p_jabatan:a.value.p_jabatan,p_nama:a.value.p_nama};return await i.updateById(d,u)},p=async()=>await i.updateById(d,{keterangan:a.value.keterangan});return j(()=>a.value.tgl_surat_h,(u,t)=>{u?.length&&(a.value.tgl_surat_h=u.replace(/-/g,""))}),(u,t)=>{const U=y("CardHeader"),C=y("FormLoading"),x=y("CardPage");return h(),w(x,null,{default:s(()=>[e(U,{title:"Detail Pulangan","show-reload":!1}),e(r,{class:"tw:grid tw:grid-cols-1 tw:sm:flex tw:sm:justify-between tw:gap-2 q-pa-sm"},{default:s(()=>[e(c,{bordered:"",flat:"",class:"full-width"},{default:s(()=>[e(D,{onSubmit:H(n,["prevent"])},{default:s(()=>[o(g)?(h(),w(C,{key:0})):B("",!0),e(r,{class:"q-pa-sm"},{default:s(()=>[e(_,{dense:"",class:"q-my-sm",outlined:"",label:"Pulangan",modelValue:a.value.slug,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.slug=l),filled:"",disable:""},null,8,["modelValue"]),e(_,{dense:"",class:"q-my-sm",outlined:"",label:"Nomor Surat",modelValue:a.value.no_surat,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.no_surat=l)},null,8,["modelValue"]),e(_,{dense:"",hint:o(q)(a.value.tgl_surat_m)?o(G)(a.value.tgl_surat_m,"cccc, dd MMMM yyyy"):"",class:"q-my-sm",outlined:"",label:"Tanggal Surat (M)*",modelValue:a.value.tgl_surat_m,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.tgl_surat_m=l),type:"date",onChange:t[3]||(t[3]=l=>o(q)(a.value.tgl_surat_m)?a.value.tgl_surat_h=o(E)(a.value.tgl_surat_m):a.value.tgl_surat_h=""),rules:[l=>!!l||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),e(_,{dense:"",hint:a.value.tgl_surat_h?.length?o(F)(a.value.tgl_surat_h):"",class:"q-my-sm",outlined:"",label:"Tanggal Surat (H)*",modelValue:a.value.tgl_surat_h,"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.tgl_surat_h=l),rules:[l=>!!l||"Harus diisi!",l=>l?.length==8||"8 digit angka!"],"error-color":"negative",mask:"####-##-##"},null,8,["hint","modelValue","rules"]),e(_,{dense:"",class:"q-my-sm",outlined:"",label:"Jabatan",modelValue:a.value.p_jabatan,"onUpdate:modelValue":t[5]||(t[5]=l=>a.value.p_jabatan=l)},null,8,["modelValue"]),e(_,{dense:"",class:"q-my-sm",outlined:"",label:"Nama",modelValue:a.value.p_nama,"onUpdate:modelValue":t[6]||(t[6]=l=>a.value.p_nama=l)},null,8,["modelValue"])]),_:1}),e(M,{align:"right",class:"bg-green-7"},{default:s(()=>[e(S,{label:"Simpan",type:"submit","no-caps":"",icon:"save",class:"bg-green-11"})]),_:1})]),_:1})]),_:1}),e(c,{bordered:"",flat:"",class:"full-width"},{default:s(()=>[e(L,{p_tt_url:f.value?.p_tt_url||"",id:f.value?.id},null,8,["p_tt_url","id"])]),_:1})]),_:1}),e(r,{class:"q-pa-sm"},{default:s(()=>[e(c,{bordered:"",flat:""},{default:s(()=>[e(r,{class:"q-pa-sm bg-green-7 text-green-11"},{default:s(()=>[...t[8]||(t[8]=[$("Keterangan Surat Izin",-1)])]),_:1}),e(r,{class:"q-pa-sm"},{default:s(()=>[e(I,{modelValue:a.value.keterangan,"onUpdate:modelValue":t[7]||(t[7]=l=>a.value.keterangan=l),"min-height":"12rem",disable:o(g),definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:p}},toolbar:[["bold","italic","underline"],["undo","redo"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{ca as default};
