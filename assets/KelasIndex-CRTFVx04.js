import{q as c,ah as O,c as u,o as i,w as t,g as a,Q as $,v as S,e as b,bM as V,b as x,t as r,a as o,C as P,l as N,ac as U,s as j,E as q,ag as z,J as W}from"./index-CzCo2AzF.js";import{Q as L,a as M}from"./QToolbar-Bk6PinFF.js";import{Q as H}from"./QMarkupTable-Cz_T9de4.js";import{Q as B}from"./QRouteTab-Bg0dUjgh.js";import{Q as G}from"./QTabs-DTHAFnwj.js";import{a as R}from"./api-get-CCs8G44N.js";import{a as J}from"./api-update-Bwi9tYi-.js";import{Q as p}from"./QSkeleton-CtvU8yOX.js";import{Q as F}from"./QImg-DTK723hB.js";import{Q as D,a as v}from"./QItem-1iNcbxXq.js";import{Q as y}from"./QItemLabel-D5hrGa97.js";import{Q as X}from"./QList-_wvK2uAc.js";import{s as w}from"./santri-store-mBHvA6_q.js";import{_ as Y}from"./KelasForm-BXO9epjU.js";import"./QResizeObserver-BV5gDSe6.js";import"./rtl-DFPa-2ov.js";import"./index-8oSFQHjO.js";import"./index-CqHkJXBp.js";import"./api-error-C4cLxX8G.js";import"./QForm-xEUb9wXN.js";import"./InputSelectArray-Bj7ImUEL.js";import"./QSelect-CVnDJcQ4.js";import"./QChip-DNu4HIRX.js";import"./QMenu-DEfshBhg.js";import"./selection-Cfz6_L2u.js";import"./format-CJebrXOQ.js";import"./lists-store-CfTJOo0u.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-COLPRYlX.js";import"./QBtnDropdown-DtSY9KF1.js";import"./QBtnGroup-Bjwcb-X-.js";import"./ClosePopup-DcNTJTuu.js";import"./Lists-BYHCohcm.js";import"./ApiCrud-49QfCCsl.js";import"./Api-Dli8uF50.js";import"./InputSelectTingkatPendidikan-Bjrmg5zj.js";import"./useCrudForm-B1G8RUIc.js";import"./InputSelectTahunAjaran-C6bT91_x.js";const Z={key:1},h={key:1},aa={key:1},ta={key:1},ea={key:1},la={__name:"CardSantri",props:{id:{type:[Number,String],validator(d){if(typeof d=="number")return!isNaN(d);if(typeof d=="string"){const _=Number(d);return!isNaN(_)}return!1}}},emits:["loaded"],setup(d,{emit:_}){const I=_,g=d,l=c(!1),n=c({}),k=c({}),Q=c({}),C=async()=>{const m=await R({endPoint:"santri/"+g.id,loading:l});m&&(n.value=m.santri,Q.value=m.wali,k.value=m.ortu,w().setSantri(m.santri),w().setOrtu(m.ortu),w().setWali(m.wali))};return O(async()=>{if(g.id){const m=w().getSantri,s=w().getWali,e=w().getOrtu;m.id==g.id?(n.value=m,k.value=e,Q.value=s):await C(),I("loaded",n.value)}}),(m,s)=>(i(),u(N,{flat:"",bordered:""},{default:t(()=>[a($,{class:"no-padding"},{default:t(()=>[a(L,{class:"bg-green-1"},{default:t(()=>[a(M,{class:"text-subtitle1"},{default:t(()=>[...s[0]||(s[0]=[S(" Identitas Santri ",-1)])]),_:1}),a(b,{icon:"sync",outline:"",onClick:C})]),_:1})]),_:1}),a($,{class:"q-py-sm q-px-none"},{default:t(()=>[a(X,{dense:""},{default:t(()=>[a(D,null,{default:t(()=>[a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"QAvatar"})):(i(),u(V,{key:1,class:"d-flex"},{default:t(()=>[a(F,{src:n.value?.image_url||"/user-default.png",ratio:1,cover:""},null,8,["src"])]),_:1}))]),_:1}),a(v,null,{default:t(()=>[a(y,{overline:""},{default:t(()=>[...s[1]||(s[1]=[S(" Santri ",-1)])]),_:1}),a(y,null,{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"text"})):(i(),x("div",Z,r(n.value.nama)+" ("+r(n.value.sex)+")",1))]),_:1}),a(y,{caption:"",lines:"1"},{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"text"})):(i(),x("div",h,r(n.value?.alamat_pendek||"-"),1))]),_:1}),a(y,{caption:"",lines:"1",class:"text-italic"},{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"text"})):(i(),x("div",aa,r(n.value?.data_akhir||"-"),1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"QBtn",class:"full-width"})):(i(),u(b,{key:1,outline:"",color:"green",to:`/santri/${n.value?.id}`},{default:t(()=>[o("small",null,r(n.value?.id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),a(P,{inset:"item"}),a(D,null,{default:t(()=>[a(v,{top:"",avatar:""},{default:t(()=>[a(V)]),_:1}),a(v,null,{default:t(()=>[a(y,{overline:""},{default:t(()=>[...s[2]||(s[2]=[S(" Wali ",-1)])]),_:1}),a(y,null,{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"text"})):(i(),x("div",ta,r(Q.value?.nama)+" ("+r(Q.value?.sex)+"; "+r(n.value?.wali_status)+")",1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"QBtn",class:"full-width"})):(i(),u(b,{key:1,outline:"",color:"green",to:`/wali/${n.value?.wali_id}`},{default:t(()=>[o("small",null,r(n.value?.wali_id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),a(P,{inset:"item"}),a(D,null,{default:t(()=>[a(v,{top:"",avatar:""},{default:t(()=>[a(V)]),_:1}),a(v,null,{default:t(()=>[a(y,{overline:""},{default:t(()=>[...s[3]||(s[3]=[S(" Orang Tua ",-1)])]),_:1}),a(y,null,{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"text"})):(i(),x("div",ea,r(k.value?.ayah)+" | "+r(k.value?.ibu),1))]),_:1})]),_:1}),a(v,{avatar:""},{default:t(()=>[l.value||!d.id?(i(),u(p,{key:0,type:"QBtn",class:"full-width"})):(i(),u(b,{key:1,outline:"",color:"green",to:`/ortu/${n.value?.ortu_id}`},{default:t(()=>[o("small",null,r(n.value?.ortu_id),1)]),_:1},8,["to"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},oa={class:"row",style:{"max-width":"1400px"}},ia={class:"col-12 col-md-6 q-pa-sm"},sa={class:"col-12 col-md-6 q-pa-sm"},Wa={__name:"KelasIndex",setup(d){const _=c(0),g=U().params.id,l=c({}),n=c(!1),k=c(!1),Q=c({});async function C(s){const e=s==1,T=s==1?0:1;await J({endPoint:`kelas/${g}/set-active`,data:{aktif:e},confirm:!1})||(l.value.aktif=T)}async function m(){const s=await R({endPoint:`kelas/${g}`,loading:n});s.kelas&&(l.value=s.kelas)}return j(async()=>{await m()}),(s,e)=>{const T=q("CardHeader"),A=q("CardLoading"),E=q("router-view"),K=q("CardPage");return i(),u(K,null,{default:t(()=>[a(T,{title:"Data Murid",onOnReload:m}),a($,{class:"no-padding"},{default:t(()=>[o("div",oa,[o("div",ia,[a(N,{bordered:"",flat:""},{default:t(()=>[a(la,{id:l.value.santri_id,onLoaded:e[0]||(e[0]=f=>Q.value=f)},null,8,["id"])]),_:1}),a(N,{class:"q-mt-sm",bordered:"",flat:""},{default:t(()=>[a($,{class:"q-pa-sm"},{default:t(()=>[a(L,{class:"bg-green-1"},{default:t(()=>[a(M,{class:"text-subtitle1"},{default:t(()=>[...e[6]||(e[6]=[S(" Data Kelas ",-1)])]),_:1}),a(b,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),a(b,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:e[1]||(e[1]=f=>k.value=!0),label:"Edit","no-caps":""})]),_:1}),a(H,{flat:""},{default:t(()=>[o("tbody",null,[o("tr",null,[e[7]||(e[7]=o("td",{class:"text-italic"},"Tahun Ajaran",-1)),o("td",null,r(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),o("tr",null,[e[8]||(e[8]=o("td",{class:"text-italic"},"Tingkat",-1)),o("td",null,r(l.value.tingkat),1)]),o("tr",null,[e[9]||(e[9]=o("td",{class:"text-italic"},"Kelas",-1)),o("td",null,r(l.value.kelas),1)]),o("tr",null,[e[10]||(e[10]=o("td",{class:"text-italic"},"Nomor Absen",-1)),o("td",null,r(l.value.no_absen),1)]),o("tr",null,[e[11]||(e[11]=o("td",{class:"text-italic"},"Aktif",-1)),o("td",null,[a(z,{modelValue:l.value.aktif,"onUpdate:modelValue":[e[2]||(e[2]=f=>l.value.aktif=f),C],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),o("tr",null,[e[12]||(e[12]=o("td",{class:"text-italic"},"Keterangan",-1)),o("td",null,r(l.value.keterangan),1)])])]),_:1}),a(A,{showing:n.value},null,8,["showing"])]),_:1})]),_:1})]),o("div",sa,[a(N,{bordered:"",flat:""},{default:t(()=>[a(G,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:t(()=>[a(B,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),a(B,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),a(B,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(i(),u($,{class:"q-pa-sm",key:_.value},{default:t(()=>[(i(),u(E,{key:s.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),a(W,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=f=>k.value=f)},{default:t(()=>[a(Y,{data:l.value,onSuccessUpdate:e[3]||(e[3]=f=>{l.value=f,_.value++}),onSuccessDelete:e[4]||(e[4]=f=>s.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Wa as default};
