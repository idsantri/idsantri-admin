import{Q as c}from"./QItemLabel-CIOWhTht.js";import{Q as S,a as q}from"./QItemSection-WqxvrlOw.js";import{Q as N}from"./QSelect-BjGQaI4Q.js";import{B as m,X as x,C as p,c as v,o as f,w as o,g as t,ae as G,f as T,D as L,Q as H,bI as A,bJ as B,y as _,t as g,a8 as i,l as J}from"./index-BSwPLBvN.js";import{Q as O}from"./QForm-pLnIPDm5.js";import{_ as E}from"./InputSelectSantriId-8oBNo5K0.js";import{u as K}from"./useCrudForm-Di2BQFx5.js";import{U as M}from"./UgtGt-DL-SIinE.js";import{_ as $}from"./InputSelectTahunAjaran-DMwx7EBO.js";import{U as z}from"./UgtPjgt-BwAKJs30.js";const oe={__name:"UgtGtForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(y,{emit:j}){const s=y,V=j,e=m({...s.data}),u=m([]),r=m(!1),d=!s.data?.id;async function b(){try{r.value=!0;const n=await z.getAll({notifySuccess:!1});u.value=n.pjgt}catch{}finally{r.value=!1}}x(async()=>{await b()});function w(){e.value.pjgt_nama=u.value.find(n=>n.id==e.value?.pjgt_id)?.nama,e.value.pjgt_wilayah=u.value.find(n=>n.id==e.value?.pjgt_id)?.wilayah}const{handleDelete:Q,handleCreate:U,handleUpdate:h,loading:C}=K(M,{emit:V,responseKey:"gt"});async function F(){const n={pjgt_id:e.value.pjgt_id,santri_id:e.value.santri_id,th_ajaran_h:e.value.th_ajaran_h,telepon:e.value.telepon,email:e.value.email,keterangan:e.value.keterangan};return d?await U(n,!0):await h(s.data.id,n,!0)}const I=async()=>await Q(s.data.id);return(n,l)=>{const k=p("FormHeader"),D=p("FormLoading"),P=p("FormActions");return f(),v(J,{class:"full-width",style:{"max-width":"425px"}},{default:o(()=>[t(O,{onSubmit:G(F,["prevent"])},{default:o(()=>[t(k,{title:"Input Data GT","is-new":d}),L(C)?(f(),v(D,{key:0})):T("",!0),t(H,{class:"q-pa-sm"},{default:o(()=>[t(E,{"active-only":!0,onEmitInput:l[0]||(l[0]=a=>Object.assign(e.value,a)),data:s.data},null,8,["data"]),t(N,{class:"q-my-sm",dense:"",outlined:"",label:"PJGT ID*",modelValue:e.value.pjgt_id,"onUpdate:modelValue":[l[1]||(l[1]=a=>e.value.pjgt_id=a),w],options:u.value,"emit-value":"","map-options":"","option-value":"id","option-label":"id","error-color":"negative",loading:r.value,"use-input":"",clearable:"",behavior:"menu"},{option:o(a=>[t(S,A(B(a.itemProps)),{default:o(()=>[t(q,null,{default:o(()=>[t(c,null,{default:o(()=>[_(g(a.opt.id)+" â€” "+g(a.opt.nama),1)]),_:2},1024),t(c,{caption:""},{default:o(()=>[_(g(a.opt.wilayah),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","loading"]),t(i,{dense:"",hint:e.value.pjgt_wilayah,class:"q-my-sm",outlined:"",label:"Nama PJGT",modelValue:e.value.pjgt_nama,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.pjgt_nama=a),disable:"",filled:""},null,8,["hint","modelValue"]),t($,{modelValue:e.value.th_ajaran_h,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.th_ajaran_h=a),rules:[a=>!!a||"Harus diisi!"],class:"q-my-sm",sort:"desc"},null,8,["modelValue","rules"]),t(i,{dense:"",hint:"08123456789",class:"q-my-sm",outlined:"",label:"Telepon",modelValue:e.value.telepon,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.telepon=a),rules:[a=>!a||!isNaN(a)||"Hanya angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(i,{dense:"",class:"q-my-sm",outlined:"",label:"Email GT",modelValue:e.value.email,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.email=a)},null,8,["modelValue"]),t(i,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:e.value.keterangan,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.keterangan=a),autogrow:""},null,8,["modelValue"])]),_:1}),t(P,{"btn-delete":!d,onOnDelete:I},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{oe as _};
