import{Q as w}from"./QToolbarTitle-Bi6rSosy.js";import{x as m,a7 as T,R as q,ar as B,c as d,o as r,w as s,b as l,n as p,p as f,f as v,g as C,F as V,t as $,ae as I,z as o,q as t,v as n,B as R,s as D}from"./index-Bf-p91mW.js";import{Q as j}from"./QToolbar-CUFZpZSE.js";import{Q as F}from"./QSpinnerCube-CRIto8Mg.js";import{Q as N}from"./QSpace-DJeipgZa.js";import{Q as L,a as y}from"./QItemSection-Bl4rOme3.js";import{Q as P}from"./QList-51Eu5HNp.js";import{a as U}from"./api-get-CiRdORW1.js";import{b as A}from"./format-date-DlwYCgkJ.js";import{a as E,m as G}from"./hijri-BBdEhqDI.js";import{h as H}from"./tahun-ajaran-Dhryo64N.js";import{_ as K}from"./IzinPesantrenForm-BepF5mc8.js";const M={class:"flex"},la={__name:"IzinRiwayat",props:{santri_id:{required:!0}},setup(x){const u=x,i=m([]),b=m(!1),g=m(!1),_=m({}),{params:k}=T();q(async()=>{u.santri_id?await Q(u.santri_id):i.value=[]}),B(async()=>{u.santri_id?await Q(u.santri_id):i.value=[]});async function Q(c){const a=await U({endPoint:"izin-pesantren",params:{santri_id:c},loading:b});a.izin_pesantren&&(i.value=a.izin_pesantren,_.value={santri_id:a.santri.id,nama:a.santri.nama,data_akhir:a.santri.data_akhir})}return(c,a)=>(r(),d(D,{class:""},{default:s(()=>[l(p,{class:"bg-green-8 no-padding"},{default:s(()=>[l(j,{class:"no-padding no-margin"},{default:s(()=>[l(w,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:s(()=>[...a[3]||(a[3]=[f(" Riwayat Perizinan ",-1)])]),_:1}),l(v,{color:"green-11",outline:"",dense:"","no-caps":"",icon:"add",label:"Tambah",class:"q-mr-sm q-px-md",onClick:a[0]||(a[0]=e=>g.value=!0)})]),_:1})]),_:1}),b.value?(r(),d(p,{key:0,class:"flex flex-center"},{default:s(()=>[l(F,{color:"green-12",size:"8em",class:""})]),_:1})):i.value?.length?(r(),d(p,{key:2,class:"q-pa-sm"},{default:s(()=>[l(P,{separator:"",bordered:""},{default:s(()=>[(r(!0),C(V,null,$(i.value,(e,S)=>(r(),d(L,{key:S,class:I([e.id==o(k).id?"bg-green-1":"","q-pa-sm"])},{default:s(()=>[l(y,null,{default:s(()=>[t("table",null,[t("tbody",null,[t("tr",null,[a[5]||(a[5]=t("td",{class:"label"},"Tanggal:",-1)),t("td",M,[f(n(o(A)(e.dari_tgl)+" | "+o(E)(e.dari_tgl))+" ",1),l(N),f(" "+n(o(H)(o(G)(e.dari_tgl))),1)])]),t("tr",null,[a[6]||(a[6]=t("td",{class:"label"},"Izin",-1)),t("td",null,n(e.sifat)+" | "+n(e.durasi)+" hari | "+n(e.pengajuan),1)]),t("tr",null,[a[7]||(a[7]=t("td",{class:"label"},"Keperluan",-1)),t("td",null,n(e.keperluan)+" "+n(e.keterangan?" ("+e.keterangan+")":""),1)]),t("tr",null,[a[8]||(a[8]=t("td",{class:"label"},"Status",-1)),t("td",null,n(e.status),1)])])])]),_:2},1024),l(y,{side:"",class:"no-padding"},{default:s(()=>[l(v,{disable:e.id==o(k).id,icon:"info",glossy:"",dense:"",round:"",outline:"",color:"green",to:`/keamanan/izin-pesantren/${e.id}`},null,8,["disable","to"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})):(r(),d(p,{key:1,class:"text-italic text-center q-pa-lg"},{default:s(()=>[...a[4]||(a[4]=[f(" Tidak ada untuk ditampilkan ",-1)])]),_:1})),l(R,{modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value=e)},{default:s(()=>[l(K,{data:_.value,onSuccessDelete:e=>null,onSuccessSubmit:a[1]||(a[1]=e=>c.$router.push(`/keamanan/izin-pesantren/${e.id}`))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1}))}};export{la as _};
