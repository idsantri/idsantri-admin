import{q as s,ad as _,A as g,s as k,b as y,o as $,g as m,w as b,G as p,J as j}from"./index-BhNrssHr.js";import{_ as w}from"./TemplateArray-C41Kp_X7.js";import{r as A,d as B,g as K}from"./array-object-BytDdNh7.js";import{_ as S}from"./KelasForm-CKAMqF7p.js";import{K as h}from"./Kelas-DPMc6H02.js";import"./QItem-Cr1HBVIS.js";import"./QItemLabel-BODfowdk.js";import"./QList-DxuGxdz8.js";import"./QForm-DomdkE2s.js";import"./InputSelectArray-jHPK6X1E.js";import"./QSelect-BPcFPUdZ.js";import"./QField-CTzMATWn.js";import"./QChip-3Bxr7esK.js";import"./QMenu-lfUwDmLC.js";import"./selection-Ar_MOr7D.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-Wjhiehi1.js";import"./ArrayCrud-DeaxgM1Q.js";import"./DropDownAfter-BUGSFTKq.js";import"./QBtnDropdown-CKvAkW5R.js";import"./QBtnGroup-CWuo4TYS.js";import"./ClosePopup-Dc0LwGVK.js";import"./Lists-cqCQ-d7A.js";import"./ApiCrud-Y9YyvD4T.js";import"./Api-AFAYKZcw.js";import"./index-DcSvzz47.js";import"./index-BTJ4P_xk.js";import"./apiPost-Cy9rOp67.js";import"./InputSelectTingkatPendidikan-D5h2QOWN.js";import"./useCrudForm-D7gRVo0u.js";import"./InputSelectTahunAjaran-DWCw9OiC.js";const la={__name:"SantriKelas",setup(V){const l=s(!1),i=s(!1),r=s({}),o=s([]),n=s({}),{params:u}=_();async function d(){try{l.value=!0;const a=await h.santri(u.id);o.value=a.kelas,n.value=a.santri}catch{console.log("error get kelas")}finally{l.value=!1}}const c=g(()=>o.value.map(a=>({"Tahun Ajaran":`${a.th_ajaran_h}  |  ${a.th_ajaran_m||""} `,Kelas:`${a.kelas} ${a.tingkat}`+(a.no_absen?` (No. ${a.no_absen})`:""),Keterangan:a.keterangan||"-",id:a.id})).reverse());k(async()=>{await d()});const v=()=>{r.value={santri_id:n.value.id,nama:n.value.nama},i.value=!0},f=({id:a})=>{r.value=K(o,a),r.value.santri_id=n.value.id,r.value.nama=n.value.nama,i.value=!0};return(a,t)=>($(),y("div",null,[m(w,{data:c.value,spinner:l.value,link:"/madrasah/kelas",onAdd:v,onEdit:f},null,8,["data","spinner"]),m(j,{modelValue:i.value,"onUpdate:modelValue":t[3]||(t[3]=e=>i.value=e)},{default:b(()=>[m(S,{data:r.value,onSuccessDelete:t[0]||(t[0]=e=>p(B)(o.value,e)),onSuccessCreate:t[1]||(t[1]=e=>o.value.push(e)),onSuccessUpdate:t[2]||(t[2]=e=>p(A)(o.value,e.id,e))},null,8,["data"])]),_:1},8,["modelValue"])]))}};export{la as default};
