import{q as n,ac as q,s as V,E as d,c as f,o as c,w as o,g as e,Q as v,a as t,l as g,v as D,e as Q,t as r,ag as N,J as P}from"./index-BD0rPuwI.js";import{Q as R,a as S}from"./QToolbar-DtZkS60q.js";import{Q as A}from"./QMarkupTable-DP4P_6d8.js";import{Q as k}from"./QRouteTab-1ww9ytiz.js";import{Q as B}from"./QTabs-EUIxuNg1.js";import{a as K}from"./api-get-BCXhCHlZ.js";import{a as M}from"./api-update-DJyiURe1.js";import{_ as U}from"./CardSantri-TKCjLTRL.js";import{_ as j}from"./KelasForm-DbJVS9Qg.js";import"./QResizeObserver-DxSbAeTr.js";import"./rtl-DFPa-2ov.js";import"./index-n6Dqaau9.js";import"./index-Bt3cYzg4.js";import"./api-error-DI2-xNds.js";import"./QSkeleton-XNUgrYtX.js";import"./QImg-Bw4PCoSV.js";import"./QItemSection-IwpTB_GG.js";import"./QItemLabel-D6C2_kLw.js";import"./QList-BEPgv0aR.js";import"./santri-store-BNSQ2yZ2.js";import"./QForm-Bxs8j-wD.js";import"./InputSelectArray-C3_iyAte.js";import"./QSelect-CYTXzFFA.js";import"./QChip-CZ2DfYuE.js";import"./QMenu-Bb-0PlhQ.js";import"./selection-D1mjVW1G.js";import"./format-CJebrXOQ.js";import"./lists-store-h_cLlXO2.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-DARN8D_I.js";import"./QBtnDropdown-C1QKmXiE.js";import"./QBtnGroup-PW693_0R.js";import"./ClosePopup-CCVUmZVV.js";import"./Lists-Brk1_KEv.js";import"./ApiCrud-C6ys5aHm.js";import"./Api-CkWZCpKy.js";import"./InputSelectTingkatPendidikan-DRnLqT0l.js";import"./useCrudForm-DmdwiqlE.js";import"./InputSelectTahunAjaran-DwMARPKQ.js";const z={class:"row",style:{"max-width":"1400px"}},L={class:"col-12 col-md-6 q-pa-sm"},E={class:"col-12 col-md-6 q-pa-sm"},Na={__name:"KelasIndex",setup(H){const _=n(0),b=q().params.id,l=n({}),w=n(!1),u=n(!1),y=n({});async function C(i){const a=i==1,p=i==1?0:1;await M({endPoint:`kelas/${b}/set-active`,data:{aktif:a},confirm:!1})||(l.value.aktif=p)}async function m(){const i=await K({endPoint:`kelas/${b}`,loading:w});i.kelas&&(l.value=i.kelas)}return V(async()=>{await m()}),(i,a)=>{const p=d("CardHeader"),x=d("CardLoading"),$=d("router-view"),T=d("CardPage");return c(),f(T,null,{default:o(()=>[e(p,{title:"Data Murid",onOnReload:m}),e(v,{class:"no-padding"},{default:o(()=>[t("div",z,[t("div",L,[e(g,{bordered:"",flat:""},{default:o(()=>[e(U,{id:l.value.santri_id,onLoaded:a[0]||(a[0]=s=>y.value=s)},null,8,["id"])]),_:1}),e(g,{class:"q-mt-sm",bordered:"",flat:""},{default:o(()=>[e(v,{class:"q-pa-sm"},{default:o(()=>[e(R,{class:"bg-green-1"},{default:o(()=>[e(S,{class:"text-subtitle1"},{default:o(()=>[...a[6]||(a[6]=[D(" Data Kelas ",-1)])]),_:1}),e(Q,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),e(Q,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:a[1]||(a[1]=s=>u.value=!0),label:"Edit","no-caps":""})]),_:1}),e(A,{flat:""},{default:o(()=>[t("tbody",null,[t("tr",null,[a[7]||(a[7]=t("td",{class:"text-italic"},"Tahun Ajaran",-1)),t("td",null,r(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),t("tr",null,[a[8]||(a[8]=t("td",{class:"text-italic"},"Tingkat",-1)),t("td",null,r(l.value.tingkat),1)]),t("tr",null,[a[9]||(a[9]=t("td",{class:"text-italic"},"Kelas",-1)),t("td",null,r(l.value.kelas),1)]),t("tr",null,[a[10]||(a[10]=t("td",{class:"text-italic"},"Nomor Absen",-1)),t("td",null,r(l.value.no_absen),1)]),t("tr",null,[a[11]||(a[11]=t("td",{class:"text-italic"},"Aktif",-1)),t("td",null,[e(N,{modelValue:l.value.aktif,"onUpdate:modelValue":[a[2]||(a[2]=s=>l.value.aktif=s),C],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),t("tr",null,[a[12]||(a[12]=t("td",{class:"text-italic"},"Keterangan",-1)),t("td",null,r(l.value.keterangan),1)])])]),_:1}),e(x,{showing:w.value},null,8,["showing"])]),_:1})]),_:1})]),t("div",E,[e(g,{bordered:"",flat:""},{default:o(()=>[e(B,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:o(()=>[e(k,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),e(k,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),e(k,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(c(),f(v,{class:"q-pa-sm",key:_.value},{default:o(()=>[(c(),f($,{key:i.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),e(P,{modelValue:u.value,"onUpdate:modelValue":a[5]||(a[5]=s=>u.value=s)},{default:o(()=>[e(j,{data:l.value,onSuccessUpdate:a[3]||(a[3]=s=>{l.value=s,_.value++}),onSuccessDelete:a[4]||(a[4]=s=>i.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Na as default};
