import{Q as q}from"./QTab-wq93-VNZ.js";import{Q as U}from"./QTabs-CUreadVK.js";import{Q as T,a as k}from"./QTabPanels-D-Pybpqg.js";import{q as c,s as z,E as $,b as r,o as l,a as m,g as n,e as S,C as E,w as f,a9 as D,af as B,t as j,c as C,Q as x,l as H,f as N,v as L,F as O,D as F}from"./index-CywAldKl.js";import{Q as P}from"./QEditor-CRGg4VuI.js";import{a as V}from"./api-get-CiJ7wjqE.js";import{a as _}from"./api-post-CB6uhJdd.js";import{Q}from"./QForm-C4sObFI3.js";import{Q as J}from"./QSkeleton-TA2uBpJa.js";import"./QResizeObserver-A9rE8k7d.js";import"./rtl-DFPa-2ov.js";import"./use-panel-CFnxbIhM.js";import"./touch-BjYP5sR0.js";import"./selection-DNdgDFiB.js";import"./QBtnDropdown-CzsBb9Zc.js";import"./QBtnGroup-BjmvB1FU.js";import"./QMenu-Cw0XRxru.js";import"./QTooltip-CKvstq_g.js";import"./QItem-C5PltTt6.js";import"./use-fullscreen-H8dnT4ja.js";import"./index-BpCflRzf.js";import"./index-DpzgZQa-.js";import"./api-error-BDflpWxB.js";const M={class:"flex justify-between items-center q-mb-sm"},A={key:0},I={key:1},W={key:0,class:""},G=["innerHTML"],R={key:1},K={__name:"PanelProfile",setup(g){const i=c(""),s=c(""),e=c(!1),t=c(!1);async function b(){const a=await V({endPoint:"config/app-wali/profile",loading:t});a&&a.profile&&(i.value=a.profile)}z(async()=>{await b()});const d=async()=>{const a=await _({endPoint:"config/app-wali/profile",loading:t,data:{profile:s.value}});a&&(e.value=!1,i.value=a.profile)};function v(){s.value=i.value,e.value=!e.value}return(a,u)=>{const o=$("CardLoading");return l(),r("div",null,[m("div",M,[u[1]||(u[1]=m("div",null,[m("div",{class:"text-italic text-weight-light"}," Teks untuk ditampilkan di halaman beranda Aplikasi Wali Santri ")],-1)),n(S,{dense:"",class:"q-px-sm",icon:e.value?"close":"edit",outline:"",label:e.value?"Batal":"Edit","no-caps":"",onClick:v},null,8,["icon","label"])]),e.value?(l(),r("div",A,[n(P,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=p=>s.value=p),"min-height":"20rem",disable:t.value,definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:d}},toolbar:[[{label:a.$q.lang.editor.align,icon:a.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:a.$q.lang.editor.formatting,icon:a.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:a.$q.lang.editor.fontSize,icon:a.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions","toolbar"])])):(l(),r("div",I,[n(E,{class:"q-mb-sm"}),i.value?(l(),r("div",W,[m("span",{innerHTML:i.value},null,8,G)])):(l(),r("div",R,[...u[2]||(u[2]=[m("div",{class:""},"Belum diatur",-1)])])),n(o,{showing:t.value},null,8,["showing"])]))])}}},X={class:"flex justify-between items-center"},Y={key:0},Z={key:1},ee={key:0},ne={key:1},ae={key:2},te={class:"text-weight-bold"},ie={__name:"PanelCs",setup(g){const i=c(!1),s=c(""),e=c(!1),t=c("");async function b(){const a=await V({endPoint:"config/app-wali/cs",loading:e});a&&a.cs&&(t.value=a.cs)}z(async()=>{await b()});const d=async()=>{const a=await _({endPoint:"config/app-wali/cs",loading:e,data:{cs:s.value}});a&&(t.value=a.cs,i.value=!1)},v=()=>{s.value=t.value,i.value=!i.value};return(a,u)=>(l(),r("div",X,[m("div",null,[u[2]||(u[2]=m("div",{class:"text-italic text-weight-light"}," Nomor WA Customer Service: ",-1)),i.value?(l(),r("div",Y,[n(Q,{onSubmit:B(d,["prevent"]),class:"flex items-start q-gutter-x-sm"},{default:f(()=>[n(D,{modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=o=>s.value=o),outlined:"",dense:"",label:"Nomor WA",disable:e.value,clearable:"",placeholder:"628xxxx",rules:[o=>!o||!isNaN(o)||"Hanya angka!"]},null,8,["modelValue","disable","rules"]),n(S,{type:"submit",color:"green-10",outline:"","no-caps":"",disabled:e.value,class:"q-px-sm",loading:e.value,icon:"save",label:"Simpan"},null,8,["disabled","loading"])]),_:1})])):(l(),r("div",Z,[e.value?(l(),r("div",ee,[n(J)])):t.value===""||t.value===null?(l(),r("div",ne,[...u[1]||(u[1]=[m("div",{class:""},"Belum diatur",-1)])])):(l(),r("div",ae,[m("div",te,j(t.value.replace(/(\d{2})(\d{3})(\d{4})(\d{4})/,"$1 $2-$3-$4")),1)]))]))]),n(S,{dense:"",class:"q-px-sm",icon:i.value?"close":"edit",outline:"",label:i.value?"Batal":"Edit","no-caps":"",onClick:v},null,8,["icon","label"])]))}},oe={class:"text-weight-bold"},le={key:0},se=["innerHTML"],re={__name:"CardBanner",props:{banner:{type:Object,default:()=>{}},index:{type:Number,default:0}},emits:["onUpdate","onDelete"],setup(g,{emit:i}){const s=i,e=c(!1),t=c(g.banner?.content||"");function b(){s("onUpdate",{id:g.banner.id,content:t.value})}return(d,v)=>(l(),C(H,{class:"q-mt-sm",flat:"",bordered:""},{default:f(()=>[n(x,{class:"q-pa-sm bg-green-1 flex justify-between items-center"},{default:f(()=>[m("div",oe,"Banner "+j(g.index+1),1),m("div",null,[n(S,{dense:"",class:"q-px-sm q-mr-sm",icon:e.value?"close":"edit",outline:"",label:e.value?"Batal":"Edit","no-caps":"",onClick:v[0]||(v[0]=a=>e.value=!e.value)},null,8,["icon","label"]),n(S,{dense:"",class:"q-px-sm",icon:"delete",outline:"",label:"Hapus","no-caps":"",color:"negative",onClick:v[1]||(v[1]=a=>d.$emit("onDelete",g.banner.id))})])]),_:1}),n(x,{class:"q-pa-sm"},{default:f(()=>[e.value?(l(),r("div",le,[n(Q,{onSubmit:B(b,["prevent"])},{default:f(()=>[n(P,{modelValue:t.value,"onUpdate:modelValue":v[2]||(v[2]=a=>t.value=a),"min-height":"20rem",definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:b}},toolbar:[[{label:d.$q.lang.editor.align,icon:d.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:d.$q.lang.editor.formatting,icon:d.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:d.$q.lang.editor.fontSize,icon:d.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","definitions","toolbar"])]),_:1})])):(l(),r("div",{key:1,innerHTML:g.banner?.content},null,8,se))]),_:1})]),_:1}))}},de={class:"flex justify-between items-center q-mb-sm"},ue={key:0},ce={key:1},me={key:0},pe={key:1},fe={__name:"PanelBanner",setup(g){const i=c(""),s=c(!1),e=c([]),t=c(!1),b=c(!1);async function d(o){const h=JSON.parse(JSON.stringify(e.value)).filter(w=>w.id!==o);await _({endPoint:"config/app-wali/banners",loading:s,data:{banners:h},notify:!0,message:"Hapus banner?"})&&(e.value=h)}async function v(o){const h=JSON.parse(JSON.stringify(e.value)).map(w=>w.id===o.id?{...w,content:o.content}:w);await _({endPoint:"config/app-wali/banners",loading:s,data:{banners:h}})&&(e.value=h)}async function a(){const o=await V({endPoint:"config/app-wali/banners",loading:s});o&&o.banners&&(e.value=o.banners)}z(async()=>{await a()});async function u(){const p=[...JSON.parse(JSON.stringify(e.value)),{id:new Date().getTime(),content:i.value}];await _({endPoint:"config/app-wali/banners",loading:s,data:{banners:p}})&&(e.value=p,t.value=!1,i.value="")}return(o,p)=>{const h=$("CardLoading");return l(),r("div",null,[m("div",de,[p[2]||(p[2]=m("div",null,[m("div",{class:"text-italic text-weight-light"},"Banner Pengumuman")],-1)),n(S,{dense:"",class:"q-px-sm",icon:t.value?"close":"add",outline:"",label:t.value?"Batal":"Baru","no-caps":"",onClick:p[0]||(p[0]=y=>t.value=!t.value)},null,8,["icon","label"])]),t.value?(l(),r("div",ue,[n(Q,{onSubmit:B(u,["prevent"])},{default:f(()=>[n(P,{modelValue:i.value,"onUpdate:modelValue":p[1]||(p[1]=y=>i.value=y),"min-height":"10rem",disable:s.value,definitions:{save:{tip:"Save your work",icon:"save",label:"Simpan",handler:u}},toolbar:[[{label:o.$q.lang.editor.align,icon:o.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]}],["bold","italic","underline"],["undo","redo"],[{label:o.$q.lang.editor.formatting,icon:o.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6"]},{label:o.$q.lang.editor.fontSize,icon:o.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["unordered","ordered","outdent","indent"],["save"]]},null,8,["modelValue","disable","definitions","toolbar"])]),_:1})])):N("",!0),t.value?N("",!0):(l(),r("div",ce,[e.value.length?(l(),r("div",pe,[(l(!0),r(O,null,F(e.value,(y,w)=>(l(),C(re,{key:y.id,banner:y,index:w,onOnUpdate:v,onOnDelete:d,errorUpdate:b.value},null,8,["banner","index","errorUpdate"]))),128))])):(l(),r("div",me,[...p[3]||(p[3]=[m("div",{class:"text-center text-italic q-pa-lg text-negative"},[L(" Tidak ada data "),m("br"),L("Silakan tambahkan banner baru ")],-1)])])),n(h,{showing:s.value},null,8,["showing"])]))])}}},Ee={__name:"IndexPage",setup(g){const i=c("banner");return(s,e)=>{const t=$("CardHeader"),b=$("CardPage");return l(),C(b,null,{default:f(()=>[n(t,{title:"Pengaturan Aplikasi Wali Santri",showReload:!1}),n(x,{class:"q-pa-sm"},{default:f(()=>[n(U,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=d=>i.value=d),"inline-label":"","outside-arrows":"","mobile-arrows":"","indicator-color":"green-13","active-color":"green-11",align:"left",class:"bg-green-7 text-green-3 q-mb-sm"},{default:f(()=>[n(q,{name:"banner",label:"Banner","no-caps":""}),n(q,{name:"cs",label:"Nomor CS","no-caps":""}),n(q,{name:"profil",label:"Profil","no-caps":""})]),_:1},8,["modelValue"]),n(T,{modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=d=>i.value=d),animated:"",class:"rounded-borders q-card--bordered"},{default:f(()=>[n(k,{name:"banner",class:"q-pa-sm"},{default:f(()=>[n(fe)]),_:1}),n(k,{name:"cs",class:"q-pa-sm"},{default:f(()=>[n(ie)]),_:1}),n(k,{name:"profil",class:"q-pa-sm"},{default:f(()=>[n(K)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};export{Ee as default};
