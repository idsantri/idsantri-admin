import{q as C,ap as K,s as U,Y as h,E as r,c as d,o as p,w as i,g as s,af as x,f as Q,G as j,Q as H,a9 as m,l as I}from"./index-CEqRNMKa.js";import{Q as N}from"./QForm-BLkSNr4R.js";import{_ as D}from"./InputSelectArray-BdV20Le8.js";import{_ as S}from"./InputSelectTingkatPendidikan-LTgksedL.js";import{K as A}from"./Kelas-CY1jPbTg.js";import{u as $}from"./useCrudForm-B6DzUwVC.js";import{_ as B}from"./InputSelectTahunAjaran-BN0RCkGs.js";const Y={__name:"KelasForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(_,{emit:c}){const t=_,f=c,e=C({...t.data}),n=!t.data?.id,o=K("firstInput");U(async()=>{await h(),o.value&&o.value.focus()});const{handleDelete:v,handleCreate:k,handleUpdate:b,loading:V}=$(A,{emit:f,responseKey:"kelas"}),y=async()=>{const u={santri_id:e.value.santri_id,th_ajaran_h:e.value.th_ajaran_h,tingkat_id:e.value.tingkat_id,kelas:e.value.kelas,no_absen:e.value.no_absen,keterangan:e.value.keterangan};return n?await k(u,!0):await b(t.data.id,u,!0)},g=async()=>await v(t.data.id);return(u,l)=>{const w=r("FormHeader"),F=r("FormLoading"),q=r("FormActions");return p(),d(I,{class:"full-width",style:{"max-width":"425px"}},{default:i(()=>[s(N,{onSubmit:x(y,["prevent"])},{default:i(()=>[s(w,{title:"Input Kelas","is-new":n}),j(V)?(p(),d(F,{key:0})):Q("",!0),s(H,null,{default:i(()=>[s(m,{dense:"",outlined:"",label:"Nama","model-value":e.value?.nama+" ("+e.value?.santri_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),s(B,{modelValue:e.value.th_ajaran_h,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.th_ajaran_h=a),rules:[a=>!!a||"Harus diisi!"],class:"q-my-sm",ref_key:"firstInput",ref:o},null,8,["modelValue","rules"]),s(S,{modelValue:e.value.tingkat_id,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.tingkat_id=a),class:"q-my-sm",rules:[a=>!!a||"Harus diisi!"]},null,8,["modelValue","rules"]),s(D,{modelValue:e.value.kelas,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.kelas=a),url:"kelas",label:"Kelas *",rules:[a=>!!a||"Harus diisi!"],class:"q-my-sm"},null,8,["modelValue","rules"]),s(m,{dense:"",class:"q-my-sm",outlined:"",label:"Nomor Absen",modelValue:e.value.no_absen,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.no_absen=a),type:"number"},null,8,["modelValue"]),s(m,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:e.value.keterangan,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.keterangan=a),autogrow:""},null,8,["modelValue"])]),_:1}),s(q,{"btn-delete":!n,onOnDelete:g},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{Y as _};
