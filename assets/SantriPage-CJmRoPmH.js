import{bP as y,bQ as w,r as x,o as g,i as l,w as i,bF as S,bG as U,j as C,t as D,a9 as P,p as A,k as _,v as p,b as k,R as I,aa as N,G as Q,be as O,f as b,y as R,Q as j,z as G,q as z}from"./index-1h6WQa8x.js";import{Q as L}from"./QTable-gGDItY7R.js";import{a as H}from"./api-get-BY6mtHh6.js";import{c as J,_ as W}from"./column-header-BLFOBpCw.js";import{_ as X}from"./TableHeader-Cf0_8mIr.js";import{Q as F}from"./QItemLabel-BCrbjFPh.js";import{Q as q,a as T}from"./QItemSection-CDMonx4a.js";import{Q as K}from"./QSelect-DyXiAk3o.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QList-DG4NG05A.js";import"./QMarkupTable-CljO3Fff.js";import"./use-fullscreen-DRV899F_.js";import"./index-CpzetzrR.js";import"./index-_Ec9HkD1.js";import"./api-error-B2Y93K9w.js";import"./QSkeleton-BA_8lTLb.js";import"./QSpinnerCube-CdFtSnRz.js";import"./QForm-Dcqp4yj8.js";import"./api-post-C74Y7wCj.js";import"./api-update-Damf_6Ly.js";import"./api-delete-BHdy2F2f.js";import"./InputSelectArray-f2GqfPam.js";import"./api-get-lists-BZgeu587.js";import"./lists-store-DUO5Gnb9.js";import"./lists-data-L-iOlbK0.js";import"./DropDownAfter-vvhC7sAZ.js";import"./QBtnDropdown-BuGH-2yX.js";import"./QBtnGroup-GiM85D-N.js";import"./QMenu-C8eKSCkY.js";import"./selection-Bkxc-DqK.js";import"./ClosePopup-DlITPM1C.js";import"./CardSantriSimple-B4aE1WRE.js";import"./QSpace-CR7bsMEl.js";import"./QImg-_Bkf3zut.js";import"./santri-store-B0W6NRUd.js";import"./array-object-BytDdNh7.js";import"./format-date-DlwYCgkJ.js";import"./id-BuNGTsqN.js";import"./hijri-BBdEhqDI.js";import"./format-number-B34ySHL_.js";import"./QChip-DJ1cSnO8.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";const Z={class:"flex items-center justify-between"},ee={__name:"FilterDomisili",props:y({options:{type:Array,default:()=>[]}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:y(["onToggle"],["update:modelValue"]),setup(v){const u=w(v,"modelValue");return(c,d)=>(g(),x("div",Z,[l(K,{dense:"",outlined:"",multiple:"",label:"Pilih Domisili",modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=o=>u.value=o),options:v.options,style:{width:"300px"},clearable:""},{option:i(({itemProps:o,opt:s,selected:r,toggleOption:m})=>[l(q,S(U(o)),{default:i(()=>[l(T,null,{default:i(()=>[l(F,null,{default:i(()=>[C(D(s),1)]),_:2},1024)]),_:2},1024),l(T,{side:""},{default:i(()=>[l(P,{"model-value":r,"onUpdate:modelValue":n=>m(s),color:"green-6"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),l(A,{label:"Filter by Kelas",class:"q-px-sm","no-caps":"",color:"green-6",dense:"",onClick:d[1]||(d[1]=o=>c.$emit("onToggle"))})]))}},le={class:"flex items-center justify-between"},te={class:"flex items-center q-gutter-x-sm"},oe={__name:"FilterKelas",props:y({optionsTingkat:{type:Array,default:()=>[]},optionsKelas:{type:Array,default:()=>[]}},{modelTingkat:{type:String,default:()=>""},modelTingkatModifiers:{},modelKelas:{type:Array,default:()=>[]},modelKelasModifiers:{}}),emits:y(["onToggle"],["update:modelTingkat","update:modelKelas"]),setup(v){const u=w(v,"modelTingkat"),c=w(v,"modelKelas");return(d,o)=>(g(),x("div",le,[_("div",te,[l(K,{dense:"",outlined:"",label:"Pilih Tingkat Pendidikan",style:{width:"300px"},clearable:"",options:v.optionsTingkat,modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s)},null,8,["options","modelValue"]),l(K,{dense:"",outlined:"",multiple:"",label:"Pilih Kelas",options:v.optionsKelas,modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=s=>c.value=s),style:{width:"300px"},clearable:""},{option:i(({itemProps:s,opt:r,selected:m,toggleOption:n})=>[l(q,S(U(s)),{default:i(()=>[l(T,null,{default:i(()=>[l(F,null,{default:i(()=>[C(D(r),1)]),_:2},1024)]),_:2},1024),l(T,{side:""},{default:i(()=>[l(P,{"model-value":m,"onUpdate:modelValue":f=>n(r),color:"green-6"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["options","modelValue"])]),l(A,{label:"Filter by Domisili","no-caps":"",color:"green-6",dense:"",class:"q-px-sm",onClick:o[2]||(o[2]=s=>d.$emit("onToggle"))})]))}},ae={class:"flex items-start q-gutter-sm"},se={class:"col-grow"},ie={class:""},ne={__name:"SantriPage",setup(v){const u=p(""),c=p(!1),d=p({}),o=p([]),s=p(!1),r=p([]),m=p(!0),n=p(""),f=p([]),M=k(()=>o.value.filter(a=>{const e=!r.value?.length||r.value.includes(a.domisili),t=!n.value||a.tingkat===n.value,V=!f.value?.length||f.value.includes(a.kelas);return e&&t&&V}));async function $(){const a=await H({endPoint:"mutaallim/santri",loading:c});a&&(o.value=a.santri)}I(async()=>{await $()});const h=k(()=>{const a=new Set;return o.value.forEach(e=>{e.domisili&&a.add(e.domisili)}),Array.from(a).sort((e,t)=>e.localeCompare(t))}),B=k(()=>{const a=new Set;return o.value.forEach(e=>{e.tingkat&&a.add(e.tingkat)}),Array.from(a).sort((e,t)=>e.localeCompare(t))}),E=k(()=>{if(!n.value)return[];const a=new Set;return o.value.forEach(e=>{e.tingkat===n.value&&e.kelas&&a.add(e.kelas)}),Array.from(a).sort((e,t)=>e.localeCompare(t))});return N(()=>{s.value||(r.value=[],n.value="",f.value=[])}),Q(m,()=>{r.value=[],n.value="",f.value=[]}),Q(n,()=>{f.value=[]}),(a,e)=>(g(),x("div",ae,[_("div",se,[l(z,{flat:"",bordered:""},{default:i(()=>[l(X,{title:"Data Santri AKTIF",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),onOnReload:$,onOnFilter:e[1]||(e[1]=t=>s.value=!s.value),"show-filter":s.value},null,8,["modelValue","show-filter"]),l(O,{name:"fade"},{default:i(()=>[s.value?(g(),b(j,{key:0,class:"q-pa-sm"},{default:i(()=>[m.value?(g(),b(ee,{key:0,modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value=t),options:h.value,onOnToggle:e[3]||(e[3]=t=>m.value=!m.value)},null,8,["modelValue","options"])):(g(),b(oe,{key:1,modelTingkat:n.value,"onUpdate:modelTingkat":e[4]||(e[4]=t=>n.value=t),modelKelas:f.value,"onUpdate:modelKelas":e[5]||(e[5]=t=>f.value=t),optionsTingkat:B.value,optionsKelas:E.value,onOnToggle:e[6]||(e[6]=t=>m.value=!m.value)},null,8,["modelTingkat","modelKelas","optionsTingkat","optionsKelas"]))]),_:1})):R("",!0)]),_:1}),l(L,{rows:M.value,filter:u.value,loading:c.value,"rows-per-page-options":[10,25,50,100,0],flat:"",onRowClick:e[7]||(e[7]=(t,V,re)=>d.value=V),columns:G(J),"table-header-class":"bg-green-1 text-green-10 text-subtitle1"},null,8,["rows","filter","loading","columns"])]),_:1})]),_("div",ie,[l(W,{santri:d.value},null,8,["santri"])])]))}},Ye=Y(ne,[["__scopeId","data-v-53739ec3"]]);export{Ye as default};
