import{q as s,ab as q,N as B,c as Q,o as x,w as e,g as a,l as w,Q as p,v as V,ac as h,s as j,E as b,e as D,a as v,a8 as P,p as N,J as T}from"./index-BD0rPuwI.js";import{Q as A}from"./QSpace-5xN-RTD3.js";import{Q as F}from"./QTable-24OscB3R.js";import{i as k}from"./format-date-DlwYCgkJ.js";import{_ as H}from"./FilterTanggal-CI3Ao_UO.js";import{Q as L}from"./QItemLabel-D6C2_kLw.js";import{Q as M,a as E}from"./QItemSection-IwpTB_GG.js";import{Q as R}from"./QList-BEPgv0aR.js";import{Q as U}from"./QBtnDropdown-C1QKmXiE.js";import{_ as J}from"./InputSelectSantriId-DbY6aM65.js";import{_ as O}from"./IzinPesantrenForm-DBMlIQBu.js";import{I as G}from"./IzinPesantren-B13Ox4Uj.js";import"./QMarkupTable-DP4P_6d8.js";import"./QSelect-CYTXzFFA.js";import"./QChip-CZ2DfYuE.js";import"./QMenu-Bb-0PlhQ.js";import"./selection-D1mjVW1G.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./use-fullscreen-D6Rd3ynI.js";import"./id-BuNGTsqN.js";import"./QToolbar-DtZkS60q.js";import"./index-Bt3cYzg4.js";import"./QBtnGroup-PW693_0R.js";import"./Santri-D4LM7LTo.js";import"./ApiCrud-C6ys5aHm.js";import"./Api-CkWZCpKy.js";import"./index-n6Dqaau9.js";import"./api-error-DI2-xNds.js";import"./QForm-Bxs8j-wD.js";import"./InputSelectArray-C3_iyAte.js";import"./lists-store-h_cLlXO2.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-DARN8D_I.js";import"./ClosePopup-CCVUmZVV.js";import"./Lists-Brk1_KEv.js";import"./useCrudForm-DmdwiqlE.js";const K={__name:"DropDownMenu",setup(S){const r=s({santri_id:null,nama:""}),i=q();return B(()=>r.value.nama,m=>{m?.length>0&&r.value.santri_id&&i.push("/keamanan/izin-pesantren/santri/"+r.value.santri_id)}),(m,o)=>(x(),Q(U,{color:"green-10",label:"Filter By","no-caps":"",class:"text-green-11 q-px-md",dense:""},{default:e(()=>[a(R,null,{default:e(()=>[a(M,{class:"q-pa-sm"},{default:e(()=>[a(E,null,{default:e(()=>[a(L,null,{default:e(()=>[a(w,{flat:"",style:{width:"250px"}},{default:e(()=>[a(p,{class:"no-padding text-subtitle1"},{default:e(()=>[...o[1]||(o[1]=[V(" Filter by Santri ID ",-1)])]),_:1}),a(p,{class:"no-padding"},{default:e(()=>[a(J,{class:"q-mt-sm","active-only":!1,onEmitInput:o[0]||(o[0]=u=>Object.assign(r.value,u)),data:{}})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},W=["innerHTML"],Pa={__name:"IzinByDate",setup(S){const r=s([{}]),i=s(!1),m=h(),o=s({}),u=s(""),c={startDate:m.params.startDate||0,endDate:m.params.endDate||0},_=s(c.startDate),g=s(c.endDate),f=s(!1);function y(n){o.value=n}async function I(n,t){try{i.value=!0;const d=await G.getAll({params:{start_date:n,end_date:t}});r.value=d.izin_pesantren}catch(d){console.log("ðŸš€ ~ loadData ~ error:",d)}finally{i.value=!1}}j(async()=>{k(_.value)&&k(g.value)&&await I(_.value,g.value)});const $=[{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"data_akhir",label:"Data Akhir",align:"left",field:"data_akhir",sortable:!0},{name:"pengajuan",label:"Sifat | Durasi | Pengajuan",align:"left",field:n=>`${n.sifat??""} ${n.durasi?" | "+n.durasi+" hari":""} ${n.pengajuan?" | "+n.pengajuan:""} `,sortable:!0},{name:"dari_tgl",label:"Dari",align:"left",field:"dari_tgl",sortable:!0},{name:"sampai_tgl",label:"Sampai",align:"left",field:"sampai_tgl",sortable:!0},{name:"status",label:"Status",align:"left",field:"status",sortable:!0},{name:"alamat",label:"Alamat",align:"left",field:"alamat_pendek",sortable:!0,classes:"alamat"}];return(n,t)=>{const d=b("CardHeader"),z=b("CardPage");return x(),Q(z,null,{default:e(()=>[a(d,{title:"Data Izin Pesantren","show-reload":!1},{buttons:e(()=>[a(D,{dense:"",icon:"sym_o_bar_chart",label:"Statistik","no-caps":"",class:"q-px-sm",outline:"",to:"/keamanan/izin-pesantren/statistik"})]),_:1}),a(p,{class:"q-pa-sm"},{default:e(()=>[a(H,{showBulanUjian:!0,"start-url":"/keamanan/izin-pesantren",onDataFilter:y},{default:e(()=>[a(K)]),_:1}),a(w,{class:"q-mt-sm",flat:"",bordered:""},{default:e(()=>[a(p,{class:"bg-green-7 text-green-1 text-subtitle1 q-pa-sm flex flex-center"},{default:e(()=>[v("span",{innerHTML:o.value.display||""},null,8,W),a(A),a(D,{dense:"",icon:"add",label:"Baru","no-caps":"",color:"green-11 q-px-md",class:"text-green-10",onClick:t[0]||(t[0]=l=>f.value=!0)})]),_:1}),a(F,{class:"dt q-pa-sm",rows:r.value,columns:$,loading:i.value,filter:u.value,"rows-per-page-options":[10,25,50,75,100,0],"no-data-label":"Silakan tentukan filter tanggal!","no-results-label":"Tidak ditemukan kata kunci yang sesuai dengan pencarian Anda!","row-key":"name",flat:"",onRowClick:t[2]||(t[2]=(l,C,X)=>n.$router.push(`/keamanan/izin-pesantren/${C.id}`))},{"top-left":e(()=>[...t[5]||(t[5]=[v("div",{class:"text-subtitle1 text-green-10"},"Data Izin Pesantren",-1)])]),"top-right":e(()=>[a(P,{outlined:"",dense:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=l=>u.value=l),placeholder:"Cari"},{append:e(()=>[a(N,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","loading","filter"])]),_:1})]),_:1}),a(T,{modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=l=>f.value=l)},{default:e(()=>[a(O,{data:{},onSuccessDelete:l=>null,onSuccessSubmit:t[3]||(t[3]=l=>n.$router.push(`/keamanan/izin-pesantren/${l.id}`))})]),_:1},8,["modelValue"])]),_:1})}}};export{Pa as default};
