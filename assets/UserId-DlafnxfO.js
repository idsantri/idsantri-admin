import{Q as S}from"./QImg-BnO_KbAZ.js";import{Q as u}from"./QItemLabel-DSRXTJi9.js";import{Q as p,a as g}from"./QItemSection-I2_1bSue.js";import{q as Q,ac as T,ab as D,s as E,E as _,c as m,o as i,w as s,g as t,Q as U,l as H,a as l,f as y,v as b,t as c,ag as x,b as V,F as j,D as F,m as G,e as K}from"./index-DfaJsQuV.js";import{Q as O}from"./QList-DfDYu1X5.js";import{a as $}from"./api-get-ClIlRT6p.js";import{k as h}from"./format-text-DnCGEu2I.js";import{U as f}from"./Users-CcOzOPwP.js";import"./index-DevCNWvu.js";import"./index-Bls4-9QV.js";import"./api-error-CZUuRwC1.js";import"./ApiCrud-B1nLKXKt.js";import"./Api-DzyhYnwH.js";const M={style:{"max-width":"150px"},class:"q-mx-auto"},z={class:"row"},J={class:"col-md-6 col-sm-12"},W={class:"col-md-6 col-sm-12"},X={class:"fit row wrap justify-start items-start content-start"},ce={__name:"UserId",setup(Y){const e=Q({}),n=Q(!1),{params:R}=T(),I=D();async function A(r,a){const o=r.value,v={role:r.name,value:o};try{await f.setRole(e.value.id,v)}catch{e.value.roleArray[a].value=!o}}async function B(r){e.value.confirmed_at=!e.value.confirmed_at;const a={confirm:r};try{await f.confirm(e.value.id,a)}catch{e.value.confirmed_at=!e.value.confirmed_at}}async function L(){if(e.value?.id){const r=await $({endPoint:`images/users/${e.value.id}`,loading:n});e.value.image=r.image_url||"/user-default.png"}}function N(r){return Object.entries(r).map(([a,o])=>({name:a,label:h(a),value:o}))}async function w(){try{n.value=!0;const r=await f.getById({id:R.id});e.value=r.user,e.value.roleArray=N(r.user.roles)}catch{console.log("error get users")}finally{n.value=!1}}async function P(){try{n.value=!0,await f.remove({id:e.value.id})&&I.go(-1)}catch{}finally{n.value=!1}}return E(async()=>{await w(),await L()}),(r,a)=>{const o=_("CardHeader"),v=_("CardLoading"),k=_("CardPage");return i(),m(k,null,{default:s(()=>[t(o,{title:"Profil Pengguna",onOnReload:w}),t(U,{class:"q-pa-sm"},{default:s(()=>[t(H,{flat:"",bordered:"",style:{"max-width":"600px"}},{default:s(()=>[l("div",null,[t(U,{class:"q-pa-sm"},{default:s(()=>[l("div",null,[l("div",M,[t(S,{src:e.value?.image?e.value.image:"/user-default.png",ratio:1,alt:"user","img-style":{borderRadius:"50%",border:"3px",borderColor:"green",borderStyle:"solid"}},null,8,["src"])])]),t(O,{bordered:"",separator:"",class:"q-mt-sm"},{default:s(()=>[t(p,{class:"q-pa-sm"},{default:s(()=>[t(g,null,{default:s(()=>[t(u,{overline:""},{default:s(()=>[...a[0]||(a[0]=[b("User",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:s(()=>[l("table",null,[l("tbody",null,[l("tr",null,[a[1]||(a[1]=l("td",{class:"text-italic text-caption q-pr-sm"},"Nama",-1)),l("td",null,c(e.value.name),1)]),l("tr",null,[a[2]||(a[2]=l("td",{class:"text-italic text-caption q-pr-sm"},"Email",-1)),l("td",null,c(e.value.email),1)]),l("tr",null,[a[3]||(a[3]=l("td",{class:"text-italic text-caption q-pr-sm"},"Username",-1)),l("td",null,c(e.value.username),1)]),l("tr",null,[a[4]||(a[4]=l("td",{class:"text-italic text-caption q-pr-sm"},"Telepon",-1)),l("td",null,c(e.value.phone||"-"),1)])])])]),_:1})):y("",!0)]),_:1})]),_:1}),t(p,{class:"q-pa-sm"},{default:s(()=>[t(g,null,{default:s(()=>[t(u,{overline:""},{default:s(()=>[...a[5]||(a[5]=[b(" User Status",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:s(()=>[l("div",z,[l("div",J,[t(x,{"model-value":!!e.value.email_verified_at,label:"Verifikasi",disable:"",color:"green"},null,8,["model-value"]),a[6]||(a[6]=l("div",{class:"q-pl-md text-caption"}," Verifikasi akun hanya bisa dilakukan oleh user yang bersangkutan. ",-1))]),l("div",W,[t(x,{"model-value":!!e.value.confirmed_at,label:"Konfirmasi",color:"green","onUpdate:modelValue":B},null,8,["model-value"]),a[7]||(a[7]=l("div",{class:"q-pl-md text-caption"}," Konfimasi bahwa Anda mengenal user ini. ",-1))])])]),_:1})):y("",!0)]),_:1})]),_:1}),t(p,{class:"q-pa-sm"},{default:s(()=>[t(g,null,{default:s(()=>[t(u,{overline:""},{default:s(()=>[...a[8]||(a[8]=[b(" User Group (Role) ",-1)])]),_:1}),e.value?(i(),m(u,{key:0},{default:s(()=>[l("div",X,[(i(!0),V(j,null,F(e.value.roleArray,(d,q)=>(i(),V("div",{key:q,class:"col-6"},[t(x,{modelValue:d.value,"onUpdate:modelValue":[C=>d.value=C,C=>A(d,q)],color:"green-6",label:d.label,"true-value":!0,"false-value":!1},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))])]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),t(G,{class:"bg-green-7 q-pa-sm"},{default:s(()=>[t(K,{label:"Hapus",color:"negative","no-caps":"",onClick:P,disable:!e.value?.id},null,8,["disable"])]),_:1}),t(v,{showing:n.value},null,8,["showing"])])]),_:1})]),_:1})]),_:1})}}};export{ce as default};
