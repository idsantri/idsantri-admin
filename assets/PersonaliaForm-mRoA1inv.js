import{Q as A,a as f,_ as $,b as H}from"./CarouselAlamat-CFKByEFB.js";import{a8 as w,b as x,o as V,a as c,g as t,a9 as r,G as m,F as h,q as y,E as g,c as b,w as s,af as I,f as O,Q as k,l as B}from"./index-DH4X2iu7.js";import{Q as j}from"./QForm-CPqPOTPm.js";import{Q as E}from"./QSelect-C96dAaMt.js";import{b as K,m as M}from"./hijri-Bs48DFvR.js";import{i as J,f as T}from"./format-date-OVhbBx9F.js";import{_ as z}from"./InputSelectKotaLahir-CKz5CD81.js";import{_}from"./InputSelectArray-BrxKK8FU.js";import{A as G}from"./ApiCrud-C3EW7Fag.js";import{u as R}from"./useCrudForm-BW4U5tHv.js";const W={__name:"PersonaliaIdentity",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const l=w(u,"modelValue");return(i,a)=>(V(),x(h,null,[a[6]||(a[6]=c("div",{class:"text-subtitle2"},"Identitas Diri",-1)),t(r,{dense:"",hint:i.isNew?"Kosongkan jika ingin diisi otomatis!":"",class:"q-my-sm",outlined:"",label:"ID",modelValue:l.value.id,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.id=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),t(r,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Nama*",modelValue:l.value.nama,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.nama=e),rules:[e=>!!e||"Harus diisi!",e=>e?.length>=3||"Setidaknya 3 huruf!"],"error-color":"negative",autocapitalize:"words"},null,8,["modelValue","rules"]),t(r,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Nomor Induk Kependudukan",modelValue:l.value.nik,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.nik=e),rules:[e=>!e||e?.length==16&&!isNaN(e)||"16 digit angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(z,{modelValue:l.value.tmp_lahir,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.tmp_lahir=e),class:"q-my-sm"},null,8,["modelValue"]),t(r,{dense:"",hint:m(J)(l.value.tgl_lahir)?m(T)(l.value.tgl_lahir)+" | "+m(K)(m(M)(l.value.tgl_lahir)):"",class:"q-my-sm",outlined:"",label:"Tanggal Lahir",modelValue:l.value.tgl_lahir,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.tgl_lahir=e),type:"date"},null,8,["hint","modelValue"]),t(E,{dense:"",hint:l.value.sex=="L"?"Laki-Laki":l.value.sex=="P"?"Perempuan":"",class:"q-my-sm",outlined:"",label:"Jenis Kelamin",modelValue:l.value.sex,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.sex=e),options:["L","P"],"emit-value":"","map-options":"","error-color":"negative",behavior:"menu"},null,8,["hint","modelValue"])],64))}},X={__name:"PersonaliaOthers",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(u){const l=w(u,"modelValue");return(i,a)=>(V(),x(h,null,[a[4]||(a[4]=c("div",{class:"text-subtitle2"},"Lain-Lain",-1)),t(_,{modelValue:l.value.pa_formal,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.pa_formal=e),url:"pendidikan-akhir-formal",label:"Pendidikan Akhir Formal",class:"q-my-sm",hint:""},null,8,["modelValue"]),t(_,{modelValue:l.value.pa_diniyah,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.pa_diniyah=e),url:"pendidikan-akhir-diniyah",label:"Pendidikan Akhir Diniyah",class:"q-my-sm",hint:""},null,8,["modelValue"]),t(r,{dense:"",hint:"08123456789",class:"q-my-sm",outlined:"",label:"Telepon",modelValue:l.value.telepon,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.telepon=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(r,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Email",modelValue:l.value.email,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.email=e)},null,8,["modelValue"])],64))}};class Y extends G{constructor(){super("aparatur")}}const Z=new Y,ee={class:"row justify-center"},me={__name:"PersonaliaForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(u,{emit:l}){const i=u,a=l,e=y({...i.data}),v=!i.data?.id,{handleDelete:U,handleCreate:N,handleUpdate:F,loading:q}=R(Z,{emit:a,responseKey:"aparatur"}),Q=async()=>{const d=JSON.parse(JSON.stringify(e.value));return delete d.image,delete d.aktif,v?await N(d,!0):await F(i.data.id,d,!0)},C=async()=>await U(i.data.id),p=y("identity"),D=[{label:1,value:"identity"},{label:2,value:"alamat"},{label:3,value:"others"}];return(d,o)=>{const L=g("FormHeader"),P=g("FormLoading"),S=g("FormActions");return V(),b(B,{class:"full-width",style:{"max-width":"425px"}},{default:s(()=>[t(j,{onSubmit:I(Q,["prevent"])},{default:s(()=>[t(L,{title:"Input Data Personalia","is-new":v}),m(q)?(V(),b(P,{key:0})):O("",!0),t(k,{class:"no-padding"},{default:s(()=>[t(A,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=n=>p.value=n),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"full-width",style:{"min-height":"65vh"},swipeable:"",infinite:""},{default:s(()=>[t(f,{name:"identity",class:"no-wrap flex-center"},{default:s(()=>[t(W,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=n=>e.value=n)},null,8,["modelValue"])]),_:1}),t(f,{name:"alamat",class:"no-wrap flex-center"},{default:s(()=>[t($,{modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=n=>e.value=n),onEmitRoute:n=>null},null,8,["modelValue"])]),_:1}),t(f,{name:"others",class:"no-wrap flex-center"},{default:s(()=>[t(X,{modelValue:e.value,"onUpdate:modelValue":o[2]||(o[2]=n=>e.value=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(k,{class:"q-pa-sm"},{default:s(()=>[c("div",ee,[t(H,{"toggle-color":"green-10","text-color":"text-green-11","no-caps":"",glossy:"",modelValue:p.value,"onUpdate:modelValue":o[4]||(o[4]=n=>p.value=n),options:D},null,8,["modelValue"])])]),_:1}),t(S,{"btn-delete":!v,onOnDelete:C},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{me as _};
