import{A as m,B as w,c as b,o as g,w as u,b as o,ab as x,e as A,C as D,Q as B,a5 as C,x as M,a9 as Q,q as U,U as $,f as h,E as I}from"./index-DwrbA0R8.js";import{_ as q}from"./TemplateArray-hLUfA21F.js";import{c as V}from"./format-date-DlwYCgkJ.js";import{a as E}from"./hijri-BBdEhqDI.js";import{r as N,d as O,g as j}from"./array-object-BytDdNh7.js";import{a as H}from"./api-get-D4W4lze7.js";import{Q as K}from"./QForm-DCEv1Ikv.js";import{_ as G}from"./InputSelectArray-DFe88pva.js";import{A as L}from"./ApiCrud-KwrbSuI8.js";import{u as P}from"./useCrudForm-DF0rM6hG.js";import"./QSpinnerCube-CuByR_Bu.js";import"./QItemSection-CeSY4hvW.js";import"./QItemLabel-Dzdetwv2.js";import"./QList-Cc6jCv1k.js";import"./id-BuNGTsqN.js";import"./format-number-B34ySHL_.js";import"./index-B6LiMDVO.js";import"./index-BlZcD66n.js";import"./api-error-DGWaEiw1.js";import"./QSelect-CrgZ1FsI.js";import"./QChip-DvUCR8tL.js";import"./QMenu-BEnErdhw.js";import"./selection-DRCgFU0J.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-Cp7AZ7Mr.js";import"./DropDownAfter-D2Wgui76.js";import"./QBtnDropdown-DqbNLFX1.js";import"./QBtnGroup-CPjXoyXA.js";import"./ClosePopup-kZj4_oIv.js";import"./Lists-g9uME9Wy.js";import"./Api-DWdZFNbG.js";class R extends L{constructor(){super("domisili")}async santri(r){throw await this._apiGet({endPoint:`${this._path}/santri/${r}`}),new Error("not implemented yet")}}const T=new R,z={__name:"DomisiliForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(p,{emit:r}){const s=p,l=r,e=m({...s.data}),n=!s.data?.id,{handleDelete:c,handleCreate:f,handleUpdate:v,loading:_}=P(T,{emit:l,responseKey:"domisili"}),y=async()=>{const i={santri_id:e.value.santri_id,domisili:e.value.domisili,keterangan:e.value.keterangan};return n?await f(i,!0):await v(s.data.id,i,!0)},a=async()=>await c(s.data.id);return(i,t)=>{const F=w("FormHeader"),k=w("FormLoading"),S=w("FormActions");return g(),b(M,{class:"full-width",style:{"max-width":"425px"}},{default:u(()=>[o(K,{onSubmit:x(y,["prevent"])},{default:u(()=>[o(F,{title:"Input Domisili","is-new":n}),D(_)?(g(),b(k,{key:0})):A("",!0),o(B,null,{default:u(()=>[o(C,{class:"q-my-sm",dense:"",outlined:"",label:"Nama","model-value":e.value?.nama+" ("+e.value?.santri_id+")",disable:"",filled:""},null,8,["model-value"]),o(G,{class:"q-my-sm",modelValue:e.value.domisili,"onUpdate:modelValue":t[0]||(t[0]=d=>e.value.domisili=d),url:"domisili",label:"Domisili *",rules:[d=>!!d||"Harus diisi!"]},null,8,["modelValue","rules"]),o(C,{class:"q-my-sm",dense:"",outlined:"",label:"Keterangan",modelValue:e.value.keterangan,"onUpdate:modelValue":t[1]||(t[1]=d=>e.value.keterangan=d),autogrow:""},null,8,["modelValue"])]),_:1}),o(S,{"btn-delete":!n,onOnDelete:a},null,8,["btn-delete"])]),_:1})]),_:1})}}},xe={__name:"SantriDomisili",setup(p){const r=m(!1),s=m(!1),l=m({}),e=m([]),n=m({}),{params:c}=Q();async function f(){const a=await H({endPoint:`domisili/santri/${c.id}`,loading:r});a.domisili&&(e.value=a.domisili,n.value=a.santri)}const v=U(()=>e.value.map(a=>({Tanggal:V(a.created_at,"dd-MM-yyyy")+" | "+E(V(a.created_at,"yyyy-MM-dd")),Domisili:a.domisili,Keterangan:a.keterangan||"-",id:a.id})));$(async()=>{await f()});const _=()=>{l.value={santri_id:n.value.id,nama:n.value.nama},s.value=!0},y=({id:a})=>{l.value=j(e,a),l.value.santri_id=n.value.id,l.value.nama=n.value.nama,s.value=!0};return(a,i)=>(g(),h("div",null,[o(q,{data:v.value,spinner:r.value,onAdd:_,onEdit:y},null,8,["data","spinner"]),o(I,{modelValue:s.value,"onUpdate:modelValue":i[3]||(i[3]=t=>s.value=t)},{default:u(()=>[o(z,{data:l.value,title:"Input Domisili",onSuccessDelete:i[0]||(i[0]=t=>D(O)(e.value,t)),onSuccessCreate:i[1]||(i[1]=t=>e.value.push(t)),onSuccessUpdate:i[2]||(i[2]=t=>D(N)(e.value,t.id,t))},null,8,["data"])]),_:1},8,["modelValue"])]))}};export{xe as default};
