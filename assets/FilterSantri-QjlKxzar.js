import{Q as V,a as $}from"./QToolbar-wE0hZ0P4.js";import{ad as B,ac as T,q as l,s as D,c as C,o as p,w as a,g as o,Q as g,r as N,a as _,b as y,f as b,bG as O,bH as U,v as h,t as m,l as P}from"./index-CEqRNMKa.js";import{Q as x}from"./QItemLabel-DHWqC7wC.js";import{Q as E,a as z}from"./QItem-CE7Gw7UR.js";import{Q as G}from"./QSelect-Cq7a2gGZ.js";import{S as Q}from"./Santri-DFvv300L.js";const H={class:"flex content-start items-center",style:{"max-width":"1000px",width:"100%"}},K={key:0,class:"q-pa-sm"},L={key:1,class:"q-pa-sm text-negative"},X={__name:"FilterSantri",props:{startUrl:String,activeOnly:{type:Boolean}},emits:["dataFilter"],setup(S,{emit:k}){const n=S,f=k,I=B(),v=T(),F={id:I.params.id},i=l(F.id),r=l(!1),d=l([]),u=l(!1);D(async()=>{if(f("dataFilter",{display:'<div class="text-green-13 text-italic">Tentukan filter!</div>'}),i.value){const t=await Q.getById({id:i.value}),s={display:`
			‚û°Ô∏è ${i.value}
			| <strong>${t.santri.nama}</strong>
			| ${t.santri.data_akhir}
			`};f("dataFilter",s)}});function q(t){t?v.push(`${n.startUrl}/${t}`):v.push(`${n.startUrl}`)}async function w(t,s){if(!t||t.length<3){s(()=>{d.value=[]});return}try{r.value=!0;const e=await Q.getIds({active_only:!!n.activeOnly,q:t});u.value=!e.lists.length,s(()=>d.value=e.lists,c=>{t!==""&&c.options.length&&(c.setOptionIndex(-1),c.moveOptionSelection(1,!0))})}catch(e){console.error("üöÄ ~ filterFunction ~ error:",e),u.value=!0}finally{r.value=!1}}return(t,s)=>(p(),C(P,{flat:"",bordered:""},{default:a(()=>[o(g,{class:"q-px-sm q-py-sm bg-green-11"},{default:a(()=>[o(V,{class:"no-padding",style:{"min-height":"0"}},{default:a(()=>[o($,{class:"text-subtitle1"},{default:a(()=>[...s[1]||(s[1]=[_("div",{class:"text-subtitle2 text-weight-bold"},"Filter ID Santri",-1)])]),_:1}),N(t.$slots,"default")]),_:3})]),_:3}),o(g,{class:"no-padding"},{default:a(()=>[_("div",H,[o(G,{class:"q-pa-sm",dense:"",outlined:"",label:"ID Santri",modelValue:i.value,"onUpdate:modelValue":[s[0]||(s[0]=e=>i.value=e),q],options:d.value,"emit-value":"","map-options":"","option-value":"id","option-label":"id","error-color":"negative",loading:r.value,"use-input":"",clearable:"",onFilter:w,behavior:"menu"},{option:a(e=>[o(E,O(U(e.itemProps)),{default:a(()=>[o(z,null,{default:a(()=>[o(x,null,{default:a(()=>[h(m(e.opt.id)+" ‚Äî "+m(e.opt.nama),1)]),_:2},1024),o(x,{caption:""},{default:a(()=>[h(m(e.opt.data_akhir),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","loading"]),i.value?b("",!0):(p(),y("div",K,"Ketikkan ID Santri")),u.value?(p(),y("div",L,"Data Tidak ditemukan")):b("",!0)])]),_:1})]),_:3}))}};export{X as _};
