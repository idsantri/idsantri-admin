import{q as s,ad as B,N as L,E as N,c as f,o as d,w as r,g as a,Q as $,a as x,e as g,b as j,v as l,F as D,D as q,aj as R,G as k,t as o,J as T,l as E}from"./index-B_fOp8I2.js";import{Q as C}from"./QSpace-DcIMlGPs.js";import{Q as m}from"./QItemLabel-Dzv1rcUf.js";import{Q as w,a as v}from"./QItem-BIr2qAQs.js";import{Q as F}from"./QList-Bhy1FtzV.js";import{_ as I}from"./KelasForm-C_2wtnA-.js";import{K as z}from"./Kelas-lQqvgFhW.js";import"./QForm-XW60lmKZ.js";import"./InputSelectArray-CnP1463e.js";import"./QSelect-udWnZaoN.js";import"./QChip-5TM6hDLU.js";import"./QMenu-BsVEoqbp.js";import"./selection-CtPAXORa.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./lists-store-CD0Hggyp.js";import"./ArrayCrud-CByp4EUn.js";import"./Lists-CqahsUVd.js";import"./ApiCrud-DVH4XNNQ.js";import"./Api-BNo_L0HG.js";import"./index-Bv8s4jzG.js";import"./index-BF457XYG.js";import"./apiPost-TFI76I_W.js";import"./lists-data-CZ3z29xr.js";import"./DropDownAfter-CV4tl_Qw.js";import"./QBtnDropdown-CfBCVMge.js";import"./QBtnGroup-DMJJVPpn.js";import"./ClosePopup-OWfInyoi.js";import"./InputSelectTingkatPendidikan-BrctUvcT.js";import"./useCrudForm-DYJRtmbD.js";import"./InputSelectTahunAjaran-BlFMs63J.js";const ya={__name:"KelasRiwayat",props:{santri_id:{type:[String,Number]}},setup(_){const S=_,u=s(!1),{params:b}=B(),p=s(!1),y=s({}),n=s([]),c=s({});function h(){y.value={nama:c.value.nama||"",santri_id:c.value.id||""},u.value=!0}async function Q(i){try{p.value=!0;const e=await z.santri(i);n.value=e.kelas,c.value=e.santri}catch(e){console.error("ðŸš€ ~ getKelas ~ error:",e)}finally{p.value=!1}}return L(()=>S.santri_id,i=>{i?Q(i):n.value=[]},{immediate:!0}),(i,e)=>{const K=N("CardLoading");return d(),f(E,{bordered:"",flat:""},{default:r(()=>[a($,{class:"bg-green-2 text-subtitle2 q-pa-sm flex items-center"},{default:r(()=>[a(g,{flat:"",dense:"",icon:"sync",onClick:e[0]||(e[0]=t=>Q(_.santri_id))}),e[3]||(e[3]=x("div",{class:"text-green-10"},"Riwayat Kelas",-1)),a(C),a(g,{outline:"",icon:"add",onClick:h,label:"Tambah","no-caps":""})]),_:1}),a(K,{showing:p.value},null,8,["showing"]),a(F,{separator:""},{default:r(()=>[n.value?.length?(d(!0),j(D,{key:1},q(n.value,(t,V)=>(d(),f(w,{key:V,class:R(t.id==k(b).id?"bg-green-1":"")},{default:r(()=>[a(v,{avatar:""},{default:r(()=>[a(g,{outline:"",round:"",dense:"",glossy:"",color:"green-7",icon:"info",to:`/madrasah/kelas/${t.id}/riwayat`,disable:t.id==k(b).id},null,8,["to","disable"])]),_:2},1024),a(v,null,{default:r(()=>[a(m,{overline:"",class:"flex"},{default:r(()=>[l(o(t.th_ajaran_h)+" | "+o(t.th_ajaran_m)+" ",1),a(C),l(" "+o(t.id),1)]),_:2},1024),a(m,null,{default:r(()=>[l(o(t.tingkat)+" â€” "+o(t.kelas)+" "+o(t.no_absen?"("+("0"+t.no_absen).slice(-2)+")":""),1)]),_:2},1024),a(m,{caption:"",class:"text-italic"},{default:r(()=>[l(o(t.keterangan??""),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"]))),128)):(d(),f(w,{key:0},{default:r(()=>[a(v,null,{default:r(()=>[a(m,{class:"text-center text-body2 text-negative text-italic q-pa-lg"},{default:r(()=>[...e[4]||(e[4]=[l(" Tidak ada untuk ditampilkan.",-1),x("br",null,null,-1),l("Silakan tambahkan kelas terlebih dahulu! ",-1)])]),_:1})]),_:1})]),_:1}))]),_:1}),a(T,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t)},{default:r(()=>[a(I,{data:y.value,onSuccessCreate:e[1]||(e[1]=t=>i.$router.push(`/madrasah/kelas/${t.id}`))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{ya as default};
