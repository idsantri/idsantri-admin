import{e as h,d as f,c as u}from"./index-CdkvXyXH.js";import{a as o}from"./api-error-CtGrtfSx.js";import{a as p}from"./index-CHOBZr16.js";async function d({endPoint:e,params:t}){try{return(await p.get(e,{params:t})).data}catch(a){throw o(a),a}}async function _({endPoint:e,data:t,params:a}){try{return(await p.post(e,t,{params:a})).data}catch(s){throw o(s),s}}async function w({endPoint:e,data:t,params:a}){try{return(await p.put(e,t,{params:a})).data}catch(s){throw o(s),s}}async function y({endPoint:e,params:t}){try{return(await p.delete(e,{params:t}))?.data??!0}catch(a){throw o(a),a}}class m{constructor(t){this._path=t,this._apiGet=d,this._apiPost=_,this._apiUpdate=w,this._apiDelete=y}_handleError(t){return o(t),!1}_showSuccess(t){h(t)}_showError(t){f(t)}async _notifyConfirm(t,a="Konfirmasi"){return await u(t,!0,a)}}class S extends m{async getAll({params:t={},notifySuccess:a=!0}){const s=await this._apiGet({endPoint:this._path,params:t});return a&&this._showSuccess(s.message),s.data}async getById({id:t,params:a={},notifySuccess:s=!0}){const r=await this._apiGet({endPoint:`${this._path}/${t}`,params:a});return s&&this._showSuccess(r.message),r.data}async create({data:t,params:a={},notifySuccess:s=!0,confirm:r=!1,message:n=""}){if((n||r)&&!await this._notifyConfirm(n||"Simpan data ini?"))return!1;const i=await this._apiPost({endPoint:this._path,data:t,params:a});return s&&this._showSuccess(i.message),i.data||!0}async update({id:t,data:a,params:s={},notifySuccess:r=!0,confirm:n=!1,message:i=""}){if((i||n)&&!await this._notifyConfirm(i||"Update data ini?"))return!1;const c=await this._apiUpdate({endPoint:`${this._path}/${t}`,data:a,params:s});return r&&this._showSuccess(c.message),c.data||!0}async remove({id:t,params:a={},notifySuccess:s=!0,confirm:r=!0,message:n=""}){if((n||r)&&!await this._notifyConfirm(n||'<span style="color: red">Hapus data ini?</span>'))return!1;const i=await this._apiDelete({endPoint:`${this._path}/${t}`,params:a});return s&&this._showSuccess(i.message),i.data||!0}}export{S as A};
