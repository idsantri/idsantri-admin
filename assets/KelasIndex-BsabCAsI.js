import{q as c,ah as M,c as r,o as i,w as a,g as t,Q as $,v as S,e as b,bO as V,b as x,t as u,a as o,C as P,l as N,ad as U,s as j,E as q,ap as z,J as W}from"./index-BeuhZ-ol.js";import{Q as L,a as O}from"./QToolbar-Cw6vXvLw.js";import{Q as H}from"./QMarkupTable-D4fBkLtu.js";import{Q as B}from"./QRouteTab-DwP2e46R.js";import{Q as G}from"./QTabs-D4gKJ-Ci.js";import{a as R}from"./api-get-ItlXgaJz.js";import{a as J}from"./api-update-CldjDkMY.js";import{Q as p}from"./QSkeleton-ChqN5gE-.js";import{Q as F}from"./QImg-BhcGYiLf.js";import{Q as D,a as v}from"./QItem-qAKJqzX7.js";import{Q as y}from"./QItemLabel-CMAJZVV_.js";import{Q as X}from"./QList-SMP-2XJV.js";import{s as w}from"./santri-store-NNCCy3oh.js";import{_ as Y}from"./KelasForm-CxDn8iJ2.js";import"./QResizeObserver-DC4kHM8w.js";import"./rtl-DFPa-2ov.js";import"./index-Cg0spb8C.js";import"./index-BXhUsTyQ.js";import"./api-error-FN4ckS3j.js";import"./QForm-zVA3WIzN.js";import"./InputSelectArray-r7BH8FdB.js";import"./QSelect-CSuiH4Z6.js";import"./QField-4_Uk7UCx.js";import"./QChip-CWLqqxtS.js";import"./QMenu-8-e25rsX.js";import"./selection-DHH_NrKf.js";import"./format-CJebrXOQ.js";import"./lists-store-CbsLE9yb.js";import"./ArrayCrud-CkcA-ixF.js";import"./DropDownAfter-B3VX2FZv.js";import"./QBtnDropdown-BwtBZtIz.js";import"./QBtnGroup-DYd-aqjJ.js";import"./ClosePopup-3JOTOK1J.js";import"./Lists-CFN_8hfr.js";import"./ApiCrud-CEdYpkid.js";import"./Api-BhplmBSY.js";import"./InputSelectTingkatPendidikan-Cj7C-Kir.js";import"./useCrudForm-DNtu3sdk.js";import"./InputSelectTahunAjaran-0cImFqfr.js";const Z={key:1},h={key:1},tt={key:1},at={key:1},et={key:1},lt={__name:"CardSantri",props:{id:{type:[Number,String],validator(d){if(typeof d=="number")return!isNaN(d);if(typeof d=="string"){const _=Number(d);return!isNaN(_)}return!1}}},emits:["loaded"],setup(d,{emit:_}){const I=_,g=d,l=c(!1),n=c({}),k=c({}),Q=c({}),C=async()=>{const m=await R({endPoint:"santri/"+g.id,loading:l});m&&(n.value=m.santri,Q.value=m.wali,k.value=m.ortu,w().setSantri(m.santri),w().setOrtu(m.ortu),w().setWali(m.wali))};return M(async()=>{if(g.id){const m=w().getSantri,s=w().getWali,e=w().getOrtu;m.id==g.id?(n.value=m,k.value=e,Q.value=s):await C(),I("loaded",n.value)}}),(m,s)=>(i(),r(N,{flat:"",bordered:""},{default:a(()=>[t($,{class:"no-padding"},{default:a(()=>[t(L,{class:"bg-green-1"},{default:a(()=>[t(O,{class:"text-subtitle1"},{default:a(()=>[...s[0]||(s[0]=[S(" Identitas Santri ",-1)])]),_:1}),t(b,{icon:"sync",outline:"",onClick:C})]),_:1})]),_:1}),t($,{class:"q-py-sm q-px-none"},{default:a(()=>[t(X,{dense:""},{default:a(()=>[t(D,null,{default:a(()=>[t(v,{avatar:""},{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"QAvatar"})):(i(),r(V,{key:1,class:"d-flex"},{default:a(()=>[t(F,{src:n.value?.image_url||"/user-default.png",ratio:1,cover:""},null,8,["src"])]),_:1}))]),_:1}),t(v,null,{default:a(()=>[t(y,{overline:""},{default:a(()=>[...s[1]||(s[1]=[S(" Santri ",-1)])]),_:1}),t(y,null,{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"text"})):(i(),x("div",Z,u(n.value.nama)+" ("+u(n.value.sex)+")",1))]),_:1}),t(y,{caption:"",lines:"1"},{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"text"})):(i(),x("div",h,u(n.value?.alamat_pendek||"-"),1))]),_:1}),t(y,{caption:"",lines:"1",class:"text-italic"},{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"text"})):(i(),x("div",tt,u(n.value?.data_akhir||"-"),1))]),_:1})]),_:1}),t(v,{avatar:""},{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"QBtn",class:"full-width"})):(i(),r(b,{key:1,outline:"",color:"green",to:`/santri/${n.value?.id}`},{default:a(()=>[o("small",null,u(n.value?.id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),t(P,{inset:"item"}),t(D,null,{default:a(()=>[t(v,{top:"",avatar:""},{default:a(()=>[t(V)]),_:1}),t(v,null,{default:a(()=>[t(y,{overline:""},{default:a(()=>[...s[2]||(s[2]=[S(" Wali ",-1)])]),_:1}),t(y,null,{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"text"})):(i(),x("div",at,u(Q.value?.nama)+" ("+u(Q.value?.sex)+"; "+u(n.value?.wali_status)+")",1))]),_:1})]),_:1}),t(v,{avatar:""},{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"QBtn",class:"full-width"})):(i(),r(b,{key:1,outline:"",color:"green",to:`/wali/${n.value?.wali_id}`},{default:a(()=>[o("small",null,u(n.value?.wali_id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),t(P,{inset:"item"}),t(D,null,{default:a(()=>[t(v,{top:"",avatar:""},{default:a(()=>[t(V)]),_:1}),t(v,null,{default:a(()=>[t(y,{overline:""},{default:a(()=>[...s[3]||(s[3]=[S(" Orang Tua ",-1)])]),_:1}),t(y,null,{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"text"})):(i(),x("div",et,u(k.value?.ayah)+" | "+u(k.value?.ibu),1))]),_:1})]),_:1}),t(v,{avatar:""},{default:a(()=>[l.value||!d.id?(i(),r(p,{key:0,type:"QBtn",class:"full-width"})):(i(),r(b,{key:1,outline:"",color:"green",to:`/ortu/${n.value?.ortu_id}`},{default:a(()=>[o("small",null,u(n.value?.ortu_id),1)]),_:1},8,["to"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ot={class:"row",style:{"max-width":"1400px"}},it={class:"col-12 col-md-6 q-pa-sm"},st={class:"col-12 col-md-6 q-pa-sm"},Ht={__name:"KelasIndex",setup(d){const _=c(0),g=U().params.id,l=c({}),n=c(!1),k=c(!1),Q=c({});async function C(s){const e=s==1,T=s==1?0:1;await J({endPoint:`kelas/${g}/set-active`,data:{aktif:e},confirm:!1})||(l.value.aktif=T)}async function m(){const s=await R({endPoint:`kelas/${g}`,loading:n});s.kelas&&(l.value=s.kelas)}return j(async()=>{await m()}),(s,e)=>{const T=q("CardHeader"),A=q("CardLoading"),E=q("router-view"),K=q("CardPage");return i(),r(K,null,{default:a(()=>[t(T,{title:"Data Murid",onOnReload:m}),t($,{class:"no-padding"},{default:a(()=>[o("div",ot,[o("div",it,[t(N,{bordered:"",flat:""},{default:a(()=>[t(lt,{id:l.value.santri_id,onLoaded:e[0]||(e[0]=f=>Q.value=f)},null,8,["id"])]),_:1}),t(N,{class:"q-mt-sm",bordered:"",flat:""},{default:a(()=>[t($,{class:"q-pa-sm"},{default:a(()=>[t(L,{class:"bg-green-1"},{default:a(()=>[t(O,{class:"text-subtitle1"},{default:a(()=>[...e[6]||(e[6]=[S(" Data Kelas ",-1)])]),_:1}),t(b,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),t(b,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:e[1]||(e[1]=f=>k.value=!0),label:"Edit","no-caps":""})]),_:1}),t(H,{flat:""},{default:a(()=>[o("tbody",null,[o("tr",null,[e[7]||(e[7]=o("td",{class:"text-italic"},"Tahun Ajaran",-1)),o("td",null,u(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),o("tr",null,[e[8]||(e[8]=o("td",{class:"text-italic"},"Tingkat",-1)),o("td",null,u(l.value.tingkat),1)]),o("tr",null,[e[9]||(e[9]=o("td",{class:"text-italic"},"Kelas",-1)),o("td",null,u(l.value.kelas),1)]),o("tr",null,[e[10]||(e[10]=o("td",{class:"text-italic"},"Nomor Absen",-1)),o("td",null,u(l.value.no_absen),1)]),o("tr",null,[e[11]||(e[11]=o("td",{class:"text-italic"},"Aktif",-1)),o("td",null,[t(z,{modelValue:l.value.aktif,"onUpdate:modelValue":[e[2]||(e[2]=f=>l.value.aktif=f),C],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),o("tr",null,[e[12]||(e[12]=o("td",{class:"text-italic"},"Keterangan",-1)),o("td",null,u(l.value.keterangan),1)])])]),_:1}),t(A,{showing:n.value},null,8,["showing"])]),_:1})]),_:1})]),o("div",st,[t(N,{bordered:"",flat:""},{default:a(()=>[t(G,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:a(()=>[t(B,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),t(B,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),t(B,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(i(),r($,{class:"q-pa-sm",key:_.value},{default:a(()=>[(i(),r(E,{key:s.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),t(W,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=f=>k.value=f)},{default:a(()=>[t(Y,{data:l.value,onSuccessUpdate:e[3]||(e[3]=f=>{l.value=f,_.value++}),onSuccessDelete:e[4]||(e[4]=f=>s.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Ht as default};
