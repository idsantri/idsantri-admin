import{A as r,ab as q,W as $,B as T,c as v,o as n,w as o,b as e,y as u,Q as m,a as t,f as Q,v as V,g as _,t as d,af as C,G as B}from"./index-Bjf6jOrL.js";import{Q as D}from"./QToolbarTitle-DexAJwlS.js";import{Q as S}from"./QToolbar-Bk7787Iv.js";import{Q as A}from"./QSpinnerCube-gZ5RTjBb.js";import{Q as N}from"./QMarkupTable-DhfjFCDy.js";import{Q as c}from"./QRouteTab-BbT6Cfz6.js";import{Q as z}from"./QTabs-BtnDgiOP.js";import{Q as K}from"./QPage-CdhCNm0R.js";import{a as M}from"./api-get-SNzLoUbu.js";import{a as P}from"./api-update-CBHu08Ks.js";import{_ as R}from"./CardSantri-BMr3L5KL.js";import{_ as U}from"./KelasForm-CMykt6KX.js";import"./QResizeObserver-DNb83RcI.js";import"./rtl-DFPa-2ov.js";import"./index-DV84x6RN.js";import"./index-BRCx2Z00.js";import"./api-error-C_UMNjEa.js";import"./QSkeleton-Dg6K1xsX.js";import"./QImg-B6Zk7vAt.js";import"./QItemSection-D4HO8eJd.js";import"./QItemLabel-Clz1Xits.js";import"./QList-DrJ2aexG.js";import"./santri-store-CQA3wJKJ.js";import"./QForm-CQ61mLzh.js";import"./InputSelectArray-DTVIQacW.js";import"./QSelect-BCDk0qVl.js";import"./QChip-CKBUwVMq.js";import"./QMenu-DO2tkYnP.js";import"./selection-C-yT_gHt.js";import"./format-CJebrXOQ.js";import"./lists-store-Ddm_j1AX.js";import"./DropDownAfter-BWotgQpI.js";import"./QBtnDropdown-CATaFFO-.js";import"./QBtnGroup-BZf-O_co.js";import"./ClosePopup-Ced6Y-Os.js";import"./Lists-DcfSSLIw.js";import"./ApiCrud-Cz799mD5.js";import"./Api-v4AqqFFf.js";import"./InputSelectTingkatPendidikan-BMK8qvEm.js";import"./useCrudForm-D9Qtfi7L.js";import"./InputSelectTahunAjaran-iRPod9hn.js";const j={class:"row",style:{"max-width":"1400px"}},E={class:"col-12 col-md-6 q-pa-sm"},G={key:0,class:"q-pa-md"},I={key:1},L={class:"col-12 col-md-6 q-pa-sm"},za={__name:"KelasIndex",setup(W){const k=r(0),g=q().params.id,l=r({}),b=r(!1),p=r(!1),y=r({});async function w(i){const a=i==1,f=i==1?0:1;await P({endPoint:`kelas/${g}/set-active`,data:{aktif:a},confirm:!1})||(l.value.aktif=f)}async function x(){const i=await M({endPoint:`kelas/${g}`,loading:b});i.kelas&&(l.value=i.kelas)}return $(async()=>{await x()}),(i,a)=>{const f=T("router-view");return n(),v(K,{class:"q-pa-sm"},{default:o(()=>[e(u,{class:""},{default:o(()=>[e(m,{class:"bg-green-8 text-green-11 q-pa-sm"},{default:o(()=>[...a[6]||(a[6]=[t("div",{class:"flex items-center"},[t("div",{class:"text-subtitle1"},"Data Murid")],-1)])]),_:1}),e(m,{class:"no-padding"},{default:o(()=>[t("div",j,[t("div",E,[e(u,{bordered:"",flat:""},{default:o(()=>[e(R,{id:l.value.santri_id,onLoaded:a[0]||(a[0]=s=>y.value=s)},null,8,["id"])]),_:1}),e(u,{class:"q-mt-sm",bordered:"",flat:""},{default:o(()=>[e(m,{class:"q-pa-sm"},{default:o(()=>[e(S,{class:"bg-green-1"},{default:o(()=>[e(D,{class:"text-subtitle1"},{default:o(()=>[...a[7]||(a[7]=[V(" Data Kelas ",-1)])]),_:1}),e(_,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:x,icon:"sync","no-caps":""}),e(_,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:a[1]||(a[1]=s=>p.value=!0),label:"Edit","no-caps":""})]),_:1}),b.value?(n(),Q("div",G,[e(A,{color:"green-12",size:"8em",class:"flex q-mx-auto"})])):(n(),Q("div",I,[e(N,{flat:""},{default:o(()=>[t("tbody",null,[t("tr",null,[a[8]||(a[8]=t("td",{class:"text-italic"},"Tahun Ajaran",-1)),t("td",null,d(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),t("tr",null,[a[9]||(a[9]=t("td",{class:"text-italic"},"Tingkat",-1)),t("td",null,d(l.value.tingkat),1)]),t("tr",null,[a[10]||(a[10]=t("td",{class:"text-italic"},"Kelas",-1)),t("td",null,d(l.value.kelas),1)]),t("tr",null,[a[11]||(a[11]=t("td",{class:"text-italic"},"Nomor Absen",-1)),t("td",null,d(l.value.no_absen),1)]),t("tr",null,[a[12]||(a[12]=t("td",{class:"text-italic"},"Aktif",-1)),t("td",null,[e(C,{modelValue:l.value.aktif,"onUpdate:modelValue":[a[2]||(a[2]=s=>l.value.aktif=s),w],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),t("tr",null,[a[13]||(a[13]=t("td",{class:"text-italic"},"Keterangan",-1)),t("td",null,d(l.value.keterangan),1)])])]),_:1})]))]),_:1})]),_:1})]),t("div",L,[e(u,{bordered:"",flat:""},{default:o(()=>[e(z,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:o(()=>[e(c,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`},null,8,["to"]),e(c,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`},null,8,["to"]),e(c,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`},null,8,["to"])]),_:1}),(n(),v(m,{class:"q-pa-sm",key:k.value},{default:o(()=>[(n(),v(f,{key:i.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1})]),_:1}),e(B,{modelValue:p.value,"onUpdate:modelValue":a[5]||(a[5]=s=>p.value=s)},{default:o(()=>[e(U,{data:l.value,onSuccessUpdate:a[3]||(a[3]=s=>{l.value=s,k.value++}),onSuccessDelete:a[4]||(a[4]=s=>i.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{za as default};
