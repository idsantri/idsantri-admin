import{q as _,E as V,c as m,o as u,w as e,g as a,af as L,f as F,G as g,Q as M,a9 as O,l as $,au as T,a as j,e as S,b as D,v as k,F as E,D as K,t as v,J as G}from"./index-DU_HTlLB.js";import{Q as q}from"./QSkeleton-cHWQFqLB.js";import{Q as h}from"./QItemLabel-L7dSSnSA.js";import{Q as C,a as b}from"./QItem-BbodOwCO.js";import{Q as P}from"./QList-DmBsZOwe.js";import{a as R}from"./api-get-C_HGQ1i3.js";import{Q as J}from"./QSelect-aBcEPTX0.js";import{Q as W}from"./QForm-DITd0Hw9.js";import{_ as U}from"./InputSelectArray-DYbXt-XS.js";import{u as z}from"./useCrudForm-qI80plRT.js";import{A as X}from"./ApiCrud-CEbaue1g.js";import{_ as Y}from"./InputToggle-C4kcvuD1.js";import{_ as Z}from"./CardSantriSimple-zg0NBtY2.js";import{g as aa}from"./array-object-BytDdNh7.js";import{c as A}from"./format-date-DBaFa2rd.js";import{a as ea}from"./hijri-FEY2XuSe.js";class la extends X{constructor(){super("mutaallim")}}const ta=new la,na={__name:"QuranMutaallimForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(n,{emit:f}){const r=n,c=f,l=_({marhalah:"Ula",faslah:null,no_absen:null,aktif:1,...r.data}),d=!r.data?.id,{handleDelete:Q,handleCreate:x,handleUpdate:p,loading:t}=z(ta,{emit:c,responseKey:"mutaallim"}),s=async()=>{const y={santri_id:l.value.santri_id,th_ajaran_h:l.value.th_ajaran_h,marhalah:l.value.marhalah,faslah:l.value.faslah,no_absen:l.value.no_absen,aktif:l.value.aktif};return d?await x(y,!0):await p(r.data.id,y,!0)},w=async()=>await Q(r.data.id);return(y,o)=>{const N=V("FormHeader"),B=V("FormLoading"),H=V("FormActions");return u(),m($,{class:"full-width",style:{"max-width":"425px"}},{default:e(()=>[a(W,{onSubmit:L(s,["prevent"])},{default:e(()=>[a(N,{title:"Input Pendidikan Quran","is-new":d}),g(t)?(u(),m(B,{key:0})):F("",!0),a(M,null,{default:e(()=>[a(O,{dense:"",outlined:"",label:"Nama","model-value":l.value?.nama+" ("+l.value?.santri_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),a(U,{modelValue:l.value.th_ajaran_h,"onUpdate:modelValue":o[0]||(o[0]=i=>l.value.th_ajaran_h=i),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-my-sm",rules:[i=>!!i||"Harus diisi!"],selected:l.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),a(J,{dense:"",outlined:"",modelValue:l.value.marhalah,"onUpdate:modelValue":o[1]||(o[1]=i=>l.value.marhalah=i),label:"Marhalah *",class:"q-my-sm",rules:[i=>!!i||"Harus diisi!"],options:["Ula","Wustho","Ulya"]},null,8,["modelValue","rules"]),a(U,{modelValue:l.value.faslah,"onUpdate:modelValue":o[2]||(o[2]=i=>l.value.faslah=i),url:"faslah-quran",label:"Faslah/Kelas *",class:"q-my-sm",rules:[i=>!!i||"Harus diisi!"]},null,8,["modelValue","rules"]),a(Y,{modelValue:l.value.aktif,"onUpdate:modelValue":o[3]||(o[3]=i=>l.value.aktif=i),label:"Aktif",disable:!l.value.id},null,8,["modelValue","disable"])]),_:1}),a(H,{"btn-delete":!d,onOnDelete:w},null,8,["btn-delete"])]),_:1})]),_:1})}}},sa={key:0},Qa={__name:"MutaallimCard",props:{santri:{type:Object}},setup(n){const f=_(!1),r=_({}),c=_([]),l=_(!1);async function d(p){const t=await R({endPoint:`mutaallim/santri/${p}`,loading:l});t&&(c.value=t.mutaallim)}T(async()=>{n.santri?.id?await d(n.santri.id):n.santri?.santri_id&&await d(n.santri.santri_id)});const Q=()=>{r.value={santri_id:n.santri.id,nama:n.santri.nama},f.value=!0},x=p=>{r.value=aa(c,p),r.value.santri_id=n.santri.id,r.value.nama=n.santri.nama,f.value=!0};return(p,t)=>(u(),m($,{flat:"",bordered:"",class:"",style:{width:"350px"}},{default:e(()=>[a(M,{class:"bg-green-7 text-green-11 q-pa-sm flex items-center justify-between"},{default:e(()=>[t[3]||(t[3]=j("div",null,"Riwayat Mutaallim",-1)),a(S,{icon:"add",outline:"",dense:"",class:"q-px-sm",disabled:!n.santri.id,onClick:Q},null,8,["disabled"])]),_:1}),a(M,{class:"q-pa-sm"},{default:e(()=>[n.santri.id?(u(),m(Z,{key:0,id:n.santri.id,class:"q-mb-sm"},null,8,["id"])):F("",!0),a(P,{bordered:"",separator:"",class:"rounded-borders"},{default:e(()=>[l.value?(u(),m(C,{key:0,class:"q-px-sm"},{default:e(()=>[a(b,null,{default:e(()=>[a(h,null,{default:e(()=>[a(q,{type:"text"})]),_:1}),a(h,{caption:""},{default:e(()=>[a(q,{type:"text"})]),_:1})]),_:1}),a(b,{avatar:""},{default:e(()=>[a(q,{type:"QRadio"})]),_:1})]),_:1})):c.value?.length?(u(!0),D(E,{key:2},K(c.value,(s,w)=>(u(),m(C,{key:w,active:!!s.aktif,"active-class":"bg-green-1 text-green-10",class:"q-px-sm"},{default:e(()=>[a(b,null,{default:e(()=>[a(h,null,{default:e(()=>[k(v(s.th_ajaran_h)+" | "+v(s.marhalah)+" | "+v(s.faslah),1)]),_:2},1024),a(h,{caption:""},{default:e(()=>[k(v(g(A)(s.created_at,"dd-MM-yyyy"))+" | "+v(g(ea)(g(A)(s.created_at,"yyyy-MM-dd")))+" ",1),s.aktif?(u(),D("span",sa,[...t[6]||(t[6]=[j("span",null,"|",-1),j("span",{class:"text-weight-bold text-green-10"}," Aktif ",-1)])])):F("",!0)]),_:2},1024)]),_:2},1024),a(b,{avatar:""},{default:e(()=>[a(S,{icon:"edit",dense:"",outline:"",round:"",glossy:"",onClick:y=>x(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["active"]))),128)):(u(),m(C,{key:1,class:"q-px-sm"},{default:e(()=>[a(b,null,{default:e(()=>[a(h,null,{default:e(()=>[...t[4]||(t[4]=[k(" Tidak ada data ",-1)])]),_:1}),a(h,{caption:""},{default:e(()=>[...t[5]||(t[5]=[k(" untuk ditampilkan ",-1)])]),_:1})]),_:1}),a(b,{avatar:""},{default:e(()=>[a(S,{icon:"sym_o_exclamation",disable:"",dense:"",outline:"",round:"",color:"green-14"})]),_:1})]),_:1}))]),_:1})]),_:1}),a(G,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=s=>f.value=s)},{default:e(()=>[a(na,{data:r.value,onSuccessSubmit:t[0]||(t[0]=s=>d(r.value.santri_id)),onSuccessDelete:t[1]||(t[1]=s=>d(r.value.santri_id))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1}))}},I=[{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"data_akhir",label:"Data Akhir",align:"left",field:"data_akhir",sortable:!0},{name:"th_ajaran_h",label:"Tahun Ajaran",align:"left",field:"th_ajaran_h",sortable:!0},{name:"marhalah",label:"Marhalah",align:"left",field:"marhalah",sortable:!0},{name:"faslah",label:"Faslah/Kelas",align:"left",field:"faslah",sortable:!0}],xa=[{name:"id",label:"ID Santri",align:"center",field:"id",sortable:!0},...I],wa=[{name:"santri_id",label:"ID Santri",align:"center",field:"santri_id",sortable:!0},...I];export{Qa as _,wa as a,xa as c};
