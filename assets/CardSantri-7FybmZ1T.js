import{Q as T}from"./QToolbarTitle-Bi6rSosy.js";import{x as k,ac as q,c as u,o as e,w as a,b as t,n as B,p,f as Q,bK as x,g as c,v as s,q as S,r as h,s as O}from"./index-Bf-p91mW.js";import{Q as V}from"./QToolbar-CUFZpZSE.js";import{Q as d}from"./QSkeleton-DEYFlc1v.js";import{Q as W}from"./QImg-DJapb2Ub.js";import{Q as b,a as f}from"./QItemSection-Bl4rOme3.js";import{Q as v}from"./QItemLabel-sjS6zLD0.js";import{Q as $}from"./QList-51Eu5HNp.js";import{a as A}from"./api-get-CiRdORW1.js";import{s as m}from"./santri-store-Bj24Fsef.js";const D={key:1},E={key:1},L={key:1},G={key:1},K={key:1},Y={__name:"CardSantri",props:{id:{type:[Number,String],validator(l){if(typeof l=="number")return!isNaN(l);if(typeof l=="string"){const g=Number(l);return!isNaN(g)}return!1}}},emits:["loaded"],setup(l,{emit:g}){const C=g,w=l,o=k(!1),i=k({}),y=k({}),_=k({}),N=async()=>{const n=await A({endPoint:"santri/"+w.id,loading:o});n&&(i.value=n.santri,_.value=n.wali,y.value=n.ortu,m().setSantri(n.santri),m().setOrtu(n.ortu),m().setWali(n.wali))};return q(async()=>{if(w.id){const n=m().getSantri,r=m().getWali,I=m().getOrtu;n.id==w.id?(i.value=n,y.value=I,_.value=r):await N(),C("loaded",i.value)}}),(n,r)=>(e(),u(O,null,{default:a(()=>[t(B,{class:"no-padding"},{default:a(()=>[t(V,{class:"bg-green-1"},{default:a(()=>[t(T,{class:"text-subtitle1"},{default:a(()=>[...r[0]||(r[0]=[p(" Identitas Santri ",-1)])]),_:1}),t(Q,{icon:"sync",outline:"",onClick:N})]),_:1})]),_:1}),t(B,{class:"q-py-sm q-px-none"},{default:a(()=>[t($,{dense:""},{default:a(()=>[t(b,null,{default:a(()=>[t(f,{avatar:""},{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"QAvatar"})):(e(),u(x,{key:1,class:"d-flex"},{default:a(()=>[t(W,{src:i.value?.image_url||"/user-default.png",ratio:1,cover:""},null,8,["src"])]),_:1}))]),_:1}),t(f,null,{default:a(()=>[t(v,{overline:""},{default:a(()=>[...r[1]||(r[1]=[p(" Santri ",-1)])]),_:1}),t(v,null,{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"text"})):(e(),c("div",D,s(i.value.nama)+" ("+s(i.value.sex)+") ",1))]),_:1}),t(v,{caption:"",lines:"1"},{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"text"})):(e(),c("div",E,s(i.value?.alamat_pendek||"-"),1))]),_:1}),t(v,{caption:"",lines:"1",class:"text-italic"},{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"text"})):(e(),c("div",L,s(i.value?.data_akhir||"-"),1))]),_:1})]),_:1}),t(f,{avatar:""},{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"QBtn",class:"full-width"})):(e(),u(Q,{key:1,outline:"",color:"green",to:`/santri/${i.value?.id}`},{default:a(()=>[S("small",null,s(i.value?.id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),t(h,{inset:"item"}),t(b,null,{default:a(()=>[t(f,{top:"",avatar:""},{default:a(()=>[t(x)]),_:1}),t(f,null,{default:a(()=>[t(v,{overline:""},{default:a(()=>[...r[2]||(r[2]=[p(" Wali ",-1)])]),_:1}),t(v,null,{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"text"})):(e(),c("div",G,s(_.value?.nama)+" ("+s(_.value?.sex)+"; "+s(i.value?.wali_status)+") ",1))]),_:1})]),_:1}),t(f,{avatar:""},{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"QBtn",class:"full-width"})):(e(),u(Q,{key:1,outline:"",color:"green",to:`/wali/${i.value?.wali_id}`},{default:a(()=>[S("small",null,s(i.value?.wali_id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),t(h,{inset:"item"}),t(b,null,{default:a(()=>[t(f,{top:"",avatar:""},{default:a(()=>[t(x)]),_:1}),t(f,null,{default:a(()=>[t(v,{overline:""},{default:a(()=>[...r[3]||(r[3]=[p(" Orang Tua ",-1)])]),_:1}),t(v,null,{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"text"})):(e(),c("div",K,s(y.value?.ayah)+" | "+s(y.value?.ibu),1))]),_:1})]),_:1}),t(f,{avatar:""},{default:a(()=>[o.value||!l.id?(e(),u(d,{key:0,type:"QBtn",class:"full-width"})):(e(),u(Q,{key:1,outline:"",color:"green",to:`/ortu/${i.value?.ortu_id}`},{default:a(()=>[S("small",null,s(i.value?.ortu_id),1)]),_:1},8,["to"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{Y as _};
