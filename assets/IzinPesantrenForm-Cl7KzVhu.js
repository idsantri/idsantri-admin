import{Q as U}from"./QSelect-3_6HAjAN.js";import{q as C,ap as Q,s as S,Y as z,E as o,c as f,o as v,w as i,g as t,af as D,f as H,G as d,Q as x,a9 as u,l as P}from"./index-4p260kvZ.js";import{Q as N}from"./QForm-CeEVrqdX.js";import{i as B,f as T}from"./format-date-DBaFa2rd.js";import{_ as K}from"./InputSelectSantriId-CYSWWb36.js";import{_ as m}from"./InputSelectArray-aH-VPit7.js";import{I as M}from"./IzinPesantren-5UR7Cfag.js";import{u as O}from"./useCrudForm-IeQumWrO.js";const W={__name:"IzinPesantrenForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(g,{emit:c}){const n=g,V=c,a=C({pengajuan:"Baru",tujuan:"Sesuai alamat rumah",...n.data}),s=!n.data?.id,p=Q("firstInput");S(async()=>{await z(),p.value&&p.value.focus()});const{handleDelete:y,handleCreate:b,handleUpdate:k,loading:j}=O(M,{emit:V,responseKey:"izin_pesantren"});async function _(){const r={santri_id:a.value.santri_id,sifat:a.value.sifat,pengajuan:a.value.pengajuan,dari_tgl:a.value.dari_tgl,durasi:a.value.durasi,keperluan:a.value.keperluan,keterangan:a.value.keterangan,tujuan:a.value.tujuan,catatan:a.value.catatan};return s?await b(r,!0):await k(n.data.id,r,!0)}const w=async()=>await y(n.data.id);return(r,l)=>{const I=o("FormHeader"),q=o("FormLoading"),F=o("FormActions");return v(),f(P,{class:"full-width",style:{"max-width":"425px"}},{default:i(()=>[t(N,{onSubmit:D(_,["prevent"])},{default:i(()=>[t(I,{title:"Input Izin Santri","is-new":s}),d(j)?(v(),f(q,{key:0})):H("",!0),t(x,null,{default:i(()=>[t(K,{"active-only":!0,onEmitInput:l[0]||(l[0]=e=>Object.assign(a.value,e)),data:n.data,class:"q-my-sm",ref:a.value.santri_id?null:"firstInput"},null,8,["data"]),t(m,{modelValue:a.value.sifat,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.sifat=e),url:"sifat-izin",label:"Sifat",class:"q-my-sm",rules:[e=>!!e||"Harus diisi!"],ref:a.value.santri_id?"firstInput":null},null,8,["modelValue","rules"]),t(U,{label:"Pengajuan",modelValue:a.value.pengajuan,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.pengajuan=e),dense:"",outlined:"",class:"q-my-sm",options:["Baru","Perpanjangan ke-1","Perpanjangan ke-2"],disable:a.value.sifat!="Pulang"},null,8,["modelValue","disable"]),t(u,{dense:"",hint:d(B)(a.value.dari_tgl)?d(T)(a.value.dari_tgl):"",class:"q-my-sm",outlined:"",label:"Tanggal (M)*",modelValue:a.value.dari_tgl,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.dari_tgl=e),type:"date",rules:[e=>!!e||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),t(u,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Durasi (hari)*",modelValue:a.value.durasi,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.durasi=e),rules:[e=>!!e||"Harus diisi!",e=>!e||!isNaN(e)||"Hanya angka"],"error-color":"negative"},null,8,["modelValue","rules"]),t(m,{modelValue:a.value.keperluan,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.keperluan=e),url:"keperluan-izin",label:"Keperluan *",class:"q-my-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),t(m,{modelValue:a.value.keterangan,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value.keterangan=e),url:"keterangan-izin",label:"Keterangan",class:"q-my-sm"},null,8,["modelValue"]),t(u,{dense:"",class:"q-my-sm",outlined:"",label:"Tujuan",modelValue:a.value.tujuan,"onUpdate:modelValue":l[7]||(l[7]=e=>a.value.tujuan=e),autogrow:""},null,8,["modelValue"]),t(u,{dense:"",class:"q-my-sm",outlined:"",label:"Catatan",modelValue:a.value.catatan,"onUpdate:modelValue":l[8]||(l[8]=e=>a.value.catatan=e),autogrow:""},null,8,["modelValue"])]),_:1}),t(F,{"btn-delete":!s,onOnDelete:w},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{W as _};
