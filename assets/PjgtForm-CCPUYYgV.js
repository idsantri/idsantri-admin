import{Q,a as v,_ as q,b as F}from"./CarouselAlamat-B35cFH5A.js";import{a2 as j,g as N,o as g,q as b,b as t,a3 as p,F as U,x as V,a7 as D,R as B,y as f,c as x,w as u,a9 as J,a as I,n as _,s as O}from"./index-Bf-p91mW.js";import{Q as $}from"./QForm-OmDQHoiq.js";import{Q as H}from"./QSelect-Co09SqkM.js";import{_ as h}from"./InputSelectArray-Jz4ksDX6.js";import{A as M}from"./ApiCrud-SVFtkNw7.js";const T={__name:"PjgtIdentity",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(m){const a=j(m,"modelValue");return(s,l)=>(g(),N(U,null,[l[5]||(l[5]=b("div",{class:"text-subtitle2"},"Identitas Diri",-1)),t(p,{dense:"",hint:s.isNew?"Kosongkan jika ingin diisi otomatis!":"",class:"q-my-sm",outlined:"",label:"ID",modelValue:a.value.id,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.id=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),t(p,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Nama*",modelValue:a.value.nama,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.nama=e),rules:[e=>!!e||"Harus diisi!",e=>e?.length>=5||"Setidaknya 5 huruf!"],"error-color":"negative",autocapitalize:"words"},null,8,["modelValue","rules"]),t(H,{dense:"",hint:a.value.sex=="L"?"Laki-Laki":a.value.sex=="P"?"Perempuan":"",class:"q-my-sm",outlined:"",label:"Jenis Kelamin",modelValue:a.value.sex,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.sex=e),options:["L","P"],"emit-value":"","map-options":"","error-color":"negative",behavior:"menu"},null,8,["hint","modelValue"]),t(h,{modelValue:a.value.jenis_lembaga,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.jenis_lembaga=e),url:"jenis-lembaga-pendidikan",label:"Jenis Lembaga",hint:"",class:"q-my-sm"},null,8,["modelValue"]),t(p,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Nama Lembaga",modelValue:a.value.nama_lembaga,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.nama_lembaga=e),rules:[e=>!!e||"Harus diisi!"],"error-color":"negative",autocapitalize:"words"},null,8,["modelValue","rules"])],64))}},A={__name:"PjgtOthers",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(m){const a=j(m,"modelValue");return(s,l)=>(g(),N(U,null,[l[3]||(l[3]=b("div",{class:"text-subtitle2"},"Lain-Lain",-1)),t(h,{modelValue:a.value.wilayah,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value.wilayah=e),url:"wilayah-ugt",label:"Wilayah PJGT",class:"q-my-sm",hint:""},null,8,["modelValue"]),t(p,{dense:"",hint:"08123456789",class:"q-my-sm",outlined:"",label:"Telepon",modelValue:a.value.telepon,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.telepon=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(p,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Email",modelValue:a.value.email,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.email=e)},null,8,["modelValue"])],64))}};class E extends M{constructor(){super("ugt/pjgt")}async listWilayah({notifySuccess:a=!0}){const s=await this._apiGet({endPoint:`${this._path}/lists/wilayah`});return a&&this._showSuccess(s.message),s.data}async listJenisLembaga({notifySuccess:a=!0}){const s=await this._apiGet({endPoint:`${this._path}/lists/jenis-lembaga`});return a&&this._showSuccess(s.message),s.data}}const y=new E,G={class:"row justify-center"},Z={__name:"PjgtForm",props:{data:Object,isNew:Boolean},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(m,{emit:a}){const s=V(!1),l=m,e=a,w=D(),n=V({});B(async()=>{Object.assign(n.value,l.data),n.value.provinsi||(n.value.provinsi="Jawa Timur")});const k=async()=>{const r=JSON.parse(JSON.stringify(n.value)),o=l.isNew;try{s.value=!0;const d=o?await y.create({data:r}):await y.update({id:w.params.id,data:r,confirm:!0});d&&(document.getElementById("btn-close-form").click(),e("successSubmit",d?.pjgt),e(o?"successCreate":"successUpdate",d?.pjgt))}finally{s.value=!1}},P=async()=>{try{s.value=!0;const r=w.params.id;await y.remove({id:r})&&(document.getElementById("btn-close-form").click(),e("successDelete",r))}finally{s.value=!1}},c=V("identity"),S=[{label:1,value:"identity"},{label:2,value:"alamat"},{label:3,value:"others"}];return(r,o)=>{const d=f("FormHeader"),C=f("FormLoading"),L=f("FormActions");return g(),x(O,{class:"full-width",style:{"max-width":"425px"}},{default:u(()=>[t($,{onSubmit:J(k,["prevent"])},{default:u(()=>[t(d,{title:"Input Data PJGT","is-new":l.isNew},null,8,["is-new"]),s.value?(g(),x(C,{key:0})):I("",!0),t(_,{class:"no-padding"},{default:u(()=>[t(Q,{modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=i=>c.value=i),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"full-width",style:{height:"60vh"},swipeable:"",infinite:""},{default:u(()=>[t(v,{name:"identity",class:"no-wrap flex-center"},{default:u(()=>[t(T,{modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=i=>n.value=i)},null,8,["modelValue"])]),_:1}),t(v,{name:"alamat",class:"no-wrap flex-center"},{default:u(()=>[t(q,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=i=>n.value=i)},null,8,["modelValue"])]),_:1}),t(v,{name:"others",class:"no-wrap flex-center"},{default:u(()=>[t(A,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=i=>n.value=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(_,{class:"q-pa-sm"},{default:u(()=>[b("div",G,[t(F,{"toggle-color":"green-10","text-color":"text-green-11","no-caps":"",glossy:"",modelValue:c.value,"onUpdate:modelValue":o[4]||(o[4]=i=>c.value=i),options:S},null,8,["modelValue"])])]),_:1}),t(L,{"btn-delete":!m.isNew,onOnDelete:P},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{Z as _};
