import{q as b,ad as $,ab as A,s as D,E as N,c as y,o as u,w as a,g as e,e as x,Q as m,l as O,a as c,G as f,b as j,v as n,t as V}from"./index-BhNrssHr.js";import{Q as K}from"./QSpace-cuOXsmDj.js";import{Q as U}from"./QSkeleton-CffS5Tfr.js";import{Q as d}from"./QTd-DU4kbO1s.js";import{Q as r}from"./QTooltip-Dp1sjQ0t.js";import{Q as v}from"./QRating-iojYCgnI.js";import{Q as I}from"./QTr-DzHltz0h.js";import{Q as J}from"./QTable-DdL4Iw4p.js";import{_ as L}from"./FilterKelas-DZBClXqO.js";import{A as H}from"./ApiCrud-Y9YyvD4T.js";import"./QMenu-lfUwDmLC.js";import"./selection-Ar_MOr7D.js";import"./format-CJebrXOQ.js";import"./QList-DxuGxdz8.js";import"./QMarkupTable-B4LKpcsr.js";import"./QSelect-BPcFPUdZ.js";import"./QField-CTzMATWn.js";import"./QChip-3Bxr7esK.js";import"./QItem-Cr1HBVIS.js";import"./QItemLabel-BODfowdk.js";import"./rtl-DFPa-2ov.js";import"./use-fullscreen-BaIuFIeg.js";import"./QToolbar-Dji6c8Gz.js";import"./lists-madrasah-store-BUsO6Y2g.js";import"./Kelas-DPMc6H02.js";import"./AbsensiSetting-CufNHLw6.js";import"./index-DcSvzz47.js";import"./Api-AFAYKZcw.js";import"./index-BTJ4P_xk.js";import"./apiPost-Cy9rOp67.js";class M extends H{constructor(){super("nilai-ahwal")}}const S=new M,P=["innerHTML"],R={key:0},h={key:1},Qa={__name:"IndexPage",setup(B){const Q=b(""),{params:o}=$(),_=b(!1),p=b([{sopan:0,disiplin:0,rapi:0}]),k=A([{}]);async function q(){try{_.value=!0;const i=await S.getAll({params:{th_ajaran_h:o.th_ajaran_h,tingkat_id:o.tingkat_id,kelas:o.kelas,ujian_ke:o.ujian_ke}});p.value=i.ahwal,Object.assign(k,JSON.parse(JSON.stringify(i.ahwal)))}catch(i){console.error("ðŸš€ ~ fetchData ~ e:",i)}finally{_.value=!1}}async function g(i,t){try{await S.create({data:{kelas_id:t.kelas_id,hal:i,ujian_ke:o.ujian_ke,skor:t[i]}}),Object.assign(k,JSON.parse(JSON.stringify(p.value)))}catch(w){console.error("ðŸš€ ~ updateRating ~ error:",w),p.value=JSON.parse(JSON.stringify(k))}}D(async()=>{o.th_ajaran_h&&o.tingkat_id&&o.kelas&&o.ujian_ke&&await q()});const T=[{name:"no_absen",label:"No",align:"center",field:i=>i.no_absen,format:i=>`${i||""}`,sortable:!0},{name:"kelas_id",label:"ID Kelas",align:"center",field:i=>i.kelas_id,format:i=>`${i}`,sortable:!0},{name:"santri_id",label:"ID Santri",align:"center",field:i=>i.santri_id,sortable:!0},{name:"nama",label:"Nama",align:"left",field:i=>i.nama,sortable:!0},{name:"sopan",label:"Kesopanan",align:"center",field:i=>i.sopan,sortable:!0},{name:"disiplin",label:"Kedisiplinan",align:"center",field:"disiplin",sortable:!0},{name:"rapi",label:"Kerapian",align:"center",field:"rapi",sortable:!0}];return(i,t)=>{const w=N("CardHeader"),C=N("CardPage");return u(),y(C,null,{default:a(()=>[e(w,{title:"Data Nilai Ahwal (Kepribadian)","show-reload":!1},{buttons:a(()=>[e(x,{icon:"show_chart",label:"Nilai Mapel",to:"/madrasah/nilai-mapel",outline:"",dense:"","no-caps":"",class:"q-px-sm"})]),_:1}),e(m,{class:"q-pa-sm"},{default:a(()=>[e(L,{"start-url":"/madrasah/nilai-ahwal",onDataFilter:t[0]||(t[0]=l=>Q.value=l),title:"Filter Data: <span class='text-weight-medium'>Nilai Ahwal (Kepribadian)</span>","show-ujian-ke":!0})]),_:1}),e(m,{class:"q-pa-sm"},{default:a(()=>[e(O,{class:"",bordered:"",flat:""},{default:a(()=>[e(m,{class:"bg-green-8 text-green-1 text-subtitle1 q-pa-sm flex flex-center"},{default:a(()=>[c("span",{innerHTML:Q.value},null,8,P),e(K)]),_:1}),!f(o).th_ajaran_h||!f(o).tingkat_id||!f(o).kelas||!f(o).ujian_ke?(u(),y(m,{key:0,class:"q-pa-sm"},{default:a(()=>[...t[1]||(t[1]=[c("div",{class:"text-center q-pa-lg text-negative text-italic"}," Tentukan Tahun Ajaran, Tingkat Pendidikan, Kelas, dan Ujian! ",-1)])]),_:1})):(u(),y(m,{key:1,class:"q-pa-sm"},{default:a(()=>[_.value?(u(),j("div",R,[e(U,{type:"text",height:"4rem"})])):(u(),j("div",h,[e(J,{flat:"",rows:p.value,columns:T,"row-key":"kelas_id","rows-per-page-options":[10,25,50,100,0]},{body:a(l=>[e(I,{props:l},{default:a(()=>[e(d,{key:"no_absen",props:l},{default:a(()=>[n(V(l.row.no_absen),1)]),_:2},1032,["props"]),e(d,{key:"kelas_id",props:l},{default:a(()=>[e(x,{outline:"",label:l.row.kelas_id,color:"green-10",dense:"",class:"q-px-md",to:`/madrasah/kelas/${l.row.kelas_id}`},null,8,["label","to"])]),_:2},1032,["props"]),e(d,{key:"santri_id",props:l},{default:a(()=>[e(x,{outline:"",label:l.row.santri_id,color:"green-10",dense:"",class:"q-px-md",to:`/santri/${l.row.santri_id}`},null,8,["label","to"])]),_:2},1032,["props"]),e(d,{key:"nama",props:l},{default:a(()=>[n(V(l.row.nama),1)]),_:2},1032,["props"]),e(d,{key:"sopan",props:l},{default:a(()=>[e(v,{modelValue:l.row.sopan,"onUpdate:modelValue":[s=>l.row.sopan=s,s=>g("sopan",l.row)],max:"5",size:"1.7em",color:"green-14"},{"tip-1":a(()=>[e(r,null,{default:a(()=>[...t[2]||(t[2]=[n("Buruk",-1)])]),_:1})]),"tip-2":a(()=>[e(r,null,{default:a(()=>[...t[3]||(t[3]=[n("Lumayan",-1)])]),_:1})]),"tip-3":a(()=>[e(r,null,{default:a(()=>[...t[4]||(t[4]=[n("Sedang",-1)])]),_:1})]),"tip-4":a(()=>[e(r,null,{default:a(()=>[...t[5]||(t[5]=[n("Baik",-1)])]),_:1})]),"tip-5":a(()=>[e(r,null,{default:a(()=>[...t[6]||(t[6]=[n("Istimewa",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),e(d,{key:"disiplin",props:l},{default:a(()=>[e(v,{modelValue:l.row.disiplin,"onUpdate:modelValue":[s=>l.row.disiplin=s,s=>g("disiplin",l.row)],max:"5",size:"1.7em",color:"green-14"},{"tip-1":a(()=>[e(r,null,{default:a(()=>[...t[7]||(t[7]=[n("Buruk",-1)])]),_:1})]),"tip-2":a(()=>[e(r,null,{default:a(()=>[...t[8]||(t[8]=[n("Lumayan",-1)])]),_:1})]),"tip-3":a(()=>[e(r,null,{default:a(()=>[...t[9]||(t[9]=[n("Sedang",-1)])]),_:1})]),"tip-4":a(()=>[e(r,null,{default:a(()=>[...t[10]||(t[10]=[n("Baik",-1)])]),_:1})]),"tip-5":a(()=>[e(r,null,{default:a(()=>[...t[11]||(t[11]=[n("Istimewa",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),e(d,{key:"rapi",props:l},{default:a(()=>[e(v,{modelValue:l.row.rapi,"onUpdate:modelValue":[s=>l.row.rapi=s,s=>g("rapi",l.row)],max:"5",size:"1.7em",color:"green-14"},{"tip-1":a(()=>[e(r,null,{default:a(()=>[...t[12]||(t[12]=[n("Buruk",-1)])]),_:1})]),"tip-2":a(()=>[e(r,null,{default:a(()=>[...t[13]||(t[13]=[n("Lumayan",-1)])]),_:1})]),"tip-3":a(()=>[e(r,null,{default:a(()=>[...t[14]||(t[14]=[n("Sedang",-1)])]),_:1})]),"tip-4":a(()=>[e(r,null,{default:a(()=>[...t[15]||(t[15]=[n("Baik",-1)])]),_:1})]),"tip-5":a(()=>[e(r,null,{default:a(()=>[...t[16]||(t[16]=[n("Istimewa",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]))]),_:1}))]),_:1})]),_:1})]),_:1})}}};export{Qa as default};
