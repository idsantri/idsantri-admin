import{a8 as h,ae as q,A as H,s as A,c as _,o as b,w as u,g as a,l as C,n as g,e as w,C as U,G as Q,q as M,ap as B,Y as G,E as v,af as N,f as T,Q as $,a9 as V}from"./index-lfsacdTL.js";import{Q as L}from"./QForm-DwVKhKnd.js";import{u as O}from"./useCrudForm-CC03GL-p.js";import{A as R}from"./ApbAccount-rFdQkjoW.js";import{Q as j}from"./QBtnDropdown-BlyQ6xWg.js";import{Q as E}from"./QSelect-vmgT3_C5.js";import{C as y}from"./ClosePopup-UdmwPR6b.js";import{u as K}from"./apb-account-groups-store-CPfo-6UO.js";const P={__name:"InputSelectAccountGroup",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(c){const d=h(c,"modelValue"),t=K(),{loading:p,groups:e}=q(t),r=H(()=>e.value.map(l=>({...l,category_name:`${l.category}: ${l.name}`}))),s=()=>t.loadAll(!1);return A(async()=>{e.value?.length||await s()}),(l,m)=>(b(),_(E,{label:"Grup Akun",dense:"",outlined:"","emit-value":"","map-options":"",options:r.value,loading:Q(p),behavior:"menu","option-value":"name","option-label":"category_name",clearable:"",modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=i=>d.value=i),rules:[i=>!!i||"Harus diisi!"]},{after:u(()=>[a(C,{flat:"",bordered:""},{default:u(()=>[a(j,{flat:"","dropdown-icon":"more_vert",class:"q-px-sm",color:""},{default:u(()=>[g(a(w,{class:"block full-width","no-caps":"",label:"Muat ulang",icon:"sync",flat:"",onClick:s},null,512),[[y]]),a(U),g(a(w,{class:"block full-width","no-caps":"",label:"Daftar grup",icon:"info",flat:"",to:"/apb/accounts/groups"},null,512),[[y]])]),_:1})]),_:1})]),_:1},8,["options","loading","modelValue","rules"]))}},oe={__name:"ApbAccountForm",props:{data:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(c,{emit:d}){const t=c,p=d,e=M({...t.data}),r=!t.data?.id,s=B("firstInput");A(async()=>{await G(),s.value&&s.value.focus()});const{handleDelete:l,handleCreate:m,handleUpdate:i,loading:k}=O(R,{emit:p,responseKey:"account"}),F=async()=>{const f={id:e.value.id,group:e.value.group,name:e.value.name};return r?await m(f,!0):await i(t.data.id,f,!0)},x=async()=>await l(t.data.id);return(f,n)=>{const D=v("FormHeader"),S=v("FormLoading"),I=v("FormActions");return b(),_(C,{class:"full-width",style:{"max-width":"425px"}},{default:u(()=>[a(L,{onSubmit:N(F,["prevent"])},{default:u(()=>[a(D,{title:"Input Akun","is-new":r}),Q(k)?(b(),_(S,{key:0})):T("",!0),a($,null,{default:u(()=>[a(V,{dense:"",class:"q-my-sm",outlined:"",label:"ID",modelValue:e.value.id,"onUpdate:modelValue":n[0]||(n[0]=o=>e.value.id=o),autogrow:"",rules:[o=>!!o||"Harus diisi!"],ref_key:"firstInput",ref:s},null,8,["modelValue","rules"]),a(P,{class:"q-my-sm",modelValue:e.value.group,"onUpdate:modelValue":n[1]||(n[1]=o=>e.value.group=o),rules:[o=>!!o||"Harus diisi!"]},null,8,["modelValue","rules"]),a(V,{dense:"",class:"q-my-sm",outlined:"",label:"Nama Akun",modelValue:e.value.name,"onUpdate:modelValue":n[2]||(n[2]=o=>e.value.name=o),autogrow:"",rules:[o=>!!o||"Harus diisi!"]},null,8,["modelValue","rules"])]),_:1}),a(I,{"btn-delete":!r,onOnDelete:x},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{oe as _};
