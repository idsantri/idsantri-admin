import{Q as q}from"./QSelect-CrgZ1FsI.js";import{A as F,U as z,B as d,c as g,o as v,w as m,b as l,ab as S,e as D,C as p,Q as I,a5 as u,x as P}from"./index-DwrbA0R8.js";import{Q}from"./QForm-DCEv1Ikv.js";import{i as x,f as H}from"./format-date-DlwYCgkJ.js";import{_ as A}from"./InputSelectSantriId-bdXDP9_G.js";import{_ as c}from"./InputSelectArray-DFe88pva.js";import{A as B}from"./ApiCrud-KwrbSuI8.js";import{u as N}from"./useCrudForm-DF0rM6hG.js";class $ extends B{constructor(){super("izin-pesantren")}async setKembali({id:r,data:n,message:i}){if(!await this._notifyConfirm(i||"Update data ini?"))return!1;const s=await this._apiUpdate({endPoint:`${this._path}/${r}/set-kembali`,data:n});return this._showSuccess(s.message),s.data||!0}}const K=new $,R={__name:"IzinPesantrenForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(f,{emit:r}){const n=f,i=r,a=F({pengajuan:"Baru",tujuan:"Sesuai alamat rumah"}),s=!n.data?.id,{handleDelete:V,handleCreate:b,handleUpdate:y,loading:j}=N(K,{emit:i,responseKey:"izin_pesantren"});z(async()=>{Object.assign(a.value,n.data)});async function k(){const o={santri_id:a.value.santri_id,sifat:a.value.sifat,pengajuan:a.value.pengajuan,dari_tgl:a.value.dari_tgl,durasi:a.value.durasi,keperluan:a.value.keperluan,keterangan:a.value.keterangan,tujuan:a.value.tujuan,catatan:a.value.catatan};return s?await b(o,!0):await y(n.data.id,o,!0)}const _=async()=>await V(n.data.id);return(o,t)=>{const w=d("FormHeader"),C=d("FormLoading"),U=d("FormActions");return v(),g(P,{class:"full-width",style:{"max-width":"425px"}},{default:m(()=>[l(Q,{onSubmit:S(k,["prevent"])},{default:m(()=>[l(w,{title:"Input Izin Santri","is-new":s}),p(j)?(v(),g(C,{key:0})):D("",!0),l(I,{class:"q-pa-sm"},{default:m(()=>[l(A,{"active-only":!0,onEmitInput:t[0]||(t[0]=e=>Object.assign(a.value,e)),data:n.data,class:"q-my-sm"},null,8,["data"]),l(c,{modelValue:a.value.sifat,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.sifat=e),url:"sifat-izin",label:"Sifat",class:"q-my-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),l(q,{label:"Pengajuan",modelValue:a.value.pengajuan,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value.pengajuan=e),dense:"",outlined:"",class:"q-my-sm",options:["Baru","Perpanjangan ke-1","Perpanjangan ke-2"],disable:a.value.sifat!="Pulang"},null,8,["modelValue","disable"]),l(u,{dense:"",hint:p(x)(a.value.dari_tgl)?p(H)(a.value.dari_tgl):"",class:"q-my-sm",outlined:"",label:"Tanggal (M)*",modelValue:a.value.dari_tgl,"onUpdate:modelValue":t[3]||(t[3]=e=>a.value.dari_tgl=e),type:"date",rules:[e=>!!e||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),l(u,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Durasi (hari)*",modelValue:a.value.durasi,"onUpdate:modelValue":t[4]||(t[4]=e=>a.value.durasi=e),rules:[e=>!!e||"Harus diisi!",e=>!e||!isNaN(e)||"Hanya angka"],"error-color":"negative"},null,8,["modelValue","rules"]),l(c,{modelValue:a.value.keperluan,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value.keperluan=e),url:"keperluan-izin",label:"Keperluan *",class:"q-my-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),l(c,{modelValue:a.value.keterangan,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.keterangan=e),url:"keterangan-izin",label:"Keterangan",class:"q-my-sm"},null,8,["modelValue"]),l(u,{dense:"",class:"q-my-sm",outlined:"",label:"Tujuan",modelValue:a.value.tujuan,"onUpdate:modelValue":t[7]||(t[7]=e=>a.value.tujuan=e),autogrow:""},null,8,["modelValue"]),l(u,{dense:"",class:"q-my-sm",outlined:"",label:"Catatan",modelValue:a.value.catatan,"onUpdate:modelValue":t[8]||(t[8]=e=>a.value.catatan=e),autogrow:""},null,8,["modelValue"])]),_:1}),l(U,{"btn-delete":!s,onOnDelete:_},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{K as I,R as _};
