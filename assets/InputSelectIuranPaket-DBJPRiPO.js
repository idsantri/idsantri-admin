import{q as o,N as C,s as N,b as k,o as p,g as e,w as l,n as v,e as g,aj as q,Q,l as V,F as _,D as B,c as D,v as m,t as i,a4 as L}from"./index-DutRA_CO.js";import{Q as R}from"./QSelect-LIcm9uTB.js";import{Q as T}from"./QSpace-RyUqKbav.js";import{Q as h}from"./QItemLabel-WimR8O_E.js";import{Q as b,a as S}from"./QItem-qGBVeF8-.js";import{Q as A}from"./QList-Ht0U1kJ0.js";import{Q as E}from"./QSlideTransition-CTkZRuNW.js";import{C as F}from"./ClosePopup-RQcL-rG0.js";import{I as J}from"./IuranPaket-bo5CUDk2.js";const X={__name:"InputSelectIuranPaket",emits:["onInput"],setup(O,{emit:y}){const u=o(!1),c=o(!1),r=o(""),s=o([]),P=y;C(r,t=>{const n=JSON.parse(JSON.stringify(s.value)).filter(a=>a.paket==t).map(a=>({paket:a.paket,item:a.item,nominal:a.nominal}));P("onInput",n||null)});async function I(){try{u.value=!0;const t=await J.getAll();s.value=t.iuran_paket}catch(t){console.error("Error fetching iuran paket detail:",t)}finally{u.value=!1}}N(async()=>{await I()});function w(){const t=s.value.map(n=>n.paket);return Array.from(new Set(t))}function d(){return s.value.filter(t=>t.paket==r.value)}function f(){return d().reduce(function(n,a){return n+Number(a.nominal)},0)}return(t,n)=>(p(),k(_,null,[e(R,{label:"Pilih paket",dense:"",outlined:"","emit-value":"","map-options":"",options:w(),loading:u.value,behavior:"menu",clearable:"",hint:f().toRupiah(),modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=a=>r.value=a),rules:[a=>!!a||"Harus diisi!"],class:q([t.$attrs.class])},{after:l(()=>[v(e(g,{"no-caps":"",icon:"settings",to:"/iuran/paket",outline:"",dense:"",class:"q-pa-sm"},null,512),[[F]]),e(g,{color:"green","no-caps":"",icon:"info",outline:"",dense:"",class:"q-pa-sm",onClick:n[0]||(n[0]=a=>c.value=!c.value)})]),_:1},8,["options","loading","hint","modelValue","rules","class"]),e(E,{appear:""},{default:l(()=>[v(e(Q,{class:"no-padding q-my-sm"},{default:l(()=>[e(V,{bordered:"",flat:"",class:"bg-green-1 scroll",style:{height:"150px"}},{default:l(()=>[e(Q,{class:"q-pa-sm q-card--bordered"},{default:l(()=>[e(A,{separator:""},{default:l(()=>[(p(!0),k(_,null,B(d(),(a,x)=>(p(),D(b,{key:x,dense:""},{default:l(()=>[e(S,null,{default:l(()=>[e(h,{class:"flex"},{default:l(()=>[m(i(a.urut??"#")+". "+i(a.item)+" ",1),e(T),m(" "+i(Number(a.nominal).toRupiah()),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(b,{dense:""},{default:l(()=>[e(S,null,{default:l(()=>[e(h,{class:"text-right text-bold"},{default:l(()=>[m(i(f().toRupiah()),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),[[L,c.value]])]),_:1})],64))}};export{X as _};
