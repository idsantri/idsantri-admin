import{Q as c}from"./QSpace-1wK7Letz.js";import{aa as x,ac as v,ai as A,q as I,s as C,c as O,o as N,w as r,g as n,Q as p,a as s,n as m,e as f,a4 as g,G as i,m as D,l as Q}from"./index-CWye4qEt.js";import{C as B}from"./ClosePopup-5P2GvSTt.js";import{V as k,D as E}from"./dataTables-DhrsSPJj.js";import{a as M}from"./index-D42nOBhm.js";import{d as R}from"./dialog-store-D-qqVX_5.js";import{s as K}from"./santri-store-C4CyGNq3.js";import{o as _}from"./ortu-store-C1bvj-uM.js";import{e as q,d as P}from"./index-7spX8Hom.js";import{t as V}from"./array-object-BytDdNh7.js";import"./_commonjsHelpers-DsqdWQfm.js";const Z={__name:"OrtuSearch",setup(w){const h=R(),{searchOrtu:o,crudOrtu:y,crudSantri:l}=x(h),b=()=>{_().$reset(),_().setNew(),y.value=!0},d=v(),$=A().token||"",u=`${M.defaults.baseURL}/ortu/search`,T={Authorization:`Bearer ${$}`};k.use(E);const S=I({processing:!0,serverSide:!0,responsive:!0,ajax:{url:u,type:"POST",headers:T,error:t=>{const e=t.responseJSON?.message;e?V(e).forEach(a=>q(a)):console.log(`Error during get ${u}`,t)}},order:[],columns:[{title:"ID",data:"id",render:function(t,e,a){return`<button onclick='copyId(${a.id})' class='dt-btn-flat' title='Klik/Tap untuk menyalin ID'>${a.id}</button>`}},{title:"Ayah",data:"ayah",render:function(t,e,a){return`<span class="dt-link" onclick='goToOrtu(${a.id})'>${a.ayah}</span>`}},{title:"NIK Ayah",data:"a_nik"},{title:"Ibu",data:"ibu",render:function(t,e,a){return`<span class="dt-link" onclick='goToOrtu(${a.id})'>${a.ibu}</span>`}},{title:"NIK (Ibu)",data:"i_nik"},{title:"Anak1",render:function(t,e,a){return`<span class="dt-link" onclick='goToSantri(${a.santri1_id})'>${a.santri1_nama||"-"}</span>`}},{title:"Anak2",render:function(t,e,a){return`<span class="dt-link" onclick='goToSantri(${a.santri2_id})'>${a.santri2_nama||"-"}</span>`}},{title:"Anak3",render:function(t,e,a){return`<span class="dt-link" onclick='goToSantri(${a.santri3_id})'>${a.santri3_nama||"-"}</span>`}},{title:"Anak4",render:function(t,e,a){return`<span class="dt-link" onclick='goToSantri(${a.santri4_id})'>${a.santri4_nama||"-"}</span>`}},{title:"Anak5",render:function(t,e,a){return`<span class="dt-link" onclick='goToSantri(${a.santri5_id})'>${a.santri5_nama||"-"}</span>`}}],language:{search:"Cari:",zeroRecords:"Tidak data data untuk ditampilkan. Coba kata kunci yang lain!",info:"Menampilkan _START_ hingga _END_, dari total _TOTAL_ data",infoFiltered:"(disaring dari _MAX_ total data)",paginate:{first:"↑",previous:"←",next:"→",last:"↓"},lengthMenu:"_MENU_ Perhalaman"},autoWidth:!1,scrollX:!0,search:{return:!0}});return C(()=>{document.goToSantri=t=>{d.push(`/santri/${t}`)},document.goToOrtu=t=>{d.push(`/ortu/${t}`)},document.copyId=t=>{l.value?K().setOrtuId(t):(navigator.clipboard.writeText(t),P(`ID (${t}) sudah disalin/dicopy ke clipboard`)),o.value=!1}}),(t,e)=>(N(),O(Q,{style:{width:"100%"},flat:""},{default:r(()=>[n(p,{class:"bg-green-7 text-green-1 q-pa-sm flex items-center"},{default:r(()=>[e[0]||(e[0]=s("h2",{class:"text-subtitle1 no-margin text-green-11"},"Cari Orang Tua",-1)),n(c),m(n(f,{label:"Tambah",color:"green-12",class:"text-green-10 q-px-sm",icon:"add","no-caps":"",dense:"",onClick:b},null,512),[[g,i(l)]])]),_:1}),n(p,null,{default:r(()=>[n(i(k),{class:"display table nowrap dt",options:S.value,style:{overflow:"hidden"}},null,8,["options"])]),_:1}),n(D,{class:"bg-green-6"},{default:r(()=>[e[1]||(e[1]=s("div",{class:"text-body2 text-green-11 text-italic"},[s("div",null,"▪️ Cari berdsarkan ID, nama ayah/ibu, atau NIK"),s("div",null,"▪️ simbol % = karakter apapun")],-1)),n(c),m(n(f,{label:"Tutup",color:"green-1",class:"text-green-10","no-caps":"",id:"btn-close-ortu-search"},null,512),[[B],[g,i(o)]])]),_:1})]),_:1}))}};export{Z as default};
