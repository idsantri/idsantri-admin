import{q as c,ad as g,ac as w,s as y,c as $,o as v,w as l,g as i,v as o,t,a9 as h,p as T,a as x}from"./index-CWye4qEt.js";import{Q as s}from"./QTd-DvAr4-o9.js";import{Q}from"./QTr-DSdoKVVr.js";import{Q as C}from"./QTable-BpIw-fJS.js";import{K as V}from"./Kelas-BpK0NAWy.js";import"./QList-DOT6QFKZ.js";import"./QMarkupTable-DScY86sK.js";import"./QSelect-OBW8mv95.js";import"./QField-CLkTaNN-.js";import"./QChip-DGFrlPeh.js";import"./QItem-DjxGL6QP.js";import"./QItemLabel-DIxNYPMO.js";import"./QMenu-CJnqWC7S.js";import"./selection-BsuJAJtW.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./use-fullscreen-BqpR8Vql.js";import"./ApiCrud-Ci_9uIPb.js";import"./Api-BIpJW0ob.js";import"./index-7spX8Hom.js";import"./index-D42nOBhm.js";import"./apiPost-CPSAjzkH.js";const Y={__name:"ContentTable",setup(D){const m=c(!1),{params:d}=g(),k=w(),u=c([]),f=c("");function p(e){k.push(`/madrasah/kelas/${e.id}/riwayat`)}async function b(e={}){try{u.value=[],m.value=!0;const a=(await V.getAll({params:e})).murid.map(n=>({...n,alamat:`${n.desa} ${n.kecamatan} ${n.kabupaten}`,alamat_lengkap:`${n.jl} ${n.desa} ${n.kecamatan} ${n.kabupaten} ${n.provinsi}`}));u.value=a}catch(r){console.error("Error loading data:",r)}finally{m.value=!1}}y(async()=>{d.th_ajaran_h&&d.tingkat_id?(d.kelas||delete d.kelas,await b(d)):u.value=[]});const _=[{name:"id",label:"ID Kelas",align:"left",field:"id",sortable:!0},{name:"santri_id",label:"ID Santri",align:"left",field:"santri_id",sortable:!0},{name:"nama",label:"Nama",align:"left",field:"nama",sortable:!0},{name:"alamat",label:"Alamat",align:"left",field:e=>`${e.desa} ${e.kecamatan} ${e.kabupaten}`,sortable:!0,classes:"alamat"},{name:"pendidikan",label:"Kelas - Tingkat - Absen",align:"left",field:e=>`${e.kelas} ${e.tingkat_id}
			${e.no_absen?" ("+("0"+e.no_absen).slice(-2)+")":""}`,sortable:!0},{name:"wali",label:"Wali",align:"left",field:"wali_nama",sortable:!0},{name:"ortu",label:"Orang Tua",align:"left",field:e=>`${e.ayah} | ${e.ibu}`,sortable:!0}];return(e,r)=>(v(),$(C,{rows:u.value,columns:_,loading:m.value,"rows-per-page-options":[10,25,50,75,100,0],class:"dt",filter:f.value,"no-data-label":"Silakan tentukan Tahun ajaran dan tingkat pendidikan!","no-results-label":"Tidak ditemukan kata kunci yang sesuai dengan pencarian Anda!","row-key":"id",flat:""},{"top-left":l(()=>[...r[1]||(r[1]=[x("div",{class:"text-subtitle1 text-green-10"},"Data Murid",-1)])]),"top-right":l(()=>[i(h,{outlined:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=a=>f.value=a),placeholder:"Cari"},{append:l(()=>[i(T,{name:"search"})]),_:1},8,["modelValue"])]),body:l(a=>[i(Q,{props:a,onClick:n=>p(a.row),style:{cursor:"pointer"}},{default:l(()=>[i(s,{key:"id",props:a},{default:l(()=>[o(t(a.row.id),1)]),_:2},1032,["props"]),i(s,{key:"id",props:a},{default:l(()=>[o(t(a.row.santri_id),1)]),_:2},1032,["props"]),i(s,{key:"nama",props:a},{default:l(()=>[o(t(a.row.nama)+" ("+t(a.row.sex)+") ",1)]),_:2},1032,["props"]),i(s,{key:"alamat",props:a,title:a.row.alamat_lengkap},{default:l(()=>[o(t(a.row.alamat.length>30?a.row.alamat.substr(0,30)+"â€¦":a.row.alamat),1)]),_:2},1032,["props","title"]),i(s,{key:"pendidikan",props:a},{default:l(()=>[o(t(a.row.kelas)+" "+t(a.row.tingkat_id)+" "+t(a.row.no_absen?" ("+("0"+a.row.no_absen).slice(-2)+")":""),1)]),_:2},1032,["props"]),i(s,{key:"wali",props:a},{default:l(()=>[o(t(a.row.wali_nama)+" ("+t(a.row.wali_status)+"; "+t(a.row.wali_sex)+") ",1)]),_:2},1032,["props"]),i(s,{key:"ortu",props:a},{default:l(()=>[o(t(a.row.ayah)+" | "+t(a.row.ibu),1)]),_:2},1032,["props"])]),_:2},1032,["props","onClick"])]),_:1},8,["rows","loading","filter"]))}};export{Y as default};
