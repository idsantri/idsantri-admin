import{v as i,a7 as _,b as k,R as $,r as g,o as B,i as l,w as b,z as p,B as j}from"./index-Cju_WcQt.js";import{_ as w}from"./TemplateArray-5foy-9-c.js";import{r as y,d as S,g as A}from"./array-object-BytDdNh7.js";import{a as V}from"./api-get-C-ZFMqL_.js";import{_ as h}from"./KelasForm-DfmCPJRK.js";import"./QSpinnerCube-BbU3LkI7.js";import"./QItemSection-CL0X_XCy.js";import"./QItemLabel-97msGuv9.js";import"./QList-DJ6I4Xhf.js";import"./index-DgCvXGx8.js";import"./index-pFkrbuLE.js";import"./api-error-BS7WyEhR.js";import"./QForm-B-IeWzDf.js";import"./lists-store-Bv-Q7-f0.js";import"./lists-data-L-iOlbK0.js";import"./api-post-P8g4q4LG.js";import"./api-update-Dm-9pXju.js";import"./api-delete-BEmNpbPy.js";import"./InputSelectArray-G7sFmwYz.js";import"./QSelect-D99lhOsm.js";import"./QChip-DJA81wTZ.js";import"./QMenu-BUIDrqEf.js";import"./selection-noklRUze.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./api-get-lists-BfH1ZDRf.js";import"./DropDownAfter-UGjzP48R.js";import"./QBtnDropdown-69YMJW9Q.js";import"./QBtnGroup-oymYJuDk.js";import"./ClosePopup-POBKOZoS.js";import"./InputSelectTingkatPendidikan-BK-38Fxm.js";const sa={__name:"SantriKelas",setup(x){const m=i(!1),s=i(!1),r=i({}),o=i([]),n=i({}),{params:u}=_();async function d(){const a=await V({endPoint:`kelas/santri/${u.id}`,loading:m});a.kelas&&(o.value=a.kelas,n.value=a.santri)}const c=k(()=>o.value.map(a=>({"Tahun Ajaran":`${a.th_ajaran_h}  |  ${a.th_ajaran_m||""} `,Kelas:`${a.kelas} ${a.tingkat}`+(a.no_absen?` (No. ${a.no_absen})`:""),Keterangan:a.keterangan||"-",id:a.id})).reverse());$(async()=>{await d()});const v=()=>{r.value={santri_id:n.value.id,nama:n.value.nama},s.value=!0},f=({id:a})=>{r.value=A(o,a),r.value.santri_id=n.value.id,r.value.nama=n.value.nama,s.value=!0};return(a,t)=>(B(),g("div",null,[l(w,{data:c.value,spinner:m.value,link:"/madrasah/kelas",onAdd:v,onEdit:f},null,8,["data","spinner"]),l(j,{modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e)},{default:b(()=>[l(h,{data:r.value,onSuccessDelete:t[0]||(t[0]=e=>p(S)(o.value,e)),onSuccessCreate:t[1]||(t[1]=e=>o.value.push(e)),onSuccessUpdate:t[2]||(t[2]=e=>p(y)(o.value,e.id,e))},null,8,["data"])]),_:1},8,["modelValue"])]))}};export{sa as default};
