import{Q as D}from"./QSpinnerCube-BbU3LkI7.js";import{v,R as q,f as V,o as c,w as n,i as t,a8 as N,Q as k,r as S,B as P,k as g,t as h,a4 as u,z as f,q as C}from"./index-Cju_WcQt.js";import{Q as I}from"./QSelect-D99lhOsm.js";import{Q as B,a as b,_ as L,b as O}from"./CarouselAlamat-C0wY8-_1.js";import{Q as $}from"./QForm-B-IeWzDf.js";import{a as j}from"./api-delete-BEmNpbPy.js";import{a as E}from"./api-update-Dm-9pXju.js";import{a as F}from"./api-post-P8g4q4LG.js";import{i as H,f as z}from"./format-date-DlwYCgkJ.js";import{b as A,m as J}from"./hijri-BBdEhqDI.js";import{_ as K}from"./InputSelectKotaLahir-CDyT6Dr2.js";import{_ as T}from"./FormHeader-BlagXmst.js";import{_ as y}from"./InputSelectArray-G7sFmwYz.js";import{_ as M}from"./FormActions-Bb9KETZb.js";const R={key:0,style:{height:"70vh"}},G={class:"text-subtitle2"},W={class:"text-subtitle2"},X={class:"row justify-center"},pe={__name:"PersonaliaForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(_,{emit:x}){const d=_,m=x,l=v({}),i=v(!1),r=!d.data?.id;q(async()=>{Object.assign(l.value,d.data)});const w=async()=>{const o=JSON.parse(JSON.stringify(l.value));delete o.image,delete o.aktif;let a=null;r?a=await F({endPoint:"aparatur",data:o,loading:i}):a=await E({endPoint:`aparatur/${d.data.id}`,data:o,confirm:!0,notify:!0,loading:i}),a&&(document.getElementById("btn-close-form").click(),m("successSubmit",a?.aparatur),m(r?"successCreate":"successUpdate",a?.aparatur))},Q=async()=>{const o=d.data.id;await j({endPoint:`aparatur/${o}`,loading:i})&&(document.getElementById("btn-close-form").click(),m("successDelete",o))},s={identitas:{title:"Identitas Diri",button:"1"},alamat:{title:"Data Alamat",button:"2"},others:{title:"Lain-Lain",button:"3"}},p=v(s.identitas.button),U=[{label:s.identitas.button,value:s.identitas.button},{label:s.alamat.button,value:s.alamat.button},{label:s.others.button,value:s.others.button}];return(o,a)=>(c(),V(C,{class:"full-width",style:{"max-width":"425px"}},{default:n(()=>[t($,{onSubmit:N(w,["prevent"])},{default:n(()=>[t(T,{title:"Input Data Personalia","is-new":r}),t(k,{class:"no-padding"},{default:n(()=>[i.value?(c(),S("div",R,[t(P,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),persistent:""},{default:n(()=>[t(D,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})]),_:1},8,["modelValue"])])):(c(),V(B,{key:1,modelValue:p.value,"onUpdate:modelValue":a[12]||(a[12]=e=>p.value=e),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"full-width",style:{height:"70vh"},swipeable:"",infinite:""},{default:n(()=>[t(b,{name:s.identitas.button,class:"no-wrap flex-center"},{default:n(()=>[g("div",G,h(s.identitas.title),1),t(u,{dense:"",hint:r?"Kosongkan jika ingin diisi otomatis!":"",class:"q-mt-sm",outlined:"",label:"ID",modelValue:l.value.id,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.id=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),t(u,{dense:"",hint:"",class:"q-mt-sm",outlined:"",label:"Nama*",modelValue:l.value.nama,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.nama=e),rules:[e=>!!e||"Harus diisi!",e=>e?.length>=3||"Setidaknya 3 huruf!"],"error-color":"negative",autocapitalize:"words"},null,8,["modelValue","rules"]),t(u,{dense:"",hint:"",class:"q-mt-sm",outlined:"",label:"Nomor Induk Kependudukan",modelValue:l.value.nik,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.nik=e),rules:[e=>!e||e?.length==16&&!isNaN(e)||"16 digit angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(K,{onEmitInput:a[4]||(a[4]=e=>l.value.tmp_lahir=e.tmp_lahir),data:l.value},null,8,["data"]),t(u,{dense:"",hint:f(H)(l.value.tgl_lahir)?f(z)(l.value.tgl_lahir)+" | "+f(A)(f(J)(l.value.tgl_lahir)):"",class:"q-mt-sm",outlined:"",label:"Tanggal Lahir",modelValue:l.value.tgl_lahir,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.tgl_lahir=e),type:"date"},null,8,["hint","modelValue"]),t(I,{dense:"",hint:l.value.sex=="L"?"Laki-Laki":l.value.sex=="P"?"Perempuan":"",class:"q-mt-sm",outlined:"",label:"Jenis Kelamin",modelValue:l.value.sex,"onUpdate:modelValue":a[6]||(a[6]=e=>l.value.sex=e),options:["L","P"],"emit-value":"","map-options":"","error-color":"negative",behavior:"menu"},null,8,["hint","modelValue"])]),_:1},8,["name"]),t(b,{name:s.alamat.button,class:"no-wrap flex-center"},{default:n(()=>[t(L,{onEmitInput:a[7]||(a[7]=e=>Object.assign(l.value,e)),data:l.value},null,8,["data"])]),_:1},8,["name"]),t(b,{name:s.others.button,class:"no-wrap flex-center"},{default:n(()=>[g("div",W,h(s.others.title),1),t(y,{modelValue:l.value.pa_formal,"onUpdate:modelValue":a[8]||(a[8]=e=>l.value.pa_formal=e),url:"pendidikan-akhir-formal",label:"Pendidikan Akhir Formal",class:"q-mt-sm",hint:""},null,8,["modelValue"]),t(y,{modelValue:l.value.pa_diniyah,"onUpdate:modelValue":a[9]||(a[9]=e=>l.value.pa_diniyah=e),url:"pendidikan-akhir-diniyah",label:"Pendidikan Akhir Diniyah",class:"q-mt-sm",hint:""},null,8,["modelValue"]),t(u,{dense:"",hint:"08123456789",class:"q-mt-sm",outlined:"",label:"Telepon",modelValue:l.value.telepon,"onUpdate:modelValue":a[10]||(a[10]=e=>l.value.telepon=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(u,{dense:"",hint:"",class:"q-mt-sm",outlined:"",label:"Email",modelValue:l.value.email,"onUpdate:modelValue":a[11]||(a[11]=e=>l.value.email=e)},null,8,["modelValue"])]),_:1},8,["name"])]),_:1},8,["modelValue"]))]),_:1}),t(k,{class:"q-pa-sm"},{default:n(()=>[g("div",X,[t(O,{"toggle-color":"green-10","text-color":"text-green-11","no-caps":"",glossy:"",modelValue:p.value,"onUpdate:modelValue":a[13]||(a[13]=e=>p.value=e),options:U},null,8,["modelValue"])])]),_:1}),t(M,{"btn-delete":!r,onOnDelete:Q},null,8,["btn-delete"])]),_:1})]),_:1}))}};export{pe as _};
