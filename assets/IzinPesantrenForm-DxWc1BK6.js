import{Q as U}from"./QSelect-BLKSSUHp.js";import{q as C,E as r,c as p,o as g,w as i,g as t,ae as Q,f as S,G as d,Q as z,a8 as u,l as D}from"./index-D7p1JsWM.js";import{Q as H}from"./QForm-CFNhGC2t.js";import{i as I,f as P}from"./format-date-OVhbBx9F.js";import{_ as x}from"./InputSelectSantriId-BxWfcsa4.js";import{_ as m}from"./InputSelectArray-CzCQNBvl.js";import{I as N}from"./IzinPesantren-CV-z8gCL.js";import{u as B}from"./useCrudForm-L0lsZHiW.js";const G={__name:"IzinPesantrenForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(v,{emit:f}){const n=v,V=f,a=C({pengajuan:"Baru",tujuan:"Sesuai alamat rumah",...n.data}),s=!n.data?.id,{handleDelete:c,handleCreate:b,handleUpdate:y,loading:j}=B(N,{emit:V,responseKey:"izin_pesantren"});async function k(){const o={santri_id:a.value.santri_id,sifat:a.value.sifat,pengajuan:a.value.pengajuan,dari_tgl:a.value.dari_tgl,durasi:a.value.durasi,keperluan:a.value.keperluan,keterangan:a.value.keterangan,tujuan:a.value.tujuan,catatan:a.value.catatan};return s?await b(o,!0):await y(n.data.id,o,!0)}const _=async()=>await c(n.data.id);return(o,l)=>{const w=r("FormHeader"),q=r("FormLoading"),F=r("FormActions");return g(),p(D,{class:"full-width",style:{"max-width":"425px"}},{default:i(()=>[t(H,{onSubmit:Q(k,["prevent"])},{default:i(()=>[t(w,{title:"Input Izin Santri","is-new":s}),d(j)?(g(),p(q,{key:0})):S("",!0),t(z,{class:"q-pa-sm"},{default:i(()=>[t(x,{"active-only":!0,onEmitInput:l[0]||(l[0]=e=>Object.assign(a.value,e)),data:n.data,class:"q-my-sm"},null,8,["data"]),t(m,{modelValue:a.value.sifat,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.sifat=e),url:"sifat-izin",label:"Sifat",class:"q-my-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),t(U,{label:"Pengajuan",modelValue:a.value.pengajuan,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.pengajuan=e),dense:"",outlined:"",class:"q-my-sm",options:["Baru","Perpanjangan ke-1","Perpanjangan ke-2"],disable:a.value.sifat!="Pulang"},null,8,["modelValue","disable"]),t(u,{dense:"",hint:d(I)(a.value.dari_tgl)?d(P)(a.value.dari_tgl):"",class:"q-my-sm",outlined:"",label:"Tanggal (M)*",modelValue:a.value.dari_tgl,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.dari_tgl=e),type:"date",rules:[e=>!!e||"Harus diisi!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),t(u,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Durasi (hari)*",modelValue:a.value.durasi,"onUpdate:modelValue":l[4]||(l[4]=e=>a.value.durasi=e),rules:[e=>!!e||"Harus diisi!",e=>!e||!isNaN(e)||"Hanya angka"],"error-color":"negative"},null,8,["modelValue","rules"]),t(m,{modelValue:a.value.keperluan,"onUpdate:modelValue":l[5]||(l[5]=e=>a.value.keperluan=e),url:"keperluan-izin",label:"Keperluan *",class:"q-my-sm",rules:[e=>!!e||"Harus diisi!"]},null,8,["modelValue","rules"]),t(m,{modelValue:a.value.keterangan,"onUpdate:modelValue":l[6]||(l[6]=e=>a.value.keterangan=e),url:"keterangan-izin",label:"Keterangan",class:"q-my-sm"},null,8,["modelValue"]),t(u,{dense:"",class:"q-my-sm",outlined:"",label:"Tujuan",modelValue:a.value.tujuan,"onUpdate:modelValue":l[7]||(l[7]=e=>a.value.tujuan=e),autogrow:""},null,8,["modelValue"]),t(u,{dense:"",class:"q-my-sm",outlined:"",label:"Catatan",modelValue:a.value.catatan,"onUpdate:modelValue":l[8]||(l[8]=e=>a.value.catatan=e),autogrow:""},null,8,["modelValue"])]),_:1}),t(F,{"btn-delete":!s,onOnDelete:_},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{G as _};
