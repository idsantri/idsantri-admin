import{Q as m}from"./QItemLabel-sjS6zLD0.js";import{Q as g,a as h}from"./QItemSection-Bl4rOme3.js";import{Q as S}from"./QSelect-Co09SqkM.js";import{x as d,R as Q,c as V,o as O,w as i,b as l,n as x,bI as w,bJ as q,p as c,v as p,a3 as B,s as C}from"./index-Bf-p91mW.js";import{S as D}from"./Santri-BlBn6n9Q.js";const U={__name:"InputSelectSantriId",props:{activeOnly:{type:Boolean},data:{type:Object}},emits:["emitInput"],setup(f,{emit:v}){const s=f,_=v,t=d({}),r=d(!1),o=d([]);function b(){t.value.nama=o.value.find(a=>a.id==t.value?.santri_id)?.nama,t.value.data_akhir=o.value.find(a=>a.id==t.value?.santri_id)?.data_akhir,_("emitInput",t.value)}Q(async()=>{const a={santri_id:s.data?.santri_id,nama:s.data?.nama,data_akhir:s.data?.data_akhir};Object.assign(t.value,a)});async function I(a){try{return r.value=!0,(await D.getIds({active_only:!!s.activeOnly,q:a})).lists}finally{r.value=!1}}async function y(a,n,e){if(!a){n(()=>{o.value=[]});return}if(a.length<3){e();return}const k=await I(a);n(()=>o.value=k,u=>{a!==""&&u.options.length&&(u.setOptionIndex(-1),u.moveOptionSelection(1,!0))})}return(a,n)=>(O(),V(C,{class:"",flat:"",bordered:""},{default:i(()=>[l(x,{class:"q-pa-sm"},{default:i(()=>[l(S,{dense:"",hint:a.$props.activeOnly?"Hanya menampilkan santri aktif":"Ketikkan ID Santri",outlined:"",label:"ID Santri*",modelValue:t.value.santri_id,"onUpdate:modelValue":[n[0]||(n[0]=e=>t.value.santri_id=e),b],options:o.value,"emit-value":"","map-options":"","option-value":"id","option-label":"id","error-color":"negative",loading:r.value,"input-debounce":"400","use-input":"",clearable:"",onFilter:y,disable:!!t.value.santri_id,behavior:"menu"},{option:i(e=>[l(g,w(q(e.itemProps)),{default:i(()=>[l(h,null,{default:i(()=>[l(m,null,{default:i(()=>[c(p(e.opt.id)+" â€” "+p(e.opt.nama),1)]),_:2},1024),l(m,{caption:""},{default:i(()=>[c(p(e.opt.data_akhir),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["hint","modelValue","options","loading","disable"]),l(B,{hint:t.value.data_akhir,class:"q-mt-sm",dense:"",outlined:"",label:"Nama",modelValue:t.value.nama,"onUpdate:modelValue":n[1]||(n[1]=e=>t.value.nama=e),disable:"",filled:""},null,8,["hint","modelValue"])]),_:1})]),_:1}))}};export{U as _};
