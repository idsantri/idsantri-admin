import{Q as p}from"./QItemLabel-BCrbjFPh.js";import{Q as I,a as Q}from"./QItemSection-CDMonx4a.js";import{Q as h}from"./QSelect-DyXiAk3o.js";import{v as d,R as y,f as g,o as S,w as n,i as l,Q as V,bF as O,bG as q,j as c,t as u,a4 as x,q as P}from"./index-1h6WQa8x.js";import{a as j}from"./api-get-BY6mtHh6.js";const N={__name:"InputSelectSantriId",props:{activeOnly:{type:Boolean},data:{type:Object}},emits:["emitInput"],setup(v,{emit:f}){const s=v,_=f,a=d({}),m=d(!1),o=d([]);function b(){a.value.nama=o.value.find(t=>t.id==a.value?.santri_id)?.nama,a.value.data_akhir=o.value.find(t=>t.id==a.value?.santri_id)?.data_akhir,_("emitInput",a.value)}y(async()=>{const t={santri_id:s.data?.santri_id,nama:s.data?.nama,data_akhir:s.data?.data_akhir};Object.assign(a.value,t)});async function k(t,i){if(!t){i(()=>{o.value=[]});return}const e=await j({endPoint:"santri/ids",loading:m,params:{active_only:!!s.activeOnly,q:t}});i(()=>o.value=e.lists,r=>{t!==""&&r.options.length&&(r.setOptionIndex(-1),r.moveOptionSelection(1,!0))})}return(t,i)=>(S(),g(P,{class:"",flat:"",bordered:""},{default:n(()=>[l(V,{class:"q-pa-sm"},{default:n(()=>[l(h,{class:"",dense:"",hint:t.$props.activeOnly?"Hanya menampilkan santri aktif":"Ketikkan ID Santri",outlined:"",label:"ID Santri*",modelValue:a.value.santri_id,"onUpdate:modelValue":[i[0]||(i[0]=e=>a.value.santri_id=e),b],options:o.value,"emit-value":"","map-options":"","option-value":"id","option-label":"id","error-color":"negative",loading:m.value,"use-input":"",clearable:"",onFilter:k,disable:!!a.value.santri_id,behavior:"menu"},{option:n(e=>[l(I,O(q(e.itemProps)),{default:n(()=>[l(Q,null,{default:n(()=>[l(p,null,{default:n(()=>[c(u(e.opt.id)+" â€” "+u(e.opt.nama),1)]),_:2},1024),l(p,{caption:""},{default:n(()=>[c(u(e.opt.data_akhir),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["hint","modelValue","options","loading","disable"]),l(x,{hint:a.value.data_akhir,class:"q-mt-sm",dense:"",outlined:"",label:"Nama",modelValue:a.value.nama,"onUpdate:modelValue":i[1]||(i[1]=e=>a.value.nama=e),disable:"",filled:""},null,8,["hint","modelValue"])]),_:1})]),_:1}))}};export{N as _};
