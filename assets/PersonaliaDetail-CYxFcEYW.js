import{a7 as M,a6 as ua,v as i,b as ra,R as D,r as _,o as d,i as e,w as l,Q,j as b,p as y,k as c,F as S,s as O,t as f,q as P,B as T,z as da,x as H,f as U,a8 as K,y as L,a3 as $,C as W,l as G,af as ia}from"./index-BOc7y3E3.js";import{Q as ma}from"./QPage-BVhxSLxX.js";import{_ as pa}from"./CardHeader-B086-4Fs.js";import{Q as F}from"./QToolbarTitle-DS7gKC4A.js";import{Q as N}from"./QToolbar-DD9_B9vM.js";import{Q as J}from"./QSpinnerCube-clsjI4Wm.js";import{Q as ca}from"./QImg-Bs0fh872.js";import{a as I}from"./api-get-DUTCLQ7F.js";import{f as va}from"./format-date-DlwYCgkJ.js";import{_ as fa}from"./ImageUploader-DU5TThtT.js";import{_ as _a}from"./PersonaliaForm-C4HityQS.js";import{Q as R}from"./QTab-DWxugRQi.js";import{Q as ga}from"./QTabs-55yMxhUl.js";import{Q as ba,a as z}from"./QTabPanels-BaVF_E4N.js";import{Q as X}from"./QSkeleton-1RxAa_nV.js";import{Q as j}from"./QItemLabel-CrvmL7Ku.js";import{Q as Y,a as B}from"./QItemSection-U4VUPMG0.js";import{Q as Z}from"./QList-DGdmu--E.js";import{g as aa}from"./array-object-BytDdNh7.js";import{Q as ea}from"./QForm-CxO-I-hC.js";import{l as A}from"./lists-store-BaLrngMx.js";import{a as ta}from"./api-delete-DLV1eJE-.js";import{a as la}from"./api-post-CPwNAYjq.js";import{a as sa}from"./api-update-DaN0juSD.js";import{_ as na}from"./FormHeader-pf3CU3SV.js";import{_ as ha}from"./InputSelectTingkatPendidikan-CWRxZwSP.js";import{_ as C}from"./InputSelectArray-GW0fQ7ez.js";import{Q as ka}from"./QSelect-Br9kkI5Z.js";import"./QSpace-CoisEuyS.js";import"./index-CHOBZr16.js";import"./index-CdkvXyXH.js";import"./api-error-CtGrtfSx.js";import"./id-BuNGTsqN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CarouselAlamat-C2qV7QGi.js";import"./use-panel-CBHOJepn.js";import"./touch-BjYP5sR0.js";import"./selection-CUoFkLvB.js";import"./use-fullscreen-DZQzNGwS.js";import"./QBtnGroup-CNPGzkQV.js";import"./alamat-store-CEPg1MMV.js";import"./Alamat-SjWGUTQw.js";import"./ApiCrud-CwhLF6YL.js";import"./QBtnDropdown-BmLRcAl8.js";import"./QMenu-iXJrGXAP.js";import"./ClosePopup-CcGROVC7.js";import"./hijri-BBdEhqDI.js";import"./format-number-B34ySHL_.js";import"./InputSelectKotaLahir-AQpqyF7G.js";import"./FormActions-C-qne6mX.js";import"./QResizeObserver-VQR5g9Vo.js";import"./rtl-DFPa-2ov.js";import"./lists-data-L-iOlbK0.js";import"./QChip-DferuxmN.js";import"./api-get-lists-CRvCG-zL.js";import"./DropDownAfter-DERgTKys.js";import"./format-CJebrXOQ.js";const Va={key:0},qa={key:1,class:"row"},xa={class:"col-4 q-pr-sm"},ya={class:"col"},$a={class:"text-caption text-italic"},wa={class:"q-mb-sm"},ja={__name:"CardIdentitas",emits:["on-load"],setup(x,{emit:m}){const p=M(),o=ua(),a=i({}),u=i(!1),h=i(!1),g=m;async function q(k){k.id==p.params.id?(a.value=k,g("on-load",a.value)):o.push(`/personalia/${k.id}`)}async function v(){const k=await I({endPoint:`aparatur/${p.params.id}`,loading:u});k&&(a.value=k.aparatur,await n(),g("on-load",a.value))}async function n(){const k=await I({endPoint:`images/aparatur/${a.value.id}`});k&&(a.value.image=k.image_url)}const s=ra(()=>({Nama:`${a.value.nama?.toUpperCase()} (${a.value.sex?.toUpperCase()})`,Alamat:`${a.value.jl||" "} RT ${String(a.value.rt||0).padStart(3,0)} RW ${String(a.value.rw||0).padStart(3,"0")} ${a.value.desa||" "} ${a.value.kecamatan||" "} ${a.value.kabupaten||" "} ${a.value.provinsi||" "} ${a.value.kode_pos||" "}`.replace(/\s\s+/g," "),Kelahiran:`${a.value.tmp_lahir||"-"}, ${va(a.value.tgl_lahir)}`,Telepon:a.value.telepon||"-",Email:a.value.email||"-"}));D(async()=>{p.params.id&&await v()});const t=i(!1),r=k=>t.value=k;async function oa(){t.value=!1,await n()}return(k,V)=>(d(),_(S,null,[e(P,{flat:"",bordered:"",class:""},{default:l(()=>[e(Q,{class:"bg-green-7 no-padding"},{default:l(()=>[e(N,{class:"no-padding no-margin"},{default:l(()=>[e(F,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:l(()=>[...V[4]||(V[4]=[b(" Identitas ",-1)])]),_:1}),e(y,{dense:"",flat:"",class:"q-px-md q-mr-sm","no-caps":"",icon:"sync",color:"green-2",onClick:v}),e(y,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:V[0]||(V[0]=w=>h.value=!0)})]),_:1})]),_:1}),e(Q,{class:"q-pa-sm"},{default:l(()=>[u.value?(d(),_("div",Va,[e(J,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):(d(),_("div",qa,[c("div",xa,[e(ca,{src:a.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),e(y,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:V[1]||(V[1]=w=>t.value=!0)})]),c("div",ya,[(d(!0),_(S,null,O(s.value,(w,E)=>(d(),_("div",{key:E},[c("div",$a,f(E),1),c("div",wa,f(w),1)]))),128))])]))]),_:1})]),_:1}),e(T,{persistent:"",modelValue:h.value,"onUpdate:modelValue":V[3]||(V[3]=w=>h.value=w)},{default:l(()=>[e(_a,{data:a.value,onSuccessSubmit:q,onSuccessDelete:V[2]||(V[2]=w=>k.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"]),e(fa,{"show-uploader":t.value,url:`/images/aparatur/${da(p).params.id}`,"img-format":"webp",onUpdateUploader:r,onSuccessUpload:oa},null,8,["show-uploader","url"])],64))}},Qa={key:0},Sa={__name:"PersonaliaMadrasahForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(x,{emit:m}){const p=x,o=m,a=i({}),u=i(!1),h=i([]),g=i([]);D(async()=>{Object.assign(a.value,p.data),g.value=A().getByStateName("tahun-ajaran"),h.value=A().getByStateName("tingkat-pendidikan")});const q=async()=>{const n={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,tingkat_id:a.value.tingkat_id,kelas:a.value.kelas,ruang:a.value.ruang,keterangan:a.value.keterangan};let s=null;const t=!a.value.id;t?s=await la({endPoint:"aparatur-madrasah",data:n,loading:u}):s=await sa({endPoint:`aparatur-madrasah/${a.value.id}`,data:n,confirm:!0,loading:u}),s&&(document.getElementById("btn-close-form").click(),o("successSubmit",s?.aparatur_madrasah),o(t?"successCreate":"successUpdate",s?.aparatur_madrasah))},v=async()=>{const n=a.value.id;await ta({endPoint:`aparatur-madrasah/${n}`,loading:u})&&(document.getElementById("btn-close-form").click(),o("successDelete",n))};return(n,s)=>{const t=H("FormActions");return d(),U(P,{class:"full-width",style:{"max-width":"425px"}},{default:l(()=>[e(ea,{onSubmit:K(q,["prevent"])},{default:l(()=>[e(na,{title:"Input Jabatan Madrasiyah","is-new":!a.value.id},null,8,["is-new"]),e(Q,null,{default:l(()=>[u.value?(d(),_("div",Qa,[e(T,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=r=>u.value=r),persistent:""},{default:l(()=>[e(J,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})]),_:1},8,["modelValue"])])):L("",!0),e($,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:""},null,8,["model-value"]),e(C,{modelValue:a.value.jabatan,"onUpdate:modelValue":s[1]||(s[1]=r=>a.value.jabatan=r),url:"jabatan-madrasiyah",label:"Jabatan",class:"q-mt-sm",rules:[r=>!!r||"Harus diisi!"]},null,8,["modelValue","rules"]),e(C,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":s[2]||(s[2]=r=>a.value.th_ajaran_h=r),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-mt-sm",rules:[r=>!!r||"Harus diisi!"],selected:a.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),e(ha,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":s[3]||(s[3]=r=>a.value.tingkat_id=r),class:"q-mt-sm",rules:[r=>!!r||"Harus diisi!"],selected:a.value.tingkat_id},null,8,["modelValue","rules","selected"]),e(C,{modelValue:a.value.kelas,"onUpdate:modelValue":s[4]||(s[4]=r=>a.value.kelas=r),url:"kelas",label:"Kelas",class:"q-mt-sm"},null,8,["modelValue"]),e($,{dense:"",class:"q-mt-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":s[5]||(s[5]=r=>a.value.ruang=r)},null,8,["modelValue"]),e($,{dense:"",class:"q-mt-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":s[6]||(s[6]=r=>a.value.keterangan=r),autogrow:""},null,8,["modelValue"])]),_:1}),e(t,{"btn-delete":!!a.value.id,onOnDelete:v},null,8,["btn-delete"])]),_:1})]),_:1})}}},Ua={class:"q-card--bordered"},Ca={class:"q-px-md"},Da={key:0},Pa={key:1},Ta={class:"text-bold"},Ia={__name:"CardJabatanMadrasah",setup(x){const m=M(),p=i(!1),o=i([]),a=i(!1),u=i({}),h=W("aparatur");async function g(){if(m.params.id){const n=await I({endPoint:"aparatur-madrasah",params:{aparatur_id:m.params.id},loading:p});n&&(o.value=n.aparatur_madrasah)}}D(async()=>await g());const q=()=>{u.value={aparatur_id:h.value.id,nama:h.value.nama},a.value=!0},v=n=>{u.value=aa(o.value,n),a.value=!0};return(n,s)=>(d(),_(S,null,[c("div",Ua,[c("div",Ca,[e(N,{class:"no-padding no-margin"},{default:l(()=>[e(F,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:l(()=>[...s[1]||(s[1]=[b(" Jabatan Madrasah ",-1)])]),_:1}),e(y,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(G,{class:""}),e(Z,{separator:"",class:""},{default:l(()=>[p.value?(d(),_("div",Da,[e(X,{height:"80px"})])):o.value?.length?(d(!0),_(S,{key:2},O(o.value,t=>(d(),U(Y,{key:t.id,class:""},{default:l(()=>[e(B,null,{default:l(()=>[e(j,{overline:""},{default:l(()=>[b(f(t.th_ajaran_h)+" | "+f(t.th_ajaran_m),1)]),_:2},1024),e(j,{lines:"1"},{default:l(()=>[c("span",Ta,f(t.jabatan),1),b("; "+f(t.tingkat)+f(t.kelas?"; "+t.kelas:"")+" "+f(t.ruang?"("+t.ruang+")":""),1)]),_:2},1024),e(j,{caption:"",class:"text-italic"},{default:l(()=>[b(f(t.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:l(()=>[e(y,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:r=>v(t.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),_("div",Pa,[...s[2]||(s[2]=[c("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[b(" Tidak data data untuk ditampilkan."),c("br"),b("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(T,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t)},{default:l(()=>[e(Sa,{data:u.value,onSuccessSubmit:g,onSuccessDelete:g},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Ba={key:0},Fa={__name:"PersonaliaQuranForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(x,{emit:m}){const p=x,o=m,a=i({jabatan:"Muallim"}),u=i(!1),h=i([]);D(async()=>{Object.assign(a.value,p.data),h.value=A().getByStateName("tahun-ajaran")});const g=async()=>{const v={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,marhalah:a.value.marhalah,faslah:a.value.faslah,ruang:a.value.ruang,keterangan:a.value.keterangan};let n=null;const s=!a.value.id;s?n=await la({endPoint:"aparatur-quran",data:v,loading:u}):n=await sa({endPoint:`aparatur-quran/${a.value.id}`,data:v,confirm:!0,loading:u}),n&&(document.getElementById("btn-close-form").click(),o("successSubmit",n?.aparatur_quran),o(s?"successCreate":"successUpdate",n?.aparatur_quran))},q=async()=>{const v=a.value.id;await ta({endPoint:`aparatur-quran/${v}`,loading:u})&&(document.getElementById("btn-close-form").click(),o("successDelete",v))};return(v,n)=>{const s=H("FormActions");return d(),U(P,{class:"full-width",style:{"max-width":"425px"}},{default:l(()=>[e(ea,{onSubmit:K(g,["prevent"])},{default:l(()=>[e(na,{title:"Input Jabatan Madrasiyah","is-new":!a.value.id},null,8,["is-new"]),e(Q,null,{default:l(()=>[u.value?(d(),_("div",Ba,[e(T,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=t=>u.value=t),persistent:""},{default:l(()=>[e(J,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})]),_:1},8,["modelValue"])])):L("",!0),e($,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:""},null,8,["model-value"]),e($,{dense:"",class:"q-mt-sm",outlined:"",filled:"",label:"Jabatan",modelValue:a.value.jabatan,"onUpdate:modelValue":n[1]||(n[1]=t=>a.value.jabatan=t),disable:""},null,8,["modelValue"]),e(C,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[2]||(n[2]=t=>a.value.th_ajaran_h=t),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-mt-sm",rules:[t=>!!t||"Harus diisi!"],selected:a.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),e(ka,{dense:"",outlined:"",modelValue:a.value.marhalah,"onUpdate:modelValue":n[3]||(n[3]=t=>a.value.marhalah=t),label:"Marhalah *",class:"q-mt-sm",rules:[t=>!!t||"Harus diisi!"],options:["Ula","Wustho","Ulya"]},null,8,["modelValue","rules"]),e(C,{modelValue:a.value.faslah,"onUpdate:modelValue":n[4]||(n[4]=t=>a.value.faslah=t),url:"faslah-quran",label:"Faslah/Kelas",class:"q-mt-sm"},null,8,["modelValue"]),e($,{dense:"",class:"q-mt-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[5]||(n[5]=t=>a.value.ruang=t)},null,8,["modelValue"]),e($,{dense:"",class:"q-mt-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[6]||(n[6]=t=>a.value.keterangan=t),autogrow:""},null,8,["modelValue"])]),_:1}),e(s,{"btn-delete":!!a.value.id,onOnDelete:q},null,8,["btn-delete"])]),_:1})]),_:1})}}},Na={class:"q-card--bordered"},Aa={class:"q-px-md"},Ma={key:0},Oa={key:1},Ja={__name:"CardJabatanQuran",setup(x){const m=M(),p=i(!1),o=i([]),a=i(!1),u=i({}),h=W("aparatur");async function g(){if(m.params.id){const n=await I({endPoint:"aparatur-quran",params:{aparatur_id:m.params.id},loading:p});n&&(o.value=n.aparatur_quran)}}D(async()=>await g());const q=()=>{u.value={aparatur_id:h.value.id,nama:h.value.nama},a.value=!0},v=n=>{u.value=aa(o.value,n),a.value=!0};return(n,s)=>(d(),_(S,null,[c("div",Na,[c("div",Aa,[e(N,{class:"no-padding no-margin"},{default:l(()=>[e(F,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:l(()=>[...s[1]||(s[1]=[b(" Jabatan Quran ",-1)])]),_:1}),e(y,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(G,{class:""}),e(Z,{separator:"",class:""},{default:l(()=>[p.value?(d(),_("div",Ma,[e(X,{height:"80px"})])):o.value?.length?(d(!0),_(S,{key:2},O(o.value,t=>(d(),U(Y,{key:t.id,class:""},{default:l(()=>[e(B,null,{default:l(()=>[e(j,{overline:""},{default:l(()=>[b(f(t.th_ajaran_h)+" | "+f(t.th_ajaran_m),1)]),_:2},1024),e(j,{lines:"1"},{default:l(()=>[s[3]||(s[3]=c("span",{class:"text-bold"},"Muallim",-1)),b("; "+f(t.marhalah)+f(t.faslah?"; "+t.faslah:"")+" "+f(t.ruang?"("+t.ruang+")":""),1)]),_:2},1024),e(j,{caption:"",class:"text-italic"},{default:l(()=>[b(f(t.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(B,{side:""},{default:l(()=>[e(y,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:r=>v(t.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),_("div",Oa,[...s[2]||(s[2]=[c("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[b(" Tidak data data untuk ditampilkan."),c("br"),b("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(T,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t)},{default:l(()=>[e(Fa,{data:u.value,onSuccessSubmit:g,onSuccessDelete:g},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Ea={__name:"CardJabatan",setup(x){const m=i("madrasah");return(p,o)=>(d(),U(P,{flat:"",bordered:"",class:""},{default:l(()=>[e(Q,{class:"bg-green-7 no-padding"},{default:l(()=>[e(N,{class:"no-padding no-margin"},{default:l(()=>[e(F,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:l(()=>[...o[2]||(o[2]=[b(" Jabatan ",-1)])]),_:1}),e(ga,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a),"narrow-indicator":"",class:"text-green-11","no-caps":"",dense:""},{default:l(()=>[e(R,{name:"madrasah",label:"Madrasah"}),e(R,{name:"quran",label:"Quran"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(ba,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=a=>m.value=a),animated:"",class:"q-pa-sm"},{default:l(()=>[e(z,{name:"madrasah",class:"no-padding"},{default:l(()=>[e(Ia)]),_:1}),e(z,{name:"quran",class:"no-padding"},{default:l(()=>[e(Ja)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Ra={class:"col-12 col-md-6 q-pa-sm"},za={class:"col-12 col-md-6 q-pa-sm"},We={__name:"PersonaliaDetail",setup(x){const m=i({});return ia("aparatur",m),(p,o)=>(d(),U(ma,{class:"q-pa-sm"},{default:l(()=>[e(P,null,{default:l(()=>[e(pa,{title:"Detail Personalia",showReload:!1},{left:l(()=>[e(y,{"no-caps":"",label:"Personalia",icon:"badge",dense:"",color:"green-13",class:"q-px-md q-mr-sm text-green-10",to:"/personalia"})]),_:1}),e(Q,{class:"row no-padding",style:{"max-width":"1200px"}},{default:l(()=>[c("div",Ra,[e(ja,{onOnLoad:o[0]||(o[0]=a=>m.value=a)})]),c("div",za,[e(Ea)])]),_:1})]),_:1})]),_:1}))}};export{We as default};
