import{q as c,ah as h,c as u,o as r,w as t,g as a,Q as C,v as S,e as b,bO as A,b as x,t as n,G as j,a as o,C as K,l as N,ad as z,s as P,E as q,aq as U,J as W}from"./index-DEh4UAKk.js";import{Q as L,a as O}from"./QToolbar-Dl5hvhW3.js";import{Q as H}from"./QMarkupTable-Cqq_cQ7g.js";import{Q as I}from"./QRouteTab-Bc4C5Rji.js";import{Q as G}from"./QTabs-3V0fuQcL.js";import{Q as v}from"./QSkeleton-ZGeKECkT.js";import{Q as J}from"./QImg-DaB-_1ak.js";import{Q as V,a as p}from"./QItem-BTdNNvAd.js";import{Q as g}from"./QItemLabel-CulQpTC_.js";import{Q as Y}from"./QList-DhKPmN5Y.js";import{s as w}from"./santri-store-BHWObQ8Z.js";import{S as F}from"./Santri-oUb4jor2.js";import{d as X}from"./format-date-DBaFa2rd.js";import{_ as Z}from"./KelasForm-DgxAMAav.js";import{K as E}from"./Kelas-BJKsUCP6.js";import"./QResizeObserver-Bvr7DYNR.js";import"./rtl-DFPa-2ov.js";import"./ApiCrud-DGpYTBeQ.js";import"./Api-Cf9F4lBj.js";import"./index-C8LJz6c6.js";import"./index-Cm_fkxN3.js";import"./apiPost-PqFHjFje.js";import"./id-BuNGTsqN.js";import"./QForm-BUEZNW1c.js";import"./InputSelectArray-DJMMXyVK.js";import"./QSelect-DNJsugZb.js";import"./QField-69w4fhxK.js";import"./QChip-lnLCnRVJ.js";import"./QMenu-CObjFV0N.js";import"./selection-KIVhQnt8.js";import"./format-CJebrXOQ.js";import"./lists-store-11MsQNSk.js";import"./ArrayCrud-CByp4EUn.js";import"./DropDownAfter-RHUW-wI2.js";import"./QBtnDropdown-BRJ1Ephg.js";import"./QBtnGroup-BPjWXio5.js";import"./ClosePopup-BXwyq4AY.js";import"./Lists-C2wzKE7K.js";import"./InputSelectTingkatPendidikan-DZmGGBMo.js";import"./useCrudForm-vQEJO8b7.js";import"./InputSelectTahunAjaran-DZlgjWeL.js";const aa={key:1},ta={key:1},ea={key:1},la={key:1},oa={key:1},ra={__name:"CardSantri",props:{id:{type:[Number,String],validator(d){if(typeof d=="number")return!isNaN(d);if(typeof d=="string"){const _=Number(d);return!isNaN(_)}return!1}}},emits:["loaded"],setup(d,{emit:_}){const D=_,k=d,l=c(!1),i=c({}),y=c({}),Q=c({}),$=async()=>{try{l.value=!0;const m=await F.getById({id:k.id});i.value=m.santri,Q.value=m.wali,y.value=m.ortu,w().setSantri(m.santri),w().setOrtu(m.ortu),w().setWali(m.wali)}catch(m){console.error("Error loading santri data:",m)}finally{l.value=!1}};return h(async()=>{if(k.id){const m=w().getSantri,s=w().getWali,e=w().getOrtu;m.id==k.id?(i.value=m,y.value=e,Q.value=s):await $(),D("loaded",i.value)}}),(m,s)=>(r(),u(N,{flat:"",bordered:""},{default:t(()=>[a(C,{class:"no-padding"},{default:t(()=>[a(L,{class:"bg-green-1"},{default:t(()=>[a(O,{class:"text-subtitle1"},{default:t(()=>[...s[0]||(s[0]=[S(" Identitas Santri ",-1)])]),_:1}),a(b,{icon:"sync",outline:"",onClick:$})]),_:1})]),_:1}),a(C,{class:"q-py-sm q-px-none"},{default:t(()=>[a(Y,{dense:""},{default:t(()=>[a(V,null,{default:t(()=>[a(p,{avatar:""},{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"QAvatar"})):(r(),u(A,{key:1,class:"d-flex"},{default:t(()=>[a(J,{src:i.value?.image_url||"/user-default.png",ratio:1,cover:""},null,8,["src"])]),_:1}))]),_:1}),a(p,null,{default:t(()=>[a(g,{overline:""},{default:t(()=>[...s[1]||(s[1]=[S(" Santri ",-1)])]),_:1}),a(g,null,{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"text"})):(r(),x("div",aa,n(i.value.nama)+" ("+n(i.value.sex)+"; "+n(i.value.tgl_lahir?j(X)(i.value.tgl_lahir):"?")+" tahun) ",1))]),_:1}),a(g,{caption:"",lines:"1"},{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"text"})):(r(),x("div",ta,n(i.value?.alamat_pendek||"-"),1))]),_:1}),a(g,{caption:"",lines:"1",class:"text-italic"},{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"text"})):(r(),x("div",ea,n(i.value?.data_akhir||"-"),1))]),_:1})]),_:1}),a(p,{avatar:""},{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"QBtn",class:"full-width"})):(r(),u(b,{key:1,outline:"",color:"green",to:`/santri/${i.value?.id}`},{default:t(()=>[o("small",null,n(i.value?.id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),a(K,{inset:"item"}),a(V,null,{default:t(()=>[a(p,{top:"",avatar:""},{default:t(()=>[a(A)]),_:1}),a(p,null,{default:t(()=>[a(g,{overline:""},{default:t(()=>[...s[2]||(s[2]=[S(" Wali ",-1)])]),_:1}),a(g,null,{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"text"})):(r(),x("div",la,n(Q.value?.nama)+" ("+n(Q.value?.sex)+"; "+n(i.value?.wali_status)+")",1))]),_:1})]),_:1}),a(p,{avatar:""},{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"QBtn",class:"full-width"})):(r(),u(b,{key:1,outline:"",color:"green",to:`/wali/${i.value?.wali_id}`},{default:t(()=>[o("small",null,n(i.value?.wali_id),1)]),_:1},8,["to"]))]),_:1})]),_:1}),a(K,{inset:"item"}),a(V,null,{default:t(()=>[a(p,{top:"",avatar:""},{default:t(()=>[a(A)]),_:1}),a(p,null,{default:t(()=>[a(g,{overline:""},{default:t(()=>[...s[3]||(s[3]=[S(" Orang Tua ",-1)])]),_:1}),a(g,null,{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"text"})):(r(),x("div",oa,n(y.value?.ayah)+" | "+n(y.value?.ibu),1))]),_:1})]),_:1}),a(p,{avatar:""},{default:t(()=>[l.value||!d.id?(r(),u(v,{key:0,type:"QBtn",class:"full-width"})):(r(),u(b,{key:1,outline:"",color:"green",to:`/ortu/${i.value?.ortu_id}`},{default:t(()=>[o("small",null,n(i.value?.ortu_id),1)]),_:1},8,["to"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ia={class:"row",style:{"max-width":"1400px"}},sa={class:"col-12 col-md-6 q-pa-sm"},na={class:"col-12 col-md-6 q-pa-sm"},Ya={__name:"KelasIndex",setup(d){const _=c(0),k=z().params.id,l=c({}),i=c(!1),y=c(!1),Q=c({});async function $(s){const e=s==1,T=s==1?0:1;try{await E.updateAktif(k,e)}catch(B){l.value.aktif=T,console.error("ðŸš€ ~ updateAktif ~ error:",B)}}async function m(){try{i.value=!0;const s=await E.getById({id:k});l.value=s.kelas}catch(s){console.error("ðŸš€ ~ loadData ~ error:",s)}finally{i.value=!1}}return P(async()=>{await m()}),(s,e)=>{const T=q("CardHeader"),B=q("CardLoading"),R=q("router-view"),M=q("CardPage");return r(),u(M,null,{default:t(()=>[a(T,{title:"Data Murid",onOnReload:m}),a(C,{class:"no-padding"},{default:t(()=>[o("div",ia,[o("div",sa,[a(N,{bordered:"",flat:""},{default:t(()=>[a(ra,{id:l.value.santri_id,onLoaded:e[0]||(e[0]=f=>Q.value=f)},null,8,["id"])]),_:1}),a(N,{class:"q-mt-sm",bordered:"",flat:""},{default:t(()=>[a(C,{class:"q-pa-sm"},{default:t(()=>[a(L,{class:"bg-green-1"},{default:t(()=>[a(O,{class:"text-subtitle1"},{default:t(()=>[...e[6]||(e[6]=[S(" Data Kelas ",-1)])]),_:1}),a(b,{class:"q-px-sm q-mr-sm",outline:"",dense:"",onClick:m,icon:"sync","no-caps":""}),a(b,{class:"q-px-md",outline:"",dense:"","icon-right":"edit",onClick:e[1]||(e[1]=f=>y.value=!0),label:"Edit","no-caps":""})]),_:1}),a(H,{flat:""},{default:t(()=>[o("tbody",null,[o("tr",null,[e[7]||(e[7]=o("td",{class:"text-italic"},"Tahun Ajaran",-1)),o("td",null,n(l.value.th_ajaran_h+" | "+l.value.th_ajaran_m),1)]),o("tr",null,[e[8]||(e[8]=o("td",{class:"text-italic"},"Tingkat",-1)),o("td",null,n(l.value.tingkat),1)]),o("tr",null,[e[9]||(e[9]=o("td",{class:"text-italic"},"Kelas",-1)),o("td",null,n(l.value.kelas),1)]),o("tr",null,[e[10]||(e[10]=o("td",{class:"text-italic"},"Nomor Absen",-1)),o("td",null,n(l.value.no_absen),1)]),o("tr",null,[e[11]||(e[11]=o("td",{class:"text-italic"},"Aktif",-1)),o("td",null,[a(U,{modelValue:l.value.aktif,"onUpdate:modelValue":[e[2]||(e[2]=f=>l.value.aktif=f),$],color:"green","true-value":1,"false-value":0},null,8,["modelValue"])])]),o("tr",null,[e[12]||(e[12]=o("td",{class:"text-italic"},"Keterangan",-1)),o("td",null,n(l.value.keterangan),1)])])]),_:1}),a(B,{showing:i.value},null,8,["showing"])]),_:1})]),_:1})]),o("div",na,[a(N,{bordered:"",flat:""},{default:t(()=>[a(G,{"no-caps":"","outside-arrows":"","mobile-arrows":"",class:"bg-green-7 text-green-3","indicator-color":"green-11","active-color":"green-11"},{default:t(()=>[a(I,{name:"riwayat",label:"Riwayat",to:`/madrasah/kelas/${l.value.id}/riwayat`,replace:""},null,8,["to"]),a(I,{name:"izin",label:"Izin",to:`/madrasah/kelas/${l.value.id}/izin`,replace:""},null,8,["to"]),a(I,{name:"nilai",label:"Nilai Mapel",to:`/madrasah/kelas/${l.value.id}/nilai-mapel`,replace:""},null,8,["to"])]),_:1}),(r(),u(C,{class:"q-pa-sm",key:_.value},{default:t(()=>[(r(),u(R,{key:s.$route.fullPath,santri_id:l.value.santri_id},null,8,["santri_id"]))]),_:1}))]),_:1})])])]),_:1}),a(W,{modelValue:y.value,"onUpdate:modelValue":e[5]||(e[5]=f=>y.value=f)},{default:t(()=>[a(Z,{data:l.value,onSuccessUpdate:e[3]||(e[3]=f=>{l.value=f,_.value++}),onSuccessDelete:e[4]||(e[4]=f=>s.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"])]),_:1})}}};export{Ya as default};
