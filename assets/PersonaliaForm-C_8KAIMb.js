import{Q as S,a as f,_ as $,b as B}from"./CarouselAlamat-nsQS5m7F.js";import{a4 as _,f as w,o as V,a as c,b as t,a5 as r,C as m,F as h,A as y,B as g,c as b,w as s,ab as H,e as I,Q as k,x as O}from"./index-DwrbA0R8.js";import{Q as j}from"./QForm-DCEv1Ikv.js";import{Q as K}from"./QSelect-CrgZ1FsI.js";import{b as M,m as E}from"./hijri-BBdEhqDI.js";import{i as J,f as T}from"./format-date-DlwYCgkJ.js";import{_ as z}from"./InputSelectKotaLahir-B1KC2Xf4.js";import{_ as x}from"./InputSelectArray-DFe88pva.js";import{A as R}from"./ApiCrud-KwrbSuI8.js";import{u as G}from"./useCrudForm-DF0rM6hG.js";const W={__name:"PersonaliaIdentity",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i){const l=_(i,"modelValue");return(u,a)=>(V(),w(h,null,[a[6]||(a[6]=c("div",{class:"text-subtitle2"},"Identitas Diri",-1)),t(r,{dense:"",hint:u.isNew?"Kosongkan jika ingin diisi otomatis!":"",class:"q-my-sm",outlined:"",label:"ID",modelValue:l.value.id,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.id=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["hint","modelValue","rules"]),t(r,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Nama*",modelValue:l.value.nama,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.nama=e),rules:[e=>!!e||"Harus diisi!",e=>e?.length>=3||"Setidaknya 3 huruf!"],"error-color":"negative",autocapitalize:"words"},null,8,["modelValue","rules"]),t(r,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Nomor Induk Kependudukan",modelValue:l.value.nik,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.nik=e),rules:[e=>!e||e?.length==16&&!isNaN(e)||"16 digit angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(z,{modelValue:l.value.tmp_lahir,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.tmp_lahir=e),class:"q-my-sm"},null,8,["modelValue"]),t(r,{dense:"",hint:m(J)(l.value.tgl_lahir)?m(T)(l.value.tgl_lahir)+" | "+m(M)(m(E)(l.value.tgl_lahir)):"",class:"q-my-sm",outlined:"",label:"Tanggal Lahir",modelValue:l.value.tgl_lahir,"onUpdate:modelValue":a[4]||(a[4]=e=>l.value.tgl_lahir=e),type:"date"},null,8,["hint","modelValue"]),t(K,{dense:"",hint:l.value.sex=="L"?"Laki-Laki":l.value.sex=="P"?"Perempuan":"",class:"q-my-sm",outlined:"",label:"Jenis Kelamin",modelValue:l.value.sex,"onUpdate:modelValue":a[5]||(a[5]=e=>l.value.sex=e),options:["L","P"],"emit-value":"","map-options":"","error-color":"negative",behavior:"menu"},null,8,["hint","modelValue"])],64))}},X={__name:"PersonaliaOthers",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i){const l=_(i,"modelValue");return(u,a)=>(V(),w(h,null,[a[4]||(a[4]=c("div",{class:"text-subtitle2"},"Lain-Lain",-1)),t(x,{modelValue:l.value.pa_formal,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.pa_formal=e),url:"pendidikan-akhir-formal",label:"Pendidikan Akhir Formal",class:"q-my-sm",hint:""},null,8,["modelValue"]),t(x,{modelValue:l.value.pa_diniyah,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.pa_diniyah=e),url:"pendidikan-akhir-diniyah",label:"Pendidikan Akhir Diniyah",class:"q-my-sm",hint:""},null,8,["modelValue"]),t(r,{dense:"",hint:"08123456789",class:"q-my-sm",outlined:"",label:"Telepon",modelValue:l.value.telepon,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.telepon=e),rules:[e=>!e||!isNaN(e)||"Hanya angka!"],"error-color":"negative"},null,8,["modelValue","rules"]),t(r,{dense:"",hint:"",class:"q-my-sm",outlined:"",label:"Email",modelValue:l.value.email,"onUpdate:modelValue":a[3]||(a[3]=e=>l.value.email=e)},null,8,["modelValue"])],64))}};class Y extends R{constructor(){super("aparatur")}}const Z=new Y,ee={class:"row justify-center"},me={__name:"PersonaliaForm",props:{data:Object},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(i,{emit:l}){const u=i,a=l,e=y({...u.data}),v=!u.data?.id,{handleDelete:U,handleCreate:N,handleUpdate:F,loading:C}=G(Z,{emit:a,responseKey:"aparatur"}),Q=async()=>{const d=JSON.parse(JSON.stringify(e.value));return delete d.image,delete d.aktif,v?await N(d,!0):await F(u.data.id,d,!0)},q=async()=>await U(u.data.id),p=y("identity"),D=[{label:1,value:"identity"},{label:2,value:"alamat"},{label:3,value:"others"}];return(d,o)=>{const A=g("FormHeader"),L=g("FormLoading"),P=g("FormActions");return V(),b(O,{class:"full-width",style:{"max-width":"425px"}},{default:s(()=>[t(j,{onSubmit:H(Q,["prevent"])},{default:s(()=>[t(A,{title:"Input Data Personalia","is-new":v}),m(C)?(V(),b(L,{key:0})):I("",!0),t(k,{class:"no-padding"},{default:s(()=>[t(S,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=n=>p.value=n),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"full-width",style:{height:"70vh"},swipeable:"",infinite:""},{default:s(()=>[t(f,{name:"identity",class:"no-wrap flex-center"},{default:s(()=>[t(W,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=n=>e.value=n)},null,8,["modelValue"])]),_:1}),t(f,{name:"alamat",class:"no-wrap flex-center"},{default:s(()=>[t($,{modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=n=>e.value=n),onEmitRoute:n=>null},null,8,["modelValue"])]),_:1}),t(f,{name:"others",class:"no-wrap flex-center"},{default:s(()=>[t(X,{modelValue:e.value,"onUpdate:modelValue":o[2]||(o[2]=n=>e.value=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(k,{class:"q-pa-sm"},{default:s(()=>[c("div",ee,[t(B,{"toggle-color":"green-10","text-color":"text-green-11","no-caps":"",glossy:"",modelValue:p.value,"onUpdate:modelValue":o[4]||(o[4]=n=>p.value=n),options:D},null,8,["modelValue"])])]),_:1}),t(P,{"btn-delete":!v,onOnDelete:q},null,8,["btn-delete"])]),_:1})]),_:1})}}};export{me as _};
