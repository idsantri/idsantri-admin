import{ac as I,ab as sa,B as v,v as na,X as J,b as y,o as d,g as e,w as t,Q as U,y as k,e as w,a as _,F as S,A as L,t as g,l as M,H as N,D as O,C as Q,c as $,ae as R,f as z,a8 as j,I as G,z as W,ak as oa}from"./index-BSwPLBvN.js";import{Q as P,a as H}from"./QToolbar-qqbqC3d5.js";import{Q as ra}from"./QSpinnerCube-BbwPmbY4.js";import{Q as ua}from"./QImg-hhTG6btB.js";import{a as D}from"./api-get-DLoYpnPD.js";import{f as da}from"./format-date-DlwYCgkJ.js";import{_ as ia}from"./ImageUploader-D-SuURtf.js";import{_ as ma}from"./PersonaliaForm-XzI16u72.js";import{f as pa}from"./format-text-DnCGEu2I.js";import{Q as K}from"./QTab-_ZWulhie.js";import{Q as ca}from"./QTabs-B9KhPlay.js";import{Q as _a,a as E}from"./QTabPanels-CmhoMVtJ.js";import{Q as X}from"./QSkeleton-9AFyI2YJ.js";import{Q as C}from"./QItemLabel-CIOWhTht.js";import{Q as Y,a as A}from"./QItemSection-WqxvrlOw.js";import{Q as Z}from"./QList-Dn-IYx8z.js";import{g as aa}from"./array-object-BytDdNh7.js";import{Q as ea}from"./QForm-pLnIPDm5.js";import{_ as va}from"./InputSelectTingkatPendidikan-CQMIiWoT.js";import{_ as T}from"./InputSelectArray-CW313qGw.js";import{u as ta}from"./useCrudForm-Di2BQFx5.js";import{A as la}from"./ApiCrud-CsgpJEPb.js";import{_ as fa}from"./InputSelectTahunAjaran-DMwx7EBO.js";import{Q as ga}from"./QSelect-BjGQaI4Q.js";import"./index-BaAeepf0.js";import"./index-DWKPJyX7.js";import"./api-error-CD6hOSn6.js";import"./id-BuNGTsqN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./CarouselAlamat-DIJB_Q0Q.js";import"./use-panel-CIifyYyS.js";import"./touch-BjYP5sR0.js";import"./selection-CiLPAPFJ.js";import"./use-fullscreen-Ct_nQl4F.js";import"./QBtnGroup-CFUVAF62.js";import"./alamat-store-8ELeIMHr.js";import"./Alamat-y0_w8bgR.js";import"./Api-gH9zfM44.js";import"./QBtnDropdown-C4ZtMkBn.js";import"./QMenu-BnIg5_Ug.js";import"./ClosePopup-9H5qeAFV.js";import"./hijri--5qD4USW.js";import"./format-number-B34ySHL_.js";import"./InputSelectKotaLahir-CKxqOt31.js";import"./QResizeObserver-C5MeMRA2.js";import"./rtl-DFPa-2ov.js";import"./lists-store-BQBJ2JOd.js";import"./DropDownAfter-B_WHSSYE.js";import"./Lists-kDpWTKyN.js";import"./QChip-Br_mmnnr.js";import"./format-CJebrXOQ.js";const ba={key:0},ha={key:1,class:"row"},ka={class:"col-4 q-pr-sm"},ya={class:"col"},Va={class:"text-caption text-italic"},xa={class:"q-mb-sm"},qa={__name:"CardIdentitas",emits:["on-load"],setup(V,{emit:m}){const r=I(),o=sa(),a=v({}),i=v(!1),f=v(!1),b=m;async function q(c){c.id==r.params.id?(a.value=c,b("on-load",a.value)):o.push(`/personalia/${c.id}`)}async function x(){const c=await D({endPoint:`aparatur/${r.params.id}`,loading:i});c&&(a.value=c.aparatur,await p(),b("on-load",a.value))}async function p(){const c=await D({endPoint:`images/aparatur/${a.value.id}`});c&&(a.value.image=c.image_url)}const u=na(()=>({Nama:`${a.value.nama?.toUpperCase()} (${a.value.sex?.toUpperCase()})`,Alamat:pa(a.value.jl,a.value.rt,a.value.rw,a.value.desa,a.value.kecamatan,a.value.kabupaten,a.value.provinsi,a.value.kode_pos),Kelahiran:`${a.value.tmp_lahir||"-"}, ${da(a.value.tgl_lahir)}`,Telepon:a.value.telepon||"-",Email:a.value.email||"-"}));J(async()=>{r.params.id&&await x()});const s=v(!1),n=c=>s.value=c;async function F(){s.value=!1,await p()}return(c,h)=>(d(),y(S,null,[e(M,{flat:"",bordered:"",class:""},{default:t(()=>[e(U,{class:"bg-green-7 no-padding"},{default:t(()=>[e(P,{class:"no-padding no-margin"},{default:t(()=>[e(H,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...h[4]||(h[4]=[k(" Identitas ",-1)])]),_:1}),e(w,{dense:"",flat:"",class:"q-px-md q-mr-sm","no-caps":"",icon:"sync",color:"green-2",onClick:x}),e(w,{dense:"",class:"q-px-md q-mr-sm text-green-10",label:"Edit","no-caps":"",icon:"edit",color:"green-2",onClick:h[0]||(h[0]=l=>f.value=!0)})]),_:1})]),_:1}),e(U,{class:"q-pa-sm"},{default:t(()=>[i.value?(d(),y("div",ba,[e(ra,{color:"green-12",size:"8em",class:"flex q-ma-lg q-mx-auto"})])):(d(),y("div",ha,[_("div",ka,[e(ua,{src:a.value?.image||"/user-default.png",ratio:3/4,alt:"aparatur"},null,8,["src"]),e(w,{class:"q-mt-sm full-width",icon:"upload","no-caps":"",label:"Foto",dense:"",size:"sm",outline:"",color:"green-10",onClick:h[1]||(h[1]=l=>s.value=!0)})]),_("div",ya,[(d(!0),y(S,null,L(u.value,(l,B)=>(d(),y("div",{key:B},[_("div",Va,g(B),1),_("div",xa,g(l),1)]))),128))])]))]),_:1})]),_:1}),e(N,{persistent:"",modelValue:f.value,"onUpdate:modelValue":h[3]||(h[3]=l=>f.value=l)},{default:t(()=>[e(ma,{data:a.value,onSuccessSubmit:q,onSuccessDelete:h[2]||(h[2]=l=>c.$router.go(-1))},null,8,["data"])]),_:1},8,["modelValue"]),e(ia,{"show-uploader":s.value,url:`/images/aparatur/${O(r).params.id}`,"img-format":"webp",onUpdateUploader:n,onSuccessUpload:F},null,8,["show-uploader","url"])],64))}};class wa extends la{constructor(){super("aparatur-madrasah")}}const Qa=new wa,$a={__name:"PersonaliaMadrasahForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(V,{emit:m}){const r=V,o=m,a=v({...r.data}),i=!r.data.id,{handleDelete:f,handleCreate:b,handleUpdate:q,loading:x}=ta(Qa,{emit:o,responseKey:"aparatur_madrasah"}),p=async()=>{const s={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,tingkat_id:a.value.tingkat_id,kelas:a.value.kelas,ruang:a.value.ruang,keterangan:a.value.keterangan};return i?await b(s,!0):await q(r.data.id,s,!0)},u=async()=>await f(r.data.id);return(s,n)=>{const F=Q("FormHeader"),c=Q("FormLoading"),h=Q("FormActions");return d(),$(M,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ea,{onSubmit:R(p,["prevent"])},{default:t(()=>[e(F,{title:"Input Jabatan Madrasiyah","is-new":i}),O(x)?(d(),$(c,{key:0})):z("",!0),e(U,null,{default:t(()=>[e(j,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(T,{modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.jabatan=l),url:"jabatan-madrasiyah",label:"Jabatan",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"]},null,8,["modelValue","rules"]),e(fa,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.th_ajaran_h=l),rules:[l=>!!l||"Harus diisi!"],class:"q-my-sm"},null,8,["modelValue","rules"]),e(va,{modelValue:a.value.tingkat_id,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.tingkat_id=l),class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"]},null,8,["modelValue","rules"]),e(T,{modelValue:a.value.kelas,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.kelas=l),url:"kelas",label:"Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.ruang=l)},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=l=>a.value.keterangan=l),autogrow:""},null,8,["modelValue"])]),_:1}),e(h,{"btn-delete":!i,onOnDelete:u},null,8,["btn-delete"])]),_:1})]),_:1})}}},ja={class:"q-card--bordered"},Ca={class:"q-px-md"},Ua={key:0},Sa={key:1},Fa={class:"text-bold"},Da={__name:"CardJabatanMadrasah",setup(V){const m=I(),r=v(!1),o=v([]),a=v(!1),i=v({}),f=G("aparatur");async function b(){if(m.params.id){const p=await D({endPoint:"aparatur-madrasah",params:{aparatur_id:m.params.id},loading:r});p&&(o.value=p.aparatur_madrasah)}}J(async()=>await b());const q=()=>{i.value={aparatur_id:f.value.id,nama:f.value.nama},a.value=!0},x=p=>{i.value=aa(o.value,p),a.value=!0};return(p,u)=>(d(),y(S,null,[_("div",ja,[_("div",Ca,[e(P,{class:"no-padding no-margin"},{default:t(()=>[e(H,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...u[1]||(u[1]=[k(" Jabatan Madrasah ",-1)])]),_:1}),e(w,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(W,{class:""}),e(Z,{separator:"",class:""},{default:t(()=>[r.value?(d(),y("div",Ua,[e(X,{height:"80px"})])):o.value?.length?(d(!0),y(S,{key:2},L(o.value,s=>(d(),$(Y,{key:s.id,class:""},{default:t(()=>[e(A,null,{default:t(()=>[e(C,{overline:""},{default:t(()=>[k(g(s.th_ajaran_h)+" | "+g(s.th_ajaran_m),1)]),_:2},1024),e(C,{lines:"1"},{default:t(()=>[_("span",Fa,g(s.jabatan),1),k("; "+g(s.tingkat)+g(s.kelas?"; "+s.kelas:"")+" "+g(s.ruang?"("+s.ruang+")":""),1)]),_:2},1024),e(C,{caption:"",class:"text-italic"},{default:t(()=>[k(g(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(A,{side:""},{default:t(()=>[e(w,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:n=>x(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),y("div",Sa,[...u[2]||(u[2]=[_("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[k(" Tidak data data untuk ditampilkan."),_("br"),k("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(N,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=s=>a.value=s)},{default:t(()=>[e($a,{data:i.value,onSuccessSubmit:b,onSuccessDelete:b},null,8,["data"])]),_:1},8,["modelValue"])],64))}};class Aa extends la{constructor(){super("aparatur-quran")}}const Ta=new Aa,Ma={__name:"PersonaliaQuranForm",props:{data:{type:Object,required:!0,default:()=>{}}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(V,{emit:m}){const r=V,o=m,a=v({jabatan:"Muallim",...r.data}),i=!r.data?.id,{handleDelete:f,handleCreate:b,handleUpdate:q,loading:x}=ta(Ta,{emit:o,responseKey:"aparatur_quran"}),p=async()=>{const s={aparatur_id:a.value.aparatur_id,jabatan:a.value.jabatan,th_ajaran_h:a.value.th_ajaran_h,marhalah:a.value.marhalah,faslah:a.value.faslah,ruang:a.value.ruang,keterangan:a.value.keterangan};return i?await b(s,!0):await q(r.data.id,s,!0)},u=async()=>await f(r.data.id);return(s,n)=>{const F=Q("FormHeader"),c=Q("FormLoading"),h=Q("FormActions");return d(),$(M,{class:"full-width",style:{"max-width":"425px"}},{default:t(()=>[e(ea,{onSubmit:R(p,["prevent"])},{default:t(()=>[e(F,{title:"Input Jabatan Madrasiyah","is-new":i}),O(x)?(d(),$(c,{key:0})):z("",!0),e(U,null,{default:t(()=>[e(j,{dense:"",outlined:"",label:"Nama","model-value":a.value?.nama+" ("+a.value?.aparatur_id+")",disable:"",filled:"",class:"q-my-sm"},null,8,["model-value"]),e(j,{dense:"",class:"q-my-sm",outlined:"",filled:"",label:"Jabatan",modelValue:a.value.jabatan,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value.jabatan=l),disable:""},null,8,["modelValue"]),e(T,{modelValue:a.value.th_ajaran_h,"onUpdate:modelValue":n[1]||(n[1]=l=>a.value.th_ajaran_h=l),url:"tahun-ajaran",label:"Tahun Ajaran *",sort:"desc",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],selected:a.value.th_ajaran_h},null,8,["modelValue","rules","selected"]),e(ga,{dense:"",outlined:"",modelValue:a.value.marhalah,"onUpdate:modelValue":n[2]||(n[2]=l=>a.value.marhalah=l),label:"Marhalah *",class:"q-my-sm",rules:[l=>!!l||"Harus diisi!"],options:["Ula","Wustho","Ulya"]},null,8,["modelValue","rules"]),e(T,{modelValue:a.value.faslah,"onUpdate:modelValue":n[3]||(n[3]=l=>a.value.faslah=l),url:"faslah-quran",label:"Faslah/Kelas",class:"q-my-sm"},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Ruang",modelValue:a.value.ruang,"onUpdate:modelValue":n[4]||(n[4]=l=>a.value.ruang=l)},null,8,["modelValue"]),e(j,{dense:"",class:"q-my-sm",outlined:"",label:"Keterangan",modelValue:a.value.keterangan,"onUpdate:modelValue":n[5]||(n[5]=l=>a.value.keterangan=l),autogrow:""},null,8,["modelValue"])]),_:1}),e(h,{"btn-delete":!i,onOnDelete:u},null,8,["btn-delete"])]),_:1})]),_:1})}}},Pa={class:"q-card--bordered"},Ha={class:"q-px-md"},Ia={key:0},Ja={key:1},La={__name:"CardJabatanQuran",setup(V){const m=I(),r=v(!1),o=v([]),a=v(!1),i=v({}),f=G("aparatur");async function b(){if(m.params.id){const p=await D({endPoint:"aparatur-quran",params:{aparatur_id:m.params.id},loading:r});p&&(o.value=p.aparatur_quran)}}J(async()=>await b());const q=()=>{i.value={aparatur_id:f.value.id,nama:f.value.nama},a.value=!0},x=p=>{i.value=aa(o.value,p),a.value=!0};return(p,u)=>(d(),y(S,null,[_("div",Pa,[_("div",Ha,[e(P,{class:"no-padding no-margin"},{default:t(()=>[e(H,{class:"text-subtitle1 text-green-10 text-weight-bold"},{default:t(()=>[...u[1]||(u[1]=[k(" Jabatan Quran ",-1)])]),_:1}),e(w,{class:"q-px-md text-green-10",label:"Tambah","no-caps":"",icon:"add",outline:"",glossy:"",onClick:q})]),_:1})]),e(W,{class:""}),e(Z,{separator:"",class:""},{default:t(()=>[r.value?(d(),y("div",Ia,[e(X,{height:"80px"})])):o.value?.length?(d(!0),y(S,{key:2},L(o.value,s=>(d(),$(Y,{key:s.id,class:""},{default:t(()=>[e(A,null,{default:t(()=>[e(C,{overline:""},{default:t(()=>[k(g(s.th_ajaran_h)+" | "+g(s.th_ajaran_m),1)]),_:2},1024),e(C,{lines:"1"},{default:t(()=>[u[3]||(u[3]=_("span",{class:"text-bold"},"Muallim",-1)),k("; "+g(s.marhalah)+g(s.faslah?"; "+s.faslah:"")+" "+g(s.ruang?"("+s.ruang+")":""),1)]),_:2},1024),e(C,{caption:"",class:"text-italic"},{default:t(()=>[k(g(s.keterangan||"-"),1)]),_:2},1024)]),_:2},1024),e(A,{side:""},{default:t(()=>[e(w,{outline:"",glossy:"",icon:"edit",round:"",dense:"",color:"green",onClick:n=>x(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),y("div",Ja,[...u[2]||(u[2]=[_("div",{class:"bg-red-1 text-negative text-center q-pa-md"},[k(" Tidak data data untuk ditampilkan."),_("br"),k("Silakan tambahkah data! ")],-1)])]))]),_:1})]),e(N,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=s=>a.value=s)},{default:t(()=>[e(Ma,{data:i.value,onSuccessSubmit:b,onSuccessDelete:b},null,8,["data"])]),_:1},8,["modelValue"])],64))}},Na={__name:"CardJabatan",setup(V){const m=v("madrasah");return(r,o)=>(d(),$(M,{flat:"",bordered:"",class:""},{default:t(()=>[e(U,{class:"bg-green-7 no-padding"},{default:t(()=>[e(P,{class:"no-padding no-margin"},{default:t(()=>[e(H,{class:"text-subtitle1 q-ml-sm text-green-11"},{default:t(()=>[...o[2]||(o[2]=[k(" Jabatan ",-1)])]),_:1}),e(ca,{modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a),"narrow-indicator":"",class:"text-green-11","no-caps":"",dense:""},{default:t(()=>[e(K,{name:"madrasah",label:"Madrasah"}),e(K,{name:"quran",label:"Quran"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(_a,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=a=>m.value=a),animated:"",class:"q-pa-sm"},{default:t(()=>[e(E,{name:"madrasah",class:"no-padding"},{default:t(()=>[e(Da)]),_:1}),e(E,{name:"quran",class:"no-padding"},{default:t(()=>[e(La)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Oa={class:"col-12 col-md-6 q-pa-sm"},Ba={class:"col-12 col-md-6 q-pa-sm"},Ne={__name:"PersonaliaDetail",setup(V){const m=v({});return oa("aparatur",m),(r,o)=>{const a=Q("CardHeader"),i=Q("CardPage");return d(),$(i,null,{default:t(()=>[e(a,{title:"Detail Personalia",showReload:!1},{buttons:t(()=>[e(w,{"no-caps":"",label:"Personalia",icon:"badge",dense:"",color:"green-13",class:"q-px-md text-green-10",to:"/personalia"})]),_:1}),e(U,{class:"row no-padding",style:{"max-width":"1200px"}},{default:t(()=>[_("div",Oa,[e(qa,{onOnLoad:o[0]||(o[0]=f=>m.value=f)})]),_("div",Ba,[e(Na)])]),_:1})]),_:1})}}};export{Ne as default};
