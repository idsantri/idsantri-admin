import{Q as A}from"./QSpace-DOX5ArmE.js";import{q as k,ap as O,s as F,Y as J,E as V,c as m,o as c,w as l,g as t,af as K,f as _,G as f,Q as E,a9 as D,l as H,v as w,t as b,e as C,ad as j,b as B,J as G}from"./index-BTpW0qoK.js";import{Q as M}from"./QForm--SmQKvmu.js";import{k as R}from"./format-text-DnCGEu2I.js";import{L as U}from"./Lists-Sl_AHsvU.js";import{u as Y}from"./useCrudForm-M6ngSSEa.js";import{Q as v}from"./QTd-BNvjinor.js";import{Q as I}from"./QTr-Ct21QohG.js";import{Q as q}from"./QTable-DWWHyrC1.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{l as z}from"./lists-store-CFSAcaS7.js";import"./ApiCrud-D-UyIn70.js";import"./Api-DQxWaKXW.js";import"./index-pGTdy6rp.js";import"./index-DSqU_ONB.js";import"./apiPost-CWVr4VWP.js";import"./QList-BRj71z_v.js";import"./QMarkupTable-BbDaTCxX.js";import"./QSelect-DLG5Hk7y.js";import"./QField-Diu7Bopo.js";import"./QChip-PJDdAFrm.js";import"./QItem-DMT1Zy__.js";import"./QItemLabel-BqAZy4kr.js";import"./QMenu-DhhOsA7X.js";import"./selection-Wm1ZT_By.js";import"./rtl-DFPa-2ov.js";import"./format-CJebrXOQ.js";import"./use-fullscreen-pjn2VgBI.js";import"./ArrayCrud-DeaxgM1Q.js";const P={__name:"ListsForm",props:{data:{type:Object,required:!0},showInput:{type:Object,required:!0}},emits:["successDelete","successSubmit","successUpdate","successCreate"],setup(d,{emit:u}){const r=d,s=u,o=k({...r.data}),a=!r.data?.id,p=O("firstInput");F(async()=>{await J(),p.value&&p.value.focus()});const{handleDelete:e,handleCreate:Q,handleUpdate:i,loading:y}=Y(U,{emit:s,responseKey:"list"});async function S(){const g=JSON.parse(JSON.stringify(o.value));return delete g.id,a?await Q(g,!0):await i(r.data.id,g,!0)}async function L(){return await e(r.data.id)}return(g,n)=>{const h=V("FormHeader"),T=V("FormLoading"),N=V("FormActions");return c(),m(H,{class:"full-width",style:{"max-width":"425px"}},{default:l(()=>[t(M,{onSubmit:K(S,["prevent"])},{default:l(()=>[t(h,{title:"Input List "+f(R)(d.data?.key||""),"is-new":a},null,8,["title"]),f(y)?(c(),m(T,{key:0})):_("",!0),t(E,null,{default:l(()=>[d.showInput.val0?(c(),m(D,{key:0,label:"text1",dense:"",class:"q-my-sm",outlined:"",modelValue:o.value.val0,"onUpdate:modelValue":n[0]||(n[0]=x=>o.value.val0=x),autogrow:"",loading:f(y),ref_key:"firstInput",ref:p},null,8,["modelValue","loading"])):_("",!0),d.showInput.val1?(c(),m(D,{key:1,label:"text2",dense:"",class:"q-my-sm",outlined:"",modelValue:o.value.val1,"onUpdate:modelValue":n[1]||(n[1]=x=>o.value.val1=x),autogrow:"",loading:f(y)},null,8,["modelValue","loading"])):_("",!0),d.showInput.val2?(c(),m(D,{key:2,label:"text3",dense:"",class:"q-my-sm",outlined:"",modelValue:o.value.val2,"onUpdate:modelValue":n[2]||(n[2]=x=>o.value.val2=x),autogrow:"",loading:f(y)},null,8,["modelValue","loading"])):_("",!0)]),_:1}),t(N,{"btn-delete":!a,onOnDelete:L},null,8,["btn-delete"])]),_:1})]),_:1})}}},W={__name:"ListsStyleSingle",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(d,{emit:u}){const r=u,s=d,o=[{name:"val0",label:"Lists",align:"left",field:a=>`${a.val0}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(a,p)=>(c(),m(q,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(e=>[t(I,{props:e},{default:l(()=>[t(v,{props:e,key:"val0"},{default:l(()=>[w(b(e.row.val0),1)]),_:2},1032,["props"]),t(v,{props:e,key:"id"},{default:l(()=>[t(C,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>r("handleEdit",e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},X=$(W,[["__scopeId","data-v-439992d8"]]),Z={__name:"ListsStyleDouble",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(d,{emit:u}){const r=u,s=d,o=[{name:"val0",label:"Text 1",align:"left",field:a=>`${a.val0}`,sortable:!0},{name:"val1",label:"Text 2",align:"left",field:a=>`${a.val1}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(a,p)=>(c(),m(q,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(e=>[t(I,{props:e},{default:l(()=>[t(v,{props:e,key:"val0"},{default:l(()=>[w(b(e.row.val0),1)]),_:2},1032,["props"]),t(v,{props:e,key:"val1"},{default:l(()=>[w(b(e.row.val1),1)]),_:2},1032,["props"]),t(v,{props:e,key:"id"},{default:l(()=>[t(C,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>r("handleEdit",e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},ee=$(Z,[["__scopeId","data-v-0913ab4d"]]),te={__name:"ListsStyleTriple",props:{data:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["handleEdit"],setup(d,{emit:u}){const r=u,s=d,o=[{name:"val0",label:"Text 1",align:"left",field:a=>`${a.val0}`,sortable:!0},{name:"val1",label:"Text 2",align:"left",field:a=>`${a.val1}`,sortable:!0},{name:"val2",label:"Text 3",align:"left",field:a=>`${a.val2}`,sortable:!0},{name:"id",label:"Edit",align:"center",field:"id",style:"width: 90px"}];return(a,p)=>(c(),m(q,{rows:s.data,columns:o,"rows-per-page-options":[10,25,50,100,0],flat:"",loading:s.loading},{body:l(e=>[t(I,{props:e},{default:l(()=>[t(v,{props:e,key:"val0"},{default:l(()=>[w(b(e.row.val0),1)]),_:2},1032,["props"]),t(v,{props:e,key:"val1"},{default:l(()=>[w(b(e.row.val1),1)]),_:2},1032,["props"]),t(v,{props:e,key:"val2"},{default:l(()=>[w(b(e.row.val2),1)]),_:2},1032,["props"]),t(v,{props:e,key:"id"},{default:l(()=>[t(C,{icon:"edit",outline:"",round:"",dense:"",glossy:"",color:"green-10",onClick:()=>r("handleEdit",e.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]))}},ae=$(te,[["__scopeId","data-v-1e70939d"]]),le={key:2},qe={__name:"ListsByKey",setup(d){const u=k(!1),{params:r}=j(),s=k(!1),o=k([]),a=k({}),p=k({}),e=z(),{listData:Q}=e;F(async()=>{await y()});const i=Q.find(({url:n})=>n==r.listKey);async function y(){try{s.value=!0;const n=await U.getByKey(i.url);o.value=n[i.key],e.checkState(i.key)&&e.$patch({[i.key]:n[i.key]})}catch(n){console.log("error get list ",n)}finally{s.value=!1}}function S(){if(i.column==1)return{val0:!0,val1:!1,val2:!1};if(i.column==2)return{val0:!0,val1:!0,val2:!1};if(i.column==3)return{val0:!0,val1:!0,val2:!0}}function L(){p.value=S(),a.value={},a.value.key=r.listKey,u.value=!0}function g(n){p.value=S(),a.value=JSON.parse(JSON.stringify(n)),u.value=!0}return(n,h)=>(c(),B("div",null,[t(E,{class:"bg-green-7 text-green-11 text-subtitle1 q-pa-sm flex flex-center"},{default:l(()=>[w(b(f(i)?.label||"List")+" ",1),t(A),t(C,{icon:"add",label:"Baru","no-caps":"",dense:"",class:"q-px-md",outline:"",onClick:L})]),_:1}),t(E,{class:"q-pa-sm"},{default:l(()=>[f(i).style=="single"?(c(),m(X,{key:0,data:o.value,loading:s.value,onHandleEdit:g},null,8,["data","loading"])):_("",!0),f(i).style=="double"?(c(),m(ee,{key:1,data:o.value,loading:s.value,onHandleEdit:g},null,8,["data","loading"])):_("",!0),f(i).style=="triple"?(c(),B("div",le,[t(ae,{data:o.value,onUpdateList:n.handleUpdate,onDeleteList:n.handleDelete,onAddList:L},null,8,["data","onUpdateList","onDeleteList"])])):_("",!0)]),_:1}),t(G,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=T=>u.value=T)},{default:l(()=>[t(P,{data:a.value,"show-input":p.value,onSuccessDelete:y,onSuccessSubmit:y},null,8,["data","show-input"])]),_:1},8,["modelValue"])]))}};export{qe as default};
